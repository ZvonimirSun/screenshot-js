{"version":3,"file":"screenshot.umd.js","mappings":"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","sources":["webpack://Screenshot/webpack/universalModuleDefinition","webpack://Screenshot/./node_modules/@babel/runtime/regenerator/index.js","webpack://Screenshot/./node_modules/core-js/internals/a-callable.js","webpack://Screenshot/./node_modules/core-js/internals/a-constructor.js","webpack://Screenshot/./node_modules/core-js/internals/a-possible-prototype.js","webpack://Screenshot/./node_modules/core-js/internals/add-to-unscopables.js","webpack://Screenshot/./node_modules/core-js/internals/advance-string-index.js","webpack://Screenshot/./node_modules/core-js/internals/an-instance.js","webpack://Screenshot/./node_modules/core-js/internals/an-object.js","webpack://Screenshot/./node_modules/core-js/internals/array-buffer-non-extensible.js","webpack://Screenshot/./node_modules/core-js/internals/array-for-each.js","webpack://Screenshot/./node_modules/core-js/internals/array-from.js","webpack://Screenshot/./node_modules/core-js/internals/array-includes.js","webpack://Screenshot/./node_modules/core-js/internals/array-iteration.js","webpack://Screenshot/./node_modules/core-js/internals/array-method-has-species-support.js","webpack://Screenshot/./node_modules/core-js/internals/array-method-is-strict.js","webpack://Screenshot/./node_modules/core-js/internals/array-slice-simple.js","webpack://Screenshot/./node_modules/core-js/internals/array-slice.js","webpack://Screenshot/./node_modules/core-js/internals/array-sort.js","webpack://Screenshot/./node_modules/core-js/internals/array-species-constructor.js","webpack://Screenshot/./node_modules/core-js/internals/array-species-create.js","webpack://Screenshot/./node_modules/core-js/internals/call-with-safe-iteration-closing.js","webpack://Screenshot/./node_modules/core-js/internals/check-correctness-of-iteration.js","webpack://Screenshot/./node_modules/core-js/internals/classof-raw.js","webpack://Screenshot/./node_modules/core-js/internals/classof.js","webpack://Screenshot/./node_modules/core-js/internals/collection-add-all.js","webpack://Screenshot/./node_modules/core-js/internals/collection-delete-all.js","webpack://Screenshot/./node_modules/core-js/internals/collection-weak.js","webpack://Screenshot/./node_modules/core-js/internals/collection.js","webpack://Screenshot/./node_modules/core-js/internals/copy-constructor-properties.js","webpack://Screenshot/./node_modules/core-js/internals/correct-is-regexp-logic.js","webpack://Screenshot/./node_modules/core-js/internals/correct-prototype-getter.js","webpack://Screenshot/./node_modules/core-js/internals/create-iterator-constructor.js","webpack://Screenshot/./node_modules/core-js/internals/create-non-enumerable-property.js","webpack://Screenshot/./node_modules/core-js/internals/create-property-descriptor.js","webpack://Screenshot/./node_modules/core-js/internals/create-property.js","webpack://Screenshot/./node_modules/core-js/internals/define-iterator.js","webpack://Screenshot/./node_modules/core-js/internals/define-well-known-symbol.js","webpack://Screenshot/./node_modules/core-js/internals/descriptors.js","webpack://Screenshot/./node_modules/core-js/internals/document-create-element.js","webpack://Screenshot/./node_modules/core-js/internals/dom-iterables.js","webpack://Screenshot/./node_modules/core-js/internals/dom-token-list-prototype.js","webpack://Screenshot/./node_modules/core-js/internals/engine-is-browser.js","webpack://Screenshot/./node_modules/core-js/internals/engine-is-ios-pebble.js","webpack://Screenshot/./node_modules/core-js/internals/engine-is-ios.js","webpack://Screenshot/./node_modules/core-js/internals/engine-is-node.js","webpack://Screenshot/./node_modules/core-js/internals/engine-is-webos-webkit.js","webpack://Screenshot/./node_modules/core-js/internals/engine-user-agent.js","webpack://Screenshot/./node_modules/core-js/internals/engine-v8-version.js","webpack://Screenshot/./node_modules/core-js/internals/enum-bug-keys.js","webpack://Screenshot/./node_modules/core-js/internals/export.js","webpack://Screenshot/./node_modules/core-js/internals/fails.js","webpack://Screenshot/./node_modules/core-js/internals/fix-regexp-well-known-symbol-logic.js","webpack://Screenshot/./node_modules/core-js/internals/freezing.js","webpack://Screenshot/./node_modules/core-js/internals/function-apply.js","webpack://Screenshot/./node_modules/core-js/internals/function-bind-context.js","webpack://Screenshot/./node_modules/core-js/internals/function-bind-native.js","webpack://Screenshot/./node_modules/core-js/internals/function-bind.js","webpack://Screenshot/./node_modules/core-js/internals/function-call.js","webpack://Screenshot/./node_modules/core-js/internals/function-name.js","webpack://Screenshot/./node_modules/core-js/internals/function-uncurry-this.js","webpack://Screenshot/./node_modules/core-js/internals/get-built-in.js","webpack://Screenshot/./node_modules/core-js/internals/get-iterator-method.js","webpack://Screenshot/./node_modules/core-js/internals/get-iterator.js","webpack://Screenshot/./node_modules/core-js/internals/get-method.js","webpack://Screenshot/./node_modules/core-js/internals/global.js","webpack://Screenshot/./node_modules/core-js/internals/has-own-property.js","webpack://Screenshot/./node_modules/core-js/internals/hidden-keys.js","webpack://Screenshot/./node_modules/core-js/internals/host-report-errors.js","webpack://Screenshot/./node_modules/core-js/internals/html.js","webpack://Screenshot/./node_modules/core-js/internals/ie8-dom-define.js","webpack://Screenshot/./node_modules/core-js/internals/indexed-object.js","webpack://Screenshot/./node_modules/core-js/internals/inherit-if-required.js","webpack://Screenshot/./node_modules/core-js/internals/inspect-source.js","webpack://Screenshot/./node_modules/core-js/internals/internal-metadata.js","webpack://Screenshot/./node_modules/core-js/internals/internal-state.js","webpack://Screenshot/./node_modules/core-js/internals/is-array-iterator-method.js","webpack://Screenshot/./node_modules/core-js/internals/is-array.js","webpack://Screenshot/./node_modules/core-js/internals/is-callable.js","webpack://Screenshot/./node_modules/core-js/internals/is-constructor.js","webpack://Screenshot/./node_modules/core-js/internals/is-forced.js","webpack://Screenshot/./node_modules/core-js/internals/is-object.js","webpack://Screenshot/./node_modules/core-js/internals/is-pure.js","webpack://Screenshot/./node_modules/core-js/internals/is-regexp.js","webpack://Screenshot/./node_modules/core-js/internals/is-symbol.js","webpack://Screenshot/./node_modules/core-js/internals/iterate.js","webpack://Screenshot/./node_modules/core-js/internals/iterator-close.js","webpack://Screenshot/./node_modules/core-js/internals/iterators-core.js","webpack://Screenshot/./node_modules/core-js/internals/iterators.js","webpack://Screenshot/./node_modules/core-js/internals/length-of-array-like.js","webpack://Screenshot/./node_modules/core-js/internals/microtask.js","webpack://Screenshot/./node_modules/core-js/internals/native-promise-constructor.js","webpack://Screenshot/./node_modules/core-js/internals/native-symbol.js","webpack://Screenshot/./node_modules/core-js/internals/native-url.js","webpack://Screenshot/./node_modules/core-js/internals/native-weak-map.js","webpack://Screenshot/./node_modules/core-js/internals/new-promise-capability.js","webpack://Screenshot/./node_modules/core-js/internals/not-a-regexp.js","webpack://Screenshot/./node_modules/core-js/internals/number-parse-float.js","webpack://Screenshot/./node_modules/core-js/internals/object-assign.js","webpack://Screenshot/./node_modules/core-js/internals/object-create.js","webpack://Screenshot/./node_modules/core-js/internals/object-define-properties.js","webpack://Screenshot/./node_modules/core-js/internals/object-define-property.js","webpack://Screenshot/./node_modules/core-js/internals/object-get-own-property-descriptor.js","webpack://Screenshot/./node_modules/core-js/internals/object-get-own-property-names-external.js","webpack://Screenshot/./node_modules/core-js/internals/object-get-own-property-names.js","webpack://Screenshot/./node_modules/core-js/internals/object-get-own-property-symbols.js","webpack://Screenshot/./node_modules/core-js/internals/object-get-prototype-of.js","webpack://Screenshot/./node_modules/core-js/internals/object-is-extensible.js","webpack://Screenshot/./node_modules/core-js/internals/object-is-prototype-of.js","webpack://Screenshot/./node_modules/core-js/internals/object-keys-internal.js","webpack://Screenshot/./node_modules/core-js/internals/object-keys.js","webpack://Screenshot/./node_modules/core-js/internals/object-property-is-enumerable.js","webpack://Screenshot/./node_modules/core-js/internals/object-set-prototype-of.js","webpack://Screenshot/./node_modules/core-js/internals/object-to-string.js","webpack://Screenshot/./node_modules/core-js/internals/ordinary-to-primitive.js","webpack://Screenshot/./node_modules/core-js/internals/own-keys.js","webpack://Screenshot/./node_modules/core-js/internals/path.js","webpack://Screenshot/./node_modules/core-js/internals/perform.js","webpack://Screenshot/./node_modules/core-js/internals/promise-resolve.js","webpack://Screenshot/./node_modules/core-js/internals/queue.js","webpack://Screenshot/./node_modules/core-js/internals/redefine-all.js","webpack://Screenshot/./node_modules/core-js/internals/redefine.js","webpack://Screenshot/./node_modules/core-js/internals/regexp-exec-abstract.js","webpack://Screenshot/./node_modules/core-js/internals/regexp-exec.js","webpack://Screenshot/./node_modules/core-js/internals/regexp-flags.js","webpack://Screenshot/./node_modules/core-js/internals/regexp-sticky-helpers.js","webpack://Screenshot/./node_modules/core-js/internals/regexp-unsupported-dot-all.js","webpack://Screenshot/./node_modules/core-js/internals/regexp-unsupported-ncg.js","webpack://Screenshot/./node_modules/core-js/internals/require-object-coercible.js","webpack://Screenshot/./node_modules/core-js/internals/set-global.js","webpack://Screenshot/./node_modules/core-js/internals/set-species.js","webpack://Screenshot/./node_modules/core-js/internals/set-to-string-tag.js","webpack://Screenshot/./node_modules/core-js/internals/shared-key.js","webpack://Screenshot/./node_modules/core-js/internals/shared-store.js","webpack://Screenshot/./node_modules/core-js/internals/shared.js","webpack://Screenshot/./node_modules/core-js/internals/species-constructor.js","webpack://Screenshot/./node_modules/core-js/internals/string-multibyte.js","webpack://Screenshot/./node_modules/core-js/internals/string-punycode-to-ascii.js","webpack://Screenshot/./node_modules/core-js/internals/string-repeat.js","webpack://Screenshot/./node_modules/core-js/internals/string-trim-forced.js","webpack://Screenshot/./node_modules/core-js/internals/string-trim.js","webpack://Screenshot/./node_modules/core-js/internals/task.js","webpack://Screenshot/./node_modules/core-js/internals/to-absolute-index.js","webpack://Screenshot/./node_modules/core-js/internals/to-indexed-object.js","webpack://Screenshot/./node_modules/core-js/internals/to-integer-or-infinity.js","webpack://Screenshot/./node_modules/core-js/internals/to-length.js","webpack://Screenshot/./node_modules/core-js/internals/to-object.js","webpack://Screenshot/./node_modules/core-js/internals/to-primitive.js","webpack://Screenshot/./node_modules/core-js/internals/to-property-key.js","webpack://Screenshot/./node_modules/core-js/internals/to-string-tag-support.js","webpack://Screenshot/./node_modules/core-js/internals/to-string.js","webpack://Screenshot/./node_modules/core-js/internals/try-to-string.js","webpack://Screenshot/./node_modules/core-js/internals/uid.js","webpack://Screenshot/./node_modules/core-js/internals/use-symbol-as-uid.js","webpack://Screenshot/./node_modules/core-js/internals/v8-prototype-define-bug.js","webpack://Screenshot/./node_modules/core-js/internals/validate-arguments-length.js","webpack://Screenshot/./node_modules/core-js/internals/well-known-symbol-wrapped.js","webpack://Screenshot/./node_modules/core-js/internals/well-known-symbol.js","webpack://Screenshot/./node_modules/core-js/internals/whitespaces.js","webpack://Screenshot/./node_modules/core-js/modules/es.array.concat.js","webpack://Screenshot/./node_modules/core-js/modules/es.array.filter.js","webpack://Screenshot/./node_modules/core-js/modules/es.array.for-each.js","webpack://Screenshot/./node_modules/core-js/modules/es.array.from.js","webpack://Screenshot/./node_modules/core-js/modules/es.array.includes.js","webpack://Screenshot/./node_modules/core-js/modules/es.array.index-of.js","webpack://Screenshot/./node_modules/core-js/modules/es.array.iterator.js","webpack://Screenshot/./node_modules/core-js/modules/es.array.join.js","webpack://Screenshot/./node_modules/core-js/modules/es.array.map.js","webpack://Screenshot/./node_modules/core-js/modules/es.array.slice.js","webpack://Screenshot/./node_modules/core-js/modules/es.array.splice.js","webpack://Screenshot/./node_modules/core-js/modules/es.function.name.js","webpack://Screenshot/./node_modules/core-js/modules/es.object.define-properties.js","webpack://Screenshot/./node_modules/core-js/modules/es.object.define-property.js","webpack://Screenshot/./node_modules/core-js/modules/es.object.get-own-property-descriptor.js","webpack://Screenshot/./node_modules/core-js/modules/es.object.get-own-property-descriptors.js","webpack://Screenshot/./node_modules/core-js/modules/es.object.keys.js","webpack://Screenshot/./node_modules/core-js/modules/es.object.to-string.js","webpack://Screenshot/./node_modules/core-js/modules/es.parse-float.js","webpack://Screenshot/./node_modules/core-js/modules/es.promise.finally.js","webpack://Screenshot/./node_modules/core-js/modules/es.promise.js","webpack://Screenshot/./node_modules/core-js/modules/es.reflect.construct.js","webpack://Screenshot/./node_modules/core-js/modules/es.regexp.exec.js","webpack://Screenshot/./node_modules/core-js/modules/es.string.includes.js","webpack://Screenshot/./node_modules/core-js/modules/es.string.iterator.js","webpack://Screenshot/./node_modules/core-js/modules/es.string.repeat.js","webpack://Screenshot/./node_modules/core-js/modules/es.string.split.js","webpack://Screenshot/./node_modules/core-js/modules/es.string.trim.js","webpack://Screenshot/./node_modules/core-js/modules/es.symbol.description.js","webpack://Screenshot/./node_modules/core-js/modules/es.symbol.iterator.js","webpack://Screenshot/./node_modules/core-js/modules/es.symbol.js","webpack://Screenshot/./node_modules/core-js/modules/es.weak-map.js","webpack://Screenshot/./node_modules/core-js/modules/es.weak-set.js","webpack://Screenshot/./node_modules/core-js/modules/esnext.weak-map.delete-all.js","webpack://Screenshot/./node_modules/core-js/modules/esnext.weak-set.add-all.js","webpack://Screenshot/./node_modules/core-js/modules/esnext.weak-set.delete-all.js","webpack://Screenshot/./node_modules/core-js/modules/web.dom-collections.for-each.js","webpack://Screenshot/./node_modules/core-js/modules/web.dom-collections.iterator.js","webpack://Screenshot/./node_modules/core-js/modules/web.url-search-params.js","webpack://Screenshot/./node_modules/core-js/modules/web.url.js","webpack://Screenshot/./node_modules/css-loader/dist/runtime/api.js","webpack://Screenshot/./node_modules/css-loader/dist/runtime/getUrl.js","webpack://Screenshot/./node_modules/css-loader/dist/runtime/sourceMaps.js","webpack://Screenshot/./node_modules/dom-to-image/src/dom-to-image.js","webpack://Screenshot/./node_modules/fabric/dist/fabric.js","webpack://Screenshot/../src/FileSaver.js","webpack://Screenshot/./node_modules/regenerator-runtime/runtime.js","webpack://Screenshot/./src/MosaicBrush.js","webpack://Screenshot/./src/screenshot-fabric-event.js","webpack://Screenshot/./src/screenshot-tool-event.js","webpack://Screenshot/./src/screenshot-tool.js","webpack://Screenshot/./src/utils.js","webpack://Screenshot/./src/screenshot.scss","webpack://Screenshot/./src/screenshot.scss?217e","webpack://Screenshot/./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack://Screenshot/./node_modules/style-loader/dist/runtime/insertBySelector.js","webpack://Screenshot/./node_modules/style-loader/dist/runtime/insertStyleElement.js","webpack://Screenshot/./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js","webpack://Screenshot/./node_modules/style-loader/dist/runtime/styleDomAPI.js","webpack://Screenshot/./node_modules/style-loader/dist/runtime/styleTagTransform.js","webpack://Screenshot/./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","webpack://Screenshot/./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","webpack://Screenshot/./node_modules/@babel/runtime/helpers/esm/classApplyDescriptorGet.js","webpack://Screenshot/./node_modules/@babel/runtime/helpers/esm/classApplyDescriptorSet.js","webpack://Screenshot/./node_modules/@babel/runtime/helpers/esm/classCallCheck.js","webpack://Screenshot/./node_modules/@babel/runtime/helpers/esm/classExtractFieldDescriptor.js","webpack://Screenshot/./node_modules/@babel/runtime/helpers/esm/classPrivateFieldGet.js","webpack://Screenshot/./node_modules/@babel/runtime/helpers/esm/classPrivateFieldSet.js","webpack://Screenshot/./node_modules/@babel/runtime/helpers/esm/createClass.js","webpack://Screenshot/./node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack://Screenshot/./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","webpack://Screenshot/./node_modules/@babel/runtime/helpers/esm/inherits.js","webpack://Screenshot/./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","webpack://Screenshot/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://Screenshot/./node_modules/@babel/runtime/helpers/esm/typeof.js","webpack://Screenshot/./node_modules/lodash-es/_DataView.js","webpack://Screenshot/./node_modules/lodash-es/_Hash.js","webpack://Screenshot/./node_modules/lodash-es/_ListCache.js","webpack://Screenshot/./node_modules/lodash-es/_Map.js","webpack://Screenshot/./node_modules/lodash-es/_MapCache.js","webpack://Screenshot/./node_modules/lodash-es/_Promise.js","webpack://Screenshot/./node_modules/lodash-es/_Set.js","webpack://Screenshot/./node_modules/lodash-es/_Stack.js","webpack://Screenshot/./node_modules/lodash-es/_Symbol.js","webpack://Screenshot/./node_modules/lodash-es/_Uint8Array.js","webpack://Screenshot/./node_modules/lodash-es/_WeakMap.js","webpack://Screenshot/./node_modules/lodash-es/_apply.js","webpack://Screenshot/./node_modules/lodash-es/_arrayEach.js","webpack://Screenshot/./node_modules/lodash-es/_arrayFilter.js","webpack://Screenshot/./node_modules/lodash-es/_arrayLikeKeys.js","webpack://Screenshot/./node_modules/lodash-es/_arrayPush.js","webpack://Screenshot/./node_modules/lodash-es/_assignMergeValue.js","webpack://Screenshot/./node_modules/lodash-es/_assignValue.js","webpack://Screenshot/./node_modules/lodash-es/_assocIndexOf.js","webpack://Screenshot/./node_modules/lodash-es/_baseAssign.js","webpack://Screenshot/./node_modules/lodash-es/_baseAssignIn.js","webpack://Screenshot/./node_modules/lodash-es/_baseAssignValue.js","webpack://Screenshot/./node_modules/lodash-es/_baseClone.js","webpack://Screenshot/./node_modules/lodash-es/_baseCreate.js","webpack://Screenshot/./node_modules/lodash-es/_baseFor.js","webpack://Screenshot/./node_modules/lodash-es/_baseGetAllKeys.js","webpack://Screenshot/./node_modules/lodash-es/_baseGetTag.js","webpack://Screenshot/./node_modules/lodash-es/_baseIsArguments.js","webpack://Screenshot/./node_modules/lodash-es/_baseIsMap.js","webpack://Screenshot/./node_modules/lodash-es/_baseIsNative.js","webpack://Screenshot/./node_modules/lodash-es/_baseIsSet.js","webpack://Screenshot/./node_modules/lodash-es/_baseIsTypedArray.js","webpack://Screenshot/./node_modules/lodash-es/_baseKeys.js","webpack://Screenshot/./node_modules/lodash-es/_baseKeysIn.js","webpack://Screenshot/./node_modules/lodash-es/_baseMerge.js","webpack://Screenshot/./node_modules/lodash-es/_baseMergeDeep.js","webpack://Screenshot/./node_modules/lodash-es/_baseRest.js","webpack://Screenshot/./node_modules/lodash-es/_baseSetToString.js","webpack://Screenshot/./node_modules/lodash-es/_baseTimes.js","webpack://Screenshot/./node_modules/lodash-es/_baseUnary.js","webpack://Screenshot/./node_modules/lodash-es/_cloneArrayBuffer.js","webpack://Screenshot/./node_modules/lodash-es/_cloneBuffer.js","webpack://Screenshot/./node_modules/lodash-es/_cloneDataView.js","webpack://Screenshot/./node_modules/lodash-es/_cloneRegExp.js","webpack://Screenshot/./node_modules/lodash-es/_cloneSymbol.js","webpack://Screenshot/./node_modules/lodash-es/_cloneTypedArray.js","webpack://Screenshot/./node_modules/lodash-es/_copyArray.js","webpack://Screenshot/./node_modules/lodash-es/_copyObject.js","webpack://Screenshot/./node_modules/lodash-es/_copySymbols.js","webpack://Screenshot/./node_modules/lodash-es/_copySymbolsIn.js","webpack://Screenshot/./node_modules/lodash-es/_coreJsData.js","webpack://Screenshot/./node_modules/lodash-es/_createAssigner.js","webpack://Screenshot/./node_modules/lodash-es/_createBaseFor.js","webpack://Screenshot/./node_modules/lodash-es/_defineProperty.js","webpack://Screenshot/./node_modules/lodash-es/_freeGlobal.js","webpack://Screenshot/./node_modules/lodash-es/_getAllKeys.js","webpack://Screenshot/./node_modules/lodash-es/_getAllKeysIn.js","webpack://Screenshot/./node_modules/lodash-es/_getMapData.js","webpack://Screenshot/./node_modules/lodash-es/_getNative.js","webpack://Screenshot/./node_modules/lodash-es/_getPrototype.js","webpack://Screenshot/./node_modules/lodash-es/_getRawTag.js","webpack://Screenshot/./node_modules/lodash-es/_getSymbols.js","webpack://Screenshot/./node_modules/lodash-es/_getSymbolsIn.js","webpack://Screenshot/./node_modules/lodash-es/_getTag.js","webpack://Screenshot/./node_modules/lodash-es/_getValue.js","webpack://Screenshot/./node_modules/lodash-es/_hashClear.js","webpack://Screenshot/./node_modules/lodash-es/_hashDelete.js","webpack://Screenshot/./node_modules/lodash-es/_hashGet.js","webpack://Screenshot/./node_modules/lodash-es/_hashHas.js","webpack://Screenshot/./node_modules/lodash-es/_hashSet.js","webpack://Screenshot/./node_modules/lodash-es/_initCloneArray.js","webpack://Screenshot/./node_modules/lodash-es/_initCloneByTag.js","webpack://Screenshot/./node_modules/lodash-es/_initCloneObject.js","webpack://Screenshot/./node_modules/lodash-es/_isIndex.js","webpack://Screenshot/./node_modules/lodash-es/_isIterateeCall.js","webpack://Screenshot/./node_modules/lodash-es/_isKeyable.js","webpack://Screenshot/./node_modules/lodash-es/_isMasked.js","webpack://Screenshot/./node_modules/lodash-es/_isPrototype.js","webpack://Screenshot/./node_modules/lodash-es/_listCacheClear.js","webpack://Screenshot/./node_modules/lodash-es/_listCacheDelete.js","webpack://Screenshot/./node_modules/lodash-es/_listCacheGet.js","webpack://Screenshot/./node_modules/lodash-es/_listCacheHas.js","webpack://Screenshot/./node_modules/lodash-es/_listCacheSet.js","webpack://Screenshot/./node_modules/lodash-es/_mapCacheClear.js","webpack://Screenshot/./node_modules/lodash-es/_mapCacheDelete.js","webpack://Screenshot/./node_modules/lodash-es/_mapCacheGet.js","webpack://Screenshot/./node_modules/lodash-es/_mapCacheHas.js","webpack://Screenshot/./node_modules/lodash-es/_mapCacheSet.js","webpack://Screenshot/./node_modules/lodash-es/_nativeCreate.js","webpack://Screenshot/./node_modules/lodash-es/_nativeKeys.js","webpack://Screenshot/./node_modules/lodash-es/_nativeKeysIn.js","webpack://Screenshot/./node_modules/lodash-es/_nodeUtil.js","webpack://Screenshot/./node_modules/lodash-es/_objectToString.js","webpack://Screenshot/./node_modules/lodash-es/_overArg.js","webpack://Screenshot/./node_modules/lodash-es/_overRest.js","webpack://Screenshot/./node_modules/lodash-es/_root.js","webpack://Screenshot/./node_modules/lodash-es/_safeGet.js","webpack://Screenshot/./node_modules/lodash-es/_setToString.js","webpack://Screenshot/./node_modules/lodash-es/_shortOut.js","webpack://Screenshot/./node_modules/lodash-es/_stackClear.js","webpack://Screenshot/./node_modules/lodash-es/_stackDelete.js","webpack://Screenshot/./node_modules/lodash-es/_stackGet.js","webpack://Screenshot/./node_modules/lodash-es/_stackHas.js","webpack://Screenshot/./node_modules/lodash-es/_stackSet.js","webpack://Screenshot/./node_modules/lodash-es/_toSource.js","webpack://Screenshot/./node_modules/lodash-es/clone.js","webpack://Screenshot/./node_modules/lodash-es/constant.js","webpack://Screenshot/./node_modules/lodash-es/eq.js","webpack://Screenshot/./node_modules/lodash-es/identity.js","webpack://Screenshot/./node_modules/lodash-es/isArguments.js","webpack://Screenshot/./node_modules/lodash-es/isArray.js","webpack://Screenshot/./node_modules/lodash-es/isArrayLike.js","webpack://Screenshot/./node_modules/lodash-es/isArrayLikeObject.js","webpack://Screenshot/./node_modules/lodash-es/isBuffer.js","webpack://Screenshot/./node_modules/lodash-es/isFunction.js","webpack://Screenshot/./node_modules/lodash-es/isLength.js","webpack://Screenshot/./node_modules/lodash-es/isMap.js","webpack://Screenshot/./node_modules/lodash-es/isNumber.js","webpack://Screenshot/./node_modules/lodash-es/isObject.js","webpack://Screenshot/./node_modules/lodash-es/isObjectLike.js","webpack://Screenshot/./node_modules/lodash-es/isPlainObject.js","webpack://Screenshot/./node_modules/lodash-es/isSet.js","webpack://Screenshot/./node_modules/lodash-es/isTypedArray.js","webpack://Screenshot/./node_modules/lodash-es/keys.js","webpack://Screenshot/./node_modules/lodash-es/keysIn.js","webpack://Screenshot/./node_modules/lodash-es/merge.js","webpack://Screenshot/./node_modules/lodash-es/stubArray.js","webpack://Screenshot/./node_modules/lodash-es/stubFalse.js","webpack://Screenshot/./node_modules/lodash-es/toPlainObject.js","webpack://Screenshot/webpack/bootstrap","webpack://Screenshot/webpack/runtime/compat get default export","webpack://Screenshot/webpack/runtime/define property getters","webpack://Screenshot/webpack/runtime/global","webpack://Screenshot/webpack/runtime/hasOwnProperty shorthand","webpack://Screenshot/webpack/runtime/make namespace object","webpack://Screenshot/webpack/runtime/jsonp chunk loading","webpack://Screenshot/./src/screenshot.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Screenshot\"] = factory();\n\telse\n\t\troot[\"Screenshot\"] = factory();\n})(self, function() {\nreturn ","module.exports = require(\"regenerator-runtime\");\n","var global = require('../internals/global');\nvar isCallable = require('../internals/is-callable');\nvar tryToString = require('../internals/try-to-string');\n\nvar TypeError = global.TypeError;\n\n// `Assert: IsCallable(argument) is true`\nmodule.exports = function (argument) {\n  if (isCallable(argument)) return argument;\n  throw TypeError(tryToString(argument) + ' is not a function');\n};\n","var global = require('../internals/global');\nvar isConstructor = require('../internals/is-constructor');\nvar tryToString = require('../internals/try-to-string');\n\nvar TypeError = global.TypeError;\n\n// `Assert: IsConstructor(argument) is true`\nmodule.exports = function (argument) {\n  if (isConstructor(argument)) return argument;\n  throw TypeError(tryToString(argument) + ' is not a constructor');\n};\n","var global = require('../internals/global');\nvar isCallable = require('../internals/is-callable');\n\nvar String = global.String;\nvar TypeError = global.TypeError;\n\nmodule.exports = function (argument) {\n  if (typeof argument == 'object' || isCallable(argument)) return argument;\n  throw TypeError(\"Can't set \" + String(argument) + ' as a prototype');\n};\n","var wellKnownSymbol = require('../internals/well-known-symbol');\nvar create = require('../internals/object-create');\nvar definePropertyModule = require('../internals/object-define-property');\n\nvar UNSCOPABLES = wellKnownSymbol('unscopables');\nvar ArrayPrototype = Array.prototype;\n\n// Array.prototype[@@unscopables]\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\nif (ArrayPrototype[UNSCOPABLES] == undefined) {\n  definePropertyModule.f(ArrayPrototype, UNSCOPABLES, {\n    configurable: true,\n    value: create(null)\n  });\n}\n\n// add a key to Array.prototype[@@unscopables]\nmodule.exports = function (key) {\n  ArrayPrototype[UNSCOPABLES][key] = true;\n};\n","'use strict';\nvar charAt = require('../internals/string-multibyte').charAt;\n\n// `AdvanceStringIndex` abstract operation\n// https://tc39.es/ecma262/#sec-advancestringindex\nmodule.exports = function (S, index, unicode) {\n  return index + (unicode ? charAt(S, index).length : 1);\n};\n","var global = require('../internals/global');\nvar isPrototypeOf = require('../internals/object-is-prototype-of');\n\nvar TypeError = global.TypeError;\n\nmodule.exports = function (it, Prototype) {\n  if (isPrototypeOf(Prototype, it)) return it;\n  throw TypeError('Incorrect invocation');\n};\n","var global = require('../internals/global');\nvar isObject = require('../internals/is-object');\n\nvar String = global.String;\nvar TypeError = global.TypeError;\n\n// `Assert: Type(argument) is Object`\nmodule.exports = function (argument) {\n  if (isObject(argument)) return argument;\n  throw TypeError(String(argument) + ' is not an object');\n};\n","// FF26- bug: ArrayBuffers are non-extensible, but Object.isExtensible does not report it\nvar fails = require('../internals/fails');\n\nmodule.exports = fails(function () {\n  if (typeof ArrayBuffer == 'function') {\n    var buffer = new ArrayBuffer(8);\n    // eslint-disable-next-line es/no-object-isextensible, es/no-object-defineproperty -- safe\n    if (Object.isExtensible(buffer)) Object.defineProperty(buffer, 'a', { value: 8 });\n  }\n});\n","'use strict';\nvar $forEach = require('../internals/array-iteration').forEach;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\n\nvar STRICT_METHOD = arrayMethodIsStrict('forEach');\n\n// `Array.prototype.forEach` method implementation\n// https://tc39.es/ecma262/#sec-array.prototype.foreach\nmodule.exports = !STRICT_METHOD ? function forEach(callbackfn /* , thisArg */) {\n  return $forEach(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n// eslint-disable-next-line es/no-array-prototype-foreach -- safe\n} : [].forEach;\n","'use strict';\nvar global = require('../internals/global');\nvar bind = require('../internals/function-bind-context');\nvar call = require('../internals/function-call');\nvar toObject = require('../internals/to-object');\nvar callWithSafeIterationClosing = require('../internals/call-with-safe-iteration-closing');\nvar isArrayIteratorMethod = require('../internals/is-array-iterator-method');\nvar isConstructor = require('../internals/is-constructor');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar createProperty = require('../internals/create-property');\nvar getIterator = require('../internals/get-iterator');\nvar getIteratorMethod = require('../internals/get-iterator-method');\n\nvar Array = global.Array;\n\n// `Array.from` method implementation\n// https://tc39.es/ecma262/#sec-array.from\nmodule.exports = function from(arrayLike /* , mapfn = undefined, thisArg = undefined */) {\n  var O = toObject(arrayLike);\n  var IS_CONSTRUCTOR = isConstructor(this);\n  var argumentsLength = arguments.length;\n  var mapfn = argumentsLength > 1 ? arguments[1] : undefined;\n  var mapping = mapfn !== undefined;\n  if (mapping) mapfn = bind(mapfn, argumentsLength > 2 ? arguments[2] : undefined);\n  var iteratorMethod = getIteratorMethod(O);\n  var index = 0;\n  var length, result, step, iterator, next, value;\n  // if the target is not iterable or it's an array with the default iterator - use a simple case\n  if (iteratorMethod && !(this == Array && isArrayIteratorMethod(iteratorMethod))) {\n    iterator = getIterator(O, iteratorMethod);\n    next = iterator.next;\n    result = IS_CONSTRUCTOR ? new this() : [];\n    for (;!(step = call(next, iterator)).done; index++) {\n      value = mapping ? callWithSafeIterationClosing(iterator, mapfn, [step.value, index], true) : step.value;\n      createProperty(result, index, value);\n    }\n  } else {\n    length = lengthOfArrayLike(O);\n    result = IS_CONSTRUCTOR ? new this(length) : Array(length);\n    for (;length > index; index++) {\n      value = mapping ? mapfn(O[index], index) : O[index];\n      createProperty(result, index, value);\n    }\n  }\n  result.length = index;\n  return result;\n};\n","var toIndexedObject = require('../internals/to-indexed-object');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\n\n// `Array.prototype.{ indexOf, includes }` methods implementation\nvar createMethod = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIndexedObject($this);\n    var length = lengthOfArrayLike(O);\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare -- NaN check\n    if (IS_INCLUDES && el != el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare -- NaN check\n      if (value != value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) {\n      if ((IS_INCLUDES || index in O) && O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.includes` method\n  // https://tc39.es/ecma262/#sec-array.prototype.includes\n  includes: createMethod(true),\n  // `Array.prototype.indexOf` method\n  // https://tc39.es/ecma262/#sec-array.prototype.indexof\n  indexOf: createMethod(false)\n};\n","var bind = require('../internals/function-bind-context');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar IndexedObject = require('../internals/indexed-object');\nvar toObject = require('../internals/to-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar arraySpeciesCreate = require('../internals/array-species-create');\n\nvar push = uncurryThis([].push);\n\n// `Array.prototype.{ forEach, map, filter, some, every, find, findIndex, filterReject }` methods implementation\nvar createMethod = function (TYPE) {\n  var IS_MAP = TYPE == 1;\n  var IS_FILTER = TYPE == 2;\n  var IS_SOME = TYPE == 3;\n  var IS_EVERY = TYPE == 4;\n  var IS_FIND_INDEX = TYPE == 6;\n  var IS_FILTER_REJECT = TYPE == 7;\n  var NO_HOLES = TYPE == 5 || IS_FIND_INDEX;\n  return function ($this, callbackfn, that, specificCreate) {\n    var O = toObject($this);\n    var self = IndexedObject(O);\n    var boundFunction = bind(callbackfn, that);\n    var length = lengthOfArrayLike(self);\n    var index = 0;\n    var create = specificCreate || arraySpeciesCreate;\n    var target = IS_MAP ? create($this, length) : IS_FILTER || IS_FILTER_REJECT ? create($this, 0) : undefined;\n    var value, result;\n    for (;length > index; index++) if (NO_HOLES || index in self) {\n      value = self[index];\n      result = boundFunction(value, index, O);\n      if (TYPE) {\n        if (IS_MAP) target[index] = result; // map\n        else if (result) switch (TYPE) {\n          case 3: return true;              // some\n          case 5: return value;             // find\n          case 6: return index;             // findIndex\n          case 2: push(target, value);      // filter\n        } else switch (TYPE) {\n          case 4: return false;             // every\n          case 7: push(target, value);      // filterReject\n        }\n      }\n    }\n    return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : target;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.forEach` method\n  // https://tc39.es/ecma262/#sec-array.prototype.foreach\n  forEach: createMethod(0),\n  // `Array.prototype.map` method\n  // https://tc39.es/ecma262/#sec-array.prototype.map\n  map: createMethod(1),\n  // `Array.prototype.filter` method\n  // https://tc39.es/ecma262/#sec-array.prototype.filter\n  filter: createMethod(2),\n  // `Array.prototype.some` method\n  // https://tc39.es/ecma262/#sec-array.prototype.some\n  some: createMethod(3),\n  // `Array.prototype.every` method\n  // https://tc39.es/ecma262/#sec-array.prototype.every\n  every: createMethod(4),\n  // `Array.prototype.find` method\n  // https://tc39.es/ecma262/#sec-array.prototype.find\n  find: createMethod(5),\n  // `Array.prototype.findIndex` method\n  // https://tc39.es/ecma262/#sec-array.prototype.findIndex\n  findIndex: createMethod(6),\n  // `Array.prototype.filterReject` method\n  // https://github.com/tc39/proposal-array-filtering\n  filterReject: createMethod(7)\n};\n","var fails = require('../internals/fails');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar V8_VERSION = require('../internals/engine-v8-version');\n\nvar SPECIES = wellKnownSymbol('species');\n\nmodule.exports = function (METHOD_NAME) {\n  // We can't use this feature detection in V8 since it causes\n  // deoptimization and serious performance degradation\n  // https://github.com/zloirock/core-js/issues/677\n  return V8_VERSION >= 51 || !fails(function () {\n    var array = [];\n    var constructor = array.constructor = {};\n    constructor[SPECIES] = function () {\n      return { foo: 1 };\n    };\n    return array[METHOD_NAME](Boolean).foo !== 1;\n  });\n};\n","'use strict';\nvar fails = require('../internals/fails');\n\nmodule.exports = function (METHOD_NAME, argument) {\n  var method = [][METHOD_NAME];\n  return !!method && fails(function () {\n    // eslint-disable-next-line no-useless-call -- required for testing\n    method.call(null, argument || function () { return 1; }, 1);\n  });\n};\n","var global = require('../internals/global');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar createProperty = require('../internals/create-property');\n\nvar Array = global.Array;\nvar max = Math.max;\n\nmodule.exports = function (O, start, end) {\n  var length = lengthOfArrayLike(O);\n  var k = toAbsoluteIndex(start, length);\n  var fin = toAbsoluteIndex(end === undefined ? length : end, length);\n  var result = Array(max(fin - k, 0));\n  for (var n = 0; k < fin; k++, n++) createProperty(result, n, O[k]);\n  result.length = n;\n  return result;\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\n\nmodule.exports = uncurryThis([].slice);\n","var arraySlice = require('../internals/array-slice-simple');\n\nvar floor = Math.floor;\n\nvar mergeSort = function (array, comparefn) {\n  var length = array.length;\n  var middle = floor(length / 2);\n  return length < 8 ? insertionSort(array, comparefn) : merge(\n    array,\n    mergeSort(arraySlice(array, 0, middle), comparefn),\n    mergeSort(arraySlice(array, middle), comparefn),\n    comparefn\n  );\n};\n\nvar insertionSort = function (array, comparefn) {\n  var length = array.length;\n  var i = 1;\n  var element, j;\n\n  while (i < length) {\n    j = i;\n    element = array[i];\n    while (j && comparefn(array[j - 1], element) > 0) {\n      array[j] = array[--j];\n    }\n    if (j !== i++) array[j] = element;\n  } return array;\n};\n\nvar merge = function (array, left, right, comparefn) {\n  var llength = left.length;\n  var rlength = right.length;\n  var lindex = 0;\n  var rindex = 0;\n\n  while (lindex < llength || rindex < rlength) {\n    array[lindex + rindex] = (lindex < llength && rindex < rlength)\n      ? comparefn(left[lindex], right[rindex]) <= 0 ? left[lindex++] : right[rindex++]\n      : lindex < llength ? left[lindex++] : right[rindex++];\n  } return array;\n};\n\nmodule.exports = mergeSort;\n","var global = require('../internals/global');\nvar isArray = require('../internals/is-array');\nvar isConstructor = require('../internals/is-constructor');\nvar isObject = require('../internals/is-object');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar SPECIES = wellKnownSymbol('species');\nvar Array = global.Array;\n\n// a part of `ArraySpeciesCreate` abstract operation\n// https://tc39.es/ecma262/#sec-arrayspeciescreate\nmodule.exports = function (originalArray) {\n  var C;\n  if (isArray(originalArray)) {\n    C = originalArray.constructor;\n    // cross-realm fallback\n    if (isConstructor(C) && (C === Array || isArray(C.prototype))) C = undefined;\n    else if (isObject(C)) {\n      C = C[SPECIES];\n      if (C === null) C = undefined;\n    }\n  } return C === undefined ? Array : C;\n};\n","var arraySpeciesConstructor = require('../internals/array-species-constructor');\n\n// `ArraySpeciesCreate` abstract operation\n// https://tc39.es/ecma262/#sec-arrayspeciescreate\nmodule.exports = function (originalArray, length) {\n  return new (arraySpeciesConstructor(originalArray))(length === 0 ? 0 : length);\n};\n","var anObject = require('../internals/an-object');\nvar iteratorClose = require('../internals/iterator-close');\n\n// call something on iterator step with safe closing on error\nmodule.exports = function (iterator, fn, value, ENTRIES) {\n  try {\n    return ENTRIES ? fn(anObject(value)[0], value[1]) : fn(value);\n  } catch (error) {\n    iteratorClose(iterator, 'throw', error);\n  }\n};\n","var wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar ITERATOR = wellKnownSymbol('iterator');\nvar SAFE_CLOSING = false;\n\ntry {\n  var called = 0;\n  var iteratorWithReturn = {\n    next: function () {\n      return { done: !!called++ };\n    },\n    'return': function () {\n      SAFE_CLOSING = true;\n    }\n  };\n  iteratorWithReturn[ITERATOR] = function () {\n    return this;\n  };\n  // eslint-disable-next-line es/no-array-from, no-throw-literal -- required for testing\n  Array.from(iteratorWithReturn, function () { throw 2; });\n} catch (error) { /* empty */ }\n\nmodule.exports = function (exec, SKIP_CLOSING) {\n  if (!SKIP_CLOSING && !SAFE_CLOSING) return false;\n  var ITERATION_SUPPORT = false;\n  try {\n    var object = {};\n    object[ITERATOR] = function () {\n      return {\n        next: function () {\n          return { done: ITERATION_SUPPORT = true };\n        }\n      };\n    };\n    exec(object);\n  } catch (error) { /* empty */ }\n  return ITERATION_SUPPORT;\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\n\nvar toString = uncurryThis({}.toString);\nvar stringSlice = uncurryThis(''.slice);\n\nmodule.exports = function (it) {\n  return stringSlice(toString(it), 8, -1);\n};\n","var global = require('../internals/global');\nvar TO_STRING_TAG_SUPPORT = require('../internals/to-string-tag-support');\nvar isCallable = require('../internals/is-callable');\nvar classofRaw = require('../internals/classof-raw');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar Object = global.Object;\n\n// ES3 wrong here\nvar CORRECT_ARGUMENTS = classofRaw(function () { return arguments; }()) == 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function (it, key) {\n  try {\n    return it[key];\n  } catch (error) { /* empty */ }\n};\n\n// getting tag from ES6+ `Object.prototype.toString`\nmodule.exports = TO_STRING_TAG_SUPPORT ? classofRaw : function (it) {\n  var O, tag, result;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (tag = tryGet(O = Object(it), TO_STRING_TAG)) == 'string' ? tag\n    // builtinTag case\n    : CORRECT_ARGUMENTS ? classofRaw(O)\n    // ES3 arguments fallback\n    : (result = classofRaw(O)) == 'Object' && isCallable(O.callee) ? 'Arguments' : result;\n};\n","'use strict';\nvar call = require('../internals/function-call');\nvar aCallable = require('../internals/a-callable');\nvar anObject = require('../internals/an-object');\n\n// https://github.com/tc39/collection-methods\nmodule.exports = function addAll(/* ...elements */) {\n  var set = anObject(this);\n  var adder = aCallable(set.add);\n  for (var k = 0, len = arguments.length; k < len; k++) {\n    call(adder, set, arguments[k]);\n  }\n  return set;\n};\n","'use strict';\nvar call = require('../internals/function-call');\nvar aCallable = require('../internals/a-callable');\nvar anObject = require('../internals/an-object');\n\n// https://github.com/tc39/collection-methods\nmodule.exports = function deleteAll(/* ...elements */) {\n  var collection = anObject(this);\n  var remover = aCallable(collection['delete']);\n  var allDeleted = true;\n  var wasDeleted;\n  for (var k = 0, len = arguments.length; k < len; k++) {\n    wasDeleted = call(remover, collection, arguments[k]);\n    allDeleted = allDeleted && wasDeleted;\n  }\n  return !!allDeleted;\n};\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar redefineAll = require('../internals/redefine-all');\nvar getWeakData = require('../internals/internal-metadata').getWeakData;\nvar anObject = require('../internals/an-object');\nvar isObject = require('../internals/is-object');\nvar anInstance = require('../internals/an-instance');\nvar iterate = require('../internals/iterate');\nvar ArrayIterationModule = require('../internals/array-iteration');\nvar hasOwn = require('../internals/has-own-property');\nvar InternalStateModule = require('../internals/internal-state');\n\nvar setInternalState = InternalStateModule.set;\nvar internalStateGetterFor = InternalStateModule.getterFor;\nvar find = ArrayIterationModule.find;\nvar findIndex = ArrayIterationModule.findIndex;\nvar splice = uncurryThis([].splice);\nvar id = 0;\n\n// fallback for uncaught frozen keys\nvar uncaughtFrozenStore = function (store) {\n  return store.frozen || (store.frozen = new UncaughtFrozenStore());\n};\n\nvar UncaughtFrozenStore = function () {\n  this.entries = [];\n};\n\nvar findUncaughtFrozen = function (store, key) {\n  return find(store.entries, function (it) {\n    return it[0] === key;\n  });\n};\n\nUncaughtFrozenStore.prototype = {\n  get: function (key) {\n    var entry = findUncaughtFrozen(this, key);\n    if (entry) return entry[1];\n  },\n  has: function (key) {\n    return !!findUncaughtFrozen(this, key);\n  },\n  set: function (key, value) {\n    var entry = findUncaughtFrozen(this, key);\n    if (entry) entry[1] = value;\n    else this.entries.push([key, value]);\n  },\n  'delete': function (key) {\n    var index = findIndex(this.entries, function (it) {\n      return it[0] === key;\n    });\n    if (~index) splice(this.entries, index, 1);\n    return !!~index;\n  }\n};\n\nmodule.exports = {\n  getConstructor: function (wrapper, CONSTRUCTOR_NAME, IS_MAP, ADDER) {\n    var Constructor = wrapper(function (that, iterable) {\n      anInstance(that, Prototype);\n      setInternalState(that, {\n        type: CONSTRUCTOR_NAME,\n        id: id++,\n        frozen: undefined\n      });\n      if (iterable != undefined) iterate(iterable, that[ADDER], { that: that, AS_ENTRIES: IS_MAP });\n    });\n\n    var Prototype = Constructor.prototype;\n\n    var getInternalState = internalStateGetterFor(CONSTRUCTOR_NAME);\n\n    var define = function (that, key, value) {\n      var state = getInternalState(that);\n      var data = getWeakData(anObject(key), true);\n      if (data === true) uncaughtFrozenStore(state).set(key, value);\n      else data[state.id] = value;\n      return that;\n    };\n\n    redefineAll(Prototype, {\n      // `{ WeakMap, WeakSet }.prototype.delete(key)` methods\n      // https://tc39.es/ecma262/#sec-weakmap.prototype.delete\n      // https://tc39.es/ecma262/#sec-weakset.prototype.delete\n      'delete': function (key) {\n        var state = getInternalState(this);\n        if (!isObject(key)) return false;\n        var data = getWeakData(key);\n        if (data === true) return uncaughtFrozenStore(state)['delete'](key);\n        return data && hasOwn(data, state.id) && delete data[state.id];\n      },\n      // `{ WeakMap, WeakSet }.prototype.has(key)` methods\n      // https://tc39.es/ecma262/#sec-weakmap.prototype.has\n      // https://tc39.es/ecma262/#sec-weakset.prototype.has\n      has: function has(key) {\n        var state = getInternalState(this);\n        if (!isObject(key)) return false;\n        var data = getWeakData(key);\n        if (data === true) return uncaughtFrozenStore(state).has(key);\n        return data && hasOwn(data, state.id);\n      }\n    });\n\n    redefineAll(Prototype, IS_MAP ? {\n      // `WeakMap.prototype.get(key)` method\n      // https://tc39.es/ecma262/#sec-weakmap.prototype.get\n      get: function get(key) {\n        var state = getInternalState(this);\n        if (isObject(key)) {\n          var data = getWeakData(key);\n          if (data === true) return uncaughtFrozenStore(state).get(key);\n          return data ? data[state.id] : undefined;\n        }\n      },\n      // `WeakMap.prototype.set(key, value)` method\n      // https://tc39.es/ecma262/#sec-weakmap.prototype.set\n      set: function set(key, value) {\n        return define(this, key, value);\n      }\n    } : {\n      // `WeakSet.prototype.add(value)` method\n      // https://tc39.es/ecma262/#sec-weakset.prototype.add\n      add: function add(value) {\n        return define(this, value, true);\n      }\n    });\n\n    return Constructor;\n  }\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar global = require('../internals/global');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar isForced = require('../internals/is-forced');\nvar redefine = require('../internals/redefine');\nvar InternalMetadataModule = require('../internals/internal-metadata');\nvar iterate = require('../internals/iterate');\nvar anInstance = require('../internals/an-instance');\nvar isCallable = require('../internals/is-callable');\nvar isObject = require('../internals/is-object');\nvar fails = require('../internals/fails');\nvar checkCorrectnessOfIteration = require('../internals/check-correctness-of-iteration');\nvar setToStringTag = require('../internals/set-to-string-tag');\nvar inheritIfRequired = require('../internals/inherit-if-required');\n\nmodule.exports = function (CONSTRUCTOR_NAME, wrapper, common) {\n  var IS_MAP = CONSTRUCTOR_NAME.indexOf('Map') !== -1;\n  var IS_WEAK = CONSTRUCTOR_NAME.indexOf('Weak') !== -1;\n  var ADDER = IS_MAP ? 'set' : 'add';\n  var NativeConstructor = global[CONSTRUCTOR_NAME];\n  var NativePrototype = NativeConstructor && NativeConstructor.prototype;\n  var Constructor = NativeConstructor;\n  var exported = {};\n\n  var fixMethod = function (KEY) {\n    var uncurriedNativeMethod = uncurryThis(NativePrototype[KEY]);\n    redefine(NativePrototype, KEY,\n      KEY == 'add' ? function add(value) {\n        uncurriedNativeMethod(this, value === 0 ? 0 : value);\n        return this;\n      } : KEY == 'delete' ? function (key) {\n        return IS_WEAK && !isObject(key) ? false : uncurriedNativeMethod(this, key === 0 ? 0 : key);\n      } : KEY == 'get' ? function get(key) {\n        return IS_WEAK && !isObject(key) ? undefined : uncurriedNativeMethod(this, key === 0 ? 0 : key);\n      } : KEY == 'has' ? function has(key) {\n        return IS_WEAK && !isObject(key) ? false : uncurriedNativeMethod(this, key === 0 ? 0 : key);\n      } : function set(key, value) {\n        uncurriedNativeMethod(this, key === 0 ? 0 : key, value);\n        return this;\n      }\n    );\n  };\n\n  var REPLACE = isForced(\n    CONSTRUCTOR_NAME,\n    !isCallable(NativeConstructor) || !(IS_WEAK || NativePrototype.forEach && !fails(function () {\n      new NativeConstructor().entries().next();\n    }))\n  );\n\n  if (REPLACE) {\n    // create collection constructor\n    Constructor = common.getConstructor(wrapper, CONSTRUCTOR_NAME, IS_MAP, ADDER);\n    InternalMetadataModule.enable();\n  } else if (isForced(CONSTRUCTOR_NAME, true)) {\n    var instance = new Constructor();\n    // early implementations not supports chaining\n    var HASNT_CHAINING = instance[ADDER](IS_WEAK ? {} : -0, 1) != instance;\n    // V8 ~ Chromium 40- weak-collections throws on primitives, but should return false\n    var THROWS_ON_PRIMITIVES = fails(function () { instance.has(1); });\n    // most early implementations doesn't supports iterables, most modern - not close it correctly\n    // eslint-disable-next-line no-new -- required for testing\n    var ACCEPT_ITERABLES = checkCorrectnessOfIteration(function (iterable) { new NativeConstructor(iterable); });\n    // for early implementations -0 and +0 not the same\n    var BUGGY_ZERO = !IS_WEAK && fails(function () {\n      // V8 ~ Chromium 42- fails only with 5+ elements\n      var $instance = new NativeConstructor();\n      var index = 5;\n      while (index--) $instance[ADDER](index, index);\n      return !$instance.has(-0);\n    });\n\n    if (!ACCEPT_ITERABLES) {\n      Constructor = wrapper(function (dummy, iterable) {\n        anInstance(dummy, NativePrototype);\n        var that = inheritIfRequired(new NativeConstructor(), dummy, Constructor);\n        if (iterable != undefined) iterate(iterable, that[ADDER], { that: that, AS_ENTRIES: IS_MAP });\n        return that;\n      });\n      Constructor.prototype = NativePrototype;\n      NativePrototype.constructor = Constructor;\n    }\n\n    if (THROWS_ON_PRIMITIVES || BUGGY_ZERO) {\n      fixMethod('delete');\n      fixMethod('has');\n      IS_MAP && fixMethod('get');\n    }\n\n    if (BUGGY_ZERO || HASNT_CHAINING) fixMethod(ADDER);\n\n    // weak collections should not contains .clear method\n    if (IS_WEAK && NativePrototype.clear) delete NativePrototype.clear;\n  }\n\n  exported[CONSTRUCTOR_NAME] = Constructor;\n  $({ global: true, forced: Constructor != NativeConstructor }, exported);\n\n  setToStringTag(Constructor, CONSTRUCTOR_NAME);\n\n  if (!IS_WEAK) common.setStrong(Constructor, CONSTRUCTOR_NAME, IS_MAP);\n\n  return Constructor;\n};\n","var hasOwn = require('../internals/has-own-property');\nvar ownKeys = require('../internals/own-keys');\nvar getOwnPropertyDescriptorModule = require('../internals/object-get-own-property-descriptor');\nvar definePropertyModule = require('../internals/object-define-property');\n\nmodule.exports = function (target, source, exceptions) {\n  var keys = ownKeys(source);\n  var defineProperty = definePropertyModule.f;\n  var getOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    if (!hasOwn(target, key) && !(exceptions && hasOwn(exceptions, key))) {\n      defineProperty(target, key, getOwnPropertyDescriptor(source, key));\n    }\n  }\n};\n","var wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar MATCH = wellKnownSymbol('match');\n\nmodule.exports = function (METHOD_NAME) {\n  var regexp = /./;\n  try {\n    '/./'[METHOD_NAME](regexp);\n  } catch (error1) {\n    try {\n      regexp[MATCH] = false;\n      return '/./'[METHOD_NAME](regexp);\n    } catch (error2) { /* empty */ }\n  } return false;\n};\n","var fails = require('../internals/fails');\n\nmodule.exports = !fails(function () {\n  function F() { /* empty */ }\n  F.prototype.constructor = null;\n  // eslint-disable-next-line es/no-object-getprototypeof -- required for testing\n  return Object.getPrototypeOf(new F()) !== F.prototype;\n});\n","'use strict';\nvar IteratorPrototype = require('../internals/iterators-core').IteratorPrototype;\nvar create = require('../internals/object-create');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\nvar setToStringTag = require('../internals/set-to-string-tag');\nvar Iterators = require('../internals/iterators');\n\nvar returnThis = function () { return this; };\n\nmodule.exports = function (IteratorConstructor, NAME, next, ENUMERABLE_NEXT) {\n  var TO_STRING_TAG = NAME + ' Iterator';\n  IteratorConstructor.prototype = create(IteratorPrototype, { next: createPropertyDescriptor(+!ENUMERABLE_NEXT, next) });\n  setToStringTag(IteratorConstructor, TO_STRING_TAG, false, true);\n  Iterators[TO_STRING_TAG] = returnThis;\n  return IteratorConstructor;\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar definePropertyModule = require('../internals/object-define-property');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\n\nmodule.exports = DESCRIPTORS ? function (object, key, value) {\n  return definePropertyModule.f(object, key, createPropertyDescriptor(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n","module.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n","'use strict';\nvar toPropertyKey = require('../internals/to-property-key');\nvar definePropertyModule = require('../internals/object-define-property');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\n\nmodule.exports = function (object, key, value) {\n  var propertyKey = toPropertyKey(key);\n  if (propertyKey in object) definePropertyModule.f(object, propertyKey, createPropertyDescriptor(0, value));\n  else object[propertyKey] = value;\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar call = require('../internals/function-call');\nvar IS_PURE = require('../internals/is-pure');\nvar FunctionName = require('../internals/function-name');\nvar isCallable = require('../internals/is-callable');\nvar createIteratorConstructor = require('../internals/create-iterator-constructor');\nvar getPrototypeOf = require('../internals/object-get-prototype-of');\nvar setPrototypeOf = require('../internals/object-set-prototype-of');\nvar setToStringTag = require('../internals/set-to-string-tag');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar redefine = require('../internals/redefine');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar Iterators = require('../internals/iterators');\nvar IteratorsCore = require('../internals/iterators-core');\n\nvar PROPER_FUNCTION_NAME = FunctionName.PROPER;\nvar CONFIGURABLE_FUNCTION_NAME = FunctionName.CONFIGURABLE;\nvar IteratorPrototype = IteratorsCore.IteratorPrototype;\nvar BUGGY_SAFARI_ITERATORS = IteratorsCore.BUGGY_SAFARI_ITERATORS;\nvar ITERATOR = wellKnownSymbol('iterator');\nvar KEYS = 'keys';\nvar VALUES = 'values';\nvar ENTRIES = 'entries';\n\nvar returnThis = function () { return this; };\n\nmodule.exports = function (Iterable, NAME, IteratorConstructor, next, DEFAULT, IS_SET, FORCED) {\n  createIteratorConstructor(IteratorConstructor, NAME, next);\n\n  var getIterationMethod = function (KIND) {\n    if (KIND === DEFAULT && defaultIterator) return defaultIterator;\n    if (!BUGGY_SAFARI_ITERATORS && KIND in IterablePrototype) return IterablePrototype[KIND];\n    switch (KIND) {\n      case KEYS: return function keys() { return new IteratorConstructor(this, KIND); };\n      case VALUES: return function values() { return new IteratorConstructor(this, KIND); };\n      case ENTRIES: return function entries() { return new IteratorConstructor(this, KIND); };\n    } return function () { return new IteratorConstructor(this); };\n  };\n\n  var TO_STRING_TAG = NAME + ' Iterator';\n  var INCORRECT_VALUES_NAME = false;\n  var IterablePrototype = Iterable.prototype;\n  var nativeIterator = IterablePrototype[ITERATOR]\n    || IterablePrototype['@@iterator']\n    || DEFAULT && IterablePrototype[DEFAULT];\n  var defaultIterator = !BUGGY_SAFARI_ITERATORS && nativeIterator || getIterationMethod(DEFAULT);\n  var anyNativeIterator = NAME == 'Array' ? IterablePrototype.entries || nativeIterator : nativeIterator;\n  var CurrentIteratorPrototype, methods, KEY;\n\n  // fix native\n  if (anyNativeIterator) {\n    CurrentIteratorPrototype = getPrototypeOf(anyNativeIterator.call(new Iterable()));\n    if (CurrentIteratorPrototype !== Object.prototype && CurrentIteratorPrototype.next) {\n      if (!IS_PURE && getPrototypeOf(CurrentIteratorPrototype) !== IteratorPrototype) {\n        if (setPrototypeOf) {\n          setPrototypeOf(CurrentIteratorPrototype, IteratorPrototype);\n        } else if (!isCallable(CurrentIteratorPrototype[ITERATOR])) {\n          redefine(CurrentIteratorPrototype, ITERATOR, returnThis);\n        }\n      }\n      // Set @@toStringTag to native iterators\n      setToStringTag(CurrentIteratorPrototype, TO_STRING_TAG, true, true);\n      if (IS_PURE) Iterators[TO_STRING_TAG] = returnThis;\n    }\n  }\n\n  // fix Array.prototype.{ values, @@iterator }.name in V8 / FF\n  if (PROPER_FUNCTION_NAME && DEFAULT == VALUES && nativeIterator && nativeIterator.name !== VALUES) {\n    if (!IS_PURE && CONFIGURABLE_FUNCTION_NAME) {\n      createNonEnumerableProperty(IterablePrototype, 'name', VALUES);\n    } else {\n      INCORRECT_VALUES_NAME = true;\n      defaultIterator = function values() { return call(nativeIterator, this); };\n    }\n  }\n\n  // export additional methods\n  if (DEFAULT) {\n    methods = {\n      values: getIterationMethod(VALUES),\n      keys: IS_SET ? defaultIterator : getIterationMethod(KEYS),\n      entries: getIterationMethod(ENTRIES)\n    };\n    if (FORCED) for (KEY in methods) {\n      if (BUGGY_SAFARI_ITERATORS || INCORRECT_VALUES_NAME || !(KEY in IterablePrototype)) {\n        redefine(IterablePrototype, KEY, methods[KEY]);\n      }\n    } else $({ target: NAME, proto: true, forced: BUGGY_SAFARI_ITERATORS || INCORRECT_VALUES_NAME }, methods);\n  }\n\n  // define iterator\n  if ((!IS_PURE || FORCED) && IterablePrototype[ITERATOR] !== defaultIterator) {\n    redefine(IterablePrototype, ITERATOR, defaultIterator, { name: DEFAULT });\n  }\n  Iterators[NAME] = defaultIterator;\n\n  return methods;\n};\n","var path = require('../internals/path');\nvar hasOwn = require('../internals/has-own-property');\nvar wrappedWellKnownSymbolModule = require('../internals/well-known-symbol-wrapped');\nvar defineProperty = require('../internals/object-define-property').f;\n\nmodule.exports = function (NAME) {\n  var Symbol = path.Symbol || (path.Symbol = {});\n  if (!hasOwn(Symbol, NAME)) defineProperty(Symbol, NAME, {\n    value: wrappedWellKnownSymbolModule.f(NAME)\n  });\n};\n","var fails = require('../internals/fails');\n\n// Detect IE8's incomplete defineProperty implementation\nmodule.exports = !fails(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- required for testing\n  return Object.defineProperty({}, 1, { get: function () { return 7; } })[1] != 7;\n});\n","var global = require('../internals/global');\nvar isObject = require('../internals/is-object');\n\nvar document = global.document;\n// typeof document.createElement is 'object' in old IE\nvar EXISTS = isObject(document) && isObject(document.createElement);\n\nmodule.exports = function (it) {\n  return EXISTS ? document.createElement(it) : {};\n};\n","// iterable DOM collections\n// flag - `iterable` interface - 'entries', 'keys', 'values', 'forEach' methods\nmodule.exports = {\n  CSSRuleList: 0,\n  CSSStyleDeclaration: 0,\n  CSSValueList: 0,\n  ClientRectList: 0,\n  DOMRectList: 0,\n  DOMStringList: 0,\n  DOMTokenList: 1,\n  DataTransferItemList: 0,\n  FileList: 0,\n  HTMLAllCollection: 0,\n  HTMLCollection: 0,\n  HTMLFormElement: 0,\n  HTMLSelectElement: 0,\n  MediaList: 0,\n  MimeTypeArray: 0,\n  NamedNodeMap: 0,\n  NodeList: 1,\n  PaintRequestList: 0,\n  Plugin: 0,\n  PluginArray: 0,\n  SVGLengthList: 0,\n  SVGNumberList: 0,\n  SVGPathSegList: 0,\n  SVGPointList: 0,\n  SVGStringList: 0,\n  SVGTransformList: 0,\n  SourceBufferList: 0,\n  StyleSheetList: 0,\n  TextTrackCueList: 0,\n  TextTrackList: 0,\n  TouchList: 0\n};\n","// in old WebKit versions, `element.classList` is not an instance of global `DOMTokenList`\nvar documentCreateElement = require('../internals/document-create-element');\n\nvar classList = documentCreateElement('span').classList;\nvar DOMTokenListPrototype = classList && classList.constructor && classList.constructor.prototype;\n\nmodule.exports = DOMTokenListPrototype === Object.prototype ? undefined : DOMTokenListPrototype;\n","module.exports = typeof window == 'object';\n","var userAgent = require('../internals/engine-user-agent');\nvar global = require('../internals/global');\n\nmodule.exports = /ipad|iphone|ipod/i.test(userAgent) && global.Pebble !== undefined;\n","var userAgent = require('../internals/engine-user-agent');\n\nmodule.exports = /(?:ipad|iphone|ipod).*applewebkit/i.test(userAgent);\n","var classof = require('../internals/classof-raw');\nvar global = require('../internals/global');\n\nmodule.exports = classof(global.process) == 'process';\n","var userAgent = require('../internals/engine-user-agent');\n\nmodule.exports = /web0s(?!.*chrome)/i.test(userAgent);\n","var getBuiltIn = require('../internals/get-built-in');\n\nmodule.exports = getBuiltIn('navigator', 'userAgent') || '';\n","var global = require('../internals/global');\nvar userAgent = require('../internals/engine-user-agent');\n\nvar process = global.process;\nvar Deno = global.Deno;\nvar versions = process && process.versions || Deno && Deno.version;\nvar v8 = versions && versions.v8;\nvar match, version;\n\nif (v8) {\n  match = v8.split('.');\n  // in old Chrome, versions of V8 isn't V8 = Chrome / 10\n  // but their correct versions are not interesting for us\n  version = match[0] > 0 && match[0] < 4 ? 1 : +(match[0] + match[1]);\n}\n\n// BrowserFS NodeJS `process` polyfill incorrectly set `.v8` to `0.0`\n// so check `userAgent` even if `.v8` exists, but 0\nif (!version && userAgent) {\n  match = userAgent.match(/Edge\\/(\\d+)/);\n  if (!match || match[1] >= 74) {\n    match = userAgent.match(/Chrome\\/(\\d+)/);\n    if (match) version = +match[1];\n  }\n}\n\nmodule.exports = version;\n","// IE8- don't enum bug keys\nmodule.exports = [\n  'constructor',\n  'hasOwnProperty',\n  'isPrototypeOf',\n  'propertyIsEnumerable',\n  'toLocaleString',\n  'toString',\n  'valueOf'\n];\n","var global = require('../internals/global');\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar redefine = require('../internals/redefine');\nvar setGlobal = require('../internals/set-global');\nvar copyConstructorProperties = require('../internals/copy-constructor-properties');\nvar isForced = require('../internals/is-forced');\n\n/*\n  options.target      - name of the target object\n  options.global      - target is the global object\n  options.stat        - export as static methods of target\n  options.proto       - export as prototype methods of target\n  options.real        - real prototype method for the `pure` version\n  options.forced      - export even if the native feature is available\n  options.bind        - bind methods to the target, required for the `pure` version\n  options.wrap        - wrap constructors to preventing global pollution, required for the `pure` version\n  options.unsafe      - use the simple assignment of property instead of delete + defineProperty\n  options.sham        - add a flag to not completely full polyfills\n  options.enumerable  - export as enumerable property\n  options.noTargetGet - prevent calling a getter on target\n  options.name        - the .name of the function if it does not match the key\n*/\nmodule.exports = function (options, source) {\n  var TARGET = options.target;\n  var GLOBAL = options.global;\n  var STATIC = options.stat;\n  var FORCED, target, key, targetProperty, sourceProperty, descriptor;\n  if (GLOBAL) {\n    target = global;\n  } else if (STATIC) {\n    target = global[TARGET] || setGlobal(TARGET, {});\n  } else {\n    target = (global[TARGET] || {}).prototype;\n  }\n  if (target) for (key in source) {\n    sourceProperty = source[key];\n    if (options.noTargetGet) {\n      descriptor = getOwnPropertyDescriptor(target, key);\n      targetProperty = descriptor && descriptor.value;\n    } else targetProperty = target[key];\n    FORCED = isForced(GLOBAL ? key : TARGET + (STATIC ? '.' : '#') + key, options.forced);\n    // contained in target\n    if (!FORCED && targetProperty !== undefined) {\n      if (typeof sourceProperty == typeof targetProperty) continue;\n      copyConstructorProperties(sourceProperty, targetProperty);\n    }\n    // add a flag to not completely full polyfills\n    if (options.sham || (targetProperty && targetProperty.sham)) {\n      createNonEnumerableProperty(sourceProperty, 'sham', true);\n    }\n    // extend global\n    redefine(target, key, sourceProperty, options);\n  }\n};\n","module.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (error) {\n    return true;\n  }\n};\n","'use strict';\n// TODO: Remove from `core-js@4` since it's moved to entry points\nrequire('../modules/es.regexp.exec');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar redefine = require('../internals/redefine');\nvar regexpExec = require('../internals/regexp-exec');\nvar fails = require('../internals/fails');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\n\nvar SPECIES = wellKnownSymbol('species');\nvar RegExpPrototype = RegExp.prototype;\n\nmodule.exports = function (KEY, exec, FORCED, SHAM) {\n  var SYMBOL = wellKnownSymbol(KEY);\n\n  var DELEGATES_TO_SYMBOL = !fails(function () {\n    // String methods call symbol-named RegEp methods\n    var O = {};\n    O[SYMBOL] = function () { return 7; };\n    return ''[KEY](O) != 7;\n  });\n\n  var DELEGATES_TO_EXEC = DELEGATES_TO_SYMBOL && !fails(function () {\n    // Symbol-named RegExp methods call .exec\n    var execCalled = false;\n    var re = /a/;\n\n    if (KEY === 'split') {\n      // We can't use real regex here since it causes deoptimization\n      // and serious performance degradation in V8\n      // https://github.com/zloirock/core-js/issues/306\n      re = {};\n      // RegExp[@@split] doesn't call the regex's exec method, but first creates\n      // a new one. We need to return the patched regex when creating the new one.\n      re.constructor = {};\n      re.constructor[SPECIES] = function () { return re; };\n      re.flags = '';\n      re[SYMBOL] = /./[SYMBOL];\n    }\n\n    re.exec = function () { execCalled = true; return null; };\n\n    re[SYMBOL]('');\n    return !execCalled;\n  });\n\n  if (\n    !DELEGATES_TO_SYMBOL ||\n    !DELEGATES_TO_EXEC ||\n    FORCED\n  ) {\n    var uncurriedNativeRegExpMethod = uncurryThis(/./[SYMBOL]);\n    var methods = exec(SYMBOL, ''[KEY], function (nativeMethod, regexp, str, arg2, forceStringMethod) {\n      var uncurriedNativeMethod = uncurryThis(nativeMethod);\n      var $exec = regexp.exec;\n      if ($exec === regexpExec || $exec === RegExpPrototype.exec) {\n        if (DELEGATES_TO_SYMBOL && !forceStringMethod) {\n          // The native String method already delegates to @@method (this\n          // polyfilled function), leasing to infinite recursion.\n          // We avoid it by directly calling the native @@method method.\n          return { done: true, value: uncurriedNativeRegExpMethod(regexp, str, arg2) };\n        }\n        return { done: true, value: uncurriedNativeMethod(str, regexp, arg2) };\n      }\n      return { done: false };\n    });\n\n    redefine(String.prototype, KEY, methods[0]);\n    redefine(RegExpPrototype, SYMBOL, methods[1]);\n  }\n\n  if (SHAM) createNonEnumerableProperty(RegExpPrototype[SYMBOL], 'sham', true);\n};\n","var fails = require('../internals/fails');\n\nmodule.exports = !fails(function () {\n  // eslint-disable-next-line es/no-object-isextensible, es/no-object-preventextensions -- required for testing\n  return Object.isExtensible(Object.preventExtensions({}));\n});\n","var NATIVE_BIND = require('../internals/function-bind-native');\n\nvar FunctionPrototype = Function.prototype;\nvar apply = FunctionPrototype.apply;\nvar call = FunctionPrototype.call;\n\n// eslint-disable-next-line es/no-reflect -- safe\nmodule.exports = typeof Reflect == 'object' && Reflect.apply || (NATIVE_BIND ? call.bind(apply) : function () {\n  return call.apply(apply, arguments);\n});\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar aCallable = require('../internals/a-callable');\nvar NATIVE_BIND = require('../internals/function-bind-native');\n\nvar bind = uncurryThis(uncurryThis.bind);\n\n// optional / simple context binding\nmodule.exports = function (fn, that) {\n  aCallable(fn);\n  return that === undefined ? fn : NATIVE_BIND ? bind(fn, that) : function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n","var fails = require('../internals/fails');\n\nmodule.exports = !fails(function () {\n  var test = (function () { /* empty */ }).bind();\n  // eslint-disable-next-line no-prototype-builtins -- safe\n  return typeof test != 'function' || test.hasOwnProperty('prototype');\n});\n","'use strict';\nvar global = require('../internals/global');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar aCallable = require('../internals/a-callable');\nvar isObject = require('../internals/is-object');\nvar hasOwn = require('../internals/has-own-property');\nvar arraySlice = require('../internals/array-slice');\nvar NATIVE_BIND = require('../internals/function-bind-native');\n\nvar Function = global.Function;\nvar concat = uncurryThis([].concat);\nvar join = uncurryThis([].join);\nvar factories = {};\n\nvar construct = function (C, argsLength, args) {\n  if (!hasOwn(factories, argsLength)) {\n    for (var list = [], i = 0; i < argsLength; i++) list[i] = 'a[' + i + ']';\n    factories[argsLength] = Function('C,a', 'return new C(' + join(list, ',') + ')');\n  } return factories[argsLength](C, args);\n};\n\n// `Function.prototype.bind` method implementation\n// https://tc39.es/ecma262/#sec-function.prototype.bind\nmodule.exports = NATIVE_BIND ? Function.bind : function bind(that /* , ...args */) {\n  var F = aCallable(this);\n  var Prototype = F.prototype;\n  var partArgs = arraySlice(arguments, 1);\n  var boundFunction = function bound(/* args... */) {\n    var args = concat(partArgs, arraySlice(arguments));\n    return this instanceof boundFunction ? construct(F, args.length, args) : F.apply(that, args);\n  };\n  if (isObject(Prototype)) boundFunction.prototype = Prototype;\n  return boundFunction;\n};\n","var NATIVE_BIND = require('../internals/function-bind-native');\n\nvar call = Function.prototype.call;\n\nmodule.exports = NATIVE_BIND ? call.bind(call) : function () {\n  return call.apply(call, arguments);\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar hasOwn = require('../internals/has-own-property');\n\nvar FunctionPrototype = Function.prototype;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar getDescriptor = DESCRIPTORS && Object.getOwnPropertyDescriptor;\n\nvar EXISTS = hasOwn(FunctionPrototype, 'name');\n// additional protection from minified / mangled / dropped function names\nvar PROPER = EXISTS && (function something() { /* empty */ }).name === 'something';\nvar CONFIGURABLE = EXISTS && (!DESCRIPTORS || (DESCRIPTORS && getDescriptor(FunctionPrototype, 'name').configurable));\n\nmodule.exports = {\n  EXISTS: EXISTS,\n  PROPER: PROPER,\n  CONFIGURABLE: CONFIGURABLE\n};\n","var NATIVE_BIND = require('../internals/function-bind-native');\n\nvar FunctionPrototype = Function.prototype;\nvar bind = FunctionPrototype.bind;\nvar call = FunctionPrototype.call;\nvar uncurryThis = NATIVE_BIND && bind.bind(call, call);\n\nmodule.exports = NATIVE_BIND ? function (fn) {\n  return fn && uncurryThis(fn);\n} : function (fn) {\n  return fn && function () {\n    return call.apply(fn, arguments);\n  };\n};\n","var global = require('../internals/global');\nvar isCallable = require('../internals/is-callable');\n\nvar aFunction = function (argument) {\n  return isCallable(argument) ? argument : undefined;\n};\n\nmodule.exports = function (namespace, method) {\n  return arguments.length < 2 ? aFunction(global[namespace]) : global[namespace] && global[namespace][method];\n};\n","var classof = require('../internals/classof');\nvar getMethod = require('../internals/get-method');\nvar Iterators = require('../internals/iterators');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar ITERATOR = wellKnownSymbol('iterator');\n\nmodule.exports = function (it) {\n  if (it != undefined) return getMethod(it, ITERATOR)\n    || getMethod(it, '@@iterator')\n    || Iterators[classof(it)];\n};\n","var global = require('../internals/global');\nvar call = require('../internals/function-call');\nvar aCallable = require('../internals/a-callable');\nvar anObject = require('../internals/an-object');\nvar tryToString = require('../internals/try-to-string');\nvar getIteratorMethod = require('../internals/get-iterator-method');\n\nvar TypeError = global.TypeError;\n\nmodule.exports = function (argument, usingIterator) {\n  var iteratorMethod = arguments.length < 2 ? getIteratorMethod(argument) : usingIterator;\n  if (aCallable(iteratorMethod)) return anObject(call(iteratorMethod, argument));\n  throw TypeError(tryToString(argument) + ' is not iterable');\n};\n","var aCallable = require('../internals/a-callable');\n\n// `GetMethod` abstract operation\n// https://tc39.es/ecma262/#sec-getmethod\nmodule.exports = function (V, P) {\n  var func = V[P];\n  return func == null ? undefined : aCallable(func);\n};\n","var check = function (it) {\n  return it && it.Math == Math && it;\n};\n\n// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nmodule.exports =\n  // eslint-disable-next-line es/no-global-this -- safe\n  check(typeof globalThis == 'object' && globalThis) ||\n  check(typeof window == 'object' && window) ||\n  // eslint-disable-next-line no-restricted-globals -- safe\n  check(typeof self == 'object' && self) ||\n  check(typeof global == 'object' && global) ||\n  // eslint-disable-next-line no-new-func -- fallback\n  (function () { return this; })() || Function('return this')();\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar toObject = require('../internals/to-object');\n\nvar hasOwnProperty = uncurryThis({}.hasOwnProperty);\n\n// `HasOwnProperty` abstract operation\n// https://tc39.es/ecma262/#sec-hasownproperty\nmodule.exports = Object.hasOwn || function hasOwn(it, key) {\n  return hasOwnProperty(toObject(it), key);\n};\n","module.exports = {};\n","var global = require('../internals/global');\n\nmodule.exports = function (a, b) {\n  var console = global.console;\n  if (console && console.error) {\n    arguments.length == 1 ? console.error(a) : console.error(a, b);\n  }\n};\n","var getBuiltIn = require('../internals/get-built-in');\n\nmodule.exports = getBuiltIn('document', 'documentElement');\n","var DESCRIPTORS = require('../internals/descriptors');\nvar fails = require('../internals/fails');\nvar createElement = require('../internals/document-create-element');\n\n// Thanks to IE8 for its funny defineProperty\nmodule.exports = !DESCRIPTORS && !fails(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- required for testing\n  return Object.defineProperty(createElement('div'), 'a', {\n    get: function () { return 7; }\n  }).a != 7;\n});\n","var global = require('../internals/global');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar fails = require('../internals/fails');\nvar classof = require('../internals/classof-raw');\n\nvar Object = global.Object;\nvar split = uncurryThis(''.split);\n\n// fallback for non-array-like ES3 and non-enumerable old V8 strings\nmodule.exports = fails(function () {\n  // throws an error in rhino, see https://github.com/mozilla/rhino/issues/346\n  // eslint-disable-next-line no-prototype-builtins -- safe\n  return !Object('z').propertyIsEnumerable(0);\n}) ? function (it) {\n  return classof(it) == 'String' ? split(it, '') : Object(it);\n} : Object;\n","var isCallable = require('../internals/is-callable');\nvar isObject = require('../internals/is-object');\nvar setPrototypeOf = require('../internals/object-set-prototype-of');\n\n// makes subclassing work correct for wrapped built-ins\nmodule.exports = function ($this, dummy, Wrapper) {\n  var NewTarget, NewTargetPrototype;\n  if (\n    // it can work only with native `setPrototypeOf`\n    setPrototypeOf &&\n    // we haven't completely correct pre-ES6 way for getting `new.target`, so use this\n    isCallable(NewTarget = dummy.constructor) &&\n    NewTarget !== Wrapper &&\n    isObject(NewTargetPrototype = NewTarget.prototype) &&\n    NewTargetPrototype !== Wrapper.prototype\n  ) setPrototypeOf($this, NewTargetPrototype);\n  return $this;\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar isCallable = require('../internals/is-callable');\nvar store = require('../internals/shared-store');\n\nvar functionToString = uncurryThis(Function.toString);\n\n// this helper broken in `core-js@3.4.1-3.4.4`, so we can't use `shared` helper\nif (!isCallable(store.inspectSource)) {\n  store.inspectSource = function (it) {\n    return functionToString(it);\n  };\n}\n\nmodule.exports = store.inspectSource;\n","var $ = require('../internals/export');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar hiddenKeys = require('../internals/hidden-keys');\nvar isObject = require('../internals/is-object');\nvar hasOwn = require('../internals/has-own-property');\nvar defineProperty = require('../internals/object-define-property').f;\nvar getOwnPropertyNamesModule = require('../internals/object-get-own-property-names');\nvar getOwnPropertyNamesExternalModule = require('../internals/object-get-own-property-names-external');\nvar isExtensible = require('../internals/object-is-extensible');\nvar uid = require('../internals/uid');\nvar FREEZING = require('../internals/freezing');\n\nvar REQUIRED = false;\nvar METADATA = uid('meta');\nvar id = 0;\n\nvar setMetadata = function (it) {\n  defineProperty(it, METADATA, { value: {\n    objectID: 'O' + id++, // object ID\n    weakData: {}          // weak collections IDs\n  } });\n};\n\nvar fastKey = function (it, create) {\n  // return a primitive with prefix\n  if (!isObject(it)) return typeof it == 'symbol' ? it : (typeof it == 'string' ? 'S' : 'P') + it;\n  if (!hasOwn(it, METADATA)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return 'F';\n    // not necessary to add metadata\n    if (!create) return 'E';\n    // add missing metadata\n    setMetadata(it);\n  // return object ID\n  } return it[METADATA].objectID;\n};\n\nvar getWeakData = function (it, create) {\n  if (!hasOwn(it, METADATA)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return true;\n    // not necessary to add metadata\n    if (!create) return false;\n    // add missing metadata\n    setMetadata(it);\n  // return the store of weak collections IDs\n  } return it[METADATA].weakData;\n};\n\n// add metadata on freeze-family methods calling\nvar onFreeze = function (it) {\n  if (FREEZING && REQUIRED && isExtensible(it) && !hasOwn(it, METADATA)) setMetadata(it);\n  return it;\n};\n\nvar enable = function () {\n  meta.enable = function () { /* empty */ };\n  REQUIRED = true;\n  var getOwnPropertyNames = getOwnPropertyNamesModule.f;\n  var splice = uncurryThis([].splice);\n  var test = {};\n  test[METADATA] = 1;\n\n  // prevent exposing of metadata key\n  if (getOwnPropertyNames(test).length) {\n    getOwnPropertyNamesModule.f = function (it) {\n      var result = getOwnPropertyNames(it);\n      for (var i = 0, length = result.length; i < length; i++) {\n        if (result[i] === METADATA) {\n          splice(result, i, 1);\n          break;\n        }\n      } return result;\n    };\n\n    $({ target: 'Object', stat: true, forced: true }, {\n      getOwnPropertyNames: getOwnPropertyNamesExternalModule.f\n    });\n  }\n};\n\nvar meta = module.exports = {\n  enable: enable,\n  fastKey: fastKey,\n  getWeakData: getWeakData,\n  onFreeze: onFreeze\n};\n\nhiddenKeys[METADATA] = true;\n","var NATIVE_WEAK_MAP = require('../internals/native-weak-map');\nvar global = require('../internals/global');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar isObject = require('../internals/is-object');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar hasOwn = require('../internals/has-own-property');\nvar shared = require('../internals/shared-store');\nvar sharedKey = require('../internals/shared-key');\nvar hiddenKeys = require('../internals/hidden-keys');\n\nvar OBJECT_ALREADY_INITIALIZED = 'Object already initialized';\nvar TypeError = global.TypeError;\nvar WeakMap = global.WeakMap;\nvar set, get, has;\n\nvar enforce = function (it) {\n  return has(it) ? get(it) : set(it, {});\n};\n\nvar getterFor = function (TYPE) {\n  return function (it) {\n    var state;\n    if (!isObject(it) || (state = get(it)).type !== TYPE) {\n      throw TypeError('Incompatible receiver, ' + TYPE + ' required');\n    } return state;\n  };\n};\n\nif (NATIVE_WEAK_MAP || shared.state) {\n  var store = shared.state || (shared.state = new WeakMap());\n  var wmget = uncurryThis(store.get);\n  var wmhas = uncurryThis(store.has);\n  var wmset = uncurryThis(store.set);\n  set = function (it, metadata) {\n    if (wmhas(store, it)) throw new TypeError(OBJECT_ALREADY_INITIALIZED);\n    metadata.facade = it;\n    wmset(store, it, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return wmget(store, it) || {};\n  };\n  has = function (it) {\n    return wmhas(store, it);\n  };\n} else {\n  var STATE = sharedKey('state');\n  hiddenKeys[STATE] = true;\n  set = function (it, metadata) {\n    if (hasOwn(it, STATE)) throw new TypeError(OBJECT_ALREADY_INITIALIZED);\n    metadata.facade = it;\n    createNonEnumerableProperty(it, STATE, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return hasOwn(it, STATE) ? it[STATE] : {};\n  };\n  has = function (it) {\n    return hasOwn(it, STATE);\n  };\n}\n\nmodule.exports = {\n  set: set,\n  get: get,\n  has: has,\n  enforce: enforce,\n  getterFor: getterFor\n};\n","var wellKnownSymbol = require('../internals/well-known-symbol');\nvar Iterators = require('../internals/iterators');\n\nvar ITERATOR = wellKnownSymbol('iterator');\nvar ArrayPrototype = Array.prototype;\n\n// check on default Array iterator\nmodule.exports = function (it) {\n  return it !== undefined && (Iterators.Array === it || ArrayPrototype[ITERATOR] === it);\n};\n","var classof = require('../internals/classof-raw');\n\n// `IsArray` abstract operation\n// https://tc39.es/ecma262/#sec-isarray\n// eslint-disable-next-line es/no-array-isarray -- safe\nmodule.exports = Array.isArray || function isArray(argument) {\n  return classof(argument) == 'Array';\n};\n","// `IsCallable` abstract operation\n// https://tc39.es/ecma262/#sec-iscallable\nmodule.exports = function (argument) {\n  return typeof argument == 'function';\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar fails = require('../internals/fails');\nvar isCallable = require('../internals/is-callable');\nvar classof = require('../internals/classof');\nvar getBuiltIn = require('../internals/get-built-in');\nvar inspectSource = require('../internals/inspect-source');\n\nvar noop = function () { /* empty */ };\nvar empty = [];\nvar construct = getBuiltIn('Reflect', 'construct');\nvar constructorRegExp = /^\\s*(?:class|function)\\b/;\nvar exec = uncurryThis(constructorRegExp.exec);\nvar INCORRECT_TO_STRING = !constructorRegExp.exec(noop);\n\nvar isConstructorModern = function isConstructor(argument) {\n  if (!isCallable(argument)) return false;\n  try {\n    construct(noop, empty, argument);\n    return true;\n  } catch (error) {\n    return false;\n  }\n};\n\nvar isConstructorLegacy = function isConstructor(argument) {\n  if (!isCallable(argument)) return false;\n  switch (classof(argument)) {\n    case 'AsyncFunction':\n    case 'GeneratorFunction':\n    case 'AsyncGeneratorFunction': return false;\n  }\n  try {\n    // we can't check .prototype since constructors produced by .bind haven't it\n    // `Function#toString` throws on some built-it function in some legacy engines\n    // (for example, `DOMQuad` and similar in FF41-)\n    return INCORRECT_TO_STRING || !!exec(constructorRegExp, inspectSource(argument));\n  } catch (error) {\n    return true;\n  }\n};\n\nisConstructorLegacy.sham = true;\n\n// `IsConstructor` abstract operation\n// https://tc39.es/ecma262/#sec-isconstructor\nmodule.exports = !construct || fails(function () {\n  var called;\n  return isConstructorModern(isConstructorModern.call)\n    || !isConstructorModern(Object)\n    || !isConstructorModern(function () { called = true; })\n    || called;\n}) ? isConstructorLegacy : isConstructorModern;\n","var fails = require('../internals/fails');\nvar isCallable = require('../internals/is-callable');\n\nvar replacement = /#|\\.prototype\\./;\n\nvar isForced = function (feature, detection) {\n  var value = data[normalize(feature)];\n  return value == POLYFILL ? true\n    : value == NATIVE ? false\n    : isCallable(detection) ? fails(detection)\n    : !!detection;\n};\n\nvar normalize = isForced.normalize = function (string) {\n  return String(string).replace(replacement, '.').toLowerCase();\n};\n\nvar data = isForced.data = {};\nvar NATIVE = isForced.NATIVE = 'N';\nvar POLYFILL = isForced.POLYFILL = 'P';\n\nmodule.exports = isForced;\n","var isCallable = require('../internals/is-callable');\n\nmodule.exports = function (it) {\n  return typeof it == 'object' ? it !== null : isCallable(it);\n};\n","module.exports = false;\n","var isObject = require('../internals/is-object');\nvar classof = require('../internals/classof-raw');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar MATCH = wellKnownSymbol('match');\n\n// `IsRegExp` abstract operation\n// https://tc39.es/ecma262/#sec-isregexp\nmodule.exports = function (it) {\n  var isRegExp;\n  return isObject(it) && ((isRegExp = it[MATCH]) !== undefined ? !!isRegExp : classof(it) == 'RegExp');\n};\n","var global = require('../internals/global');\nvar getBuiltIn = require('../internals/get-built-in');\nvar isCallable = require('../internals/is-callable');\nvar isPrototypeOf = require('../internals/object-is-prototype-of');\nvar USE_SYMBOL_AS_UID = require('../internals/use-symbol-as-uid');\n\nvar Object = global.Object;\n\nmodule.exports = USE_SYMBOL_AS_UID ? function (it) {\n  return typeof it == 'symbol';\n} : function (it) {\n  var $Symbol = getBuiltIn('Symbol');\n  return isCallable($Symbol) && isPrototypeOf($Symbol.prototype, Object(it));\n};\n","var global = require('../internals/global');\nvar bind = require('../internals/function-bind-context');\nvar call = require('../internals/function-call');\nvar anObject = require('../internals/an-object');\nvar tryToString = require('../internals/try-to-string');\nvar isArrayIteratorMethod = require('../internals/is-array-iterator-method');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar isPrototypeOf = require('../internals/object-is-prototype-of');\nvar getIterator = require('../internals/get-iterator');\nvar getIteratorMethod = require('../internals/get-iterator-method');\nvar iteratorClose = require('../internals/iterator-close');\n\nvar TypeError = global.TypeError;\n\nvar Result = function (stopped, result) {\n  this.stopped = stopped;\n  this.result = result;\n};\n\nvar ResultPrototype = Result.prototype;\n\nmodule.exports = function (iterable, unboundFunction, options) {\n  var that = options && options.that;\n  var AS_ENTRIES = !!(options && options.AS_ENTRIES);\n  var IS_ITERATOR = !!(options && options.IS_ITERATOR);\n  var INTERRUPTED = !!(options && options.INTERRUPTED);\n  var fn = bind(unboundFunction, that);\n  var iterator, iterFn, index, length, result, next, step;\n\n  var stop = function (condition) {\n    if (iterator) iteratorClose(iterator, 'normal', condition);\n    return new Result(true, condition);\n  };\n\n  var callFn = function (value) {\n    if (AS_ENTRIES) {\n      anObject(value);\n      return INTERRUPTED ? fn(value[0], value[1], stop) : fn(value[0], value[1]);\n    } return INTERRUPTED ? fn(value, stop) : fn(value);\n  };\n\n  if (IS_ITERATOR) {\n    iterator = iterable;\n  } else {\n    iterFn = getIteratorMethod(iterable);\n    if (!iterFn) throw TypeError(tryToString(iterable) + ' is not iterable');\n    // optimisation for array iterators\n    if (isArrayIteratorMethod(iterFn)) {\n      for (index = 0, length = lengthOfArrayLike(iterable); length > index; index++) {\n        result = callFn(iterable[index]);\n        if (result && isPrototypeOf(ResultPrototype, result)) return result;\n      } return new Result(false);\n    }\n    iterator = getIterator(iterable, iterFn);\n  }\n\n  next = iterator.next;\n  while (!(step = call(next, iterator)).done) {\n    try {\n      result = callFn(step.value);\n    } catch (error) {\n      iteratorClose(iterator, 'throw', error);\n    }\n    if (typeof result == 'object' && result && isPrototypeOf(ResultPrototype, result)) return result;\n  } return new Result(false);\n};\n","var call = require('../internals/function-call');\nvar anObject = require('../internals/an-object');\nvar getMethod = require('../internals/get-method');\n\nmodule.exports = function (iterator, kind, value) {\n  var innerResult, innerError;\n  anObject(iterator);\n  try {\n    innerResult = getMethod(iterator, 'return');\n    if (!innerResult) {\n      if (kind === 'throw') throw value;\n      return value;\n    }\n    innerResult = call(innerResult, iterator);\n  } catch (error) {\n    innerError = true;\n    innerResult = error;\n  }\n  if (kind === 'throw') throw value;\n  if (innerError) throw innerResult;\n  anObject(innerResult);\n  return value;\n};\n","'use strict';\nvar fails = require('../internals/fails');\nvar isCallable = require('../internals/is-callable');\nvar create = require('../internals/object-create');\nvar getPrototypeOf = require('../internals/object-get-prototype-of');\nvar redefine = require('../internals/redefine');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar IS_PURE = require('../internals/is-pure');\n\nvar ITERATOR = wellKnownSymbol('iterator');\nvar BUGGY_SAFARI_ITERATORS = false;\n\n// `%IteratorPrototype%` object\n// https://tc39.es/ecma262/#sec-%iteratorprototype%-object\nvar IteratorPrototype, PrototypeOfArrayIteratorPrototype, arrayIterator;\n\n/* eslint-disable es/no-array-prototype-keys -- safe */\nif ([].keys) {\n  arrayIterator = [].keys();\n  // Safari 8 has buggy iterators w/o `next`\n  if (!('next' in arrayIterator)) BUGGY_SAFARI_ITERATORS = true;\n  else {\n    PrototypeOfArrayIteratorPrototype = getPrototypeOf(getPrototypeOf(arrayIterator));\n    if (PrototypeOfArrayIteratorPrototype !== Object.prototype) IteratorPrototype = PrototypeOfArrayIteratorPrototype;\n  }\n}\n\nvar NEW_ITERATOR_PROTOTYPE = IteratorPrototype == undefined || fails(function () {\n  var test = {};\n  // FF44- legacy iterators case\n  return IteratorPrototype[ITERATOR].call(test) !== test;\n});\n\nif (NEW_ITERATOR_PROTOTYPE) IteratorPrototype = {};\nelse if (IS_PURE) IteratorPrototype = create(IteratorPrototype);\n\n// `%IteratorPrototype%[@@iterator]()` method\n// https://tc39.es/ecma262/#sec-%iteratorprototype%-@@iterator\nif (!isCallable(IteratorPrototype[ITERATOR])) {\n  redefine(IteratorPrototype, ITERATOR, function () {\n    return this;\n  });\n}\n\nmodule.exports = {\n  IteratorPrototype: IteratorPrototype,\n  BUGGY_SAFARI_ITERATORS: BUGGY_SAFARI_ITERATORS\n};\n","module.exports = {};\n","var toLength = require('../internals/to-length');\n\n// `LengthOfArrayLike` abstract operation\n// https://tc39.es/ecma262/#sec-lengthofarraylike\nmodule.exports = function (obj) {\n  return toLength(obj.length);\n};\n","var global = require('../internals/global');\nvar bind = require('../internals/function-bind-context');\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar macrotask = require('../internals/task').set;\nvar IS_IOS = require('../internals/engine-is-ios');\nvar IS_IOS_PEBBLE = require('../internals/engine-is-ios-pebble');\nvar IS_WEBOS_WEBKIT = require('../internals/engine-is-webos-webkit');\nvar IS_NODE = require('../internals/engine-is-node');\n\nvar MutationObserver = global.MutationObserver || global.WebKitMutationObserver;\nvar document = global.document;\nvar process = global.process;\nvar Promise = global.Promise;\n// Node.js 11 shows ExperimentalWarning on getting `queueMicrotask`\nvar queueMicrotaskDescriptor = getOwnPropertyDescriptor(global, 'queueMicrotask');\nvar queueMicrotask = queueMicrotaskDescriptor && queueMicrotaskDescriptor.value;\n\nvar flush, head, last, notify, toggle, node, promise, then;\n\n// modern engines have queueMicrotask method\nif (!queueMicrotask) {\n  flush = function () {\n    var parent, fn;\n    if (IS_NODE && (parent = process.domain)) parent.exit();\n    while (head) {\n      fn = head.fn;\n      head = head.next;\n      try {\n        fn();\n      } catch (error) {\n        if (head) notify();\n        else last = undefined;\n        throw error;\n      }\n    } last = undefined;\n    if (parent) parent.enter();\n  };\n\n  // browsers with MutationObserver, except iOS - https://github.com/zloirock/core-js/issues/339\n  // also except WebOS Webkit https://github.com/zloirock/core-js/issues/898\n  if (!IS_IOS && !IS_NODE && !IS_WEBOS_WEBKIT && MutationObserver && document) {\n    toggle = true;\n    node = document.createTextNode('');\n    new MutationObserver(flush).observe(node, { characterData: true });\n    notify = function () {\n      node.data = toggle = !toggle;\n    };\n  // environments with maybe non-completely correct, but existent Promise\n  } else if (!IS_IOS_PEBBLE && Promise && Promise.resolve) {\n    // Promise.resolve without an argument throws an error in LG WebOS 2\n    promise = Promise.resolve(undefined);\n    // workaround of WebKit ~ iOS Safari 10.1 bug\n    promise.constructor = Promise;\n    then = bind(promise.then, promise);\n    notify = function () {\n      then(flush);\n    };\n  // Node.js without promises\n  } else if (IS_NODE) {\n    notify = function () {\n      process.nextTick(flush);\n    };\n  // for other environments - macrotask based on:\n  // - setImmediate\n  // - MessageChannel\n  // - window.postMessag\n  // - onreadystatechange\n  // - setTimeout\n  } else {\n    // strange IE + webpack dev server bug - use .bind(global)\n    macrotask = bind(macrotask, global);\n    notify = function () {\n      macrotask(flush);\n    };\n  }\n}\n\nmodule.exports = queueMicrotask || function (fn) {\n  var task = { fn: fn, next: undefined };\n  if (last) last.next = task;\n  if (!head) {\n    head = task;\n    notify();\n  } last = task;\n};\n","var global = require('../internals/global');\n\nmodule.exports = global.Promise;\n","/* eslint-disable es/no-symbol -- required for testing */\nvar V8_VERSION = require('../internals/engine-v8-version');\nvar fails = require('../internals/fails');\n\n// eslint-disable-next-line es/no-object-getownpropertysymbols -- required for testing\nmodule.exports = !!Object.getOwnPropertySymbols && !fails(function () {\n  var symbol = Symbol();\n  // Chrome 38 Symbol has incorrect toString conversion\n  // `get-own-property-symbols` polyfill symbols converted to object are not Symbol instances\n  return !String(symbol) || !(Object(symbol) instanceof Symbol) ||\n    // Chrome 38-40 symbols are not inherited from DOM collections prototypes to instances\n    !Symbol.sham && V8_VERSION && V8_VERSION < 41;\n});\n","var fails = require('../internals/fails');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar IS_PURE = require('../internals/is-pure');\n\nvar ITERATOR = wellKnownSymbol('iterator');\n\nmodule.exports = !fails(function () {\n  // eslint-disable-next-line unicorn/relative-url-style -- required for testing\n  var url = new URL('b?a=1&b=2&c=3', 'http://a');\n  var searchParams = url.searchParams;\n  var result = '';\n  url.pathname = 'c%20d';\n  searchParams.forEach(function (value, key) {\n    searchParams['delete']('b');\n    result += key + value;\n  });\n  return (IS_PURE && !url.toJSON)\n    || !searchParams.sort\n    || url.href !== 'http://a/c%20d?a=1&c=3'\n    || searchParams.get('c') !== '3'\n    || String(new URLSearchParams('?a=1')) !== 'a=1'\n    || !searchParams[ITERATOR]\n    // throws in Edge\n    || new URL('https://a@b').username !== 'a'\n    || new URLSearchParams(new URLSearchParams('a=b')).get('a') !== 'b'\n    // not punycoded in Edge\n    || new URL('http://тест').host !== 'xn--e1aybc'\n    // not escaped in Chrome 62-\n    || new URL('http://a#б').hash !== '#%D0%B1'\n    // fails in Chrome 66-\n    || result !== 'a1c3'\n    // throws in Safari\n    || new URL('http://x', undefined).host !== 'x';\n});\n","var global = require('../internals/global');\nvar isCallable = require('../internals/is-callable');\nvar inspectSource = require('../internals/inspect-source');\n\nvar WeakMap = global.WeakMap;\n\nmodule.exports = isCallable(WeakMap) && /native code/.test(inspectSource(WeakMap));\n","'use strict';\nvar aCallable = require('../internals/a-callable');\n\nvar PromiseCapability = function (C) {\n  var resolve, reject;\n  this.promise = new C(function ($$resolve, $$reject) {\n    if (resolve !== undefined || reject !== undefined) throw TypeError('Bad Promise constructor');\n    resolve = $$resolve;\n    reject = $$reject;\n  });\n  this.resolve = aCallable(resolve);\n  this.reject = aCallable(reject);\n};\n\n// `NewPromiseCapability` abstract operation\n// https://tc39.es/ecma262/#sec-newpromisecapability\nmodule.exports.f = function (C) {\n  return new PromiseCapability(C);\n};\n","var global = require('../internals/global');\nvar isRegExp = require('../internals/is-regexp');\n\nvar TypeError = global.TypeError;\n\nmodule.exports = function (it) {\n  if (isRegExp(it)) {\n    throw TypeError(\"The method doesn't accept regular expressions\");\n  } return it;\n};\n","var global = require('../internals/global');\nvar fails = require('../internals/fails');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar toString = require('../internals/to-string');\nvar trim = require('../internals/string-trim').trim;\nvar whitespaces = require('../internals/whitespaces');\n\nvar charAt = uncurryThis(''.charAt);\nvar n$ParseFloat = global.parseFloat;\nvar Symbol = global.Symbol;\nvar ITERATOR = Symbol && Symbol.iterator;\nvar FORCED = 1 / n$ParseFloat(whitespaces + '-0') !== -Infinity\n  // MS Edge 18- broken with boxed symbols\n  || (ITERATOR && !fails(function () { n$ParseFloat(Object(ITERATOR)); }));\n\n// `parseFloat` method\n// https://tc39.es/ecma262/#sec-parsefloat-string\nmodule.exports = FORCED ? function parseFloat(string) {\n  var trimmedString = trim(toString(string));\n  var result = n$ParseFloat(trimmedString);\n  return result === 0 && charAt(trimmedString, 0) == '-' ? -0 : result;\n} : n$ParseFloat;\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar call = require('../internals/function-call');\nvar fails = require('../internals/fails');\nvar objectKeys = require('../internals/object-keys');\nvar getOwnPropertySymbolsModule = require('../internals/object-get-own-property-symbols');\nvar propertyIsEnumerableModule = require('../internals/object-property-is-enumerable');\nvar toObject = require('../internals/to-object');\nvar IndexedObject = require('../internals/indexed-object');\n\n// eslint-disable-next-line es/no-object-assign -- safe\nvar $assign = Object.assign;\n// eslint-disable-next-line es/no-object-defineproperty -- required for testing\nvar defineProperty = Object.defineProperty;\nvar concat = uncurryThis([].concat);\n\n// `Object.assign` method\n// https://tc39.es/ecma262/#sec-object.assign\nmodule.exports = !$assign || fails(function () {\n  // should have correct order of operations (Edge bug)\n  if (DESCRIPTORS && $assign({ b: 1 }, $assign(defineProperty({}, 'a', {\n    enumerable: true,\n    get: function () {\n      defineProperty(this, 'b', {\n        value: 3,\n        enumerable: false\n      });\n    }\n  }), { b: 2 })).b !== 1) return true;\n  // should work with symbols and should have deterministic property order (V8 bug)\n  var A = {};\n  var B = {};\n  // eslint-disable-next-line es/no-symbol -- safe\n  var symbol = Symbol();\n  var alphabet = 'abcdefghijklmnopqrst';\n  A[symbol] = 7;\n  alphabet.split('').forEach(function (chr) { B[chr] = chr; });\n  return $assign({}, A)[symbol] != 7 || objectKeys($assign({}, B)).join('') != alphabet;\n}) ? function assign(target, source) { // eslint-disable-line no-unused-vars -- required for `.length`\n  var T = toObject(target);\n  var argumentsLength = arguments.length;\n  var index = 1;\n  var getOwnPropertySymbols = getOwnPropertySymbolsModule.f;\n  var propertyIsEnumerable = propertyIsEnumerableModule.f;\n  while (argumentsLength > index) {\n    var S = IndexedObject(arguments[index++]);\n    var keys = getOwnPropertySymbols ? concat(objectKeys(S), getOwnPropertySymbols(S)) : objectKeys(S);\n    var length = keys.length;\n    var j = 0;\n    var key;\n    while (length > j) {\n      key = keys[j++];\n      if (!DESCRIPTORS || call(propertyIsEnumerable, S, key)) T[key] = S[key];\n    }\n  } return T;\n} : $assign;\n","/* global ActiveXObject -- old IE, WSH */\nvar anObject = require('../internals/an-object');\nvar definePropertiesModule = require('../internals/object-define-properties');\nvar enumBugKeys = require('../internals/enum-bug-keys');\nvar hiddenKeys = require('../internals/hidden-keys');\nvar html = require('../internals/html');\nvar documentCreateElement = require('../internals/document-create-element');\nvar sharedKey = require('../internals/shared-key');\n\nvar GT = '>';\nvar LT = '<';\nvar PROTOTYPE = 'prototype';\nvar SCRIPT = 'script';\nvar IE_PROTO = sharedKey('IE_PROTO');\n\nvar EmptyConstructor = function () { /* empty */ };\n\nvar scriptTag = function (content) {\n  return LT + SCRIPT + GT + content + LT + '/' + SCRIPT + GT;\n};\n\n// Create object with fake `null` prototype: use ActiveX Object with cleared prototype\nvar NullProtoObjectViaActiveX = function (activeXDocument) {\n  activeXDocument.write(scriptTag(''));\n  activeXDocument.close();\n  var temp = activeXDocument.parentWindow.Object;\n  activeXDocument = null; // avoid memory leak\n  return temp;\n};\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar NullProtoObjectViaIFrame = function () {\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = documentCreateElement('iframe');\n  var JS = 'java' + SCRIPT + ':';\n  var iframeDocument;\n  iframe.style.display = 'none';\n  html.appendChild(iframe);\n  // https://github.com/zloirock/core-js/issues/475\n  iframe.src = String(JS);\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(scriptTag('document.F=Object'));\n  iframeDocument.close();\n  return iframeDocument.F;\n};\n\n// Check for document.domain and active x support\n// No need to use active x approach when document.domain is not set\n// see https://github.com/es-shims/es5-shim/issues/150\n// variation of https://github.com/kitcambridge/es5-shim/commit/4f738ac066346\n// avoid IE GC bug\nvar activeXDocument;\nvar NullProtoObject = function () {\n  try {\n    activeXDocument = new ActiveXObject('htmlfile');\n  } catch (error) { /* ignore */ }\n  NullProtoObject = typeof document != 'undefined'\n    ? document.domain && activeXDocument\n      ? NullProtoObjectViaActiveX(activeXDocument) // old IE\n      : NullProtoObjectViaIFrame()\n    : NullProtoObjectViaActiveX(activeXDocument); // WSH\n  var length = enumBugKeys.length;\n  while (length--) delete NullProtoObject[PROTOTYPE][enumBugKeys[length]];\n  return NullProtoObject();\n};\n\nhiddenKeys[IE_PROTO] = true;\n\n// `Object.create` method\n// https://tc39.es/ecma262/#sec-object.create\nmodule.exports = Object.create || function create(O, Properties) {\n  var result;\n  if (O !== null) {\n    EmptyConstructor[PROTOTYPE] = anObject(O);\n    result = new EmptyConstructor();\n    EmptyConstructor[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO] = O;\n  } else result = NullProtoObject();\n  return Properties === undefined ? result : definePropertiesModule.f(result, Properties);\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar V8_PROTOTYPE_DEFINE_BUG = require('../internals/v8-prototype-define-bug');\nvar definePropertyModule = require('../internals/object-define-property');\nvar anObject = require('../internals/an-object');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar objectKeys = require('../internals/object-keys');\n\n// `Object.defineProperties` method\n// https://tc39.es/ecma262/#sec-object.defineproperties\n// eslint-disable-next-line es/no-object-defineproperties -- safe\nexports.f = DESCRIPTORS && !V8_PROTOTYPE_DEFINE_BUG ? Object.defineProperties : function defineProperties(O, Properties) {\n  anObject(O);\n  var props = toIndexedObject(Properties);\n  var keys = objectKeys(Properties);\n  var length = keys.length;\n  var index = 0;\n  var key;\n  while (length > index) definePropertyModule.f(O, key = keys[index++], props[key]);\n  return O;\n};\n","var global = require('../internals/global');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar IE8_DOM_DEFINE = require('../internals/ie8-dom-define');\nvar V8_PROTOTYPE_DEFINE_BUG = require('../internals/v8-prototype-define-bug');\nvar anObject = require('../internals/an-object');\nvar toPropertyKey = require('../internals/to-property-key');\n\nvar TypeError = global.TypeError;\n// eslint-disable-next-line es/no-object-defineproperty -- safe\nvar $defineProperty = Object.defineProperty;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar $getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\nvar ENUMERABLE = 'enumerable';\nvar CONFIGURABLE = 'configurable';\nvar WRITABLE = 'writable';\n\n// `Object.defineProperty` method\n// https://tc39.es/ecma262/#sec-object.defineproperty\nexports.f = DESCRIPTORS ? V8_PROTOTYPE_DEFINE_BUG ? function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPropertyKey(P);\n  anObject(Attributes);\n  if (typeof O === 'function' && P === 'prototype' && 'value' in Attributes && WRITABLE in Attributes && !Attributes[WRITABLE]) {\n    var current = $getOwnPropertyDescriptor(O, P);\n    if (current && current[WRITABLE]) {\n      O[P] = Attributes.value;\n      Attributes = {\n        configurable: CONFIGURABLE in Attributes ? Attributes[CONFIGURABLE] : current[CONFIGURABLE],\n        enumerable: ENUMERABLE in Attributes ? Attributes[ENUMERABLE] : current[ENUMERABLE],\n        writable: false\n      };\n    }\n  } return $defineProperty(O, P, Attributes);\n} : $defineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPropertyKey(P);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return $defineProperty(O, P, Attributes);\n  } catch (error) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar call = require('../internals/function-call');\nvar propertyIsEnumerableModule = require('../internals/object-property-is-enumerable');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar toPropertyKey = require('../internals/to-property-key');\nvar hasOwn = require('../internals/has-own-property');\nvar IE8_DOM_DEFINE = require('../internals/ie8-dom-define');\n\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar $getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// `Object.getOwnPropertyDescriptor` method\n// https://tc39.es/ecma262/#sec-object.getownpropertydescriptor\nexports.f = DESCRIPTORS ? $getOwnPropertyDescriptor : function getOwnPropertyDescriptor(O, P) {\n  O = toIndexedObject(O);\n  P = toPropertyKey(P);\n  if (IE8_DOM_DEFINE) try {\n    return $getOwnPropertyDescriptor(O, P);\n  } catch (error) { /* empty */ }\n  if (hasOwn(O, P)) return createPropertyDescriptor(!call(propertyIsEnumerableModule.f, O, P), O[P]);\n};\n","/* eslint-disable es/no-object-getownpropertynames -- safe */\nvar classof = require('../internals/classof-raw');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar $getOwnPropertyNames = require('../internals/object-get-own-property-names').f;\nvar arraySlice = require('../internals/array-slice-simple');\n\nvar windowNames = typeof window == 'object' && window && Object.getOwnPropertyNames\n  ? Object.getOwnPropertyNames(window) : [];\n\nvar getWindowNames = function (it) {\n  try {\n    return $getOwnPropertyNames(it);\n  } catch (error) {\n    return arraySlice(windowNames);\n  }\n};\n\n// fallback for IE11 buggy Object.getOwnPropertyNames with iframe and window\nmodule.exports.f = function getOwnPropertyNames(it) {\n  return windowNames && classof(it) == 'Window'\n    ? getWindowNames(it)\n    : $getOwnPropertyNames(toIndexedObject(it));\n};\n","var internalObjectKeys = require('../internals/object-keys-internal');\nvar enumBugKeys = require('../internals/enum-bug-keys');\n\nvar hiddenKeys = enumBugKeys.concat('length', 'prototype');\n\n// `Object.getOwnPropertyNames` method\n// https://tc39.es/ecma262/#sec-object.getownpropertynames\n// eslint-disable-next-line es/no-object-getownpropertynames -- safe\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {\n  return internalObjectKeys(O, hiddenKeys);\n};\n","// eslint-disable-next-line es/no-object-getownpropertysymbols -- safe\nexports.f = Object.getOwnPropertySymbols;\n","var global = require('../internals/global');\nvar hasOwn = require('../internals/has-own-property');\nvar isCallable = require('../internals/is-callable');\nvar toObject = require('../internals/to-object');\nvar sharedKey = require('../internals/shared-key');\nvar CORRECT_PROTOTYPE_GETTER = require('../internals/correct-prototype-getter');\n\nvar IE_PROTO = sharedKey('IE_PROTO');\nvar Object = global.Object;\nvar ObjectPrototype = Object.prototype;\n\n// `Object.getPrototypeOf` method\n// https://tc39.es/ecma262/#sec-object.getprototypeof\nmodule.exports = CORRECT_PROTOTYPE_GETTER ? Object.getPrototypeOf : function (O) {\n  var object = toObject(O);\n  if (hasOwn(object, IE_PROTO)) return object[IE_PROTO];\n  var constructor = object.constructor;\n  if (isCallable(constructor) && object instanceof constructor) {\n    return constructor.prototype;\n  } return object instanceof Object ? ObjectPrototype : null;\n};\n","var fails = require('../internals/fails');\nvar isObject = require('../internals/is-object');\nvar classof = require('../internals/classof-raw');\nvar ARRAY_BUFFER_NON_EXTENSIBLE = require('../internals/array-buffer-non-extensible');\n\n// eslint-disable-next-line es/no-object-isextensible -- safe\nvar $isExtensible = Object.isExtensible;\nvar FAILS_ON_PRIMITIVES = fails(function () { $isExtensible(1); });\n\n// `Object.isExtensible` method\n// https://tc39.es/ecma262/#sec-object.isextensible\nmodule.exports = (FAILS_ON_PRIMITIVES || ARRAY_BUFFER_NON_EXTENSIBLE) ? function isExtensible(it) {\n  if (!isObject(it)) return false;\n  if (ARRAY_BUFFER_NON_EXTENSIBLE && classof(it) == 'ArrayBuffer') return false;\n  return $isExtensible ? $isExtensible(it) : true;\n} : $isExtensible;\n","var uncurryThis = require('../internals/function-uncurry-this');\n\nmodule.exports = uncurryThis({}.isPrototypeOf);\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar hasOwn = require('../internals/has-own-property');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar indexOf = require('../internals/array-includes').indexOf;\nvar hiddenKeys = require('../internals/hidden-keys');\n\nvar push = uncurryThis([].push);\n\nmodule.exports = function (object, names) {\n  var O = toIndexedObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) !hasOwn(hiddenKeys, key) && hasOwn(O, key) && push(result, key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (hasOwn(O, key = names[i++])) {\n    ~indexOf(result, key) || push(result, key);\n  }\n  return result;\n};\n","var internalObjectKeys = require('../internals/object-keys-internal');\nvar enumBugKeys = require('../internals/enum-bug-keys');\n\n// `Object.keys` method\n// https://tc39.es/ecma262/#sec-object.keys\n// eslint-disable-next-line es/no-object-keys -- safe\nmodule.exports = Object.keys || function keys(O) {\n  return internalObjectKeys(O, enumBugKeys);\n};\n","'use strict';\nvar $propertyIsEnumerable = {}.propertyIsEnumerable;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// Nashorn ~ JDK8 bug\nvar NASHORN_BUG = getOwnPropertyDescriptor && !$propertyIsEnumerable.call({ 1: 2 }, 1);\n\n// `Object.prototype.propertyIsEnumerable` method implementation\n// https://tc39.es/ecma262/#sec-object.prototype.propertyisenumerable\nexports.f = NASHORN_BUG ? function propertyIsEnumerable(V) {\n  var descriptor = getOwnPropertyDescriptor(this, V);\n  return !!descriptor && descriptor.enumerable;\n} : $propertyIsEnumerable;\n","/* eslint-disable no-proto -- safe */\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar anObject = require('../internals/an-object');\nvar aPossiblePrototype = require('../internals/a-possible-prototype');\n\n// `Object.setPrototypeOf` method\n// https://tc39.es/ecma262/#sec-object.setprototypeof\n// Works with __proto__ only. Old v8 can't work with null proto objects.\n// eslint-disable-next-line es/no-object-setprototypeof -- safe\nmodule.exports = Object.setPrototypeOf || ('__proto__' in {} ? function () {\n  var CORRECT_SETTER = false;\n  var test = {};\n  var setter;\n  try {\n    // eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\n    setter = uncurryThis(Object.getOwnPropertyDescriptor(Object.prototype, '__proto__').set);\n    setter(test, []);\n    CORRECT_SETTER = test instanceof Array;\n  } catch (error) { /* empty */ }\n  return function setPrototypeOf(O, proto) {\n    anObject(O);\n    aPossiblePrototype(proto);\n    if (CORRECT_SETTER) setter(O, proto);\n    else O.__proto__ = proto;\n    return O;\n  };\n}() : undefined);\n","'use strict';\nvar TO_STRING_TAG_SUPPORT = require('../internals/to-string-tag-support');\nvar classof = require('../internals/classof');\n\n// `Object.prototype.toString` method implementation\n// https://tc39.es/ecma262/#sec-object.prototype.tostring\nmodule.exports = TO_STRING_TAG_SUPPORT ? {}.toString : function toString() {\n  return '[object ' + classof(this) + ']';\n};\n","var global = require('../internals/global');\nvar call = require('../internals/function-call');\nvar isCallable = require('../internals/is-callable');\nvar isObject = require('../internals/is-object');\n\nvar TypeError = global.TypeError;\n\n// `OrdinaryToPrimitive` abstract operation\n// https://tc39.es/ecma262/#sec-ordinarytoprimitive\nmodule.exports = function (input, pref) {\n  var fn, val;\n  if (pref === 'string' && isCallable(fn = input.toString) && !isObject(val = call(fn, input))) return val;\n  if (isCallable(fn = input.valueOf) && !isObject(val = call(fn, input))) return val;\n  if (pref !== 'string' && isCallable(fn = input.toString) && !isObject(val = call(fn, input))) return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n","var getBuiltIn = require('../internals/get-built-in');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar getOwnPropertyNamesModule = require('../internals/object-get-own-property-names');\nvar getOwnPropertySymbolsModule = require('../internals/object-get-own-property-symbols');\nvar anObject = require('../internals/an-object');\n\nvar concat = uncurryThis([].concat);\n\n// all object keys, includes non-enumerable and symbols\nmodule.exports = getBuiltIn('Reflect', 'ownKeys') || function ownKeys(it) {\n  var keys = getOwnPropertyNamesModule.f(anObject(it));\n  var getOwnPropertySymbols = getOwnPropertySymbolsModule.f;\n  return getOwnPropertySymbols ? concat(keys, getOwnPropertySymbols(it)) : keys;\n};\n","var global = require('../internals/global');\n\nmodule.exports = global;\n","module.exports = function (exec) {\n  try {\n    return { error: false, value: exec() };\n  } catch (error) {\n    return { error: true, value: error };\n  }\n};\n","var anObject = require('../internals/an-object');\nvar isObject = require('../internals/is-object');\nvar newPromiseCapability = require('../internals/new-promise-capability');\n\nmodule.exports = function (C, x) {\n  anObject(C);\n  if (isObject(x) && x.constructor === C) return x;\n  var promiseCapability = newPromiseCapability.f(C);\n  var resolve = promiseCapability.resolve;\n  resolve(x);\n  return promiseCapability.promise;\n};\n","var Queue = function () {\n  this.head = null;\n  this.tail = null;\n};\n\nQueue.prototype = {\n  add: function (item) {\n    var entry = { item: item, next: null };\n    if (this.head) this.tail.next = entry;\n    else this.head = entry;\n    this.tail = entry;\n  },\n  get: function () {\n    var entry = this.head;\n    if (entry) {\n      this.head = entry.next;\n      if (this.tail === entry) this.tail = null;\n      return entry.item;\n    }\n  }\n};\n\nmodule.exports = Queue;\n","var redefine = require('../internals/redefine');\n\nmodule.exports = function (target, src, options) {\n  for (var key in src) redefine(target, key, src[key], options);\n  return target;\n};\n","var global = require('../internals/global');\nvar isCallable = require('../internals/is-callable');\nvar hasOwn = require('../internals/has-own-property');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar setGlobal = require('../internals/set-global');\nvar inspectSource = require('../internals/inspect-source');\nvar InternalStateModule = require('../internals/internal-state');\nvar CONFIGURABLE_FUNCTION_NAME = require('../internals/function-name').CONFIGURABLE;\n\nvar getInternalState = InternalStateModule.get;\nvar enforceInternalState = InternalStateModule.enforce;\nvar TEMPLATE = String(String).split('String');\n\n(module.exports = function (O, key, value, options) {\n  var unsafe = options ? !!options.unsafe : false;\n  var simple = options ? !!options.enumerable : false;\n  var noTargetGet = options ? !!options.noTargetGet : false;\n  var name = options && options.name !== undefined ? options.name : key;\n  var state;\n  if (isCallable(value)) {\n    if (String(name).slice(0, 7) === 'Symbol(') {\n      name = '[' + String(name).replace(/^Symbol\\(([^)]*)\\)/, '$1') + ']';\n    }\n    if (!hasOwn(value, 'name') || (CONFIGURABLE_FUNCTION_NAME && value.name !== name)) {\n      createNonEnumerableProperty(value, 'name', name);\n    }\n    state = enforceInternalState(value);\n    if (!state.source) {\n      state.source = TEMPLATE.join(typeof name == 'string' ? name : '');\n    }\n  }\n  if (O === global) {\n    if (simple) O[key] = value;\n    else setGlobal(key, value);\n    return;\n  } else if (!unsafe) {\n    delete O[key];\n  } else if (!noTargetGet && O[key]) {\n    simple = true;\n  }\n  if (simple) O[key] = value;\n  else createNonEnumerableProperty(O, key, value);\n// add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative\n})(Function.prototype, 'toString', function toString() {\n  return isCallable(this) && getInternalState(this).source || inspectSource(this);\n});\n","var global = require('../internals/global');\nvar call = require('../internals/function-call');\nvar anObject = require('../internals/an-object');\nvar isCallable = require('../internals/is-callable');\nvar classof = require('../internals/classof-raw');\nvar regexpExec = require('../internals/regexp-exec');\n\nvar TypeError = global.TypeError;\n\n// `RegExpExec` abstract operation\n// https://tc39.es/ecma262/#sec-regexpexec\nmodule.exports = function (R, S) {\n  var exec = R.exec;\n  if (isCallable(exec)) {\n    var result = call(exec, R, S);\n    if (result !== null) anObject(result);\n    return result;\n  }\n  if (classof(R) === 'RegExp') return call(regexpExec, R, S);\n  throw TypeError('RegExp#exec called on incompatible receiver');\n};\n","'use strict';\n/* eslint-disable regexp/no-empty-capturing-group, regexp/no-empty-group, regexp/no-lazy-ends -- testing */\n/* eslint-disable regexp/no-useless-quantifier -- testing */\nvar call = require('../internals/function-call');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar toString = require('../internals/to-string');\nvar regexpFlags = require('../internals/regexp-flags');\nvar stickyHelpers = require('../internals/regexp-sticky-helpers');\nvar shared = require('../internals/shared');\nvar create = require('../internals/object-create');\nvar getInternalState = require('../internals/internal-state').get;\nvar UNSUPPORTED_DOT_ALL = require('../internals/regexp-unsupported-dot-all');\nvar UNSUPPORTED_NCG = require('../internals/regexp-unsupported-ncg');\n\nvar nativeReplace = shared('native-string-replace', String.prototype.replace);\nvar nativeExec = RegExp.prototype.exec;\nvar patchedExec = nativeExec;\nvar charAt = uncurryThis(''.charAt);\nvar indexOf = uncurryThis(''.indexOf);\nvar replace = uncurryThis(''.replace);\nvar stringSlice = uncurryThis(''.slice);\n\nvar UPDATES_LAST_INDEX_WRONG = (function () {\n  var re1 = /a/;\n  var re2 = /b*/g;\n  call(nativeExec, re1, 'a');\n  call(nativeExec, re2, 'a');\n  return re1.lastIndex !== 0 || re2.lastIndex !== 0;\n})();\n\nvar UNSUPPORTED_Y = stickyHelpers.BROKEN_CARET;\n\n// nonparticipating capturing group, copied from es5-shim's String#split patch.\nvar NPCG_INCLUDED = /()??/.exec('')[1] !== undefined;\n\nvar PATCH = UPDATES_LAST_INDEX_WRONG || NPCG_INCLUDED || UNSUPPORTED_Y || UNSUPPORTED_DOT_ALL || UNSUPPORTED_NCG;\n\nif (PATCH) {\n  patchedExec = function exec(string) {\n    var re = this;\n    var state = getInternalState(re);\n    var str = toString(string);\n    var raw = state.raw;\n    var result, reCopy, lastIndex, match, i, object, group;\n\n    if (raw) {\n      raw.lastIndex = re.lastIndex;\n      result = call(patchedExec, raw, str);\n      re.lastIndex = raw.lastIndex;\n      return result;\n    }\n\n    var groups = state.groups;\n    var sticky = UNSUPPORTED_Y && re.sticky;\n    var flags = call(regexpFlags, re);\n    var source = re.source;\n    var charsAdded = 0;\n    var strCopy = str;\n\n    if (sticky) {\n      flags = replace(flags, 'y', '');\n      if (indexOf(flags, 'g') === -1) {\n        flags += 'g';\n      }\n\n      strCopy = stringSlice(str, re.lastIndex);\n      // Support anchored sticky behavior.\n      if (re.lastIndex > 0 && (!re.multiline || re.multiline && charAt(str, re.lastIndex - 1) !== '\\n')) {\n        source = '(?: ' + source + ')';\n        strCopy = ' ' + strCopy;\n        charsAdded++;\n      }\n      // ^(? + rx + ) is needed, in combination with some str slicing, to\n      // simulate the 'y' flag.\n      reCopy = new RegExp('^(?:' + source + ')', flags);\n    }\n\n    if (NPCG_INCLUDED) {\n      reCopy = new RegExp('^' + source + '$(?!\\\\s)', flags);\n    }\n    if (UPDATES_LAST_INDEX_WRONG) lastIndex = re.lastIndex;\n\n    match = call(nativeExec, sticky ? reCopy : re, strCopy);\n\n    if (sticky) {\n      if (match) {\n        match.input = stringSlice(match.input, charsAdded);\n        match[0] = stringSlice(match[0], charsAdded);\n        match.index = re.lastIndex;\n        re.lastIndex += match[0].length;\n      } else re.lastIndex = 0;\n    } else if (UPDATES_LAST_INDEX_WRONG && match) {\n      re.lastIndex = re.global ? match.index + match[0].length : lastIndex;\n    }\n    if (NPCG_INCLUDED && match && match.length > 1) {\n      // Fix browsers whose `exec` methods don't consistently return `undefined`\n      // for NPCG, like IE8. NOTE: This doesn' work for /(.?)?/\n      call(nativeReplace, match[0], reCopy, function () {\n        for (i = 1; i < arguments.length - 2; i++) {\n          if (arguments[i] === undefined) match[i] = undefined;\n        }\n      });\n    }\n\n    if (match && groups) {\n      match.groups = object = create(null);\n      for (i = 0; i < groups.length; i++) {\n        group = groups[i];\n        object[group[0]] = match[group[1]];\n      }\n    }\n\n    return match;\n  };\n}\n\nmodule.exports = patchedExec;\n","'use strict';\nvar anObject = require('../internals/an-object');\n\n// `RegExp.prototype.flags` getter implementation\n// https://tc39.es/ecma262/#sec-get-regexp.prototype.flags\nmodule.exports = function () {\n  var that = anObject(this);\n  var result = '';\n  if (that.global) result += 'g';\n  if (that.ignoreCase) result += 'i';\n  if (that.multiline) result += 'm';\n  if (that.dotAll) result += 's';\n  if (that.unicode) result += 'u';\n  if (that.sticky) result += 'y';\n  return result;\n};\n","var fails = require('../internals/fails');\nvar global = require('../internals/global');\n\n// babel-minify and Closure Compiler transpiles RegExp('a', 'y') -> /a/y and it causes SyntaxError\nvar $RegExp = global.RegExp;\n\nvar UNSUPPORTED_Y = fails(function () {\n  var re = $RegExp('a', 'y');\n  re.lastIndex = 2;\n  return re.exec('abcd') != null;\n});\n\n// UC Browser bug\n// https://github.com/zloirock/core-js/issues/1008\nvar MISSED_STICKY = UNSUPPORTED_Y || fails(function () {\n  return !$RegExp('a', 'y').sticky;\n});\n\nvar BROKEN_CARET = UNSUPPORTED_Y || fails(function () {\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=773687\n  var re = $RegExp('^r', 'gy');\n  re.lastIndex = 2;\n  return re.exec('str') != null;\n});\n\nmodule.exports = {\n  BROKEN_CARET: BROKEN_CARET,\n  MISSED_STICKY: MISSED_STICKY,\n  UNSUPPORTED_Y: UNSUPPORTED_Y\n};\n","var fails = require('../internals/fails');\nvar global = require('../internals/global');\n\n// babel-minify and Closure Compiler transpiles RegExp('.', 's') -> /./s and it causes SyntaxError\nvar $RegExp = global.RegExp;\n\nmodule.exports = fails(function () {\n  var re = $RegExp('.', 's');\n  return !(re.dotAll && re.exec('\\n') && re.flags === 's');\n});\n","var fails = require('../internals/fails');\nvar global = require('../internals/global');\n\n// babel-minify and Closure Compiler transpiles RegExp('(?<a>b)', 'g') -> /(?<a>b)/g and it causes SyntaxError\nvar $RegExp = global.RegExp;\n\nmodule.exports = fails(function () {\n  var re = $RegExp('(?<a>b)', 'g');\n  return re.exec('b').groups.a !== 'b' ||\n    'b'.replace(re, '$<a>c') !== 'bc';\n});\n","var global = require('../internals/global');\n\nvar TypeError = global.TypeError;\n\n// `RequireObjectCoercible` abstract operation\n// https://tc39.es/ecma262/#sec-requireobjectcoercible\nmodule.exports = function (it) {\n  if (it == undefined) throw TypeError(\"Can't call method on \" + it);\n  return it;\n};\n","var global = require('../internals/global');\n\n// eslint-disable-next-line es/no-object-defineproperty -- safe\nvar defineProperty = Object.defineProperty;\n\nmodule.exports = function (key, value) {\n  try {\n    defineProperty(global, key, { value: value, configurable: true, writable: true });\n  } catch (error) {\n    global[key] = value;\n  } return value;\n};\n","'use strict';\nvar getBuiltIn = require('../internals/get-built-in');\nvar definePropertyModule = require('../internals/object-define-property');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar DESCRIPTORS = require('../internals/descriptors');\n\nvar SPECIES = wellKnownSymbol('species');\n\nmodule.exports = function (CONSTRUCTOR_NAME) {\n  var Constructor = getBuiltIn(CONSTRUCTOR_NAME);\n  var defineProperty = definePropertyModule.f;\n\n  if (DESCRIPTORS && Constructor && !Constructor[SPECIES]) {\n    defineProperty(Constructor, SPECIES, {\n      configurable: true,\n      get: function () { return this; }\n    });\n  }\n};\n","var defineProperty = require('../internals/object-define-property').f;\nvar hasOwn = require('../internals/has-own-property');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\n\nmodule.exports = function (target, TAG, STATIC) {\n  if (target && !STATIC) target = target.prototype;\n  if (target && !hasOwn(target, TO_STRING_TAG)) {\n    defineProperty(target, TO_STRING_TAG, { configurable: true, value: TAG });\n  }\n};\n","var shared = require('../internals/shared');\nvar uid = require('../internals/uid');\n\nvar keys = shared('keys');\n\nmodule.exports = function (key) {\n  return keys[key] || (keys[key] = uid(key));\n};\n","var global = require('../internals/global');\nvar setGlobal = require('../internals/set-global');\n\nvar SHARED = '__core-js_shared__';\nvar store = global[SHARED] || setGlobal(SHARED, {});\n\nmodule.exports = store;\n","var IS_PURE = require('../internals/is-pure');\nvar store = require('../internals/shared-store');\n\n(module.exports = function (key, value) {\n  return store[key] || (store[key] = value !== undefined ? value : {});\n})('versions', []).push({\n  version: '3.21.1',\n  mode: IS_PURE ? 'pure' : 'global',\n  copyright: '© 2014-2022 Denis Pushkarev (zloirock.ru)',\n  license: 'https://github.com/zloirock/core-js/blob/v3.21.1/LICENSE',\n  source: 'https://github.com/zloirock/core-js'\n});\n","var anObject = require('../internals/an-object');\nvar aConstructor = require('../internals/a-constructor');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar SPECIES = wellKnownSymbol('species');\n\n// `SpeciesConstructor` abstract operation\n// https://tc39.es/ecma262/#sec-speciesconstructor\nmodule.exports = function (O, defaultConstructor) {\n  var C = anObject(O).constructor;\n  var S;\n  return C === undefined || (S = anObject(C)[SPECIES]) == undefined ? defaultConstructor : aConstructor(S);\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\nvar toString = require('../internals/to-string');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\nvar charAt = uncurryThis(''.charAt);\nvar charCodeAt = uncurryThis(''.charCodeAt);\nvar stringSlice = uncurryThis(''.slice);\n\nvar createMethod = function (CONVERT_TO_STRING) {\n  return function ($this, pos) {\n    var S = toString(requireObjectCoercible($this));\n    var position = toIntegerOrInfinity(pos);\n    var size = S.length;\n    var first, second;\n    if (position < 0 || position >= size) return CONVERT_TO_STRING ? '' : undefined;\n    first = charCodeAt(S, position);\n    return first < 0xD800 || first > 0xDBFF || position + 1 === size\n      || (second = charCodeAt(S, position + 1)) < 0xDC00 || second > 0xDFFF\n        ? CONVERT_TO_STRING\n          ? charAt(S, position)\n          : first\n        : CONVERT_TO_STRING\n          ? stringSlice(S, position, position + 2)\n          : (first - 0xD800 << 10) + (second - 0xDC00) + 0x10000;\n  };\n};\n\nmodule.exports = {\n  // `String.prototype.codePointAt` method\n  // https://tc39.es/ecma262/#sec-string.prototype.codepointat\n  codeAt: createMethod(false),\n  // `String.prototype.at` method\n  // https://github.com/mathiasbynens/String.prototype.at\n  charAt: createMethod(true)\n};\n","'use strict';\n// based on https://github.com/bestiejs/punycode.js/blob/master/punycode.js\nvar global = require('../internals/global');\nvar uncurryThis = require('../internals/function-uncurry-this');\n\nvar maxInt = 2147483647; // aka. 0x7FFFFFFF or 2^31-1\nvar base = 36;\nvar tMin = 1;\nvar tMax = 26;\nvar skew = 38;\nvar damp = 700;\nvar initialBias = 72;\nvar initialN = 128; // 0x80\nvar delimiter = '-'; // '\\x2D'\nvar regexNonASCII = /[^\\0-\\u007E]/; // non-ASCII chars\nvar regexSeparators = /[.\\u3002\\uFF0E\\uFF61]/g; // RFC 3490 separators\nvar OVERFLOW_ERROR = 'Overflow: input needs wider integers to process';\nvar baseMinusTMin = base - tMin;\n\nvar RangeError = global.RangeError;\nvar exec = uncurryThis(regexSeparators.exec);\nvar floor = Math.floor;\nvar fromCharCode = String.fromCharCode;\nvar charCodeAt = uncurryThis(''.charCodeAt);\nvar join = uncurryThis([].join);\nvar push = uncurryThis([].push);\nvar replace = uncurryThis(''.replace);\nvar split = uncurryThis(''.split);\nvar toLowerCase = uncurryThis(''.toLowerCase);\n\n/**\n * Creates an array containing the numeric code points of each Unicode\n * character in the string. While JavaScript uses UCS-2 internally,\n * this function will convert a pair of surrogate halves (each of which\n * UCS-2 exposes as separate characters) into a single code point,\n * matching UTF-16.\n */\nvar ucs2decode = function (string) {\n  var output = [];\n  var counter = 0;\n  var length = string.length;\n  while (counter < length) {\n    var value = charCodeAt(string, counter++);\n    if (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n      // It's a high surrogate, and there is a next character.\n      var extra = charCodeAt(string, counter++);\n      if ((extra & 0xFC00) == 0xDC00) { // Low surrogate.\n        push(output, ((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n      } else {\n        // It's an unmatched surrogate; only append this code unit, in case the\n        // next code unit is the high surrogate of a surrogate pair.\n        push(output, value);\n        counter--;\n      }\n    } else {\n      push(output, value);\n    }\n  }\n  return output;\n};\n\n/**\n * Converts a digit/integer into a basic code point.\n */\nvar digitToBasic = function (digit) {\n  //  0..25 map to ASCII a..z or A..Z\n  // 26..35 map to ASCII 0..9\n  return digit + 22 + 75 * (digit < 26);\n};\n\n/**\n * Bias adaptation function as per section 3.4 of RFC 3492.\n * https://tools.ietf.org/html/rfc3492#section-3.4\n */\nvar adapt = function (delta, numPoints, firstTime) {\n  var k = 0;\n  delta = firstTime ? floor(delta / damp) : delta >> 1;\n  delta += floor(delta / numPoints);\n  while (delta > baseMinusTMin * tMax >> 1) {\n    delta = floor(delta / baseMinusTMin);\n    k += base;\n  }\n  return floor(k + (baseMinusTMin + 1) * delta / (delta + skew));\n};\n\n/**\n * Converts a string of Unicode symbols (e.g. a domain name label) to a\n * Punycode string of ASCII-only symbols.\n */\nvar encode = function (input) {\n  var output = [];\n\n  // Convert the input in UCS-2 to an array of Unicode code points.\n  input = ucs2decode(input);\n\n  // Cache the length.\n  var inputLength = input.length;\n\n  // Initialize the state.\n  var n = initialN;\n  var delta = 0;\n  var bias = initialBias;\n  var i, currentValue;\n\n  // Handle the basic code points.\n  for (i = 0; i < input.length; i++) {\n    currentValue = input[i];\n    if (currentValue < 0x80) {\n      push(output, fromCharCode(currentValue));\n    }\n  }\n\n  var basicLength = output.length; // number of basic code points.\n  var handledCPCount = basicLength; // number of code points that have been handled;\n\n  // Finish the basic string with a delimiter unless it's empty.\n  if (basicLength) {\n    push(output, delimiter);\n  }\n\n  // Main encoding loop:\n  while (handledCPCount < inputLength) {\n    // All non-basic code points < n have been handled already. Find the next larger one:\n    var m = maxInt;\n    for (i = 0; i < input.length; i++) {\n      currentValue = input[i];\n      if (currentValue >= n && currentValue < m) {\n        m = currentValue;\n      }\n    }\n\n    // Increase `delta` enough to advance the decoder's <n,i> state to <m,0>, but guard against overflow.\n    var handledCPCountPlusOne = handledCPCount + 1;\n    if (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {\n      throw RangeError(OVERFLOW_ERROR);\n    }\n\n    delta += (m - n) * handledCPCountPlusOne;\n    n = m;\n\n    for (i = 0; i < input.length; i++) {\n      currentValue = input[i];\n      if (currentValue < n && ++delta > maxInt) {\n        throw RangeError(OVERFLOW_ERROR);\n      }\n      if (currentValue == n) {\n        // Represent delta as a generalized variable-length integer.\n        var q = delta;\n        var k = base;\n        while (true) {\n          var t = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n          if (q < t) break;\n          var qMinusT = q - t;\n          var baseMinusT = base - t;\n          push(output, fromCharCode(digitToBasic(t + qMinusT % baseMinusT)));\n          q = floor(qMinusT / baseMinusT);\n          k += base;\n        }\n\n        push(output, fromCharCode(digitToBasic(q)));\n        bias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);\n        delta = 0;\n        handledCPCount++;\n      }\n    }\n\n    delta++;\n    n++;\n  }\n  return join(output, '');\n};\n\nmodule.exports = function (input) {\n  var encoded = [];\n  var labels = split(replace(toLowerCase(input), regexSeparators, '\\u002E'), '.');\n  var i, label;\n  for (i = 0; i < labels.length; i++) {\n    label = labels[i];\n    push(encoded, exec(regexNonASCII, label) ? 'xn--' + encode(label) : label);\n  }\n  return join(encoded, '.');\n};\n","'use strict';\nvar global = require('../internals/global');\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\nvar toString = require('../internals/to-string');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\nvar RangeError = global.RangeError;\n\n// `String.prototype.repeat` method implementation\n// https://tc39.es/ecma262/#sec-string.prototype.repeat\nmodule.exports = function repeat(count) {\n  var str = toString(requireObjectCoercible(this));\n  var result = '';\n  var n = toIntegerOrInfinity(count);\n  if (n < 0 || n == Infinity) throw RangeError('Wrong number of repetitions');\n  for (;n > 0; (n >>>= 1) && (str += str)) if (n & 1) result += str;\n  return result;\n};\n","var PROPER_FUNCTION_NAME = require('../internals/function-name').PROPER;\nvar fails = require('../internals/fails');\nvar whitespaces = require('../internals/whitespaces');\n\nvar non = '\\u200B\\u0085\\u180E';\n\n// check that a method works with the correct list\n// of whitespaces and has a correct name\nmodule.exports = function (METHOD_NAME) {\n  return fails(function () {\n    return !!whitespaces[METHOD_NAME]()\n      || non[METHOD_NAME]() !== non\n      || (PROPER_FUNCTION_NAME && whitespaces[METHOD_NAME].name !== METHOD_NAME);\n  });\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar toString = require('../internals/to-string');\nvar whitespaces = require('../internals/whitespaces');\n\nvar replace = uncurryThis(''.replace);\nvar whitespace = '[' + whitespaces + ']';\nvar ltrim = RegExp('^' + whitespace + whitespace + '*');\nvar rtrim = RegExp(whitespace + whitespace + '*$');\n\n// `String.prototype.{ trim, trimStart, trimEnd, trimLeft, trimRight }` methods implementation\nvar createMethod = function (TYPE) {\n  return function ($this) {\n    var string = toString(requireObjectCoercible($this));\n    if (TYPE & 1) string = replace(string, ltrim, '');\n    if (TYPE & 2) string = replace(string, rtrim, '');\n    return string;\n  };\n};\n\nmodule.exports = {\n  // `String.prototype.{ trimLeft, trimStart }` methods\n  // https://tc39.es/ecma262/#sec-string.prototype.trimstart\n  start: createMethod(1),\n  // `String.prototype.{ trimRight, trimEnd }` methods\n  // https://tc39.es/ecma262/#sec-string.prototype.trimend\n  end: createMethod(2),\n  // `String.prototype.trim` method\n  // https://tc39.es/ecma262/#sec-string.prototype.trim\n  trim: createMethod(3)\n};\n","var global = require('../internals/global');\nvar apply = require('../internals/function-apply');\nvar bind = require('../internals/function-bind-context');\nvar isCallable = require('../internals/is-callable');\nvar hasOwn = require('../internals/has-own-property');\nvar fails = require('../internals/fails');\nvar html = require('../internals/html');\nvar arraySlice = require('../internals/array-slice');\nvar createElement = require('../internals/document-create-element');\nvar validateArgumentsLength = require('../internals/validate-arguments-length');\nvar IS_IOS = require('../internals/engine-is-ios');\nvar IS_NODE = require('../internals/engine-is-node');\n\nvar set = global.setImmediate;\nvar clear = global.clearImmediate;\nvar process = global.process;\nvar Dispatch = global.Dispatch;\nvar Function = global.Function;\nvar MessageChannel = global.MessageChannel;\nvar String = global.String;\nvar counter = 0;\nvar queue = {};\nvar ONREADYSTATECHANGE = 'onreadystatechange';\nvar location, defer, channel, port;\n\ntry {\n  // Deno throws a ReferenceError on `location` access without `--location` flag\n  location = global.location;\n} catch (error) { /* empty */ }\n\nvar run = function (id) {\n  if (hasOwn(queue, id)) {\n    var fn = queue[id];\n    delete queue[id];\n    fn();\n  }\n};\n\nvar runner = function (id) {\n  return function () {\n    run(id);\n  };\n};\n\nvar listener = function (event) {\n  run(event.data);\n};\n\nvar post = function (id) {\n  // old engines have not location.origin\n  global.postMessage(String(id), location.protocol + '//' + location.host);\n};\n\n// Node.js 0.9+ & IE10+ has setImmediate, otherwise:\nif (!set || !clear) {\n  set = function setImmediate(handler) {\n    validateArgumentsLength(arguments.length, 1);\n    var fn = isCallable(handler) ? handler : Function(handler);\n    var args = arraySlice(arguments, 1);\n    queue[++counter] = function () {\n      apply(fn, undefined, args);\n    };\n    defer(counter);\n    return counter;\n  };\n  clear = function clearImmediate(id) {\n    delete queue[id];\n  };\n  // Node.js 0.8-\n  if (IS_NODE) {\n    defer = function (id) {\n      process.nextTick(runner(id));\n    };\n  // Sphere (JS game engine) Dispatch API\n  } else if (Dispatch && Dispatch.now) {\n    defer = function (id) {\n      Dispatch.now(runner(id));\n    };\n  // Browsers with MessageChannel, includes WebWorkers\n  // except iOS - https://github.com/zloirock/core-js/issues/624\n  } else if (MessageChannel && !IS_IOS) {\n    channel = new MessageChannel();\n    port = channel.port2;\n    channel.port1.onmessage = listener;\n    defer = bind(port.postMessage, port);\n  // Browsers with postMessage, skip WebWorkers\n  // IE8 has postMessage, but it's sync & typeof its postMessage is 'object'\n  } else if (\n    global.addEventListener &&\n    isCallable(global.postMessage) &&\n    !global.importScripts &&\n    location && location.protocol !== 'file:' &&\n    !fails(post)\n  ) {\n    defer = post;\n    global.addEventListener('message', listener, false);\n  // IE8-\n  } else if (ONREADYSTATECHANGE in createElement('script')) {\n    defer = function (id) {\n      html.appendChild(createElement('script'))[ONREADYSTATECHANGE] = function () {\n        html.removeChild(this);\n        run(id);\n      };\n    };\n  // Rest old browsers\n  } else {\n    defer = function (id) {\n      setTimeout(runner(id), 0);\n    };\n  }\n}\n\nmodule.exports = {\n  set: set,\n  clear: clear\n};\n","var toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\n\nvar max = Math.max;\nvar min = Math.min;\n\n// Helper for a popular repeating case of the spec:\n// Let integer be ? ToInteger(index).\n// If integer < 0, let result be max((length + integer), 0); else let result be min(integer, length).\nmodule.exports = function (index, length) {\n  var integer = toIntegerOrInfinity(index);\n  return integer < 0 ? max(integer + length, 0) : min(integer, length);\n};\n","// toObject with fallback for non-array-like ES3 strings\nvar IndexedObject = require('../internals/indexed-object');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\nmodule.exports = function (it) {\n  return IndexedObject(requireObjectCoercible(it));\n};\n","var ceil = Math.ceil;\nvar floor = Math.floor;\n\n// `ToIntegerOrInfinity` abstract operation\n// https://tc39.es/ecma262/#sec-tointegerorinfinity\nmodule.exports = function (argument) {\n  var number = +argument;\n  // eslint-disable-next-line no-self-compare -- safe\n  return number !== number || number === 0 ? 0 : (number > 0 ? floor : ceil)(number);\n};\n","var toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\n\nvar min = Math.min;\n\n// `ToLength` abstract operation\n// https://tc39.es/ecma262/#sec-tolength\nmodule.exports = function (argument) {\n  return argument > 0 ? min(toIntegerOrInfinity(argument), 0x1FFFFFFFFFFFFF) : 0; // 2 ** 53 - 1 == 9007199254740991\n};\n","var global = require('../internals/global');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\nvar Object = global.Object;\n\n// `ToObject` abstract operation\n// https://tc39.es/ecma262/#sec-toobject\nmodule.exports = function (argument) {\n  return Object(requireObjectCoercible(argument));\n};\n","var global = require('../internals/global');\nvar call = require('../internals/function-call');\nvar isObject = require('../internals/is-object');\nvar isSymbol = require('../internals/is-symbol');\nvar getMethod = require('../internals/get-method');\nvar ordinaryToPrimitive = require('../internals/ordinary-to-primitive');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TypeError = global.TypeError;\nvar TO_PRIMITIVE = wellKnownSymbol('toPrimitive');\n\n// `ToPrimitive` abstract operation\n// https://tc39.es/ecma262/#sec-toprimitive\nmodule.exports = function (input, pref) {\n  if (!isObject(input) || isSymbol(input)) return input;\n  var exoticToPrim = getMethod(input, TO_PRIMITIVE);\n  var result;\n  if (exoticToPrim) {\n    if (pref === undefined) pref = 'default';\n    result = call(exoticToPrim, input, pref);\n    if (!isObject(result) || isSymbol(result)) return result;\n    throw TypeError(\"Can't convert object to primitive value\");\n  }\n  if (pref === undefined) pref = 'number';\n  return ordinaryToPrimitive(input, pref);\n};\n","var toPrimitive = require('../internals/to-primitive');\nvar isSymbol = require('../internals/is-symbol');\n\n// `ToPropertyKey` abstract operation\n// https://tc39.es/ecma262/#sec-topropertykey\nmodule.exports = function (argument) {\n  var key = toPrimitive(argument, 'string');\n  return isSymbol(key) ? key : key + '';\n};\n","var wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar test = {};\n\ntest[TO_STRING_TAG] = 'z';\n\nmodule.exports = String(test) === '[object z]';\n","var global = require('../internals/global');\nvar classof = require('../internals/classof');\n\nvar String = global.String;\n\nmodule.exports = function (argument) {\n  if (classof(argument) === 'Symbol') throw TypeError('Cannot convert a Symbol value to a string');\n  return String(argument);\n};\n","var global = require('../internals/global');\n\nvar String = global.String;\n\nmodule.exports = function (argument) {\n  try {\n    return String(argument);\n  } catch (error) {\n    return 'Object';\n  }\n};\n","var uncurryThis = require('../internals/function-uncurry-this');\n\nvar id = 0;\nvar postfix = Math.random();\nvar toString = uncurryThis(1.0.toString);\n\nmodule.exports = function (key) {\n  return 'Symbol(' + (key === undefined ? '' : key) + ')_' + toString(++id + postfix, 36);\n};\n","/* eslint-disable es/no-symbol -- required for testing */\nvar NATIVE_SYMBOL = require('../internals/native-symbol');\n\nmodule.exports = NATIVE_SYMBOL\n  && !Symbol.sham\n  && typeof Symbol.iterator == 'symbol';\n","var DESCRIPTORS = require('../internals/descriptors');\nvar fails = require('../internals/fails');\n\n// V8 ~ Chrome 36-\n// https://bugs.chromium.org/p/v8/issues/detail?id=3334\nmodule.exports = DESCRIPTORS && fails(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- required for testing\n  return Object.defineProperty(function () { /* empty */ }, 'prototype', {\n    value: 42,\n    writable: false\n  }).prototype != 42;\n});\n","var global = require('../internals/global');\n\nvar TypeError = global.TypeError;\n\nmodule.exports = function (passed, required) {\n  if (passed < required) throw TypeError('Not enough arguments');\n  return passed;\n};\n","var wellKnownSymbol = require('../internals/well-known-symbol');\n\nexports.f = wellKnownSymbol;\n","var global = require('../internals/global');\nvar shared = require('../internals/shared');\nvar hasOwn = require('../internals/has-own-property');\nvar uid = require('../internals/uid');\nvar NATIVE_SYMBOL = require('../internals/native-symbol');\nvar USE_SYMBOL_AS_UID = require('../internals/use-symbol-as-uid');\n\nvar WellKnownSymbolsStore = shared('wks');\nvar Symbol = global.Symbol;\nvar symbolFor = Symbol && Symbol['for'];\nvar createWellKnownSymbol = USE_SYMBOL_AS_UID ? Symbol : Symbol && Symbol.withoutSetter || uid;\n\nmodule.exports = function (name) {\n  if (!hasOwn(WellKnownSymbolsStore, name) || !(NATIVE_SYMBOL || typeof WellKnownSymbolsStore[name] == 'string')) {\n    var description = 'Symbol.' + name;\n    if (NATIVE_SYMBOL && hasOwn(Symbol, name)) {\n      WellKnownSymbolsStore[name] = Symbol[name];\n    } else if (USE_SYMBOL_AS_UID && symbolFor) {\n      WellKnownSymbolsStore[name] = symbolFor(description);\n    } else {\n      WellKnownSymbolsStore[name] = createWellKnownSymbol(description);\n    }\n  } return WellKnownSymbolsStore[name];\n};\n","// a string of all valid unicode whitespaces\nmodule.exports = '\\u0009\\u000A\\u000B\\u000C\\u000D\\u0020\\u00A0\\u1680\\u2000\\u2001\\u2002' +\n  '\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF';\n","'use strict';\nvar $ = require('../internals/export');\nvar global = require('../internals/global');\nvar fails = require('../internals/fails');\nvar isArray = require('../internals/is-array');\nvar isObject = require('../internals/is-object');\nvar toObject = require('../internals/to-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar createProperty = require('../internals/create-property');\nvar arraySpeciesCreate = require('../internals/array-species-create');\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar V8_VERSION = require('../internals/engine-v8-version');\n\nvar IS_CONCAT_SPREADABLE = wellKnownSymbol('isConcatSpreadable');\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF;\nvar MAXIMUM_ALLOWED_INDEX_EXCEEDED = 'Maximum allowed index exceeded';\nvar TypeError = global.TypeError;\n\n// We can't use this feature detection in V8 since it causes\n// deoptimization and serious performance degradation\n// https://github.com/zloirock/core-js/issues/679\nvar IS_CONCAT_SPREADABLE_SUPPORT = V8_VERSION >= 51 || !fails(function () {\n  var array = [];\n  array[IS_CONCAT_SPREADABLE] = false;\n  return array.concat()[0] !== array;\n});\n\nvar SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('concat');\n\nvar isConcatSpreadable = function (O) {\n  if (!isObject(O)) return false;\n  var spreadable = O[IS_CONCAT_SPREADABLE];\n  return spreadable !== undefined ? !!spreadable : isArray(O);\n};\n\nvar FORCED = !IS_CONCAT_SPREADABLE_SUPPORT || !SPECIES_SUPPORT;\n\n// `Array.prototype.concat` method\n// https://tc39.es/ecma262/#sec-array.prototype.concat\n// with adding support of @@isConcatSpreadable and @@species\n$({ target: 'Array', proto: true, forced: FORCED }, {\n  // eslint-disable-next-line no-unused-vars -- required for `.length`\n  concat: function concat(arg) {\n    var O = toObject(this);\n    var A = arraySpeciesCreate(O, 0);\n    var n = 0;\n    var i, k, length, len, E;\n    for (i = -1, length = arguments.length; i < length; i++) {\n      E = i === -1 ? O : arguments[i];\n      if (isConcatSpreadable(E)) {\n        len = lengthOfArrayLike(E);\n        if (n + len > MAX_SAFE_INTEGER) throw TypeError(MAXIMUM_ALLOWED_INDEX_EXCEEDED);\n        for (k = 0; k < len; k++, n++) if (k in E) createProperty(A, n, E[k]);\n      } else {\n        if (n >= MAX_SAFE_INTEGER) throw TypeError(MAXIMUM_ALLOWED_INDEX_EXCEEDED);\n        createProperty(A, n++, E);\n      }\n    }\n    A.length = n;\n    return A;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar $filter = require('../internals/array-iteration').filter;\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('filter');\n\n// `Array.prototype.filter` method\n// https://tc39.es/ecma262/#sec-array.prototype.filter\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  filter: function filter(callbackfn /* , thisArg */) {\n    return $filter(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar forEach = require('../internals/array-for-each');\n\n// `Array.prototype.forEach` method\n// https://tc39.es/ecma262/#sec-array.prototype.foreach\n// eslint-disable-next-line es/no-array-prototype-foreach -- safe\n$({ target: 'Array', proto: true, forced: [].forEach != forEach }, {\n  forEach: forEach\n});\n","var $ = require('../internals/export');\nvar from = require('../internals/array-from');\nvar checkCorrectnessOfIteration = require('../internals/check-correctness-of-iteration');\n\nvar INCORRECT_ITERATION = !checkCorrectnessOfIteration(function (iterable) {\n  // eslint-disable-next-line es/no-array-from -- required for testing\n  Array.from(iterable);\n});\n\n// `Array.from` method\n// https://tc39.es/ecma262/#sec-array.from\n$({ target: 'Array', stat: true, forced: INCORRECT_ITERATION }, {\n  from: from\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar $includes = require('../internals/array-includes').includes;\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\n// `Array.prototype.includes` method\n// https://tc39.es/ecma262/#sec-array.prototype.includes\n$({ target: 'Array', proto: true }, {\n  includes: function includes(el /* , fromIndex = 0 */) {\n    return $includes(this, el, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('includes');\n","'use strict';\n/* eslint-disable es/no-array-prototype-indexof -- required for testing */\nvar $ = require('../internals/export');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar $IndexOf = require('../internals/array-includes').indexOf;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\n\nvar un$IndexOf = uncurryThis([].indexOf);\n\nvar NEGATIVE_ZERO = !!un$IndexOf && 1 / un$IndexOf([1], 1, -0) < 0;\nvar STRICT_METHOD = arrayMethodIsStrict('indexOf');\n\n// `Array.prototype.indexOf` method\n// https://tc39.es/ecma262/#sec-array.prototype.indexof\n$({ target: 'Array', proto: true, forced: NEGATIVE_ZERO || !STRICT_METHOD }, {\n  indexOf: function indexOf(searchElement /* , fromIndex = 0 */) {\n    var fromIndex = arguments.length > 1 ? arguments[1] : undefined;\n    return NEGATIVE_ZERO\n      // convert -0 to +0\n      ? un$IndexOf(this, searchElement, fromIndex) || 0\n      : $IndexOf(this, searchElement, fromIndex);\n  }\n});\n","'use strict';\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar addToUnscopables = require('../internals/add-to-unscopables');\nvar Iterators = require('../internals/iterators');\nvar InternalStateModule = require('../internals/internal-state');\nvar defineProperty = require('../internals/object-define-property').f;\nvar defineIterator = require('../internals/define-iterator');\nvar IS_PURE = require('../internals/is-pure');\nvar DESCRIPTORS = require('../internals/descriptors');\n\nvar ARRAY_ITERATOR = 'Array Iterator';\nvar setInternalState = InternalStateModule.set;\nvar getInternalState = InternalStateModule.getterFor(ARRAY_ITERATOR);\n\n// `Array.prototype.entries` method\n// https://tc39.es/ecma262/#sec-array.prototype.entries\n// `Array.prototype.keys` method\n// https://tc39.es/ecma262/#sec-array.prototype.keys\n// `Array.prototype.values` method\n// https://tc39.es/ecma262/#sec-array.prototype.values\n// `Array.prototype[@@iterator]` method\n// https://tc39.es/ecma262/#sec-array.prototype-@@iterator\n// `CreateArrayIterator` internal method\n// https://tc39.es/ecma262/#sec-createarrayiterator\nmodule.exports = defineIterator(Array, 'Array', function (iterated, kind) {\n  setInternalState(this, {\n    type: ARRAY_ITERATOR,\n    target: toIndexedObject(iterated), // target\n    index: 0,                          // next index\n    kind: kind                         // kind\n  });\n// `%ArrayIteratorPrototype%.next` method\n// https://tc39.es/ecma262/#sec-%arrayiteratorprototype%.next\n}, function () {\n  var state = getInternalState(this);\n  var target = state.target;\n  var kind = state.kind;\n  var index = state.index++;\n  if (!target || index >= target.length) {\n    state.target = undefined;\n    return { value: undefined, done: true };\n  }\n  if (kind == 'keys') return { value: index, done: false };\n  if (kind == 'values') return { value: target[index], done: false };\n  return { value: [index, target[index]], done: false };\n}, 'values');\n\n// argumentsList[@@iterator] is %ArrayProto_values%\n// https://tc39.es/ecma262/#sec-createunmappedargumentsobject\n// https://tc39.es/ecma262/#sec-createmappedargumentsobject\nvar values = Iterators.Arguments = Iterators.Array;\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('keys');\naddToUnscopables('values');\naddToUnscopables('entries');\n\n// V8 ~ Chrome 45- bug\nif (!IS_PURE && DESCRIPTORS && values.name !== 'values') try {\n  defineProperty(values, 'name', { value: 'values' });\n} catch (error) { /* empty */ }\n","'use strict';\nvar $ = require('../internals/export');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar IndexedObject = require('../internals/indexed-object');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\n\nvar un$Join = uncurryThis([].join);\n\nvar ES3_STRINGS = IndexedObject != Object;\nvar STRICT_METHOD = arrayMethodIsStrict('join', ',');\n\n// `Array.prototype.join` method\n// https://tc39.es/ecma262/#sec-array.prototype.join\n$({ target: 'Array', proto: true, forced: ES3_STRINGS || !STRICT_METHOD }, {\n  join: function join(separator) {\n    return un$Join(toIndexedObject(this), separator === undefined ? ',' : separator);\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar $map = require('../internals/array-iteration').map;\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('map');\n\n// `Array.prototype.map` method\n// https://tc39.es/ecma262/#sec-array.prototype.map\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  map: function map(callbackfn /* , thisArg */) {\n    return $map(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar global = require('../internals/global');\nvar isArray = require('../internals/is-array');\nvar isConstructor = require('../internals/is-constructor');\nvar isObject = require('../internals/is-object');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar createProperty = require('../internals/create-property');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar un$Slice = require('../internals/array-slice');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('slice');\n\nvar SPECIES = wellKnownSymbol('species');\nvar Array = global.Array;\nvar max = Math.max;\n\n// `Array.prototype.slice` method\n// https://tc39.es/ecma262/#sec-array.prototype.slice\n// fallback for not array-like ES3 strings and DOM objects\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  slice: function slice(start, end) {\n    var O = toIndexedObject(this);\n    var length = lengthOfArrayLike(O);\n    var k = toAbsoluteIndex(start, length);\n    var fin = toAbsoluteIndex(end === undefined ? length : end, length);\n    // inline `ArraySpeciesCreate` for usage native `Array#slice` where it's possible\n    var Constructor, result, n;\n    if (isArray(O)) {\n      Constructor = O.constructor;\n      // cross-realm fallback\n      if (isConstructor(Constructor) && (Constructor === Array || isArray(Constructor.prototype))) {\n        Constructor = undefined;\n      } else if (isObject(Constructor)) {\n        Constructor = Constructor[SPECIES];\n        if (Constructor === null) Constructor = undefined;\n      }\n      if (Constructor === Array || Constructor === undefined) {\n        return un$Slice(O, k, fin);\n      }\n    }\n    result = new (Constructor === undefined ? Array : Constructor)(max(fin - k, 0));\n    for (n = 0; k < fin; k++, n++) if (k in O) createProperty(result, n, O[k]);\n    result.length = n;\n    return result;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar global = require('../internals/global');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar toObject = require('../internals/to-object');\nvar arraySpeciesCreate = require('../internals/array-species-create');\nvar createProperty = require('../internals/create-property');\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('splice');\n\nvar TypeError = global.TypeError;\nvar max = Math.max;\nvar min = Math.min;\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF;\nvar MAXIMUM_ALLOWED_LENGTH_EXCEEDED = 'Maximum allowed length exceeded';\n\n// `Array.prototype.splice` method\n// https://tc39.es/ecma262/#sec-array.prototype.splice\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  splice: function splice(start, deleteCount /* , ...items */) {\n    var O = toObject(this);\n    var len = lengthOfArrayLike(O);\n    var actualStart = toAbsoluteIndex(start, len);\n    var argumentsLength = arguments.length;\n    var insertCount, actualDeleteCount, A, k, from, to;\n    if (argumentsLength === 0) {\n      insertCount = actualDeleteCount = 0;\n    } else if (argumentsLength === 1) {\n      insertCount = 0;\n      actualDeleteCount = len - actualStart;\n    } else {\n      insertCount = argumentsLength - 2;\n      actualDeleteCount = min(max(toIntegerOrInfinity(deleteCount), 0), len - actualStart);\n    }\n    if (len + insertCount - actualDeleteCount > MAX_SAFE_INTEGER) {\n      throw TypeError(MAXIMUM_ALLOWED_LENGTH_EXCEEDED);\n    }\n    A = arraySpeciesCreate(O, actualDeleteCount);\n    for (k = 0; k < actualDeleteCount; k++) {\n      from = actualStart + k;\n      if (from in O) createProperty(A, k, O[from]);\n    }\n    A.length = actualDeleteCount;\n    if (insertCount < actualDeleteCount) {\n      for (k = actualStart; k < len - actualDeleteCount; k++) {\n        from = k + actualDeleteCount;\n        to = k + insertCount;\n        if (from in O) O[to] = O[from];\n        else delete O[to];\n      }\n      for (k = len; k > len - actualDeleteCount + insertCount; k--) delete O[k - 1];\n    } else if (insertCount > actualDeleteCount) {\n      for (k = len - actualDeleteCount; k > actualStart; k--) {\n        from = k + actualDeleteCount - 1;\n        to = k + insertCount - 1;\n        if (from in O) O[to] = O[from];\n        else delete O[to];\n      }\n    }\n    for (k = 0; k < insertCount; k++) {\n      O[k + actualStart] = arguments[k + 2];\n    }\n    O.length = len - actualDeleteCount + insertCount;\n    return A;\n  }\n});\n","var DESCRIPTORS = require('../internals/descriptors');\nvar FUNCTION_NAME_EXISTS = require('../internals/function-name').EXISTS;\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar FunctionPrototype = Function.prototype;\nvar functionToString = uncurryThis(FunctionPrototype.toString);\nvar nameRE = /function\\b(?:\\s|\\/\\*[\\S\\s]*?\\*\\/|\\/\\/[^\\n\\r]*[\\n\\r]+)*([^\\s(/]*)/;\nvar regExpExec = uncurryThis(nameRE.exec);\nvar NAME = 'name';\n\n// Function instances `.name` property\n// https://tc39.es/ecma262/#sec-function-instances-name\nif (DESCRIPTORS && !FUNCTION_NAME_EXISTS) {\n  defineProperty(FunctionPrototype, NAME, {\n    configurable: true,\n    get: function () {\n      try {\n        return regExpExec(nameRE, functionToString(this))[1];\n      } catch (error) {\n        return '';\n      }\n    }\n  });\n}\n","var $ = require('../internals/export');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar defineProperties = require('../internals/object-define-properties').f;\n\n// `Object.defineProperties` method\n// https://tc39.es/ecma262/#sec-object.defineproperties\n// eslint-disable-next-line es/no-object-defineproperties -- safe\n$({ target: 'Object', stat: true, forced: Object.defineProperties !== defineProperties, sham: !DESCRIPTORS }, {\n  defineProperties: defineProperties\n});\n","var $ = require('../internals/export');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar defineProperty = require('../internals/object-define-property').f;\n\n// `Object.defineProperty` method\n// https://tc39.es/ecma262/#sec-object.defineproperty\n// eslint-disable-next-line es/no-object-defineproperty -- safe\n$({ target: 'Object', stat: true, forced: Object.defineProperty !== defineProperty, sham: !DESCRIPTORS }, {\n  defineProperty: defineProperty\n});\n","var $ = require('../internals/export');\nvar fails = require('../internals/fails');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar nativeGetOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar DESCRIPTORS = require('../internals/descriptors');\n\nvar FAILS_ON_PRIMITIVES = fails(function () { nativeGetOwnPropertyDescriptor(1); });\nvar FORCED = !DESCRIPTORS || FAILS_ON_PRIMITIVES;\n\n// `Object.getOwnPropertyDescriptor` method\n// https://tc39.es/ecma262/#sec-object.getownpropertydescriptor\n$({ target: 'Object', stat: true, forced: FORCED, sham: !DESCRIPTORS }, {\n  getOwnPropertyDescriptor: function getOwnPropertyDescriptor(it, key) {\n    return nativeGetOwnPropertyDescriptor(toIndexedObject(it), key);\n  }\n});\n","var $ = require('../internals/export');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar ownKeys = require('../internals/own-keys');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar getOwnPropertyDescriptorModule = require('../internals/object-get-own-property-descriptor');\nvar createProperty = require('../internals/create-property');\n\n// `Object.getOwnPropertyDescriptors` method\n// https://tc39.es/ecma262/#sec-object.getownpropertydescriptors\n$({ target: 'Object', stat: true, sham: !DESCRIPTORS }, {\n  getOwnPropertyDescriptors: function getOwnPropertyDescriptors(object) {\n    var O = toIndexedObject(object);\n    var getOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;\n    var keys = ownKeys(O);\n    var result = {};\n    var index = 0;\n    var key, descriptor;\n    while (keys.length > index) {\n      descriptor = getOwnPropertyDescriptor(O, key = keys[index++]);\n      if (descriptor !== undefined) createProperty(result, key, descriptor);\n    }\n    return result;\n  }\n});\n","var $ = require('../internals/export');\nvar toObject = require('../internals/to-object');\nvar nativeKeys = require('../internals/object-keys');\nvar fails = require('../internals/fails');\n\nvar FAILS_ON_PRIMITIVES = fails(function () { nativeKeys(1); });\n\n// `Object.keys` method\n// https://tc39.es/ecma262/#sec-object.keys\n$({ target: 'Object', stat: true, forced: FAILS_ON_PRIMITIVES }, {\n  keys: function keys(it) {\n    return nativeKeys(toObject(it));\n  }\n});\n","var TO_STRING_TAG_SUPPORT = require('../internals/to-string-tag-support');\nvar redefine = require('../internals/redefine');\nvar toString = require('../internals/object-to-string');\n\n// `Object.prototype.toString` method\n// https://tc39.es/ecma262/#sec-object.prototype.tostring\nif (!TO_STRING_TAG_SUPPORT) {\n  redefine(Object.prototype, 'toString', toString, { unsafe: true });\n}\n","var $ = require('../internals/export');\nvar $parseFloat = require('../internals/number-parse-float');\n\n// `parseFloat` method\n// https://tc39.es/ecma262/#sec-parsefloat-string\n$({ global: true, forced: parseFloat != $parseFloat }, {\n  parseFloat: $parseFloat\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar IS_PURE = require('../internals/is-pure');\nvar NativePromise = require('../internals/native-promise-constructor');\nvar fails = require('../internals/fails');\nvar getBuiltIn = require('../internals/get-built-in');\nvar isCallable = require('../internals/is-callable');\nvar speciesConstructor = require('../internals/species-constructor');\nvar promiseResolve = require('../internals/promise-resolve');\nvar redefine = require('../internals/redefine');\n\n// Safari bug https://bugs.webkit.org/show_bug.cgi?id=200829\nvar NON_GENERIC = !!NativePromise && fails(function () {\n  // eslint-disable-next-line unicorn/no-thenable -- required for testing\n  NativePromise.prototype['finally'].call({ then: function () { /* empty */ } }, function () { /* empty */ });\n});\n\n// `Promise.prototype.finally` method\n// https://tc39.es/ecma262/#sec-promise.prototype.finally\n$({ target: 'Promise', proto: true, real: true, forced: NON_GENERIC }, {\n  'finally': function (onFinally) {\n    var C = speciesConstructor(this, getBuiltIn('Promise'));\n    var isFunction = isCallable(onFinally);\n    return this.then(\n      isFunction ? function (x) {\n        return promiseResolve(C, onFinally()).then(function () { return x; });\n      } : onFinally,\n      isFunction ? function (e) {\n        return promiseResolve(C, onFinally()).then(function () { throw e; });\n      } : onFinally\n    );\n  }\n});\n\n// makes sure that native promise-based APIs `Promise#finally` properly works with patched `Promise#then`\nif (!IS_PURE && isCallable(NativePromise)) {\n  var method = getBuiltIn('Promise').prototype['finally'];\n  if (NativePromise.prototype['finally'] !== method) {\n    redefine(NativePromise.prototype, 'finally', method, { unsafe: true });\n  }\n}\n","'use strict';\nvar $ = require('../internals/export');\nvar IS_PURE = require('../internals/is-pure');\nvar global = require('../internals/global');\nvar getBuiltIn = require('../internals/get-built-in');\nvar call = require('../internals/function-call');\nvar NativePromise = require('../internals/native-promise-constructor');\nvar redefine = require('../internals/redefine');\nvar redefineAll = require('../internals/redefine-all');\nvar setPrototypeOf = require('../internals/object-set-prototype-of');\nvar setToStringTag = require('../internals/set-to-string-tag');\nvar setSpecies = require('../internals/set-species');\nvar aCallable = require('../internals/a-callable');\nvar isCallable = require('../internals/is-callable');\nvar isObject = require('../internals/is-object');\nvar anInstance = require('../internals/an-instance');\nvar inspectSource = require('../internals/inspect-source');\nvar iterate = require('../internals/iterate');\nvar checkCorrectnessOfIteration = require('../internals/check-correctness-of-iteration');\nvar speciesConstructor = require('../internals/species-constructor');\nvar task = require('../internals/task').set;\nvar microtask = require('../internals/microtask');\nvar promiseResolve = require('../internals/promise-resolve');\nvar hostReportErrors = require('../internals/host-report-errors');\nvar newPromiseCapabilityModule = require('../internals/new-promise-capability');\nvar perform = require('../internals/perform');\nvar Queue = require('../internals/queue');\nvar InternalStateModule = require('../internals/internal-state');\nvar isForced = require('../internals/is-forced');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar IS_BROWSER = require('../internals/engine-is-browser');\nvar IS_NODE = require('../internals/engine-is-node');\nvar V8_VERSION = require('../internals/engine-v8-version');\n\nvar SPECIES = wellKnownSymbol('species');\nvar PROMISE = 'Promise';\n\nvar getInternalState = InternalStateModule.getterFor(PROMISE);\nvar setInternalState = InternalStateModule.set;\nvar getInternalPromiseState = InternalStateModule.getterFor(PROMISE);\nvar NativePromisePrototype = NativePromise && NativePromise.prototype;\nvar PromiseConstructor = NativePromise;\nvar PromisePrototype = NativePromisePrototype;\nvar TypeError = global.TypeError;\nvar document = global.document;\nvar process = global.process;\nvar newPromiseCapability = newPromiseCapabilityModule.f;\nvar newGenericPromiseCapability = newPromiseCapability;\n\nvar DISPATCH_EVENT = !!(document && document.createEvent && global.dispatchEvent);\nvar NATIVE_REJECTION_EVENT = isCallable(global.PromiseRejectionEvent);\nvar UNHANDLED_REJECTION = 'unhandledrejection';\nvar REJECTION_HANDLED = 'rejectionhandled';\nvar PENDING = 0;\nvar FULFILLED = 1;\nvar REJECTED = 2;\nvar HANDLED = 1;\nvar UNHANDLED = 2;\nvar SUBCLASSING = false;\n\nvar Internal, OwnPromiseCapability, PromiseWrapper, nativeThen;\n\nvar FORCED = isForced(PROMISE, function () {\n  var PROMISE_CONSTRUCTOR_SOURCE = inspectSource(PromiseConstructor);\n  var GLOBAL_CORE_JS_PROMISE = PROMISE_CONSTRUCTOR_SOURCE !== String(PromiseConstructor);\n  // V8 6.6 (Node 10 and Chrome 66) have a bug with resolving custom thenables\n  // https://bugs.chromium.org/p/chromium/issues/detail?id=830565\n  // We can't detect it synchronously, so just check versions\n  if (!GLOBAL_CORE_JS_PROMISE && V8_VERSION === 66) return true;\n  // We need Promise#finally in the pure version for preventing prototype pollution\n  if (IS_PURE && !PromisePrototype['finally']) return true;\n  // We can't use @@species feature detection in V8 since it causes\n  // deoptimization and performance degradation\n  // https://github.com/zloirock/core-js/issues/679\n  if (V8_VERSION >= 51 && /native code/.test(PROMISE_CONSTRUCTOR_SOURCE)) return false;\n  // Detect correctness of subclassing with @@species support\n  var promise = new PromiseConstructor(function (resolve) { resolve(1); });\n  var FakePromise = function (exec) {\n    exec(function () { /* empty */ }, function () { /* empty */ });\n  };\n  var constructor = promise.constructor = {};\n  constructor[SPECIES] = FakePromise;\n  SUBCLASSING = promise.then(function () { /* empty */ }) instanceof FakePromise;\n  if (!SUBCLASSING) return true;\n  // Unhandled rejections tracking support, NodeJS Promise without it fails @@species test\n  return !GLOBAL_CORE_JS_PROMISE && IS_BROWSER && !NATIVE_REJECTION_EVENT;\n});\n\nvar INCORRECT_ITERATION = FORCED || !checkCorrectnessOfIteration(function (iterable) {\n  PromiseConstructor.all(iterable)['catch'](function () { /* empty */ });\n});\n\n// helpers\nvar isThenable = function (it) {\n  var then;\n  return isObject(it) && isCallable(then = it.then) ? then : false;\n};\n\nvar callReaction = function (reaction, state) {\n  var value = state.value;\n  var ok = state.state == FULFILLED;\n  var handler = ok ? reaction.ok : reaction.fail;\n  var resolve = reaction.resolve;\n  var reject = reaction.reject;\n  var domain = reaction.domain;\n  var result, then, exited;\n  try {\n    if (handler) {\n      if (!ok) {\n        if (state.rejection === UNHANDLED) onHandleUnhandled(state);\n        state.rejection = HANDLED;\n      }\n      if (handler === true) result = value;\n      else {\n        if (domain) domain.enter();\n        result = handler(value); // can throw\n        if (domain) {\n          domain.exit();\n          exited = true;\n        }\n      }\n      if (result === reaction.promise) {\n        reject(TypeError('Promise-chain cycle'));\n      } else if (then = isThenable(result)) {\n        call(then, result, resolve, reject);\n      } else resolve(result);\n    } else reject(value);\n  } catch (error) {\n    if (domain && !exited) domain.exit();\n    reject(error);\n  }\n};\n\nvar notify = function (state, isReject) {\n  if (state.notified) return;\n  state.notified = true;\n  microtask(function () {\n    var reactions = state.reactions;\n    var reaction;\n    while (reaction = reactions.get()) {\n      callReaction(reaction, state);\n    }\n    state.notified = false;\n    if (isReject && !state.rejection) onUnhandled(state);\n  });\n};\n\nvar dispatchEvent = function (name, promise, reason) {\n  var event, handler;\n  if (DISPATCH_EVENT) {\n    event = document.createEvent('Event');\n    event.promise = promise;\n    event.reason = reason;\n    event.initEvent(name, false, true);\n    global.dispatchEvent(event);\n  } else event = { promise: promise, reason: reason };\n  if (!NATIVE_REJECTION_EVENT && (handler = global['on' + name])) handler(event);\n  else if (name === UNHANDLED_REJECTION) hostReportErrors('Unhandled promise rejection', reason);\n};\n\nvar onUnhandled = function (state) {\n  call(task, global, function () {\n    var promise = state.facade;\n    var value = state.value;\n    var IS_UNHANDLED = isUnhandled(state);\n    var result;\n    if (IS_UNHANDLED) {\n      result = perform(function () {\n        if (IS_NODE) {\n          process.emit('unhandledRejection', value, promise);\n        } else dispatchEvent(UNHANDLED_REJECTION, promise, value);\n      });\n      // Browsers should not trigger `rejectionHandled` event if it was handled here, NodeJS - should\n      state.rejection = IS_NODE || isUnhandled(state) ? UNHANDLED : HANDLED;\n      if (result.error) throw result.value;\n    }\n  });\n};\n\nvar isUnhandled = function (state) {\n  return state.rejection !== HANDLED && !state.parent;\n};\n\nvar onHandleUnhandled = function (state) {\n  call(task, global, function () {\n    var promise = state.facade;\n    if (IS_NODE) {\n      process.emit('rejectionHandled', promise);\n    } else dispatchEvent(REJECTION_HANDLED, promise, state.value);\n  });\n};\n\nvar bind = function (fn, state, unwrap) {\n  return function (value) {\n    fn(state, value, unwrap);\n  };\n};\n\nvar internalReject = function (state, value, unwrap) {\n  if (state.done) return;\n  state.done = true;\n  if (unwrap) state = unwrap;\n  state.value = value;\n  state.state = REJECTED;\n  notify(state, true);\n};\n\nvar internalResolve = function (state, value, unwrap) {\n  if (state.done) return;\n  state.done = true;\n  if (unwrap) state = unwrap;\n  try {\n    if (state.facade === value) throw TypeError(\"Promise can't be resolved itself\");\n    var then = isThenable(value);\n    if (then) {\n      microtask(function () {\n        var wrapper = { done: false };\n        try {\n          call(then, value,\n            bind(internalResolve, wrapper, state),\n            bind(internalReject, wrapper, state)\n          );\n        } catch (error) {\n          internalReject(wrapper, error, state);\n        }\n      });\n    } else {\n      state.value = value;\n      state.state = FULFILLED;\n      notify(state, false);\n    }\n  } catch (error) {\n    internalReject({ done: false }, error, state);\n  }\n};\n\n// constructor polyfill\nif (FORCED) {\n  // 25.4.3.1 Promise(executor)\n  PromiseConstructor = function Promise(executor) {\n    anInstance(this, PromisePrototype);\n    aCallable(executor);\n    call(Internal, this);\n    var state = getInternalState(this);\n    try {\n      executor(bind(internalResolve, state), bind(internalReject, state));\n    } catch (error) {\n      internalReject(state, error);\n    }\n  };\n  PromisePrototype = PromiseConstructor.prototype;\n  // eslint-disable-next-line no-unused-vars -- required for `.length`\n  Internal = function Promise(executor) {\n    setInternalState(this, {\n      type: PROMISE,\n      done: false,\n      notified: false,\n      parent: false,\n      reactions: new Queue(),\n      rejection: false,\n      state: PENDING,\n      value: undefined\n    });\n  };\n  Internal.prototype = redefineAll(PromisePrototype, {\n    // `Promise.prototype.then` method\n    // https://tc39.es/ecma262/#sec-promise.prototype.then\n    // eslint-disable-next-line unicorn/no-thenable -- safe\n    then: function then(onFulfilled, onRejected) {\n      var state = getInternalPromiseState(this);\n      var reaction = newPromiseCapability(speciesConstructor(this, PromiseConstructor));\n      state.parent = true;\n      reaction.ok = isCallable(onFulfilled) ? onFulfilled : true;\n      reaction.fail = isCallable(onRejected) && onRejected;\n      reaction.domain = IS_NODE ? process.domain : undefined;\n      if (state.state == PENDING) state.reactions.add(reaction);\n      else microtask(function () {\n        callReaction(reaction, state);\n      });\n      return reaction.promise;\n    },\n    // `Promise.prototype.catch` method\n    // https://tc39.es/ecma262/#sec-promise.prototype.catch\n    'catch': function (onRejected) {\n      return this.then(undefined, onRejected);\n    }\n  });\n  OwnPromiseCapability = function () {\n    var promise = new Internal();\n    var state = getInternalState(promise);\n    this.promise = promise;\n    this.resolve = bind(internalResolve, state);\n    this.reject = bind(internalReject, state);\n  };\n  newPromiseCapabilityModule.f = newPromiseCapability = function (C) {\n    return C === PromiseConstructor || C === PromiseWrapper\n      ? new OwnPromiseCapability(C)\n      : newGenericPromiseCapability(C);\n  };\n\n  if (!IS_PURE && isCallable(NativePromise) && NativePromisePrototype !== Object.prototype) {\n    nativeThen = NativePromisePrototype.then;\n\n    if (!SUBCLASSING) {\n      // make `Promise#then` return a polyfilled `Promise` for native promise-based APIs\n      redefine(NativePromisePrototype, 'then', function then(onFulfilled, onRejected) {\n        var that = this;\n        return new PromiseConstructor(function (resolve, reject) {\n          call(nativeThen, that, resolve, reject);\n        }).then(onFulfilled, onRejected);\n      // https://github.com/zloirock/core-js/issues/640\n      }, { unsafe: true });\n\n      // makes sure that native promise-based APIs `Promise#catch` properly works with patched `Promise#then`\n      redefine(NativePromisePrototype, 'catch', PromisePrototype['catch'], { unsafe: true });\n    }\n\n    // make `.constructor === Promise` work for native promise-based APIs\n    try {\n      delete NativePromisePrototype.constructor;\n    } catch (error) { /* empty */ }\n\n    // make `instanceof Promise` work for native promise-based APIs\n    if (setPrototypeOf) {\n      setPrototypeOf(NativePromisePrototype, PromisePrototype);\n    }\n  }\n}\n\n$({ global: true, wrap: true, forced: FORCED }, {\n  Promise: PromiseConstructor\n});\n\nsetToStringTag(PromiseConstructor, PROMISE, false, true);\nsetSpecies(PROMISE);\n\nPromiseWrapper = getBuiltIn(PROMISE);\n\n// statics\n$({ target: PROMISE, stat: true, forced: FORCED }, {\n  // `Promise.reject` method\n  // https://tc39.es/ecma262/#sec-promise.reject\n  reject: function reject(r) {\n    var capability = newPromiseCapability(this);\n    call(capability.reject, undefined, r);\n    return capability.promise;\n  }\n});\n\n$({ target: PROMISE, stat: true, forced: IS_PURE || FORCED }, {\n  // `Promise.resolve` method\n  // https://tc39.es/ecma262/#sec-promise.resolve\n  resolve: function resolve(x) {\n    return promiseResolve(IS_PURE && this === PromiseWrapper ? PromiseConstructor : this, x);\n  }\n});\n\n$({ target: PROMISE, stat: true, forced: INCORRECT_ITERATION }, {\n  // `Promise.all` method\n  // https://tc39.es/ecma262/#sec-promise.all\n  all: function all(iterable) {\n    var C = this;\n    var capability = newPromiseCapability(C);\n    var resolve = capability.resolve;\n    var reject = capability.reject;\n    var result = perform(function () {\n      var $promiseResolve = aCallable(C.resolve);\n      var values = [];\n      var counter = 0;\n      var remaining = 1;\n      iterate(iterable, function (promise) {\n        var index = counter++;\n        var alreadyCalled = false;\n        remaining++;\n        call($promiseResolve, C, promise).then(function (value) {\n          if (alreadyCalled) return;\n          alreadyCalled = true;\n          values[index] = value;\n          --remaining || resolve(values);\n        }, reject);\n      });\n      --remaining || resolve(values);\n    });\n    if (result.error) reject(result.value);\n    return capability.promise;\n  },\n  // `Promise.race` method\n  // https://tc39.es/ecma262/#sec-promise.race\n  race: function race(iterable) {\n    var C = this;\n    var capability = newPromiseCapability(C);\n    var reject = capability.reject;\n    var result = perform(function () {\n      var $promiseResolve = aCallable(C.resolve);\n      iterate(iterable, function (promise) {\n        call($promiseResolve, C, promise).then(capability.resolve, reject);\n      });\n    });\n    if (result.error) reject(result.value);\n    return capability.promise;\n  }\n});\n","var $ = require('../internals/export');\nvar getBuiltIn = require('../internals/get-built-in');\nvar apply = require('../internals/function-apply');\nvar bind = require('../internals/function-bind');\nvar aConstructor = require('../internals/a-constructor');\nvar anObject = require('../internals/an-object');\nvar isObject = require('../internals/is-object');\nvar create = require('../internals/object-create');\nvar fails = require('../internals/fails');\n\nvar nativeConstruct = getBuiltIn('Reflect', 'construct');\nvar ObjectPrototype = Object.prototype;\nvar push = [].push;\n\n// `Reflect.construct` method\n// https://tc39.es/ecma262/#sec-reflect.construct\n// MS Edge supports only 2 arguments and argumentsList argument is optional\n// FF Nightly sets third argument as `new.target`, but does not create `this` from it\nvar NEW_TARGET_BUG = fails(function () {\n  function F() { /* empty */ }\n  return !(nativeConstruct(function () { /* empty */ }, [], F) instanceof F);\n});\n\nvar ARGS_BUG = !fails(function () {\n  nativeConstruct(function () { /* empty */ });\n});\n\nvar FORCED = NEW_TARGET_BUG || ARGS_BUG;\n\n$({ target: 'Reflect', stat: true, forced: FORCED, sham: FORCED }, {\n  construct: function construct(Target, args /* , newTarget */) {\n    aConstructor(Target);\n    anObject(args);\n    var newTarget = arguments.length < 3 ? Target : aConstructor(arguments[2]);\n    if (ARGS_BUG && !NEW_TARGET_BUG) return nativeConstruct(Target, args, newTarget);\n    if (Target == newTarget) {\n      // w/o altered newTarget, optimization for 0-4 arguments\n      switch (args.length) {\n        case 0: return new Target();\n        case 1: return new Target(args[0]);\n        case 2: return new Target(args[0], args[1]);\n        case 3: return new Target(args[0], args[1], args[2]);\n        case 4: return new Target(args[0], args[1], args[2], args[3]);\n      }\n      // w/o altered newTarget, lot of arguments case\n      var $args = [null];\n      apply(push, $args, args);\n      return new (apply(bind, Target, $args))();\n    }\n    // with altered newTarget, not support built-in constructors\n    var proto = newTarget.prototype;\n    var instance = create(isObject(proto) ? proto : ObjectPrototype);\n    var result = apply(Target, instance, args);\n    return isObject(result) ? result : instance;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar exec = require('../internals/regexp-exec');\n\n// `RegExp.prototype.exec` method\n// https://tc39.es/ecma262/#sec-regexp.prototype.exec\n$({ target: 'RegExp', proto: true, forced: /./.exec !== exec }, {\n  exec: exec\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar notARegExp = require('../internals/not-a-regexp');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar toString = require('../internals/to-string');\nvar correctIsRegExpLogic = require('../internals/correct-is-regexp-logic');\n\nvar stringIndexOf = uncurryThis(''.indexOf);\n\n// `String.prototype.includes` method\n// https://tc39.es/ecma262/#sec-string.prototype.includes\n$({ target: 'String', proto: true, forced: !correctIsRegExpLogic('includes') }, {\n  includes: function includes(searchString /* , position = 0 */) {\n    return !!~stringIndexOf(\n      toString(requireObjectCoercible(this)),\n      toString(notARegExp(searchString)),\n      arguments.length > 1 ? arguments[1] : undefined\n    );\n  }\n});\n","'use strict';\nvar charAt = require('../internals/string-multibyte').charAt;\nvar toString = require('../internals/to-string');\nvar InternalStateModule = require('../internals/internal-state');\nvar defineIterator = require('../internals/define-iterator');\n\nvar STRING_ITERATOR = 'String Iterator';\nvar setInternalState = InternalStateModule.set;\nvar getInternalState = InternalStateModule.getterFor(STRING_ITERATOR);\n\n// `String.prototype[@@iterator]` method\n// https://tc39.es/ecma262/#sec-string.prototype-@@iterator\ndefineIterator(String, 'String', function (iterated) {\n  setInternalState(this, {\n    type: STRING_ITERATOR,\n    string: toString(iterated),\n    index: 0\n  });\n// `%StringIteratorPrototype%.next` method\n// https://tc39.es/ecma262/#sec-%stringiteratorprototype%.next\n}, function next() {\n  var state = getInternalState(this);\n  var string = state.string;\n  var index = state.index;\n  var point;\n  if (index >= string.length) return { value: undefined, done: true };\n  point = charAt(string, index);\n  state.index += point.length;\n  return { value: point, done: false };\n});\n","var $ = require('../internals/export');\nvar repeat = require('../internals/string-repeat');\n\n// `String.prototype.repeat` method\n// https://tc39.es/ecma262/#sec-string.prototype.repeat\n$({ target: 'String', proto: true }, {\n  repeat: repeat\n});\n","'use strict';\nvar apply = require('../internals/function-apply');\nvar call = require('../internals/function-call');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar fixRegExpWellKnownSymbolLogic = require('../internals/fix-regexp-well-known-symbol-logic');\nvar isRegExp = require('../internals/is-regexp');\nvar anObject = require('../internals/an-object');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar speciesConstructor = require('../internals/species-constructor');\nvar advanceStringIndex = require('../internals/advance-string-index');\nvar toLength = require('../internals/to-length');\nvar toString = require('../internals/to-string');\nvar getMethod = require('../internals/get-method');\nvar arraySlice = require('../internals/array-slice-simple');\nvar callRegExpExec = require('../internals/regexp-exec-abstract');\nvar regexpExec = require('../internals/regexp-exec');\nvar stickyHelpers = require('../internals/regexp-sticky-helpers');\nvar fails = require('../internals/fails');\n\nvar UNSUPPORTED_Y = stickyHelpers.UNSUPPORTED_Y;\nvar MAX_UINT32 = 0xFFFFFFFF;\nvar min = Math.min;\nvar $push = [].push;\nvar exec = uncurryThis(/./.exec);\nvar push = uncurryThis($push);\nvar stringSlice = uncurryThis(''.slice);\n\n// Chrome 51 has a buggy \"split\" implementation when RegExp#exec !== nativeExec\n// Weex JS has frozen built-in prototypes, so use try / catch wrapper\nvar SPLIT_WORKS_WITH_OVERWRITTEN_EXEC = !fails(function () {\n  // eslint-disable-next-line regexp/no-empty-group -- required for testing\n  var re = /(?:)/;\n  var originalExec = re.exec;\n  re.exec = function () { return originalExec.apply(this, arguments); };\n  var result = 'ab'.split(re);\n  return result.length !== 2 || result[0] !== 'a' || result[1] !== 'b';\n});\n\n// @@split logic\nfixRegExpWellKnownSymbolLogic('split', function (SPLIT, nativeSplit, maybeCallNative) {\n  var internalSplit;\n  if (\n    'abbc'.split(/(b)*/)[1] == 'c' ||\n    // eslint-disable-next-line regexp/no-empty-group -- required for testing\n    'test'.split(/(?:)/, -1).length != 4 ||\n    'ab'.split(/(?:ab)*/).length != 2 ||\n    '.'.split(/(.?)(.?)/).length != 4 ||\n    // eslint-disable-next-line regexp/no-empty-capturing-group, regexp/no-empty-group -- required for testing\n    '.'.split(/()()/).length > 1 ||\n    ''.split(/.?/).length\n  ) {\n    // based on es5-shim implementation, need to rework it\n    internalSplit = function (separator, limit) {\n      var string = toString(requireObjectCoercible(this));\n      var lim = limit === undefined ? MAX_UINT32 : limit >>> 0;\n      if (lim === 0) return [];\n      if (separator === undefined) return [string];\n      // If `separator` is not a regex, use native split\n      if (!isRegExp(separator)) {\n        return call(nativeSplit, string, separator, lim);\n      }\n      var output = [];\n      var flags = (separator.ignoreCase ? 'i' : '') +\n                  (separator.multiline ? 'm' : '') +\n                  (separator.unicode ? 'u' : '') +\n                  (separator.sticky ? 'y' : '');\n      var lastLastIndex = 0;\n      // Make `global` and avoid `lastIndex` issues by working with a copy\n      var separatorCopy = new RegExp(separator.source, flags + 'g');\n      var match, lastIndex, lastLength;\n      while (match = call(regexpExec, separatorCopy, string)) {\n        lastIndex = separatorCopy.lastIndex;\n        if (lastIndex > lastLastIndex) {\n          push(output, stringSlice(string, lastLastIndex, match.index));\n          if (match.length > 1 && match.index < string.length) apply($push, output, arraySlice(match, 1));\n          lastLength = match[0].length;\n          lastLastIndex = lastIndex;\n          if (output.length >= lim) break;\n        }\n        if (separatorCopy.lastIndex === match.index) separatorCopy.lastIndex++; // Avoid an infinite loop\n      }\n      if (lastLastIndex === string.length) {\n        if (lastLength || !exec(separatorCopy, '')) push(output, '');\n      } else push(output, stringSlice(string, lastLastIndex));\n      return output.length > lim ? arraySlice(output, 0, lim) : output;\n    };\n  // Chakra, V8\n  } else if ('0'.split(undefined, 0).length) {\n    internalSplit = function (separator, limit) {\n      return separator === undefined && limit === 0 ? [] : call(nativeSplit, this, separator, limit);\n    };\n  } else internalSplit = nativeSplit;\n\n  return [\n    // `String.prototype.split` method\n    // https://tc39.es/ecma262/#sec-string.prototype.split\n    function split(separator, limit) {\n      var O = requireObjectCoercible(this);\n      var splitter = separator == undefined ? undefined : getMethod(separator, SPLIT);\n      return splitter\n        ? call(splitter, separator, O, limit)\n        : call(internalSplit, toString(O), separator, limit);\n    },\n    // `RegExp.prototype[@@split]` method\n    // https://tc39.es/ecma262/#sec-regexp.prototype-@@split\n    //\n    // NOTE: This cannot be properly polyfilled in engines that don't support\n    // the 'y' flag.\n    function (string, limit) {\n      var rx = anObject(this);\n      var S = toString(string);\n      var res = maybeCallNative(internalSplit, rx, S, limit, internalSplit !== nativeSplit);\n\n      if (res.done) return res.value;\n\n      var C = speciesConstructor(rx, RegExp);\n\n      var unicodeMatching = rx.unicode;\n      var flags = (rx.ignoreCase ? 'i' : '') +\n                  (rx.multiline ? 'm' : '') +\n                  (rx.unicode ? 'u' : '') +\n                  (UNSUPPORTED_Y ? 'g' : 'y');\n\n      // ^(? + rx + ) is needed, in combination with some S slicing, to\n      // simulate the 'y' flag.\n      var splitter = new C(UNSUPPORTED_Y ? '^(?:' + rx.source + ')' : rx, flags);\n      var lim = limit === undefined ? MAX_UINT32 : limit >>> 0;\n      if (lim === 0) return [];\n      if (S.length === 0) return callRegExpExec(splitter, S) === null ? [S] : [];\n      var p = 0;\n      var q = 0;\n      var A = [];\n      while (q < S.length) {\n        splitter.lastIndex = UNSUPPORTED_Y ? 0 : q;\n        var z = callRegExpExec(splitter, UNSUPPORTED_Y ? stringSlice(S, q) : S);\n        var e;\n        if (\n          z === null ||\n          (e = min(toLength(splitter.lastIndex + (UNSUPPORTED_Y ? q : 0)), S.length)) === p\n        ) {\n          q = advanceStringIndex(S, q, unicodeMatching);\n        } else {\n          push(A, stringSlice(S, p, q));\n          if (A.length === lim) return A;\n          for (var i = 1; i <= z.length - 1; i++) {\n            push(A, z[i]);\n            if (A.length === lim) return A;\n          }\n          q = p = e;\n        }\n      }\n      push(A, stringSlice(S, p));\n      return A;\n    }\n  ];\n}, !SPLIT_WORKS_WITH_OVERWRITTEN_EXEC, UNSUPPORTED_Y);\n","'use strict';\nvar $ = require('../internals/export');\nvar $trim = require('../internals/string-trim').trim;\nvar forcedStringTrimMethod = require('../internals/string-trim-forced');\n\n// `String.prototype.trim` method\n// https://tc39.es/ecma262/#sec-string.prototype.trim\n$({ target: 'String', proto: true, forced: forcedStringTrimMethod('trim') }, {\n  trim: function trim() {\n    return $trim(this);\n  }\n});\n","// `Symbol.prototype.description` getter\n// https://tc39.es/ecma262/#sec-symbol.prototype.description\n'use strict';\nvar $ = require('../internals/export');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar global = require('../internals/global');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar hasOwn = require('../internals/has-own-property');\nvar isCallable = require('../internals/is-callable');\nvar isPrototypeOf = require('../internals/object-is-prototype-of');\nvar toString = require('../internals/to-string');\nvar defineProperty = require('../internals/object-define-property').f;\nvar copyConstructorProperties = require('../internals/copy-constructor-properties');\n\nvar NativeSymbol = global.Symbol;\nvar SymbolPrototype = NativeSymbol && NativeSymbol.prototype;\n\nif (DESCRIPTORS && isCallable(NativeSymbol) && (!('description' in SymbolPrototype) ||\n  // Safari 12 bug\n  NativeSymbol().description !== undefined\n)) {\n  var EmptyStringDescriptionStore = {};\n  // wrap Symbol constructor for correct work with undefined description\n  var SymbolWrapper = function Symbol() {\n    var description = arguments.length < 1 || arguments[0] === undefined ? undefined : toString(arguments[0]);\n    var result = isPrototypeOf(SymbolPrototype, this)\n      ? new NativeSymbol(description)\n      // in Edge 13, String(Symbol(undefined)) === 'Symbol(undefined)'\n      : description === undefined ? NativeSymbol() : NativeSymbol(description);\n    if (description === '') EmptyStringDescriptionStore[result] = true;\n    return result;\n  };\n\n  copyConstructorProperties(SymbolWrapper, NativeSymbol);\n  SymbolWrapper.prototype = SymbolPrototype;\n  SymbolPrototype.constructor = SymbolWrapper;\n\n  var NATIVE_SYMBOL = String(NativeSymbol('test')) == 'Symbol(test)';\n  var symbolToString = uncurryThis(SymbolPrototype.toString);\n  var symbolValueOf = uncurryThis(SymbolPrototype.valueOf);\n  var regexp = /^Symbol\\((.*)\\)[^)]+$/;\n  var replace = uncurryThis(''.replace);\n  var stringSlice = uncurryThis(''.slice);\n\n  defineProperty(SymbolPrototype, 'description', {\n    configurable: true,\n    get: function description() {\n      var symbol = symbolValueOf(this);\n      var string = symbolToString(symbol);\n      if (hasOwn(EmptyStringDescriptionStore, symbol)) return '';\n      var desc = NATIVE_SYMBOL ? stringSlice(string, 7, -1) : replace(string, regexp, '$1');\n      return desc === '' ? undefined : desc;\n    }\n  });\n\n  $({ global: true, forced: true }, {\n    Symbol: SymbolWrapper\n  });\n}\n","var defineWellKnownSymbol = require('../internals/define-well-known-symbol');\n\n// `Symbol.iterator` well-known symbol\n// https://tc39.es/ecma262/#sec-symbol.iterator\ndefineWellKnownSymbol('iterator');\n","'use strict';\nvar $ = require('../internals/export');\nvar global = require('../internals/global');\nvar getBuiltIn = require('../internals/get-built-in');\nvar apply = require('../internals/function-apply');\nvar call = require('../internals/function-call');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar IS_PURE = require('../internals/is-pure');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar NATIVE_SYMBOL = require('../internals/native-symbol');\nvar fails = require('../internals/fails');\nvar hasOwn = require('../internals/has-own-property');\nvar isArray = require('../internals/is-array');\nvar isCallable = require('../internals/is-callable');\nvar isObject = require('../internals/is-object');\nvar isPrototypeOf = require('../internals/object-is-prototype-of');\nvar isSymbol = require('../internals/is-symbol');\nvar anObject = require('../internals/an-object');\nvar toObject = require('../internals/to-object');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar toPropertyKey = require('../internals/to-property-key');\nvar $toString = require('../internals/to-string');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\nvar nativeObjectCreate = require('../internals/object-create');\nvar objectKeys = require('../internals/object-keys');\nvar getOwnPropertyNamesModule = require('../internals/object-get-own-property-names');\nvar getOwnPropertyNamesExternal = require('../internals/object-get-own-property-names-external');\nvar getOwnPropertySymbolsModule = require('../internals/object-get-own-property-symbols');\nvar getOwnPropertyDescriptorModule = require('../internals/object-get-own-property-descriptor');\nvar definePropertyModule = require('../internals/object-define-property');\nvar definePropertiesModule = require('../internals/object-define-properties');\nvar propertyIsEnumerableModule = require('../internals/object-property-is-enumerable');\nvar arraySlice = require('../internals/array-slice');\nvar redefine = require('../internals/redefine');\nvar shared = require('../internals/shared');\nvar sharedKey = require('../internals/shared-key');\nvar hiddenKeys = require('../internals/hidden-keys');\nvar uid = require('../internals/uid');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar wrappedWellKnownSymbolModule = require('../internals/well-known-symbol-wrapped');\nvar defineWellKnownSymbol = require('../internals/define-well-known-symbol');\nvar setToStringTag = require('../internals/set-to-string-tag');\nvar InternalStateModule = require('../internals/internal-state');\nvar $forEach = require('../internals/array-iteration').forEach;\n\nvar HIDDEN = sharedKey('hidden');\nvar SYMBOL = 'Symbol';\nvar PROTOTYPE = 'prototype';\nvar TO_PRIMITIVE = wellKnownSymbol('toPrimitive');\n\nvar setInternalState = InternalStateModule.set;\nvar getInternalState = InternalStateModule.getterFor(SYMBOL);\n\nvar ObjectPrototype = Object[PROTOTYPE];\nvar $Symbol = global.Symbol;\nvar SymbolPrototype = $Symbol && $Symbol[PROTOTYPE];\nvar TypeError = global.TypeError;\nvar QObject = global.QObject;\nvar $stringify = getBuiltIn('JSON', 'stringify');\nvar nativeGetOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;\nvar nativeDefineProperty = definePropertyModule.f;\nvar nativeGetOwnPropertyNames = getOwnPropertyNamesExternal.f;\nvar nativePropertyIsEnumerable = propertyIsEnumerableModule.f;\nvar push = uncurryThis([].push);\n\nvar AllSymbols = shared('symbols');\nvar ObjectPrototypeSymbols = shared('op-symbols');\nvar StringToSymbolRegistry = shared('string-to-symbol-registry');\nvar SymbolToStringRegistry = shared('symbol-to-string-registry');\nvar WellKnownSymbolsStore = shared('wks');\n\n// Don't use setters in Qt Script, https://github.com/zloirock/core-js/issues/173\nvar USE_SETTER = !QObject || !QObject[PROTOTYPE] || !QObject[PROTOTYPE].findChild;\n\n// fallback for old Android, https://code.google.com/p/v8/issues/detail?id=687\nvar setSymbolDescriptor = DESCRIPTORS && fails(function () {\n  return nativeObjectCreate(nativeDefineProperty({}, 'a', {\n    get: function () { return nativeDefineProperty(this, 'a', { value: 7 }).a; }\n  })).a != 7;\n}) ? function (O, P, Attributes) {\n  var ObjectPrototypeDescriptor = nativeGetOwnPropertyDescriptor(ObjectPrototype, P);\n  if (ObjectPrototypeDescriptor) delete ObjectPrototype[P];\n  nativeDefineProperty(O, P, Attributes);\n  if (ObjectPrototypeDescriptor && O !== ObjectPrototype) {\n    nativeDefineProperty(ObjectPrototype, P, ObjectPrototypeDescriptor);\n  }\n} : nativeDefineProperty;\n\nvar wrap = function (tag, description) {\n  var symbol = AllSymbols[tag] = nativeObjectCreate(SymbolPrototype);\n  setInternalState(symbol, {\n    type: SYMBOL,\n    tag: tag,\n    description: description\n  });\n  if (!DESCRIPTORS) symbol.description = description;\n  return symbol;\n};\n\nvar $defineProperty = function defineProperty(O, P, Attributes) {\n  if (O === ObjectPrototype) $defineProperty(ObjectPrototypeSymbols, P, Attributes);\n  anObject(O);\n  var key = toPropertyKey(P);\n  anObject(Attributes);\n  if (hasOwn(AllSymbols, key)) {\n    if (!Attributes.enumerable) {\n      if (!hasOwn(O, HIDDEN)) nativeDefineProperty(O, HIDDEN, createPropertyDescriptor(1, {}));\n      O[HIDDEN][key] = true;\n    } else {\n      if (hasOwn(O, HIDDEN) && O[HIDDEN][key]) O[HIDDEN][key] = false;\n      Attributes = nativeObjectCreate(Attributes, { enumerable: createPropertyDescriptor(0, false) });\n    } return setSymbolDescriptor(O, key, Attributes);\n  } return nativeDefineProperty(O, key, Attributes);\n};\n\nvar $defineProperties = function defineProperties(O, Properties) {\n  anObject(O);\n  var properties = toIndexedObject(Properties);\n  var keys = objectKeys(properties).concat($getOwnPropertySymbols(properties));\n  $forEach(keys, function (key) {\n    if (!DESCRIPTORS || call($propertyIsEnumerable, properties, key)) $defineProperty(O, key, properties[key]);\n  });\n  return O;\n};\n\nvar $create = function create(O, Properties) {\n  return Properties === undefined ? nativeObjectCreate(O) : $defineProperties(nativeObjectCreate(O), Properties);\n};\n\nvar $propertyIsEnumerable = function propertyIsEnumerable(V) {\n  var P = toPropertyKey(V);\n  var enumerable = call(nativePropertyIsEnumerable, this, P);\n  if (this === ObjectPrototype && hasOwn(AllSymbols, P) && !hasOwn(ObjectPrototypeSymbols, P)) return false;\n  return enumerable || !hasOwn(this, P) || !hasOwn(AllSymbols, P) || hasOwn(this, HIDDEN) && this[HIDDEN][P]\n    ? enumerable : true;\n};\n\nvar $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(O, P) {\n  var it = toIndexedObject(O);\n  var key = toPropertyKey(P);\n  if (it === ObjectPrototype && hasOwn(AllSymbols, key) && !hasOwn(ObjectPrototypeSymbols, key)) return;\n  var descriptor = nativeGetOwnPropertyDescriptor(it, key);\n  if (descriptor && hasOwn(AllSymbols, key) && !(hasOwn(it, HIDDEN) && it[HIDDEN][key])) {\n    descriptor.enumerable = true;\n  }\n  return descriptor;\n};\n\nvar $getOwnPropertyNames = function getOwnPropertyNames(O) {\n  var names = nativeGetOwnPropertyNames(toIndexedObject(O));\n  var result = [];\n  $forEach(names, function (key) {\n    if (!hasOwn(AllSymbols, key) && !hasOwn(hiddenKeys, key)) push(result, key);\n  });\n  return result;\n};\n\nvar $getOwnPropertySymbols = function getOwnPropertySymbols(O) {\n  var IS_OBJECT_PROTOTYPE = O === ObjectPrototype;\n  var names = nativeGetOwnPropertyNames(IS_OBJECT_PROTOTYPE ? ObjectPrototypeSymbols : toIndexedObject(O));\n  var result = [];\n  $forEach(names, function (key) {\n    if (hasOwn(AllSymbols, key) && (!IS_OBJECT_PROTOTYPE || hasOwn(ObjectPrototype, key))) {\n      push(result, AllSymbols[key]);\n    }\n  });\n  return result;\n};\n\n// `Symbol` constructor\n// https://tc39.es/ecma262/#sec-symbol-constructor\nif (!NATIVE_SYMBOL) {\n  $Symbol = function Symbol() {\n    if (isPrototypeOf(SymbolPrototype, this)) throw TypeError('Symbol is not a constructor');\n    var description = !arguments.length || arguments[0] === undefined ? undefined : $toString(arguments[0]);\n    var tag = uid(description);\n    var setter = function (value) {\n      if (this === ObjectPrototype) call(setter, ObjectPrototypeSymbols, value);\n      if (hasOwn(this, HIDDEN) && hasOwn(this[HIDDEN], tag)) this[HIDDEN][tag] = false;\n      setSymbolDescriptor(this, tag, createPropertyDescriptor(1, value));\n    };\n    if (DESCRIPTORS && USE_SETTER) setSymbolDescriptor(ObjectPrototype, tag, { configurable: true, set: setter });\n    return wrap(tag, description);\n  };\n\n  SymbolPrototype = $Symbol[PROTOTYPE];\n\n  redefine(SymbolPrototype, 'toString', function toString() {\n    return getInternalState(this).tag;\n  });\n\n  redefine($Symbol, 'withoutSetter', function (description) {\n    return wrap(uid(description), description);\n  });\n\n  propertyIsEnumerableModule.f = $propertyIsEnumerable;\n  definePropertyModule.f = $defineProperty;\n  definePropertiesModule.f = $defineProperties;\n  getOwnPropertyDescriptorModule.f = $getOwnPropertyDescriptor;\n  getOwnPropertyNamesModule.f = getOwnPropertyNamesExternal.f = $getOwnPropertyNames;\n  getOwnPropertySymbolsModule.f = $getOwnPropertySymbols;\n\n  wrappedWellKnownSymbolModule.f = function (name) {\n    return wrap(wellKnownSymbol(name), name);\n  };\n\n  if (DESCRIPTORS) {\n    // https://github.com/tc39/proposal-Symbol-description\n    nativeDefineProperty(SymbolPrototype, 'description', {\n      configurable: true,\n      get: function description() {\n        return getInternalState(this).description;\n      }\n    });\n    if (!IS_PURE) {\n      redefine(ObjectPrototype, 'propertyIsEnumerable', $propertyIsEnumerable, { unsafe: true });\n    }\n  }\n}\n\n$({ global: true, wrap: true, forced: !NATIVE_SYMBOL, sham: !NATIVE_SYMBOL }, {\n  Symbol: $Symbol\n});\n\n$forEach(objectKeys(WellKnownSymbolsStore), function (name) {\n  defineWellKnownSymbol(name);\n});\n\n$({ target: SYMBOL, stat: true, forced: !NATIVE_SYMBOL }, {\n  // `Symbol.for` method\n  // https://tc39.es/ecma262/#sec-symbol.for\n  'for': function (key) {\n    var string = $toString(key);\n    if (hasOwn(StringToSymbolRegistry, string)) return StringToSymbolRegistry[string];\n    var symbol = $Symbol(string);\n    StringToSymbolRegistry[string] = symbol;\n    SymbolToStringRegistry[symbol] = string;\n    return symbol;\n  },\n  // `Symbol.keyFor` method\n  // https://tc39.es/ecma262/#sec-symbol.keyfor\n  keyFor: function keyFor(sym) {\n    if (!isSymbol(sym)) throw TypeError(sym + ' is not a symbol');\n    if (hasOwn(SymbolToStringRegistry, sym)) return SymbolToStringRegistry[sym];\n  },\n  useSetter: function () { USE_SETTER = true; },\n  useSimple: function () { USE_SETTER = false; }\n});\n\n$({ target: 'Object', stat: true, forced: !NATIVE_SYMBOL, sham: !DESCRIPTORS }, {\n  // `Object.create` method\n  // https://tc39.es/ecma262/#sec-object.create\n  create: $create,\n  // `Object.defineProperty` method\n  // https://tc39.es/ecma262/#sec-object.defineproperty\n  defineProperty: $defineProperty,\n  // `Object.defineProperties` method\n  // https://tc39.es/ecma262/#sec-object.defineproperties\n  defineProperties: $defineProperties,\n  // `Object.getOwnPropertyDescriptor` method\n  // https://tc39.es/ecma262/#sec-object.getownpropertydescriptors\n  getOwnPropertyDescriptor: $getOwnPropertyDescriptor\n});\n\n$({ target: 'Object', stat: true, forced: !NATIVE_SYMBOL }, {\n  // `Object.getOwnPropertyNames` method\n  // https://tc39.es/ecma262/#sec-object.getownpropertynames\n  getOwnPropertyNames: $getOwnPropertyNames,\n  // `Object.getOwnPropertySymbols` method\n  // https://tc39.es/ecma262/#sec-object.getownpropertysymbols\n  getOwnPropertySymbols: $getOwnPropertySymbols\n});\n\n// Chrome 38 and 39 `Object.getOwnPropertySymbols` fails on primitives\n// https://bugs.chromium.org/p/v8/issues/detail?id=3443\n$({ target: 'Object', stat: true, forced: fails(function () { getOwnPropertySymbolsModule.f(1); }) }, {\n  getOwnPropertySymbols: function getOwnPropertySymbols(it) {\n    return getOwnPropertySymbolsModule.f(toObject(it));\n  }\n});\n\n// `JSON.stringify` method behavior with symbols\n// https://tc39.es/ecma262/#sec-json.stringify\nif ($stringify) {\n  var FORCED_JSON_STRINGIFY = !NATIVE_SYMBOL || fails(function () {\n    var symbol = $Symbol();\n    // MS Edge converts symbol values to JSON as {}\n    return $stringify([symbol]) != '[null]'\n      // WebKit converts symbol values to JSON as null\n      || $stringify({ a: symbol }) != '{}'\n      // V8 throws on boxed symbols\n      || $stringify(Object(symbol)) != '{}';\n  });\n\n  $({ target: 'JSON', stat: true, forced: FORCED_JSON_STRINGIFY }, {\n    // eslint-disable-next-line no-unused-vars -- required for `.length`\n    stringify: function stringify(it, replacer, space) {\n      var args = arraySlice(arguments);\n      var $replacer = replacer;\n      if (!isObject(replacer) && it === undefined || isSymbol(it)) return; // IE8 returns string on undefined\n      if (!isArray(replacer)) replacer = function (key, value) {\n        if (isCallable($replacer)) value = call($replacer, this, key, value);\n        if (!isSymbol(value)) return value;\n      };\n      args[1] = replacer;\n      return apply($stringify, null, args);\n    }\n  });\n}\n\n// `Symbol.prototype[@@toPrimitive]` method\n// https://tc39.es/ecma262/#sec-symbol.prototype-@@toprimitive\nif (!SymbolPrototype[TO_PRIMITIVE]) {\n  var valueOf = SymbolPrototype.valueOf;\n  // eslint-disable-next-line no-unused-vars -- required for .length\n  redefine(SymbolPrototype, TO_PRIMITIVE, function (hint) {\n    // TODO: improve hint logic\n    return call(valueOf, this);\n  });\n}\n// `Symbol.prototype[@@toStringTag]` property\n// https://tc39.es/ecma262/#sec-symbol.prototype-@@tostringtag\nsetToStringTag($Symbol, SYMBOL);\n\nhiddenKeys[HIDDEN] = true;\n","'use strict';\nvar global = require('../internals/global');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar redefineAll = require('../internals/redefine-all');\nvar InternalMetadataModule = require('../internals/internal-metadata');\nvar collection = require('../internals/collection');\nvar collectionWeak = require('../internals/collection-weak');\nvar isObject = require('../internals/is-object');\nvar isExtensible = require('../internals/object-is-extensible');\nvar enforceInternalState = require('../internals/internal-state').enforce;\nvar NATIVE_WEAK_MAP = require('../internals/native-weak-map');\n\nvar IS_IE11 = !global.ActiveXObject && 'ActiveXObject' in global;\nvar InternalWeakMap;\n\nvar wrapper = function (init) {\n  return function WeakMap() {\n    return init(this, arguments.length ? arguments[0] : undefined);\n  };\n};\n\n// `WeakMap` constructor\n// https://tc39.es/ecma262/#sec-weakmap-constructor\nvar $WeakMap = collection('WeakMap', wrapper, collectionWeak);\n\n// IE11 WeakMap frozen keys fix\n// We can't use feature detection because it crash some old IE builds\n// https://github.com/zloirock/core-js/issues/485\nif (NATIVE_WEAK_MAP && IS_IE11) {\n  InternalWeakMap = collectionWeak.getConstructor(wrapper, 'WeakMap', true);\n  InternalMetadataModule.enable();\n  var WeakMapPrototype = $WeakMap.prototype;\n  var nativeDelete = uncurryThis(WeakMapPrototype['delete']);\n  var nativeHas = uncurryThis(WeakMapPrototype.has);\n  var nativeGet = uncurryThis(WeakMapPrototype.get);\n  var nativeSet = uncurryThis(WeakMapPrototype.set);\n  redefineAll(WeakMapPrototype, {\n    'delete': function (key) {\n      if (isObject(key) && !isExtensible(key)) {\n        var state = enforceInternalState(this);\n        if (!state.frozen) state.frozen = new InternalWeakMap();\n        return nativeDelete(this, key) || state.frozen['delete'](key);\n      } return nativeDelete(this, key);\n    },\n    has: function has(key) {\n      if (isObject(key) && !isExtensible(key)) {\n        var state = enforceInternalState(this);\n        if (!state.frozen) state.frozen = new InternalWeakMap();\n        return nativeHas(this, key) || state.frozen.has(key);\n      } return nativeHas(this, key);\n    },\n    get: function get(key) {\n      if (isObject(key) && !isExtensible(key)) {\n        var state = enforceInternalState(this);\n        if (!state.frozen) state.frozen = new InternalWeakMap();\n        return nativeHas(this, key) ? nativeGet(this, key) : state.frozen.get(key);\n      } return nativeGet(this, key);\n    },\n    set: function set(key, value) {\n      if (isObject(key) && !isExtensible(key)) {\n        var state = enforceInternalState(this);\n        if (!state.frozen) state.frozen = new InternalWeakMap();\n        nativeHas(this, key) ? nativeSet(this, key, value) : state.frozen.set(key, value);\n      } else nativeSet(this, key, value);\n      return this;\n    }\n  });\n}\n","'use strict';\nvar collection = require('../internals/collection');\nvar collectionWeak = require('../internals/collection-weak');\n\n// `WeakSet` constructor\n// https://tc39.es/ecma262/#sec-weakset-constructor\ncollection('WeakSet', function (init) {\n  return function WeakSet() { return init(this, arguments.length ? arguments[0] : undefined); };\n}, collectionWeak);\n","'use strict';\nvar $ = require('../internals/export');\nvar deleteAll = require('../internals/collection-delete-all');\n\n// `WeakMap.prototype.deleteAll` method\n// https://github.com/tc39/proposal-collection-methods\n$({ target: 'WeakMap', proto: true, real: true, forced: true }, {\n  deleteAll: deleteAll\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar addAll = require('../internals/collection-add-all');\n\n// `WeakSet.prototype.addAll` method\n// https://github.com/tc39/proposal-collection-methods\n$({ target: 'WeakSet', proto: true, real: true, forced: true }, {\n  addAll: addAll\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar deleteAll = require('../internals/collection-delete-all');\n\n// `WeakSet.prototype.deleteAll` method\n// https://github.com/tc39/proposal-collection-methods\n$({ target: 'WeakSet', proto: true, real: true, forced: true }, {\n  deleteAll: deleteAll\n});\n","var global = require('../internals/global');\nvar DOMIterables = require('../internals/dom-iterables');\nvar DOMTokenListPrototype = require('../internals/dom-token-list-prototype');\nvar forEach = require('../internals/array-for-each');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\n\nvar handlePrototype = function (CollectionPrototype) {\n  // some Chrome versions have non-configurable methods on DOMTokenList\n  if (CollectionPrototype && CollectionPrototype.forEach !== forEach) try {\n    createNonEnumerableProperty(CollectionPrototype, 'forEach', forEach);\n  } catch (error) {\n    CollectionPrototype.forEach = forEach;\n  }\n};\n\nfor (var COLLECTION_NAME in DOMIterables) {\n  if (DOMIterables[COLLECTION_NAME]) {\n    handlePrototype(global[COLLECTION_NAME] && global[COLLECTION_NAME].prototype);\n  }\n}\n\nhandlePrototype(DOMTokenListPrototype);\n","var global = require('../internals/global');\nvar DOMIterables = require('../internals/dom-iterables');\nvar DOMTokenListPrototype = require('../internals/dom-token-list-prototype');\nvar ArrayIteratorMethods = require('../modules/es.array.iterator');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar ITERATOR = wellKnownSymbol('iterator');\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar ArrayValues = ArrayIteratorMethods.values;\n\nvar handlePrototype = function (CollectionPrototype, COLLECTION_NAME) {\n  if (CollectionPrototype) {\n    // some Chrome versions have non-configurable methods on DOMTokenList\n    if (CollectionPrototype[ITERATOR] !== ArrayValues) try {\n      createNonEnumerableProperty(CollectionPrototype, ITERATOR, ArrayValues);\n    } catch (error) {\n      CollectionPrototype[ITERATOR] = ArrayValues;\n    }\n    if (!CollectionPrototype[TO_STRING_TAG]) {\n      createNonEnumerableProperty(CollectionPrototype, TO_STRING_TAG, COLLECTION_NAME);\n    }\n    if (DOMIterables[COLLECTION_NAME]) for (var METHOD_NAME in ArrayIteratorMethods) {\n      // some Chrome versions have non-configurable methods on DOMTokenList\n      if (CollectionPrototype[METHOD_NAME] !== ArrayIteratorMethods[METHOD_NAME]) try {\n        createNonEnumerableProperty(CollectionPrototype, METHOD_NAME, ArrayIteratorMethods[METHOD_NAME]);\n      } catch (error) {\n        CollectionPrototype[METHOD_NAME] = ArrayIteratorMethods[METHOD_NAME];\n      }\n    }\n  }\n};\n\nfor (var COLLECTION_NAME in DOMIterables) {\n  handlePrototype(global[COLLECTION_NAME] && global[COLLECTION_NAME].prototype, COLLECTION_NAME);\n}\n\nhandlePrototype(DOMTokenListPrototype, 'DOMTokenList');\n","'use strict';\n// TODO: in core-js@4, move /modules/ dependencies to public entries for better optimization by tools like `preset-env`\nrequire('../modules/es.array.iterator');\nvar $ = require('../internals/export');\nvar global = require('../internals/global');\nvar getBuiltIn = require('../internals/get-built-in');\nvar call = require('../internals/function-call');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar USE_NATIVE_URL = require('../internals/native-url');\nvar redefine = require('../internals/redefine');\nvar redefineAll = require('../internals/redefine-all');\nvar setToStringTag = require('../internals/set-to-string-tag');\nvar createIteratorConstructor = require('../internals/create-iterator-constructor');\nvar InternalStateModule = require('../internals/internal-state');\nvar anInstance = require('../internals/an-instance');\nvar isCallable = require('../internals/is-callable');\nvar hasOwn = require('../internals/has-own-property');\nvar bind = require('../internals/function-bind-context');\nvar classof = require('../internals/classof');\nvar anObject = require('../internals/an-object');\nvar isObject = require('../internals/is-object');\nvar $toString = require('../internals/to-string');\nvar create = require('../internals/object-create');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\nvar getIterator = require('../internals/get-iterator');\nvar getIteratorMethod = require('../internals/get-iterator-method');\nvar validateArgumentsLength = require('../internals/validate-arguments-length');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar arraySort = require('../internals/array-sort');\n\nvar ITERATOR = wellKnownSymbol('iterator');\nvar URL_SEARCH_PARAMS = 'URLSearchParams';\nvar URL_SEARCH_PARAMS_ITERATOR = URL_SEARCH_PARAMS + 'Iterator';\nvar setInternalState = InternalStateModule.set;\nvar getInternalParamsState = InternalStateModule.getterFor(URL_SEARCH_PARAMS);\nvar getInternalIteratorState = InternalStateModule.getterFor(URL_SEARCH_PARAMS_ITERATOR);\n\nvar n$Fetch = getBuiltIn('fetch');\nvar N$Request = getBuiltIn('Request');\nvar Headers = getBuiltIn('Headers');\nvar RequestPrototype = N$Request && N$Request.prototype;\nvar HeadersPrototype = Headers && Headers.prototype;\nvar RegExp = global.RegExp;\nvar TypeError = global.TypeError;\nvar decodeURIComponent = global.decodeURIComponent;\nvar encodeURIComponent = global.encodeURIComponent;\nvar charAt = uncurryThis(''.charAt);\nvar join = uncurryThis([].join);\nvar push = uncurryThis([].push);\nvar replace = uncurryThis(''.replace);\nvar shift = uncurryThis([].shift);\nvar splice = uncurryThis([].splice);\nvar split = uncurryThis(''.split);\nvar stringSlice = uncurryThis(''.slice);\n\nvar plus = /\\+/g;\nvar sequences = Array(4);\n\nvar percentSequence = function (bytes) {\n  return sequences[bytes - 1] || (sequences[bytes - 1] = RegExp('((?:%[\\\\da-f]{2}){' + bytes + '})', 'gi'));\n};\n\nvar percentDecode = function (sequence) {\n  try {\n    return decodeURIComponent(sequence);\n  } catch (error) {\n    return sequence;\n  }\n};\n\nvar deserialize = function (it) {\n  var result = replace(it, plus, ' ');\n  var bytes = 4;\n  try {\n    return decodeURIComponent(result);\n  } catch (error) {\n    while (bytes) {\n      result = replace(result, percentSequence(bytes--), percentDecode);\n    }\n    return result;\n  }\n};\n\nvar find = /[!'()~]|%20/g;\n\nvar replacements = {\n  '!': '%21',\n  \"'\": '%27',\n  '(': '%28',\n  ')': '%29',\n  '~': '%7E',\n  '%20': '+'\n};\n\nvar replacer = function (match) {\n  return replacements[match];\n};\n\nvar serialize = function (it) {\n  return replace(encodeURIComponent(it), find, replacer);\n};\n\nvar URLSearchParamsIterator = createIteratorConstructor(function Iterator(params, kind) {\n  setInternalState(this, {\n    type: URL_SEARCH_PARAMS_ITERATOR,\n    iterator: getIterator(getInternalParamsState(params).entries),\n    kind: kind\n  });\n}, 'Iterator', function next() {\n  var state = getInternalIteratorState(this);\n  var kind = state.kind;\n  var step = state.iterator.next();\n  var entry = step.value;\n  if (!step.done) {\n    step.value = kind === 'keys' ? entry.key : kind === 'values' ? entry.value : [entry.key, entry.value];\n  } return step;\n}, true);\n\nvar URLSearchParamsState = function (init) {\n  this.entries = [];\n  this.url = null;\n\n  if (init !== undefined) {\n    if (isObject(init)) this.parseObject(init);\n    else this.parseQuery(typeof init == 'string' ? charAt(init, 0) === '?' ? stringSlice(init, 1) : init : $toString(init));\n  }\n};\n\nURLSearchParamsState.prototype = {\n  type: URL_SEARCH_PARAMS,\n  bindURL: function (url) {\n    this.url = url;\n    this.update();\n  },\n  parseObject: function (object) {\n    var iteratorMethod = getIteratorMethod(object);\n    var iterator, next, step, entryIterator, entryNext, first, second;\n\n    if (iteratorMethod) {\n      iterator = getIterator(object, iteratorMethod);\n      next = iterator.next;\n      while (!(step = call(next, iterator)).done) {\n        entryIterator = getIterator(anObject(step.value));\n        entryNext = entryIterator.next;\n        if (\n          (first = call(entryNext, entryIterator)).done ||\n          (second = call(entryNext, entryIterator)).done ||\n          !call(entryNext, entryIterator).done\n        ) throw TypeError('Expected sequence with length 2');\n        push(this.entries, { key: $toString(first.value), value: $toString(second.value) });\n      }\n    } else for (var key in object) if (hasOwn(object, key)) {\n      push(this.entries, { key: key, value: $toString(object[key]) });\n    }\n  },\n  parseQuery: function (query) {\n    if (query) {\n      var attributes = split(query, '&');\n      var index = 0;\n      var attribute, entry;\n      while (index < attributes.length) {\n        attribute = attributes[index++];\n        if (attribute.length) {\n          entry = split(attribute, '=');\n          push(this.entries, {\n            key: deserialize(shift(entry)),\n            value: deserialize(join(entry, '='))\n          });\n        }\n      }\n    }\n  },\n  serialize: function () {\n    var entries = this.entries;\n    var result = [];\n    var index = 0;\n    var entry;\n    while (index < entries.length) {\n      entry = entries[index++];\n      push(result, serialize(entry.key) + '=' + serialize(entry.value));\n    } return join(result, '&');\n  },\n  update: function () {\n    this.entries.length = 0;\n    this.parseQuery(this.url.query);\n  },\n  updateURL: function () {\n    if (this.url) this.url.update();\n  }\n};\n\n// `URLSearchParams` constructor\n// https://url.spec.whatwg.org/#interface-urlsearchparams\nvar URLSearchParamsConstructor = function URLSearchParams(/* init */) {\n  anInstance(this, URLSearchParamsPrototype);\n  var init = arguments.length > 0 ? arguments[0] : undefined;\n  setInternalState(this, new URLSearchParamsState(init));\n};\n\nvar URLSearchParamsPrototype = URLSearchParamsConstructor.prototype;\n\nredefineAll(URLSearchParamsPrototype, {\n  // `URLSearchParams.prototype.append` method\n  // https://url.spec.whatwg.org/#dom-urlsearchparams-append\n  append: function append(name, value) {\n    validateArgumentsLength(arguments.length, 2);\n    var state = getInternalParamsState(this);\n    push(state.entries, { key: $toString(name), value: $toString(value) });\n    state.updateURL();\n  },\n  // `URLSearchParams.prototype.delete` method\n  // https://url.spec.whatwg.org/#dom-urlsearchparams-delete\n  'delete': function (name) {\n    validateArgumentsLength(arguments.length, 1);\n    var state = getInternalParamsState(this);\n    var entries = state.entries;\n    var key = $toString(name);\n    var index = 0;\n    while (index < entries.length) {\n      if (entries[index].key === key) splice(entries, index, 1);\n      else index++;\n    }\n    state.updateURL();\n  },\n  // `URLSearchParams.prototype.get` method\n  // https://url.spec.whatwg.org/#dom-urlsearchparams-get\n  get: function get(name) {\n    validateArgumentsLength(arguments.length, 1);\n    var entries = getInternalParamsState(this).entries;\n    var key = $toString(name);\n    var index = 0;\n    for (; index < entries.length; index++) {\n      if (entries[index].key === key) return entries[index].value;\n    }\n    return null;\n  },\n  // `URLSearchParams.prototype.getAll` method\n  // https://url.spec.whatwg.org/#dom-urlsearchparams-getall\n  getAll: function getAll(name) {\n    validateArgumentsLength(arguments.length, 1);\n    var entries = getInternalParamsState(this).entries;\n    var key = $toString(name);\n    var result = [];\n    var index = 0;\n    for (; index < entries.length; index++) {\n      if (entries[index].key === key) push(result, entries[index].value);\n    }\n    return result;\n  },\n  // `URLSearchParams.prototype.has` method\n  // https://url.spec.whatwg.org/#dom-urlsearchparams-has\n  has: function has(name) {\n    validateArgumentsLength(arguments.length, 1);\n    var entries = getInternalParamsState(this).entries;\n    var key = $toString(name);\n    var index = 0;\n    while (index < entries.length) {\n      if (entries[index++].key === key) return true;\n    }\n    return false;\n  },\n  // `URLSearchParams.prototype.set` method\n  // https://url.spec.whatwg.org/#dom-urlsearchparams-set\n  set: function set(name, value) {\n    validateArgumentsLength(arguments.length, 1);\n    var state = getInternalParamsState(this);\n    var entries = state.entries;\n    var found = false;\n    var key = $toString(name);\n    var val = $toString(value);\n    var index = 0;\n    var entry;\n    for (; index < entries.length; index++) {\n      entry = entries[index];\n      if (entry.key === key) {\n        if (found) splice(entries, index--, 1);\n        else {\n          found = true;\n          entry.value = val;\n        }\n      }\n    }\n    if (!found) push(entries, { key: key, value: val });\n    state.updateURL();\n  },\n  // `URLSearchParams.prototype.sort` method\n  // https://url.spec.whatwg.org/#dom-urlsearchparams-sort\n  sort: function sort() {\n    var state = getInternalParamsState(this);\n    arraySort(state.entries, function (a, b) {\n      return a.key > b.key ? 1 : -1;\n    });\n    state.updateURL();\n  },\n  // `URLSearchParams.prototype.forEach` method\n  forEach: function forEach(callback /* , thisArg */) {\n    var entries = getInternalParamsState(this).entries;\n    var boundFunction = bind(callback, arguments.length > 1 ? arguments[1] : undefined);\n    var index = 0;\n    var entry;\n    while (index < entries.length) {\n      entry = entries[index++];\n      boundFunction(entry.value, entry.key, this);\n    }\n  },\n  // `URLSearchParams.prototype.keys` method\n  keys: function keys() {\n    return new URLSearchParamsIterator(this, 'keys');\n  },\n  // `URLSearchParams.prototype.values` method\n  values: function values() {\n    return new URLSearchParamsIterator(this, 'values');\n  },\n  // `URLSearchParams.prototype.entries` method\n  entries: function entries() {\n    return new URLSearchParamsIterator(this, 'entries');\n  }\n}, { enumerable: true });\n\n// `URLSearchParams.prototype[@@iterator]` method\nredefine(URLSearchParamsPrototype, ITERATOR, URLSearchParamsPrototype.entries, { name: 'entries' });\n\n// `URLSearchParams.prototype.toString` method\n// https://url.spec.whatwg.org/#urlsearchparams-stringification-behavior\nredefine(URLSearchParamsPrototype, 'toString', function toString() {\n  return getInternalParamsState(this).serialize();\n}, { enumerable: true });\n\nsetToStringTag(URLSearchParamsConstructor, URL_SEARCH_PARAMS);\n\n$({ global: true, forced: !USE_NATIVE_URL }, {\n  URLSearchParams: URLSearchParamsConstructor\n});\n\n// Wrap `fetch` and `Request` for correct work with polyfilled `URLSearchParams`\nif (!USE_NATIVE_URL && isCallable(Headers)) {\n  var headersHas = uncurryThis(HeadersPrototype.has);\n  var headersSet = uncurryThis(HeadersPrototype.set);\n\n  var wrapRequestOptions = function (init) {\n    if (isObject(init)) {\n      var body = init.body;\n      var headers;\n      if (classof(body) === URL_SEARCH_PARAMS) {\n        headers = init.headers ? new Headers(init.headers) : new Headers();\n        if (!headersHas(headers, 'content-type')) {\n          headersSet(headers, 'content-type', 'application/x-www-form-urlencoded;charset=UTF-8');\n        }\n        return create(init, {\n          body: createPropertyDescriptor(0, $toString(body)),\n          headers: createPropertyDescriptor(0, headers)\n        });\n      }\n    } return init;\n  };\n\n  if (isCallable(n$Fetch)) {\n    $({ global: true, enumerable: true, forced: true }, {\n      fetch: function fetch(input /* , init */) {\n        return n$Fetch(input, arguments.length > 1 ? wrapRequestOptions(arguments[1]) : {});\n      }\n    });\n  }\n\n  if (isCallable(N$Request)) {\n    var RequestConstructor = function Request(input /* , init */) {\n      anInstance(this, RequestPrototype);\n      return new N$Request(input, arguments.length > 1 ? wrapRequestOptions(arguments[1]) : {});\n    };\n\n    RequestPrototype.constructor = RequestConstructor;\n    RequestConstructor.prototype = RequestPrototype;\n\n    $({ global: true, forced: true }, {\n      Request: RequestConstructor\n    });\n  }\n}\n\nmodule.exports = {\n  URLSearchParams: URLSearchParamsConstructor,\n  getState: getInternalParamsState\n};\n","'use strict';\n// TODO: in core-js@4, move /modules/ dependencies to public entries for better optimization by tools like `preset-env`\nrequire('../modules/es.string.iterator');\nvar $ = require('../internals/export');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar USE_NATIVE_URL = require('../internals/native-url');\nvar global = require('../internals/global');\nvar bind = require('../internals/function-bind-context');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar defineProperties = require('../internals/object-define-properties').f;\nvar redefine = require('../internals/redefine');\nvar anInstance = require('../internals/an-instance');\nvar hasOwn = require('../internals/has-own-property');\nvar assign = require('../internals/object-assign');\nvar arrayFrom = require('../internals/array-from');\nvar arraySlice = require('../internals/array-slice-simple');\nvar codeAt = require('../internals/string-multibyte').codeAt;\nvar toASCII = require('../internals/string-punycode-to-ascii');\nvar $toString = require('../internals/to-string');\nvar setToStringTag = require('../internals/set-to-string-tag');\nvar validateArgumentsLength = require('../internals/validate-arguments-length');\nvar URLSearchParamsModule = require('../modules/web.url-search-params');\nvar InternalStateModule = require('../internals/internal-state');\n\nvar setInternalState = InternalStateModule.set;\nvar getInternalURLState = InternalStateModule.getterFor('URL');\nvar URLSearchParams = URLSearchParamsModule.URLSearchParams;\nvar getInternalSearchParamsState = URLSearchParamsModule.getState;\n\nvar NativeURL = global.URL;\nvar TypeError = global.TypeError;\nvar parseInt = global.parseInt;\nvar floor = Math.floor;\nvar pow = Math.pow;\nvar charAt = uncurryThis(''.charAt);\nvar exec = uncurryThis(/./.exec);\nvar join = uncurryThis([].join);\nvar numberToString = uncurryThis(1.0.toString);\nvar pop = uncurryThis([].pop);\nvar push = uncurryThis([].push);\nvar replace = uncurryThis(''.replace);\nvar shift = uncurryThis([].shift);\nvar split = uncurryThis(''.split);\nvar stringSlice = uncurryThis(''.slice);\nvar toLowerCase = uncurryThis(''.toLowerCase);\nvar unshift = uncurryThis([].unshift);\n\nvar INVALID_AUTHORITY = 'Invalid authority';\nvar INVALID_SCHEME = 'Invalid scheme';\nvar INVALID_HOST = 'Invalid host';\nvar INVALID_PORT = 'Invalid port';\n\nvar ALPHA = /[a-z]/i;\n// eslint-disable-next-line regexp/no-obscure-range -- safe\nvar ALPHANUMERIC = /[\\d+-.a-z]/i;\nvar DIGIT = /\\d/;\nvar HEX_START = /^0x/i;\nvar OCT = /^[0-7]+$/;\nvar DEC = /^\\d+$/;\nvar HEX = /^[\\da-f]+$/i;\n/* eslint-disable regexp/no-control-character -- safe */\nvar FORBIDDEN_HOST_CODE_POINT = /[\\0\\t\\n\\r #%/:<>?@[\\\\\\]^|]/;\nvar FORBIDDEN_HOST_CODE_POINT_EXCLUDING_PERCENT = /[\\0\\t\\n\\r #/:<>?@[\\\\\\]^|]/;\nvar LEADING_AND_TRAILING_C0_CONTROL_OR_SPACE = /^[\\u0000-\\u0020]+|[\\u0000-\\u0020]+$/g;\nvar TAB_AND_NEW_LINE = /[\\t\\n\\r]/g;\n/* eslint-enable regexp/no-control-character -- safe */\nvar EOF;\n\n// https://url.spec.whatwg.org/#ipv4-number-parser\nvar parseIPv4 = function (input) {\n  var parts = split(input, '.');\n  var partsLength, numbers, index, part, radix, number, ipv4;\n  if (parts.length && parts[parts.length - 1] == '') {\n    parts.length--;\n  }\n  partsLength = parts.length;\n  if (partsLength > 4) return input;\n  numbers = [];\n  for (index = 0; index < partsLength; index++) {\n    part = parts[index];\n    if (part == '') return input;\n    radix = 10;\n    if (part.length > 1 && charAt(part, 0) == '0') {\n      radix = exec(HEX_START, part) ? 16 : 8;\n      part = stringSlice(part, radix == 8 ? 1 : 2);\n    }\n    if (part === '') {\n      number = 0;\n    } else {\n      if (!exec(radix == 10 ? DEC : radix == 8 ? OCT : HEX, part)) return input;\n      number = parseInt(part, radix);\n    }\n    push(numbers, number);\n  }\n  for (index = 0; index < partsLength; index++) {\n    number = numbers[index];\n    if (index == partsLength - 1) {\n      if (number >= pow(256, 5 - partsLength)) return null;\n    } else if (number > 255) return null;\n  }\n  ipv4 = pop(numbers);\n  for (index = 0; index < numbers.length; index++) {\n    ipv4 += numbers[index] * pow(256, 3 - index);\n  }\n  return ipv4;\n};\n\n// https://url.spec.whatwg.org/#concept-ipv6-parser\n// eslint-disable-next-line max-statements -- TODO\nvar parseIPv6 = function (input) {\n  var address = [0, 0, 0, 0, 0, 0, 0, 0];\n  var pieceIndex = 0;\n  var compress = null;\n  var pointer = 0;\n  var value, length, numbersSeen, ipv4Piece, number, swaps, swap;\n\n  var chr = function () {\n    return charAt(input, pointer);\n  };\n\n  if (chr() == ':') {\n    if (charAt(input, 1) != ':') return;\n    pointer += 2;\n    pieceIndex++;\n    compress = pieceIndex;\n  }\n  while (chr()) {\n    if (pieceIndex == 8) return;\n    if (chr() == ':') {\n      if (compress !== null) return;\n      pointer++;\n      pieceIndex++;\n      compress = pieceIndex;\n      continue;\n    }\n    value = length = 0;\n    while (length < 4 && exec(HEX, chr())) {\n      value = value * 16 + parseInt(chr(), 16);\n      pointer++;\n      length++;\n    }\n    if (chr() == '.') {\n      if (length == 0) return;\n      pointer -= length;\n      if (pieceIndex > 6) return;\n      numbersSeen = 0;\n      while (chr()) {\n        ipv4Piece = null;\n        if (numbersSeen > 0) {\n          if (chr() == '.' && numbersSeen < 4) pointer++;\n          else return;\n        }\n        if (!exec(DIGIT, chr())) return;\n        while (exec(DIGIT, chr())) {\n          number = parseInt(chr(), 10);\n          if (ipv4Piece === null) ipv4Piece = number;\n          else if (ipv4Piece == 0) return;\n          else ipv4Piece = ipv4Piece * 10 + number;\n          if (ipv4Piece > 255) return;\n          pointer++;\n        }\n        address[pieceIndex] = address[pieceIndex] * 256 + ipv4Piece;\n        numbersSeen++;\n        if (numbersSeen == 2 || numbersSeen == 4) pieceIndex++;\n      }\n      if (numbersSeen != 4) return;\n      break;\n    } else if (chr() == ':') {\n      pointer++;\n      if (!chr()) return;\n    } else if (chr()) return;\n    address[pieceIndex++] = value;\n  }\n  if (compress !== null) {\n    swaps = pieceIndex - compress;\n    pieceIndex = 7;\n    while (pieceIndex != 0 && swaps > 0) {\n      swap = address[pieceIndex];\n      address[pieceIndex--] = address[compress + swaps - 1];\n      address[compress + --swaps] = swap;\n    }\n  } else if (pieceIndex != 8) return;\n  return address;\n};\n\nvar findLongestZeroSequence = function (ipv6) {\n  var maxIndex = null;\n  var maxLength = 1;\n  var currStart = null;\n  var currLength = 0;\n  var index = 0;\n  for (; index < 8; index++) {\n    if (ipv6[index] !== 0) {\n      if (currLength > maxLength) {\n        maxIndex = currStart;\n        maxLength = currLength;\n      }\n      currStart = null;\n      currLength = 0;\n    } else {\n      if (currStart === null) currStart = index;\n      ++currLength;\n    }\n  }\n  if (currLength > maxLength) {\n    maxIndex = currStart;\n    maxLength = currLength;\n  }\n  return maxIndex;\n};\n\n// https://url.spec.whatwg.org/#host-serializing\nvar serializeHost = function (host) {\n  var result, index, compress, ignore0;\n  // ipv4\n  if (typeof host == 'number') {\n    result = [];\n    for (index = 0; index < 4; index++) {\n      unshift(result, host % 256);\n      host = floor(host / 256);\n    } return join(result, '.');\n  // ipv6\n  } else if (typeof host == 'object') {\n    result = '';\n    compress = findLongestZeroSequence(host);\n    for (index = 0; index < 8; index++) {\n      if (ignore0 && host[index] === 0) continue;\n      if (ignore0) ignore0 = false;\n      if (compress === index) {\n        result += index ? ':' : '::';\n        ignore0 = true;\n      } else {\n        result += numberToString(host[index], 16);\n        if (index < 7) result += ':';\n      }\n    }\n    return '[' + result + ']';\n  } return host;\n};\n\nvar C0ControlPercentEncodeSet = {};\nvar fragmentPercentEncodeSet = assign({}, C0ControlPercentEncodeSet, {\n  ' ': 1, '\"': 1, '<': 1, '>': 1, '`': 1\n});\nvar pathPercentEncodeSet = assign({}, fragmentPercentEncodeSet, {\n  '#': 1, '?': 1, '{': 1, '}': 1\n});\nvar userinfoPercentEncodeSet = assign({}, pathPercentEncodeSet, {\n  '/': 1, ':': 1, ';': 1, '=': 1, '@': 1, '[': 1, '\\\\': 1, ']': 1, '^': 1, '|': 1\n});\n\nvar percentEncode = function (chr, set) {\n  var code = codeAt(chr, 0);\n  return code > 0x20 && code < 0x7F && !hasOwn(set, chr) ? chr : encodeURIComponent(chr);\n};\n\n// https://url.spec.whatwg.org/#special-scheme\nvar specialSchemes = {\n  ftp: 21,\n  file: null,\n  http: 80,\n  https: 443,\n  ws: 80,\n  wss: 443\n};\n\n// https://url.spec.whatwg.org/#windows-drive-letter\nvar isWindowsDriveLetter = function (string, normalized) {\n  var second;\n  return string.length == 2 && exec(ALPHA, charAt(string, 0))\n    && ((second = charAt(string, 1)) == ':' || (!normalized && second == '|'));\n};\n\n// https://url.spec.whatwg.org/#start-with-a-windows-drive-letter\nvar startsWithWindowsDriveLetter = function (string) {\n  var third;\n  return string.length > 1 && isWindowsDriveLetter(stringSlice(string, 0, 2)) && (\n    string.length == 2 ||\n    ((third = charAt(string, 2)) === '/' || third === '\\\\' || third === '?' || third === '#')\n  );\n};\n\n// https://url.spec.whatwg.org/#single-dot-path-segment\nvar isSingleDot = function (segment) {\n  return segment === '.' || toLowerCase(segment) === '%2e';\n};\n\n// https://url.spec.whatwg.org/#double-dot-path-segment\nvar isDoubleDot = function (segment) {\n  segment = toLowerCase(segment);\n  return segment === '..' || segment === '%2e.' || segment === '.%2e' || segment === '%2e%2e';\n};\n\n// States:\nvar SCHEME_START = {};\nvar SCHEME = {};\nvar NO_SCHEME = {};\nvar SPECIAL_RELATIVE_OR_AUTHORITY = {};\nvar PATH_OR_AUTHORITY = {};\nvar RELATIVE = {};\nvar RELATIVE_SLASH = {};\nvar SPECIAL_AUTHORITY_SLASHES = {};\nvar SPECIAL_AUTHORITY_IGNORE_SLASHES = {};\nvar AUTHORITY = {};\nvar HOST = {};\nvar HOSTNAME = {};\nvar PORT = {};\nvar FILE = {};\nvar FILE_SLASH = {};\nvar FILE_HOST = {};\nvar PATH_START = {};\nvar PATH = {};\nvar CANNOT_BE_A_BASE_URL_PATH = {};\nvar QUERY = {};\nvar FRAGMENT = {};\n\nvar URLState = function (url, isBase, base) {\n  var urlString = $toString(url);\n  var baseState, failure, searchParams;\n  if (isBase) {\n    failure = this.parse(urlString);\n    if (failure) throw TypeError(failure);\n    this.searchParams = null;\n  } else {\n    if (base !== undefined) baseState = new URLState(base, true);\n    failure = this.parse(urlString, null, baseState);\n    if (failure) throw TypeError(failure);\n    searchParams = getInternalSearchParamsState(new URLSearchParams());\n    searchParams.bindURL(this);\n    this.searchParams = searchParams;\n  }\n};\n\nURLState.prototype = {\n  type: 'URL',\n  // https://url.spec.whatwg.org/#url-parsing\n  // eslint-disable-next-line max-statements -- TODO\n  parse: function (input, stateOverride, base) {\n    var url = this;\n    var state = stateOverride || SCHEME_START;\n    var pointer = 0;\n    var buffer = '';\n    var seenAt = false;\n    var seenBracket = false;\n    var seenPasswordToken = false;\n    var codePoints, chr, bufferCodePoints, failure;\n\n    input = $toString(input);\n\n    if (!stateOverride) {\n      url.scheme = '';\n      url.username = '';\n      url.password = '';\n      url.host = null;\n      url.port = null;\n      url.path = [];\n      url.query = null;\n      url.fragment = null;\n      url.cannotBeABaseURL = false;\n      input = replace(input, LEADING_AND_TRAILING_C0_CONTROL_OR_SPACE, '');\n    }\n\n    input = replace(input, TAB_AND_NEW_LINE, '');\n\n    codePoints = arrayFrom(input);\n\n    while (pointer <= codePoints.length) {\n      chr = codePoints[pointer];\n      switch (state) {\n        case SCHEME_START:\n          if (chr && exec(ALPHA, chr)) {\n            buffer += toLowerCase(chr);\n            state = SCHEME;\n          } else if (!stateOverride) {\n            state = NO_SCHEME;\n            continue;\n          } else return INVALID_SCHEME;\n          break;\n\n        case SCHEME:\n          if (chr && (exec(ALPHANUMERIC, chr) || chr == '+' || chr == '-' || chr == '.')) {\n            buffer += toLowerCase(chr);\n          } else if (chr == ':') {\n            if (stateOverride && (\n              (url.isSpecial() != hasOwn(specialSchemes, buffer)) ||\n              (buffer == 'file' && (url.includesCredentials() || url.port !== null)) ||\n              (url.scheme == 'file' && !url.host)\n            )) return;\n            url.scheme = buffer;\n            if (stateOverride) {\n              if (url.isSpecial() && specialSchemes[url.scheme] == url.port) url.port = null;\n              return;\n            }\n            buffer = '';\n            if (url.scheme == 'file') {\n              state = FILE;\n            } else if (url.isSpecial() && base && base.scheme == url.scheme) {\n              state = SPECIAL_RELATIVE_OR_AUTHORITY;\n            } else if (url.isSpecial()) {\n              state = SPECIAL_AUTHORITY_SLASHES;\n            } else if (codePoints[pointer + 1] == '/') {\n              state = PATH_OR_AUTHORITY;\n              pointer++;\n            } else {\n              url.cannotBeABaseURL = true;\n              push(url.path, '');\n              state = CANNOT_BE_A_BASE_URL_PATH;\n            }\n          } else if (!stateOverride) {\n            buffer = '';\n            state = NO_SCHEME;\n            pointer = 0;\n            continue;\n          } else return INVALID_SCHEME;\n          break;\n\n        case NO_SCHEME:\n          if (!base || (base.cannotBeABaseURL && chr != '#')) return INVALID_SCHEME;\n          if (base.cannotBeABaseURL && chr == '#') {\n            url.scheme = base.scheme;\n            url.path = arraySlice(base.path);\n            url.query = base.query;\n            url.fragment = '';\n            url.cannotBeABaseURL = true;\n            state = FRAGMENT;\n            break;\n          }\n          state = base.scheme == 'file' ? FILE : RELATIVE;\n          continue;\n\n        case SPECIAL_RELATIVE_OR_AUTHORITY:\n          if (chr == '/' && codePoints[pointer + 1] == '/') {\n            state = SPECIAL_AUTHORITY_IGNORE_SLASHES;\n            pointer++;\n          } else {\n            state = RELATIVE;\n            continue;\n          } break;\n\n        case PATH_OR_AUTHORITY:\n          if (chr == '/') {\n            state = AUTHORITY;\n            break;\n          } else {\n            state = PATH;\n            continue;\n          }\n\n        case RELATIVE:\n          url.scheme = base.scheme;\n          if (chr == EOF) {\n            url.username = base.username;\n            url.password = base.password;\n            url.host = base.host;\n            url.port = base.port;\n            url.path = arraySlice(base.path);\n            url.query = base.query;\n          } else if (chr == '/' || (chr == '\\\\' && url.isSpecial())) {\n            state = RELATIVE_SLASH;\n          } else if (chr == '?') {\n            url.username = base.username;\n            url.password = base.password;\n            url.host = base.host;\n            url.port = base.port;\n            url.path = arraySlice(base.path);\n            url.query = '';\n            state = QUERY;\n          } else if (chr == '#') {\n            url.username = base.username;\n            url.password = base.password;\n            url.host = base.host;\n            url.port = base.port;\n            url.path = arraySlice(base.path);\n            url.query = base.query;\n            url.fragment = '';\n            state = FRAGMENT;\n          } else {\n            url.username = base.username;\n            url.password = base.password;\n            url.host = base.host;\n            url.port = base.port;\n            url.path = arraySlice(base.path);\n            url.path.length--;\n            state = PATH;\n            continue;\n          } break;\n\n        case RELATIVE_SLASH:\n          if (url.isSpecial() && (chr == '/' || chr == '\\\\')) {\n            state = SPECIAL_AUTHORITY_IGNORE_SLASHES;\n          } else if (chr == '/') {\n            state = AUTHORITY;\n          } else {\n            url.username = base.username;\n            url.password = base.password;\n            url.host = base.host;\n            url.port = base.port;\n            state = PATH;\n            continue;\n          } break;\n\n        case SPECIAL_AUTHORITY_SLASHES:\n          state = SPECIAL_AUTHORITY_IGNORE_SLASHES;\n          if (chr != '/' || charAt(buffer, pointer + 1) != '/') continue;\n          pointer++;\n          break;\n\n        case SPECIAL_AUTHORITY_IGNORE_SLASHES:\n          if (chr != '/' && chr != '\\\\') {\n            state = AUTHORITY;\n            continue;\n          } break;\n\n        case AUTHORITY:\n          if (chr == '@') {\n            if (seenAt) buffer = '%40' + buffer;\n            seenAt = true;\n            bufferCodePoints = arrayFrom(buffer);\n            for (var i = 0; i < bufferCodePoints.length; i++) {\n              var codePoint = bufferCodePoints[i];\n              if (codePoint == ':' && !seenPasswordToken) {\n                seenPasswordToken = true;\n                continue;\n              }\n              var encodedCodePoints = percentEncode(codePoint, userinfoPercentEncodeSet);\n              if (seenPasswordToken) url.password += encodedCodePoints;\n              else url.username += encodedCodePoints;\n            }\n            buffer = '';\n          } else if (\n            chr == EOF || chr == '/' || chr == '?' || chr == '#' ||\n            (chr == '\\\\' && url.isSpecial())\n          ) {\n            if (seenAt && buffer == '') return INVALID_AUTHORITY;\n            pointer -= arrayFrom(buffer).length + 1;\n            buffer = '';\n            state = HOST;\n          } else buffer += chr;\n          break;\n\n        case HOST:\n        case HOSTNAME:\n          if (stateOverride && url.scheme == 'file') {\n            state = FILE_HOST;\n            continue;\n          } else if (chr == ':' && !seenBracket) {\n            if (buffer == '') return INVALID_HOST;\n            failure = url.parseHost(buffer);\n            if (failure) return failure;\n            buffer = '';\n            state = PORT;\n            if (stateOverride == HOSTNAME) return;\n          } else if (\n            chr == EOF || chr == '/' || chr == '?' || chr == '#' ||\n            (chr == '\\\\' && url.isSpecial())\n          ) {\n            if (url.isSpecial() && buffer == '') return INVALID_HOST;\n            if (stateOverride && buffer == '' && (url.includesCredentials() || url.port !== null)) return;\n            failure = url.parseHost(buffer);\n            if (failure) return failure;\n            buffer = '';\n            state = PATH_START;\n            if (stateOverride) return;\n            continue;\n          } else {\n            if (chr == '[') seenBracket = true;\n            else if (chr == ']') seenBracket = false;\n            buffer += chr;\n          } break;\n\n        case PORT:\n          if (exec(DIGIT, chr)) {\n            buffer += chr;\n          } else if (\n            chr == EOF || chr == '/' || chr == '?' || chr == '#' ||\n            (chr == '\\\\' && url.isSpecial()) ||\n            stateOverride\n          ) {\n            if (buffer != '') {\n              var port = parseInt(buffer, 10);\n              if (port > 0xFFFF) return INVALID_PORT;\n              url.port = (url.isSpecial() && port === specialSchemes[url.scheme]) ? null : port;\n              buffer = '';\n            }\n            if (stateOverride) return;\n            state = PATH_START;\n            continue;\n          } else return INVALID_PORT;\n          break;\n\n        case FILE:\n          url.scheme = 'file';\n          if (chr == '/' || chr == '\\\\') state = FILE_SLASH;\n          else if (base && base.scheme == 'file') {\n            if (chr == EOF) {\n              url.host = base.host;\n              url.path = arraySlice(base.path);\n              url.query = base.query;\n            } else if (chr == '?') {\n              url.host = base.host;\n              url.path = arraySlice(base.path);\n              url.query = '';\n              state = QUERY;\n            } else if (chr == '#') {\n              url.host = base.host;\n              url.path = arraySlice(base.path);\n              url.query = base.query;\n              url.fragment = '';\n              state = FRAGMENT;\n            } else {\n              if (!startsWithWindowsDriveLetter(join(arraySlice(codePoints, pointer), ''))) {\n                url.host = base.host;\n                url.path = arraySlice(base.path);\n                url.shortenPath();\n              }\n              state = PATH;\n              continue;\n            }\n          } else {\n            state = PATH;\n            continue;\n          } break;\n\n        case FILE_SLASH:\n          if (chr == '/' || chr == '\\\\') {\n            state = FILE_HOST;\n            break;\n          }\n          if (base && base.scheme == 'file' && !startsWithWindowsDriveLetter(join(arraySlice(codePoints, pointer), ''))) {\n            if (isWindowsDriveLetter(base.path[0], true)) push(url.path, base.path[0]);\n            else url.host = base.host;\n          }\n          state = PATH;\n          continue;\n\n        case FILE_HOST:\n          if (chr == EOF || chr == '/' || chr == '\\\\' || chr == '?' || chr == '#') {\n            if (!stateOverride && isWindowsDriveLetter(buffer)) {\n              state = PATH;\n            } else if (buffer == '') {\n              url.host = '';\n              if (stateOverride) return;\n              state = PATH_START;\n            } else {\n              failure = url.parseHost(buffer);\n              if (failure) return failure;\n              if (url.host == 'localhost') url.host = '';\n              if (stateOverride) return;\n              buffer = '';\n              state = PATH_START;\n            } continue;\n          } else buffer += chr;\n          break;\n\n        case PATH_START:\n          if (url.isSpecial()) {\n            state = PATH;\n            if (chr != '/' && chr != '\\\\') continue;\n          } else if (!stateOverride && chr == '?') {\n            url.query = '';\n            state = QUERY;\n          } else if (!stateOverride && chr == '#') {\n            url.fragment = '';\n            state = FRAGMENT;\n          } else if (chr != EOF) {\n            state = PATH;\n            if (chr != '/') continue;\n          } break;\n\n        case PATH:\n          if (\n            chr == EOF || chr == '/' ||\n            (chr == '\\\\' && url.isSpecial()) ||\n            (!stateOverride && (chr == '?' || chr == '#'))\n          ) {\n            if (isDoubleDot(buffer)) {\n              url.shortenPath();\n              if (chr != '/' && !(chr == '\\\\' && url.isSpecial())) {\n                push(url.path, '');\n              }\n            } else if (isSingleDot(buffer)) {\n              if (chr != '/' && !(chr == '\\\\' && url.isSpecial())) {\n                push(url.path, '');\n              }\n            } else {\n              if (url.scheme == 'file' && !url.path.length && isWindowsDriveLetter(buffer)) {\n                if (url.host) url.host = '';\n                buffer = charAt(buffer, 0) + ':'; // normalize windows drive letter\n              }\n              push(url.path, buffer);\n            }\n            buffer = '';\n            if (url.scheme == 'file' && (chr == EOF || chr == '?' || chr == '#')) {\n              while (url.path.length > 1 && url.path[0] === '') {\n                shift(url.path);\n              }\n            }\n            if (chr == '?') {\n              url.query = '';\n              state = QUERY;\n            } else if (chr == '#') {\n              url.fragment = '';\n              state = FRAGMENT;\n            }\n          } else {\n            buffer += percentEncode(chr, pathPercentEncodeSet);\n          } break;\n\n        case CANNOT_BE_A_BASE_URL_PATH:\n          if (chr == '?') {\n            url.query = '';\n            state = QUERY;\n          } else if (chr == '#') {\n            url.fragment = '';\n            state = FRAGMENT;\n          } else if (chr != EOF) {\n            url.path[0] += percentEncode(chr, C0ControlPercentEncodeSet);\n          } break;\n\n        case QUERY:\n          if (!stateOverride && chr == '#') {\n            url.fragment = '';\n            state = FRAGMENT;\n          } else if (chr != EOF) {\n            if (chr == \"'\" && url.isSpecial()) url.query += '%27';\n            else if (chr == '#') url.query += '%23';\n            else url.query += percentEncode(chr, C0ControlPercentEncodeSet);\n          } break;\n\n        case FRAGMENT:\n          if (chr != EOF) url.fragment += percentEncode(chr, fragmentPercentEncodeSet);\n          break;\n      }\n\n      pointer++;\n    }\n  },\n  // https://url.spec.whatwg.org/#host-parsing\n  parseHost: function (input) {\n    var result, codePoints, index;\n    if (charAt(input, 0) == '[') {\n      if (charAt(input, input.length - 1) != ']') return INVALID_HOST;\n      result = parseIPv6(stringSlice(input, 1, -1));\n      if (!result) return INVALID_HOST;\n      this.host = result;\n    // opaque host\n    } else if (!this.isSpecial()) {\n      if (exec(FORBIDDEN_HOST_CODE_POINT_EXCLUDING_PERCENT, input)) return INVALID_HOST;\n      result = '';\n      codePoints = arrayFrom(input);\n      for (index = 0; index < codePoints.length; index++) {\n        result += percentEncode(codePoints[index], C0ControlPercentEncodeSet);\n      }\n      this.host = result;\n    } else {\n      input = toASCII(input);\n      if (exec(FORBIDDEN_HOST_CODE_POINT, input)) return INVALID_HOST;\n      result = parseIPv4(input);\n      if (result === null) return INVALID_HOST;\n      this.host = result;\n    }\n  },\n  // https://url.spec.whatwg.org/#cannot-have-a-username-password-port\n  cannotHaveUsernamePasswordPort: function () {\n    return !this.host || this.cannotBeABaseURL || this.scheme == 'file';\n  },\n  // https://url.spec.whatwg.org/#include-credentials\n  includesCredentials: function () {\n    return this.username != '' || this.password != '';\n  },\n  // https://url.spec.whatwg.org/#is-special\n  isSpecial: function () {\n    return hasOwn(specialSchemes, this.scheme);\n  },\n  // https://url.spec.whatwg.org/#shorten-a-urls-path\n  shortenPath: function () {\n    var path = this.path;\n    var pathSize = path.length;\n    if (pathSize && (this.scheme != 'file' || pathSize != 1 || !isWindowsDriveLetter(path[0], true))) {\n      path.length--;\n    }\n  },\n  // https://url.spec.whatwg.org/#concept-url-serializer\n  serialize: function () {\n    var url = this;\n    var scheme = url.scheme;\n    var username = url.username;\n    var password = url.password;\n    var host = url.host;\n    var port = url.port;\n    var path = url.path;\n    var query = url.query;\n    var fragment = url.fragment;\n    var output = scheme + ':';\n    if (host !== null) {\n      output += '//';\n      if (url.includesCredentials()) {\n        output += username + (password ? ':' + password : '') + '@';\n      }\n      output += serializeHost(host);\n      if (port !== null) output += ':' + port;\n    } else if (scheme == 'file') output += '//';\n    output += url.cannotBeABaseURL ? path[0] : path.length ? '/' + join(path, '/') : '';\n    if (query !== null) output += '?' + query;\n    if (fragment !== null) output += '#' + fragment;\n    return output;\n  },\n  // https://url.spec.whatwg.org/#dom-url-href\n  setHref: function (href) {\n    var failure = this.parse(href);\n    if (failure) throw TypeError(failure);\n    this.searchParams.update();\n  },\n  // https://url.spec.whatwg.org/#dom-url-origin\n  getOrigin: function () {\n    var scheme = this.scheme;\n    var port = this.port;\n    if (scheme == 'blob') try {\n      return new URLConstructor(scheme.path[0]).origin;\n    } catch (error) {\n      return 'null';\n    }\n    if (scheme == 'file' || !this.isSpecial()) return 'null';\n    return scheme + '://' + serializeHost(this.host) + (port !== null ? ':' + port : '');\n  },\n  // https://url.spec.whatwg.org/#dom-url-protocol\n  getProtocol: function () {\n    return this.scheme + ':';\n  },\n  setProtocol: function (protocol) {\n    this.parse($toString(protocol) + ':', SCHEME_START);\n  },\n  // https://url.spec.whatwg.org/#dom-url-username\n  getUsername: function () {\n    return this.username;\n  },\n  setUsername: function (username) {\n    var codePoints = arrayFrom($toString(username));\n    if (this.cannotHaveUsernamePasswordPort()) return;\n    this.username = '';\n    for (var i = 0; i < codePoints.length; i++) {\n      this.username += percentEncode(codePoints[i], userinfoPercentEncodeSet);\n    }\n  },\n  // https://url.spec.whatwg.org/#dom-url-password\n  getPassword: function () {\n    return this.password;\n  },\n  setPassword: function (password) {\n    var codePoints = arrayFrom($toString(password));\n    if (this.cannotHaveUsernamePasswordPort()) return;\n    this.password = '';\n    for (var i = 0; i < codePoints.length; i++) {\n      this.password += percentEncode(codePoints[i], userinfoPercentEncodeSet);\n    }\n  },\n  // https://url.spec.whatwg.org/#dom-url-host\n  getHost: function () {\n    var host = this.host;\n    var port = this.port;\n    return host === null ? ''\n      : port === null ? serializeHost(host)\n      : serializeHost(host) + ':' + port;\n  },\n  setHost: function (host) {\n    if (this.cannotBeABaseURL) return;\n    this.parse(host, HOST);\n  },\n  // https://url.spec.whatwg.org/#dom-url-hostname\n  getHostname: function () {\n    var host = this.host;\n    return host === null ? '' : serializeHost(host);\n  },\n  setHostname: function (hostname) {\n    if (this.cannotBeABaseURL) return;\n    this.parse(hostname, HOSTNAME);\n  },\n  // https://url.spec.whatwg.org/#dom-url-port\n  getPort: function () {\n    var port = this.port;\n    return port === null ? '' : $toString(port);\n  },\n  setPort: function (port) {\n    if (this.cannotHaveUsernamePasswordPort()) return;\n    port = $toString(port);\n    if (port == '') this.port = null;\n    else this.parse(port, PORT);\n  },\n  // https://url.spec.whatwg.org/#dom-url-pathname\n  getPathname: function () {\n    var path = this.path;\n    return this.cannotBeABaseURL ? path[0] : path.length ? '/' + join(path, '/') : '';\n  },\n  setPathname: function (pathname) {\n    if (this.cannotBeABaseURL) return;\n    this.path = [];\n    this.parse(pathname, PATH_START);\n  },\n  // https://url.spec.whatwg.org/#dom-url-search\n  getSearch: function () {\n    var query = this.query;\n    return query ? '?' + query : '';\n  },\n  setSearch: function (search) {\n    search = $toString(search);\n    if (search == '') {\n      this.query = null;\n    } else {\n      if ('?' == charAt(search, 0)) search = stringSlice(search, 1);\n      this.query = '';\n      this.parse(search, QUERY);\n    }\n    this.searchParams.update();\n  },\n  // https://url.spec.whatwg.org/#dom-url-searchparams\n  getSearchParams: function () {\n    return this.searchParams.facade;\n  },\n  // https://url.spec.whatwg.org/#dom-url-hash\n  getHash: function () {\n    var fragment = this.fragment;\n    return fragment ? '#' + fragment : '';\n  },\n  setHash: function (hash) {\n    hash = $toString(hash);\n    if (hash == '') {\n      this.fragment = null;\n      return;\n    }\n    if ('#' == charAt(hash, 0)) hash = stringSlice(hash, 1);\n    this.fragment = '';\n    this.parse(hash, FRAGMENT);\n  },\n  update: function () {\n    this.query = this.searchParams.serialize() || null;\n  }\n};\n\n// `URL` constructor\n// https://url.spec.whatwg.org/#url-class\nvar URLConstructor = function URL(url /* , base */) {\n  var that = anInstance(this, URLPrototype);\n  var base = validateArgumentsLength(arguments.length, 1) > 1 ? arguments[1] : undefined;\n  var state = setInternalState(that, new URLState(url, false, base));\n  if (!DESCRIPTORS) {\n    that.href = state.serialize();\n    that.origin = state.getOrigin();\n    that.protocol = state.getProtocol();\n    that.username = state.getUsername();\n    that.password = state.getPassword();\n    that.host = state.getHost();\n    that.hostname = state.getHostname();\n    that.port = state.getPort();\n    that.pathname = state.getPathname();\n    that.search = state.getSearch();\n    that.searchParams = state.getSearchParams();\n    that.hash = state.getHash();\n  }\n};\n\nvar URLPrototype = URLConstructor.prototype;\n\nvar accessorDescriptor = function (getter, setter) {\n  return {\n    get: function () {\n      return getInternalURLState(this)[getter]();\n    },\n    set: setter && function (value) {\n      return getInternalURLState(this)[setter](value);\n    },\n    configurable: true,\n    enumerable: true\n  };\n};\n\nif (DESCRIPTORS) {\n  defineProperties(URLPrototype, {\n    // `URL.prototype.href` accessors pair\n    // https://url.spec.whatwg.org/#dom-url-href\n    href: accessorDescriptor('serialize', 'setHref'),\n    // `URL.prototype.origin` getter\n    // https://url.spec.whatwg.org/#dom-url-origin\n    origin: accessorDescriptor('getOrigin'),\n    // `URL.prototype.protocol` accessors pair\n    // https://url.spec.whatwg.org/#dom-url-protocol\n    protocol: accessorDescriptor('getProtocol', 'setProtocol'),\n    // `URL.prototype.username` accessors pair\n    // https://url.spec.whatwg.org/#dom-url-username\n    username: accessorDescriptor('getUsername', 'setUsername'),\n    // `URL.prototype.password` accessors pair\n    // https://url.spec.whatwg.org/#dom-url-password\n    password: accessorDescriptor('getPassword', 'setPassword'),\n    // `URL.prototype.host` accessors pair\n    // https://url.spec.whatwg.org/#dom-url-host\n    host: accessorDescriptor('getHost', 'setHost'),\n    // `URL.prototype.hostname` accessors pair\n    // https://url.spec.whatwg.org/#dom-url-hostname\n    hostname: accessorDescriptor('getHostname', 'setHostname'),\n    // `URL.prototype.port` accessors pair\n    // https://url.spec.whatwg.org/#dom-url-port\n    port: accessorDescriptor('getPort', 'setPort'),\n    // `URL.prototype.pathname` accessors pair\n    // https://url.spec.whatwg.org/#dom-url-pathname\n    pathname: accessorDescriptor('getPathname', 'setPathname'),\n    // `URL.prototype.search` accessors pair\n    // https://url.spec.whatwg.org/#dom-url-search\n    search: accessorDescriptor('getSearch', 'setSearch'),\n    // `URL.prototype.searchParams` getter\n    // https://url.spec.whatwg.org/#dom-url-searchparams\n    searchParams: accessorDescriptor('getSearchParams'),\n    // `URL.prototype.hash` accessors pair\n    // https://url.spec.whatwg.org/#dom-url-hash\n    hash: accessorDescriptor('getHash', 'setHash')\n  });\n}\n\n// `URL.prototype.toJSON` method\n// https://url.spec.whatwg.org/#dom-url-tojson\nredefine(URLPrototype, 'toJSON', function toJSON() {\n  return getInternalURLState(this).serialize();\n}, { enumerable: true });\n\n// `URL.prototype.toString` method\n// https://url.spec.whatwg.org/#URL-stringification-behavior\nredefine(URLPrototype, 'toString', function toString() {\n  return getInternalURLState(this).serialize();\n}, { enumerable: true });\n\nif (NativeURL) {\n  var nativeCreateObjectURL = NativeURL.createObjectURL;\n  var nativeRevokeObjectURL = NativeURL.revokeObjectURL;\n  // `URL.createObjectURL` method\n  // https://developer.mozilla.org/en-US/docs/Web/API/URL/createObjectURL\n  if (nativeCreateObjectURL) redefine(URLConstructor, 'createObjectURL', bind(nativeCreateObjectURL, NativeURL));\n  // `URL.revokeObjectURL` method\n  // https://developer.mozilla.org/en-US/docs/Web/API/URL/revokeObjectURL\n  if (nativeRevokeObjectURL) redefine(URLConstructor, 'revokeObjectURL', bind(nativeRevokeObjectURL, NativeURL));\n}\n\nsetToStringTag(URLConstructor, 'URL');\n\n$({ global: true, forced: !USE_NATIVE_URL, sham: !DESCRIPTORS }, {\n  URL: URLConstructor\n});\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\nmodule.exports = function (cssWithMappingToString) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = \"\";\n      var needLayer = typeof item[5] !== \"undefined\";\n\n      if (item[4]) {\n        content += \"@supports (\".concat(item[4], \") {\");\n      }\n\n      if (item[2]) {\n        content += \"@media \".concat(item[2], \" {\");\n      }\n\n      if (needLayer) {\n        content += \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\");\n      }\n\n      content += cssWithMappingToString(item);\n\n      if (needLayer) {\n        content += \"}\";\n      }\n\n      if (item[2]) {\n        content += \"}\";\n      }\n\n      if (item[4]) {\n        content += \"}\";\n      }\n\n      return content;\n    }).join(\"\");\n  }; // import a list of modules into the list\n\n\n  list.i = function i(modules, media, dedupe, supports, layer) {\n    if (typeof modules === \"string\") {\n      modules = [[null, modules, undefined]];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var k = 0; k < this.length; k++) {\n        var id = this[k][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _k = 0; _k < modules.length; _k++) {\n      var item = [].concat(modules[_k]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        continue;\n      }\n\n      if (typeof layer !== \"undefined\") {\n        if (typeof item[5] === \"undefined\") {\n          item[5] = layer;\n        } else {\n          item[1] = \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\").concat(item[1], \"}\");\n          item[5] = layer;\n        }\n      }\n\n      if (media) {\n        if (!item[2]) {\n          item[2] = media;\n        } else {\n          item[1] = \"@media \".concat(item[2], \" {\").concat(item[1], \"}\");\n          item[2] = media;\n        }\n      }\n\n      if (supports) {\n        if (!item[4]) {\n          item[4] = \"\".concat(supports);\n        } else {\n          item[1] = \"@supports (\".concat(item[4], \") {\").concat(item[1], \"}\");\n          item[4] = supports;\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};","\"use strict\";\n\nmodule.exports = function (url, options) {\n  if (!options) {\n    options = {};\n  }\n\n  if (!url) {\n    return url;\n  }\n\n  url = String(url.__esModule ? url.default : url); // If url is already wrapped in quotes, remove them\n\n  if (/^['\"].*['\"]$/.test(url)) {\n    url = url.slice(1, -1);\n  }\n\n  if (options.hash) {\n    url += options.hash;\n  } // Should url be wrapped?\n  // See https://drafts.csswg.org/css-values-3/#urls\n\n\n  if (/[\"'() \\t\\n]|(%20)/.test(url) || options.needQuotes) {\n    return \"\\\"\".concat(url.replace(/\"/g, '\\\\\"').replace(/\\n/g, \"\\\\n\"), \"\\\"\");\n  }\n\n  return url;\n};","\"use strict\";\n\nmodule.exports = function (item) {\n  var content = item[1];\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (typeof btoa === \"function\") {\n    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));\n    var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n    var sourceMapping = \"/*# \".concat(data, \" */\");\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || \"\").concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join(\"\\n\");\n  }\n\n  return [content].join(\"\\n\");\n};","(function (global) {\n    'use strict';\n\n    var util = newUtil();\n    var inliner = newInliner();\n    var fontFaces = newFontFaces();\n    var images = newImages();\n\n    // Default impl options\n    var defaultOptions = {\n        // Default is to fail on error, no placeholder\n        imagePlaceholder: undefined,\n        // Default cache bust is false, it will use the cache\n        cacheBust: false\n    };\n\n    var domtoimage = {\n        toSvg: toSvg,\n        toPng: toPng,\n        toJpeg: toJpeg,\n        toBlob: toBlob,\n        toPixelData: toPixelData,\n        impl: {\n            fontFaces: fontFaces,\n            images: images,\n            util: util,\n            inliner: inliner,\n            options: {}\n        }\n    };\n\n    if (typeof module !== 'undefined')\n        module.exports = domtoimage;\n    else\n        global.domtoimage = domtoimage;\n\n\n    /**\n     * @param {Node} node - The DOM Node object to render\n     * @param {Object} options - Rendering options\n     * @param {Function} options.filter - Should return true if passed node should be included in the output\n     *          (excluding node means excluding it's children as well). Not called on the root node.\n     * @param {String} options.bgcolor - color for the background, any valid CSS color value.\n     * @param {Number} options.width - width to be applied to node before rendering.\n     * @param {Number} options.height - height to be applied to node before rendering.\n     * @param {Object} options.style - an object whose properties to be copied to node's style before rendering.\n     * @param {Number} options.quality - a Number between 0 and 1 indicating image quality (applicable to JPEG only),\n                defaults to 1.0.\n     * @param {String} options.imagePlaceholder - dataURL to use as a placeholder for failed images, default behaviour is to fail fast on images we can't fetch\n     * @param {Boolean} options.cacheBust - set to true to cache bust by appending the time to the request url\n     * @return {Promise} - A promise that is fulfilled with a SVG image data URL\n     * */\n    function toSvg(node, options) {\n        options = options || {};\n        copyOptions(options);\n        return Promise.resolve(node)\n            .then(function (node) {\n                return cloneNode(node, options.filter, true);\n            })\n            .then(embedFonts)\n            .then(inlineImages)\n            .then(applyOptions)\n            .then(function (clone) {\n                return makeSvgDataUri(clone,\n                    options.width || util.width(node),\n                    options.height || util.height(node)\n                );\n            });\n\n        function applyOptions(clone) {\n            if (options.bgcolor) clone.style.backgroundColor = options.bgcolor;\n\n            if (options.width) clone.style.width = options.width + 'px';\n            if (options.height) clone.style.height = options.height + 'px';\n\n            if (options.style)\n                Object.keys(options.style).forEach(function (property) {\n                    clone.style[property] = options.style[property];\n                });\n\n            return clone;\n        }\n    }\n\n    /**\n     * @param {Node} node - The DOM Node object to render\n     * @param {Object} options - Rendering options, @see {@link toSvg}\n     * @return {Promise} - A promise that is fulfilled with a Uint8Array containing RGBA pixel data.\n     * */\n    function toPixelData(node, options) {\n        return draw(node, options || {})\n            .then(function (canvas) {\n                return canvas.getContext('2d').getImageData(\n                    0,\n                    0,\n                    util.width(node),\n                    util.height(node)\n                ).data;\n            });\n    }\n\n    /**\n     * @param {Node} node - The DOM Node object to render\n     * @param {Object} options - Rendering options, @see {@link toSvg}\n     * @return {Promise} - A promise that is fulfilled with a PNG image data URL\n     * */\n    function toPng(node, options) {\n        return draw(node, options || {})\n            .then(function (canvas) {\n                return canvas.toDataURL();\n            });\n    }\n\n    /**\n     * @param {Node} node - The DOM Node object to render\n     * @param {Object} options - Rendering options, @see {@link toSvg}\n     * @return {Promise} - A promise that is fulfilled with a JPEG image data URL\n     * */\n    function toJpeg(node, options) {\n        options = options || {};\n        return draw(node, options)\n            .then(function (canvas) {\n                return canvas.toDataURL('image/jpeg', options.quality || 1.0);\n            });\n    }\n\n    /**\n     * @param {Node} node - The DOM Node object to render\n     * @param {Object} options - Rendering options, @see {@link toSvg}\n     * @return {Promise} - A promise that is fulfilled with a PNG image blob\n     * */\n    function toBlob(node, options) {\n        return draw(node, options || {})\n            .then(util.canvasToBlob);\n    }\n\n    function copyOptions(options) {\n        // Copy options to impl options for use in impl\n        if(typeof(options.imagePlaceholder) === 'undefined') {\n            domtoimage.impl.options.imagePlaceholder = defaultOptions.imagePlaceholder;\n        } else {\n            domtoimage.impl.options.imagePlaceholder = options.imagePlaceholder;\n        }\n\n        if(typeof(options.cacheBust) === 'undefined') {\n            domtoimage.impl.options.cacheBust = defaultOptions.cacheBust;\n        } else {\n            domtoimage.impl.options.cacheBust = options.cacheBust;\n        }\n    }\n\n    function draw(domNode, options) {\n        return toSvg(domNode, options)\n            .then(util.makeImage)\n            .then(util.delay(100))\n            .then(function (image) {\n                var canvas = newCanvas(domNode);\n                canvas.getContext('2d').drawImage(image, 0, 0);\n                return canvas;\n            });\n\n        function newCanvas(domNode) {\n            var canvas = document.createElement('canvas');\n            canvas.width = options.width || util.width(domNode);\n            canvas.height = options.height || util.height(domNode);\n\n            if (options.bgcolor) {\n                var ctx = canvas.getContext('2d');\n                ctx.fillStyle = options.bgcolor;\n                ctx.fillRect(0, 0, canvas.width, canvas.height);\n            }\n\n            return canvas;\n        }\n    }\n\n    function cloneNode(node, filter, root) {\n        if (!root && filter && !filter(node)) return Promise.resolve();\n\n        return Promise.resolve(node)\n            .then(makeNodeCopy)\n            .then(function (clone) {\n                return cloneChildren(node, clone, filter);\n            })\n            .then(function (clone) {\n                return processClone(node, clone);\n            });\n\n        function makeNodeCopy(node) {\n            if (node instanceof HTMLCanvasElement) return util.makeImage(node.toDataURL());\n            return node.cloneNode(false);\n        }\n\n        function cloneChildren(original, clone, filter) {\n            var children = original.childNodes;\n            if (children.length === 0) return Promise.resolve(clone);\n\n            return cloneChildrenInOrder(clone, util.asArray(children), filter)\n                .then(function () {\n                    return clone;\n                });\n\n            function cloneChildrenInOrder(parent, children, filter) {\n                var done = Promise.resolve();\n                children.forEach(function (child) {\n                    done = done\n                        .then(function () {\n                            return cloneNode(child, filter);\n                        })\n                        .then(function (childClone) {\n                            if (childClone) parent.appendChild(childClone);\n                        });\n                });\n                return done;\n            }\n        }\n\n        function processClone(original, clone) {\n            if (!(clone instanceof Element)) return clone;\n\n            return Promise.resolve()\n                .then(cloneStyle)\n                .then(clonePseudoElements)\n                .then(copyUserInput)\n                .then(fixSvg)\n                .then(function () {\n                    return clone;\n                });\n\n            function cloneStyle() {\n                copyStyle(window.getComputedStyle(original), clone.style);\n\n                function copyStyle(source, target) {\n                    if (source.cssText) target.cssText = source.cssText;\n                    else copyProperties(source, target);\n\n                    function copyProperties(source, target) {\n                        util.asArray(source).forEach(function (name) {\n                            target.setProperty(\n                                name,\n                                source.getPropertyValue(name),\n                                source.getPropertyPriority(name)\n                            );\n                        });\n                    }\n                }\n            }\n\n            function clonePseudoElements() {\n                [':before', ':after'].forEach(function (element) {\n                    clonePseudoElement(element);\n                });\n\n                function clonePseudoElement(element) {\n                    var style = window.getComputedStyle(original, element);\n                    var content = style.getPropertyValue('content');\n\n                    if (content === '' || content === 'none') return;\n\n                    var className = util.uid();\n                    clone.className = clone.className + ' ' + className;\n                    var styleElement = document.createElement('style');\n                    styleElement.appendChild(formatPseudoElementStyle(className, element, style));\n                    clone.appendChild(styleElement);\n\n                    function formatPseudoElementStyle(className, element, style) {\n                        var selector = '.' + className + ':' + element;\n                        var cssText = style.cssText ? formatCssText(style) : formatCssProperties(style);\n                        return document.createTextNode(selector + '{' + cssText + '}');\n\n                        function formatCssText(style) {\n                            var content = style.getPropertyValue('content');\n                            return style.cssText + ' content: ' + content + ';';\n                        }\n\n                        function formatCssProperties(style) {\n\n                            return util.asArray(style)\n                                .map(formatProperty)\n                                .join('; ') + ';';\n\n                            function formatProperty(name) {\n                                return name + ': ' +\n                                    style.getPropertyValue(name) +\n                                    (style.getPropertyPriority(name) ? ' !important' : '');\n                            }\n                        }\n                    }\n                }\n            }\n\n            function copyUserInput() {\n                if (original instanceof HTMLTextAreaElement) clone.innerHTML = original.value;\n                if (original instanceof HTMLInputElement) clone.setAttribute(\"value\", original.value);\n            }\n\n            function fixSvg() {\n                if (!(clone instanceof SVGElement)) return;\n                clone.setAttribute('xmlns', 'http://www.w3.org/2000/svg');\n\n                if (!(clone instanceof SVGRectElement)) return;\n                ['width', 'height'].forEach(function (attribute) {\n                    var value = clone.getAttribute(attribute);\n                    if (!value) return;\n\n                    clone.style.setProperty(attribute, value);\n                });\n            }\n        }\n    }\n\n    function embedFonts(node) {\n        return fontFaces.resolveAll()\n            .then(function (cssText) {\n                var styleNode = document.createElement('style');\n                node.appendChild(styleNode);\n                styleNode.appendChild(document.createTextNode(cssText));\n                return node;\n            });\n    }\n\n    function inlineImages(node) {\n        return images.inlineAll(node)\n            .then(function () {\n                return node;\n            });\n    }\n\n    function makeSvgDataUri(node, width, height) {\n        return Promise.resolve(node)\n            .then(function (node) {\n                node.setAttribute('xmlns', 'http://www.w3.org/1999/xhtml');\n                return new XMLSerializer().serializeToString(node);\n            })\n            .then(util.escapeXhtml)\n            .then(function (xhtml) {\n                return '<foreignObject x=\"0\" y=\"0\" width=\"100%\" height=\"100%\">' + xhtml + '</foreignObject>';\n            })\n            .then(function (foreignObject) {\n                return '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"' + width + '\" height=\"' + height + '\">' +\n                    foreignObject + '</svg>';\n            })\n            .then(function (svg) {\n                return 'data:image/svg+xml;charset=utf-8,' + svg;\n            });\n    }\n\n    function newUtil() {\n        return {\n            escape: escape,\n            parseExtension: parseExtension,\n            mimeType: mimeType,\n            dataAsUrl: dataAsUrl,\n            isDataUrl: isDataUrl,\n            canvasToBlob: canvasToBlob,\n            resolveUrl: resolveUrl,\n            getAndEncode: getAndEncode,\n            uid: uid(),\n            delay: delay,\n            asArray: asArray,\n            escapeXhtml: escapeXhtml,\n            makeImage: makeImage,\n            width: width,\n            height: height\n        };\n\n        function mimes() {\n            /*\n             * Only WOFF and EOT mime types for fonts are 'real'\n             * see http://www.iana.org/assignments/media-types/media-types.xhtml\n             */\n            var WOFF = 'application/font-woff';\n            var JPEG = 'image/jpeg';\n\n            return {\n                'woff': WOFF,\n                'woff2': WOFF,\n                'ttf': 'application/font-truetype',\n                'eot': 'application/vnd.ms-fontobject',\n                'png': 'image/png',\n                'jpg': JPEG,\n                'jpeg': JPEG,\n                'gif': 'image/gif',\n                'tiff': 'image/tiff',\n                'svg': 'image/svg+xml'\n            };\n        }\n\n        function parseExtension(url) {\n            var match = /\\.([^\\.\\/]*?)$/g.exec(url);\n            if (match) return match[1];\n            else return '';\n        }\n\n        function mimeType(url) {\n            var extension = parseExtension(url).toLowerCase();\n            return mimes()[extension] || '';\n        }\n\n        function isDataUrl(url) {\n            return url.search(/^(data:)/) !== -1;\n        }\n\n        function toBlob(canvas) {\n            return new Promise(function (resolve) {\n                var binaryString = window.atob(canvas.toDataURL().split(',')[1]);\n                var length = binaryString.length;\n                var binaryArray = new Uint8Array(length);\n\n                for (var i = 0; i < length; i++)\n                    binaryArray[i] = binaryString.charCodeAt(i);\n\n                resolve(new Blob([binaryArray], {\n                    type: 'image/png'\n                }));\n            });\n        }\n\n        function canvasToBlob(canvas) {\n            if (canvas.toBlob)\n                return new Promise(function (resolve) {\n                    canvas.toBlob(resolve);\n                });\n\n            return toBlob(canvas);\n        }\n\n        function resolveUrl(url, baseUrl) {\n            var doc = document.implementation.createHTMLDocument();\n            var base = doc.createElement('base');\n            doc.head.appendChild(base);\n            var a = doc.createElement('a');\n            doc.body.appendChild(a);\n            base.href = baseUrl;\n            a.href = url;\n            return a.href;\n        }\n\n        function uid() {\n            var index = 0;\n\n            return function () {\n                return 'u' + fourRandomChars() + index++;\n\n                function fourRandomChars() {\n                    /* see http://stackoverflow.com/a/6248722/2519373 */\n                    return ('0000' + (Math.random() * Math.pow(36, 4) << 0).toString(36)).slice(-4);\n                }\n            };\n        }\n\n        function makeImage(uri) {\n            return new Promise(function (resolve, reject) {\n                var image = new Image();\n                image.onload = function () {\n                    resolve(image);\n                };\n                image.onerror = reject;\n                image.src = uri;\n            });\n        }\n\n        function getAndEncode(url) {\n            var TIMEOUT = 30000;\n            if(domtoimage.impl.options.cacheBust) {\n                // Cache bypass so we dont have CORS issues with cached images\n                // Source: https://developer.mozilla.org/en/docs/Web/API/XMLHttpRequest/Using_XMLHttpRequest#Bypassing_the_cache\n                url += ((/\\?/).test(url) ? \"&\" : \"?\") + (new Date()).getTime();\n            }\n\n            return new Promise(function (resolve) {\n                var request = new XMLHttpRequest();\n\n                request.onreadystatechange = done;\n                request.ontimeout = timeout;\n                request.responseType = 'blob';\n                request.timeout = TIMEOUT;\n                request.open('GET', url, true);\n                request.send();\n\n                var placeholder;\n                if(domtoimage.impl.options.imagePlaceholder) {\n                    var split = domtoimage.impl.options.imagePlaceholder.split(/,/);\n                    if(split && split[1]) {\n                        placeholder = split[1];\n                    }\n                }\n\n                function done() {\n                    if (request.readyState !== 4) return;\n\n                    if (request.status !== 200) {\n                        if(placeholder) {\n                            resolve(placeholder);\n                        } else {\n                            fail('cannot fetch resource: ' + url + ', status: ' + request.status);\n                        }\n\n                        return;\n                    }\n\n                    var encoder = new FileReader();\n                    encoder.onloadend = function () {\n                        var content = encoder.result.split(/,/)[1];\n                        resolve(content);\n                    };\n                    encoder.readAsDataURL(request.response);\n                }\n\n                function timeout() {\n                    if(placeholder) {\n                        resolve(placeholder);\n                    } else {\n                        fail('timeout of ' + TIMEOUT + 'ms occured while fetching resource: ' + url);\n                    }\n                }\n\n                function fail(message) {\n                    console.error(message);\n                    resolve('');\n                }\n            });\n        }\n\n        function dataAsUrl(content, type) {\n            return 'data:' + type + ';base64,' + content;\n        }\n\n        function escape(string) {\n            return string.replace(/([.*+?^${}()|\\[\\]\\/\\\\])/g, '\\\\$1');\n        }\n\n        function delay(ms) {\n            return function (arg) {\n                return new Promise(function (resolve) {\n                    setTimeout(function () {\n                        resolve(arg);\n                    }, ms);\n                });\n            };\n        }\n\n        function asArray(arrayLike) {\n            var array = [];\n            var length = arrayLike.length;\n            for (var i = 0; i < length; i++) array.push(arrayLike[i]);\n            return array;\n        }\n\n        function escapeXhtml(string) {\n            return string.replace(/#/g, '%23').replace(/\\n/g, '%0A');\n        }\n\n        function width(node) {\n            var leftBorder = px(node, 'border-left-width');\n            var rightBorder = px(node, 'border-right-width');\n            return node.scrollWidth + leftBorder + rightBorder;\n        }\n\n        function height(node) {\n            var topBorder = px(node, 'border-top-width');\n            var bottomBorder = px(node, 'border-bottom-width');\n            return node.scrollHeight + topBorder + bottomBorder;\n        }\n\n        function px(node, styleProperty) {\n            var value = window.getComputedStyle(node).getPropertyValue(styleProperty);\n            return parseFloat(value.replace('px', ''));\n        }\n    }\n\n    function newInliner() {\n        var URL_REGEX = /url\\(['\"]?([^'\"]+?)['\"]?\\)/g;\n\n        return {\n            inlineAll: inlineAll,\n            shouldProcess: shouldProcess,\n            impl: {\n                readUrls: readUrls,\n                inline: inline\n            }\n        };\n\n        function shouldProcess(string) {\n            return string.search(URL_REGEX) !== -1;\n        }\n\n        function readUrls(string) {\n            var result = [];\n            var match;\n            while ((match = URL_REGEX.exec(string)) !== null) {\n                result.push(match[1]);\n            }\n            return result.filter(function (url) {\n                return !util.isDataUrl(url);\n            });\n        }\n\n        function inline(string, url, baseUrl, get) {\n            return Promise.resolve(url)\n                .then(function (url) {\n                    return baseUrl ? util.resolveUrl(url, baseUrl) : url;\n                })\n                .then(get || util.getAndEncode)\n                .then(function (data) {\n                    return util.dataAsUrl(data, util.mimeType(url));\n                })\n                .then(function (dataUrl) {\n                    return string.replace(urlAsRegex(url), '$1' + dataUrl + '$3');\n                });\n\n            function urlAsRegex(url) {\n                return new RegExp('(url\\\\([\\'\"]?)(' + util.escape(url) + ')([\\'\"]?\\\\))', 'g');\n            }\n        }\n\n        function inlineAll(string, baseUrl, get) {\n            if (nothingToInline()) return Promise.resolve(string);\n\n            return Promise.resolve(string)\n                .then(readUrls)\n                .then(function (urls) {\n                    var done = Promise.resolve(string);\n                    urls.forEach(function (url) {\n                        done = done.then(function (string) {\n                            return inline(string, url, baseUrl, get);\n                        });\n                    });\n                    return done;\n                });\n\n            function nothingToInline() {\n                return !shouldProcess(string);\n            }\n        }\n    }\n\n    function newFontFaces() {\n        return {\n            resolveAll: resolveAll,\n            impl: {\n                readAll: readAll\n            }\n        };\n\n        function resolveAll() {\n            return readAll(document)\n                .then(function (webFonts) {\n                    return Promise.all(\n                        webFonts.map(function (webFont) {\n                            return webFont.resolve();\n                        })\n                    );\n                })\n                .then(function (cssStrings) {\n                    return cssStrings.join('\\n');\n                });\n        }\n\n        function readAll() {\n            return Promise.resolve(util.asArray(document.styleSheets))\n                .then(getCssRules)\n                .then(selectWebFontRules)\n                .then(function (rules) {\n                    return rules.map(newWebFont);\n                });\n\n            function selectWebFontRules(cssRules) {\n                return cssRules\n                    .filter(function (rule) {\n                        return rule.type === CSSRule.FONT_FACE_RULE;\n                    })\n                    .filter(function (rule) {\n                        return inliner.shouldProcess(rule.style.getPropertyValue('src'));\n                    });\n            }\n\n            function getCssRules(styleSheets) {\n                var cssRules = [];\n                styleSheets.forEach(function (sheet) {\n                    try {\n                        util.asArray(sheet.cssRules || []).forEach(cssRules.push.bind(cssRules));\n                    } catch (e) {\n                        console.log('Error while reading CSS rules from ' + sheet.href, e.toString());\n                    }\n                });\n                return cssRules;\n            }\n\n            function newWebFont(webFontRule) {\n                return {\n                    resolve: function resolve() {\n                        var baseUrl = (webFontRule.parentStyleSheet || {}).href;\n                        return inliner.inlineAll(webFontRule.cssText, baseUrl);\n                    },\n                    src: function () {\n                        return webFontRule.style.getPropertyValue('src');\n                    }\n                };\n            }\n        }\n    }\n\n    function newImages() {\n        return {\n            inlineAll: inlineAll,\n            impl: {\n                newImage: newImage\n            }\n        };\n\n        function newImage(element) {\n            return {\n                inline: inline\n            };\n\n            function inline(get) {\n                if (util.isDataUrl(element.src)) return Promise.resolve();\n\n                return Promise.resolve(element.src)\n                    .then(get || util.getAndEncode)\n                    .then(function (data) {\n                        return util.dataAsUrl(data, util.mimeType(element.src));\n                    })\n                    .then(function (dataUrl) {\n                        return new Promise(function (resolve, reject) {\n                            element.onload = resolve;\n                            element.onerror = reject;\n                            element.src = dataUrl;\n                        });\n                    });\n            }\n        }\n\n        function inlineAll(node) {\n            if (!(node instanceof Element)) return Promise.resolve(node);\n\n            return inlineBackground(node)\n                .then(function () {\n                    if (node instanceof HTMLImageElement)\n                        return newImage(node).inline();\n                    else\n                        return Promise.all(\n                            util.asArray(node.childNodes).map(function (child) {\n                                return inlineAll(child);\n                            })\n                        );\n                });\n\n            function inlineBackground(node) {\n                var background = node.style.getPropertyValue('background');\n\n                if (!background) return Promise.resolve(node);\n\n                return inliner.inlineAll(background)\n                    .then(function (inlined) {\n                        node.style.setProperty(\n                            'background',\n                            inlined,\n                            node.style.getPropertyPriority('background')\n                        );\n                    })\n                    .then(function () {\n                        return node;\n                    });\n            }\n        }\n    }\n})(this);\n","/* build: `node build.js modules=ALL exclude=gestures,accessors,erasing requirejs minifier=uglifyjs` */\n/*! Fabric.js Copyright 2008-2015, Printio (Juriy Zaytsev, Maxim Chernyak) */\n\nvar fabric = fabric || { version: '5.2.1' };\nif (typeof exports !== 'undefined') {\n  exports.fabric = fabric;\n}\n/* _AMD_START_ */\nelse if (typeof define === 'function' && define.amd) {\n  define([], function() { return fabric; });\n}\n/* _AMD_END_ */\nif (typeof document !== 'undefined' && typeof window !== 'undefined') {\n  if (document instanceof (typeof HTMLDocument !== 'undefined' ? HTMLDocument : Document)) {\n    fabric.document = document;\n  }\n  else {\n    fabric.document = document.implementation.createHTMLDocument('');\n  }\n  fabric.window = window;\n}\nelse {\n  // assume we're running under node.js when document/window are not present\n  var jsdom = require('jsdom');\n  var virtualWindow = new jsdom.JSDOM(\n    decodeURIComponent('%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E'),\n    {\n      features: {\n        FetchExternalResources: ['img']\n      },\n      resources: 'usable'\n    }).window;\n  fabric.document = virtualWindow.document;\n  fabric.jsdomImplForWrapper = require('jsdom/lib/jsdom/living/generated/utils').implForWrapper;\n  fabric.nodeCanvas = require('jsdom/lib/jsdom/utils').Canvas;\n  fabric.window = virtualWindow;\n  DOMParser = fabric.window.DOMParser;\n}\n\n/**\n * True when in environment that supports touch events\n * @type boolean\n */\nfabric.isTouchSupported = 'ontouchstart' in fabric.window || 'ontouchstart' in fabric.document ||\n  (fabric.window && fabric.window.navigator && fabric.window.navigator.maxTouchPoints > 0);\n\n/**\n * True when in environment that's probably Node.js\n * @type boolean\n */\nfabric.isLikelyNode = typeof Buffer !== 'undefined' &&\n                      typeof window === 'undefined';\n\n/* _FROM_SVG_START_ */\n/**\n * Attributes parsed from all SVG elements\n * @type array\n */\nfabric.SHARED_ATTRIBUTES = [\n  'display',\n  'transform',\n  'fill', 'fill-opacity', 'fill-rule',\n  'opacity',\n  'stroke', 'stroke-dasharray', 'stroke-linecap', 'stroke-dashoffset',\n  'stroke-linejoin', 'stroke-miterlimit',\n  'stroke-opacity', 'stroke-width',\n  'id', 'paint-order', 'vector-effect',\n  'instantiated_by_use', 'clip-path',\n];\n/* _FROM_SVG_END_ */\n\n/**\n * Pixel per Inch as a default value set to 96. Can be changed for more realistic conversion.\n */\nfabric.DPI = 96;\nfabric.reNum = '(?:[-+]?(?:\\\\d+|\\\\d*\\\\.\\\\d+)(?:[eE][-+]?\\\\d+)?)';\nfabric.commaWsp = '(?:\\\\s+,?\\\\s*|,\\\\s*)';\nfabric.rePathCommand = /([-+]?((\\d+\\.\\d+)|((\\d+)|(\\.\\d+)))(?:[eE][-+]?\\d+)?)/ig;\nfabric.reNonWord = /[ \\n\\.,;!\\?\\-]/;\nfabric.fontPaths = { };\nfabric.iMatrix = [1, 0, 0, 1, 0, 0];\nfabric.svgNS = 'http://www.w3.org/2000/svg';\n\n/**\n * Pixel limit for cache canvases. 1Mpx , 4Mpx should be fine.\n * @since 1.7.14\n * @type Number\n * @default\n */\nfabric.perfLimitSizeTotal = 2097152;\n\n/**\n * Pixel limit for cache canvases width or height. IE fixes the maximum at 5000\n * @since 1.7.14\n * @type Number\n * @default\n */\nfabric.maxCacheSideLimit = 4096;\n\n/**\n * Lowest pixel limit for cache canvases, set at 256PX\n * @since 1.7.14\n * @type Number\n * @default\n */\nfabric.minCacheSideLimit = 256;\n\n/**\n * Cache Object for widths of chars in text rendering.\n */\nfabric.charWidthsCache = { };\n\n/**\n * if webgl is enabled and available, textureSize will determine the size\n * of the canvas backend\n * @since 2.0.0\n * @type Number\n * @default\n */\nfabric.textureSize = 2048;\n\n/**\n * When 'true', style information is not retained when copy/pasting text, making\n * pasted text use destination style.\n * Defaults to 'false'.\n * @type Boolean\n * @default\n */\nfabric.disableStyleCopyPaste = false;\n\n/**\n * Enable webgl for filtering picture is available\n * A filtering backend will be initialized, this will both take memory and\n * time since a default 2048x2048 canvas will be created for the gl context\n * @since 2.0.0\n * @type Boolean\n * @default\n */\nfabric.enableGLFiltering = true;\n\n/**\n * Device Pixel Ratio\n * @see https://developer.apple.com/library/safari/documentation/AudioVideo/Conceptual/HTML-canvas-guide/SettingUptheCanvas/SettingUptheCanvas.html\n */\nfabric.devicePixelRatio = fabric.window.devicePixelRatio ||\n                          fabric.window.webkitDevicePixelRatio ||\n                          fabric.window.mozDevicePixelRatio ||\n                          1;\n/**\n * Browser-specific constant to adjust CanvasRenderingContext2D.shadowBlur value,\n * which is unitless and not rendered equally across browsers.\n *\n * Values that work quite well (as of October 2017) are:\n * - Chrome: 1.5\n * - Edge: 1.75\n * - Firefox: 0.9\n * - Safari: 0.95\n *\n * @since 2.0.0\n * @type Number\n * @default 1\n */\nfabric.browserShadowBlurConstant = 1;\n\n/**\n * This object contains the result of arc to bezier conversion for faster retrieving if the same arc needs to be converted again.\n * It was an internal variable, is accessible since version 2.3.4\n */\nfabric.arcToSegmentsCache = { };\n\n/**\n * This object keeps the results of the boundsOfCurve calculation mapped by the joined arguments necessary to calculate it.\n * It does speed up calculation, if you parse and add always the same paths, but in case of heavy usage of freedrawing\n * you do not get any speed benefit and you get a big object in memory.\n * The object was a private variable before, while now is appended to the lib so that you have access to it and you\n * can eventually clear it.\n * It was an internal variable, is accessible since version 2.3.4\n */\nfabric.boundsOfCurveCache = { };\n\n/**\n * If disabled boundsOfCurveCache is not used. For apps that make heavy usage of pencil drawing probably disabling it is better\n * @default true\n */\nfabric.cachesBoundsOfCurve = true;\n\n/**\n * Skip performance testing of setupGLContext and force the use of putImageData that seems to be the one that works best on\n * Chrome + old hardware. if your users are experiencing empty images after filtering you may try to force this to true\n * this has to be set before instantiating the filtering backend ( before filtering the first image )\n * @type Boolean\n * @default false\n */\nfabric.forceGLPutImageData = false;\n\nfabric.initFilterBackend = function() {\n  if (fabric.enableGLFiltering && fabric.isWebglSupported && fabric.isWebglSupported(fabric.textureSize)) {\n    console.log('max texture size: ' + fabric.maxTextureSize);\n    return (new fabric.WebglFilterBackend({ tileSize: fabric.textureSize }));\n  }\n  else if (fabric.Canvas2dFilterBackend) {\n    return (new fabric.Canvas2dFilterBackend());\n  }\n};\n\n\nif (typeof document !== 'undefined' && typeof window !== 'undefined') {\n  // ensure globality even if entire library were function wrapped (as in Meteor.js packaging system)\n  window.fabric = fabric;\n}\n\n\n(function() {\n\n  /**\n   * @private\n   * @param {String} eventName\n   * @param {Function} handler\n   */\n  function _removeEventListener(eventName, handler) {\n    if (!this.__eventListeners[eventName]) {\n      return;\n    }\n    var eventListener = this.__eventListeners[eventName];\n    if (handler) {\n      eventListener[eventListener.indexOf(handler)] = false;\n    }\n    else {\n      fabric.util.array.fill(eventListener, false);\n    }\n  }\n\n  /**\n   * Observes specified event\n   * @memberOf fabric.Observable\n   * @alias on\n   * @param {String|Object} eventName Event name (eg. 'after:render') or object with key/value pairs (eg. {'after:render': handler, 'selection:cleared': handler})\n   * @param {Function} handler Function that receives a notification when an event of the specified type occurs\n   * @return {Self} thisArg\n   * @chainable\n   */\n  function on(eventName, handler) {\n    if (!this.__eventListeners) {\n      this.__eventListeners = { };\n    }\n    // one object with key/value pairs was passed\n    if (arguments.length === 1) {\n      for (var prop in eventName) {\n        this.on(prop, eventName[prop]);\n      }\n    }\n    else {\n      if (!this.__eventListeners[eventName]) {\n        this.__eventListeners[eventName] = [];\n      }\n      this.__eventListeners[eventName].push(handler);\n    }\n    return this;\n  }\n\n  function _once(eventName, handler) {\n    var _handler = function () {\n      handler.apply(this, arguments);\n      this.off(eventName, _handler);\n    }.bind(this);\n    this.on(eventName, _handler);\n  }\n\n  function once(eventName, handler) {\n    // one object with key/value pairs was passed\n    if (arguments.length === 1) {\n      for (var prop in eventName) {\n        _once.call(this, prop, eventName[prop]);\n      }\n    }\n    else {\n      _once.call(this, eventName, handler);\n    }\n    return this;\n  }\n\n  /**\n   * Stops event observing for a particular event handler. Calling this method\n   * without arguments removes all handlers for all events\n   * @memberOf fabric.Observable\n   * @alias off\n   * @param {String|Object} eventName Event name (eg. 'after:render') or object with key/value pairs (eg. {'after:render': handler, 'selection:cleared': handler})\n   * @param {Function} handler Function to be deleted from EventListeners\n   * @return {Self} thisArg\n   * @chainable\n   */\n  function off(eventName, handler) {\n    if (!this.__eventListeners) {\n      return this;\n    }\n\n    // remove all key/value pairs (event name -> event handler)\n    if (arguments.length === 0) {\n      for (eventName in this.__eventListeners) {\n        _removeEventListener.call(this, eventName);\n      }\n    }\n    // one object with key/value pairs was passed\n    else if (arguments.length === 1 && typeof arguments[0] === 'object') {\n      for (var prop in eventName) {\n        _removeEventListener.call(this, prop, eventName[prop]);\n      }\n    }\n    else {\n      _removeEventListener.call(this, eventName, handler);\n    }\n    return this;\n  }\n\n  /**\n   * Fires event with an optional options object\n   * @memberOf fabric.Observable\n   * @param {String} eventName Event name to fire\n   * @param {Object} [options] Options object\n   * @return {Self} thisArg\n   * @chainable\n   */\n  function fire(eventName, options) {\n    if (!this.__eventListeners) {\n      return this;\n    }\n\n    var listenersForEvent = this.__eventListeners[eventName];\n    if (!listenersForEvent) {\n      return this;\n    }\n\n    for (var i = 0, len = listenersForEvent.length; i < len; i++) {\n      listenersForEvent[i] && listenersForEvent[i].call(this, options || { });\n    }\n    this.__eventListeners[eventName] = listenersForEvent.filter(function(value) {\n      return value !== false;\n    });\n    return this;\n  }\n\n  /**\n   * @namespace fabric.Observable\n   * @tutorial {@link http://fabricjs.com/fabric-intro-part-2#events}\n   * @see {@link http://fabricjs.com/events|Events demo}\n   */\n  fabric.Observable = {\n    fire: fire,\n    on: on,\n    once: once,\n    off: off,\n  };\n})();\n\n\n/**\n * @namespace fabric.Collection\n */\nfabric.Collection = {\n\n  _objects: [],\n\n  /**\n   * Adds objects to collection, Canvas or Group, then renders canvas\n   * (if `renderOnAddRemove` is not `false`).\n   * in case of Group no changes to bounding box are made.\n   * Objects should be instances of (or inherit from) fabric.Object\n   * Use of this function is highly discouraged for groups.\n   * you can add a bunch of objects with the add method but then you NEED\n   * to run a addWithUpdate call for the Group class or position/bbox will be wrong.\n   * @param {...fabric.Object} object Zero or more fabric instances\n   * @return {Self} thisArg\n   * @chainable\n   */\n  add: function () {\n    this._objects.push.apply(this._objects, arguments);\n    if (this._onObjectAdded) {\n      for (var i = 0, length = arguments.length; i < length; i++) {\n        this._onObjectAdded(arguments[i]);\n      }\n    }\n    this.renderOnAddRemove && this.requestRenderAll();\n    return this;\n  },\n\n  /**\n   * Inserts an object into collection at specified index, then renders canvas (if `renderOnAddRemove` is not `false`)\n   * An object should be an instance of (or inherit from) fabric.Object\n   * Use of this function is highly discouraged for groups.\n   * you can add a bunch of objects with the insertAt method but then you NEED\n   * to run a addWithUpdate call for the Group class or position/bbox will be wrong.\n   * @param {Object} object Object to insert\n   * @param {Number} index Index to insert object at\n   * @param {Boolean} nonSplicing When `true`, no splicing (shifting) of objects occurs\n   * @return {Self} thisArg\n   * @chainable\n   */\n  insertAt: function (object, index, nonSplicing) {\n    var objects = this._objects;\n    if (nonSplicing) {\n      objects[index] = object;\n    }\n    else {\n      objects.splice(index, 0, object);\n    }\n    this._onObjectAdded && this._onObjectAdded(object);\n    this.renderOnAddRemove && this.requestRenderAll();\n    return this;\n  },\n\n  /**\n   * Removes objects from a collection, then renders canvas (if `renderOnAddRemove` is not `false`)\n   * @param {...fabric.Object} object Zero or more fabric instances\n   * @return {Self} thisArg\n   * @chainable\n   */\n  remove: function() {\n    var objects = this._objects,\n        index, somethingRemoved = false;\n\n    for (var i = 0, length = arguments.length; i < length; i++) {\n      index = objects.indexOf(arguments[i]);\n\n      // only call onObjectRemoved if an object was actually removed\n      if (index !== -1) {\n        somethingRemoved = true;\n        objects.splice(index, 1);\n        this._onObjectRemoved && this._onObjectRemoved(arguments[i]);\n      }\n    }\n\n    this.renderOnAddRemove && somethingRemoved && this.requestRenderAll();\n    return this;\n  },\n\n  /**\n   * Executes given function for each object in this group\n   * @param {Function} callback\n   *                   Callback invoked with current object as first argument,\n   *                   index - as second and an array of all objects - as third.\n   *                   Callback is invoked in a context of Global Object (e.g. `window`)\n   *                   when no `context` argument is given\n   *\n   * @param {Object} context Context (aka thisObject)\n   * @return {Self} thisArg\n   * @chainable\n   */\n  forEachObject: function(callback, context) {\n    var objects = this.getObjects();\n    for (var i = 0, len = objects.length; i < len; i++) {\n      callback.call(context, objects[i], i, objects);\n    }\n    return this;\n  },\n\n  /**\n   * Returns an array of children objects of this instance\n   * Type parameter introduced in 1.3.10\n   * since 2.3.5 this method return always a COPY of the array;\n   * @param {String} [type] When specified, only objects of this type are returned\n   * @return {Array}\n   */\n  getObjects: function(type) {\n    if (typeof type === 'undefined') {\n      return this._objects.concat();\n    }\n    return this._objects.filter(function(o) {\n      return o.type === type;\n    });\n  },\n\n  /**\n   * Returns object at specified index\n   * @param {Number} index\n   * @return {Self} thisArg\n   */\n  item: function (index) {\n    return this._objects[index];\n  },\n\n  /**\n   * Returns true if collection contains no objects\n   * @return {Boolean} true if collection is empty\n   */\n  isEmpty: function () {\n    return this._objects.length === 0;\n  },\n\n  /**\n   * Returns a size of a collection (i.e: length of an array containing its objects)\n   * @return {Number} Collection size\n   */\n  size: function() {\n    return this._objects.length;\n  },\n\n  /**\n   * Returns true if collection contains an object\n   * @param {Object} object Object to check against\n   * @param {Boolean} [deep=false] `true` to check all descendants, `false` to check only `_objects`\n   * @return {Boolean} `true` if collection contains an object\n   */\n  contains: function (object, deep) {\n    if (this._objects.indexOf(object) > -1) {\n      return true;\n    }\n    else if (deep) {\n      return this._objects.some(function (obj) {\n        return typeof obj.contains === 'function' && obj.contains(object, true);\n      });\n    }\n    return false;\n  },\n\n  /**\n   * Returns number representation of a collection complexity\n   * @return {Number} complexity\n   */\n  complexity: function () {\n    return this._objects.reduce(function (memo, current) {\n      memo += current.complexity ? current.complexity() : 0;\n      return memo;\n    }, 0);\n  }\n};\n\n\n/**\n * @namespace fabric.CommonMethods\n */\nfabric.CommonMethods = {\n\n  /**\n   * Sets object's properties from options\n   * @param {Object} [options] Options object\n   */\n  _setOptions: function(options) {\n    for (var prop in options) {\n      this.set(prop, options[prop]);\n    }\n  },\n\n  /**\n   * @private\n   * @param {Object} [filler] Options object\n   * @param {String} [property] property to set the Gradient to\n   */\n  _initGradient: function(filler, property) {\n    if (filler && filler.colorStops && !(filler instanceof fabric.Gradient)) {\n      this.set(property, new fabric.Gradient(filler));\n    }\n  },\n\n  /**\n   * @private\n   * @param {Object} [filler] Options object\n   * @param {String} [property] property to set the Pattern to\n   * @param {Function} [callback] callback to invoke after pattern load\n   */\n  _initPattern: function(filler, property, callback) {\n    if (filler && filler.source && !(filler instanceof fabric.Pattern)) {\n      this.set(property, new fabric.Pattern(filler, callback));\n    }\n    else {\n      callback && callback();\n    }\n  },\n\n  /**\n   * @private\n   */\n  _setObject: function(obj) {\n    for (var prop in obj) {\n      this._set(prop, obj[prop]);\n    }\n  },\n\n  /**\n   * Sets property to a given value. When changing position/dimension -related properties (left, top, scale, angle, etc.) `set` does not update position of object's borders/controls. If you need to update those, call `setCoords()`.\n   * @param {String|Object} key Property name or object (if object, iterate over the object properties)\n   * @param {Object|Function} value Property value (if function, the value is passed into it and its return value is used as a new one)\n   * @return {fabric.Object} thisArg\n   * @chainable\n   */\n  set: function(key, value) {\n    if (typeof key === 'object') {\n      this._setObject(key);\n    }\n    else {\n      this._set(key, value);\n    }\n    return this;\n  },\n\n  _set: function(key, value) {\n    this[key] = value;\n  },\n\n  /**\n   * Toggles specified property from `true` to `false` or from `false` to `true`\n   * @param {String} property Property to toggle\n   * @return {fabric.Object} thisArg\n   * @chainable\n   */\n  toggle: function(property) {\n    var value = this.get(property);\n    if (typeof value === 'boolean') {\n      this.set(property, !value);\n    }\n    return this;\n  },\n\n  /**\n   * Basic getter\n   * @param {String} property Property name\n   * @return {*} value of a property\n   */\n  get: function(property) {\n    return this[property];\n  }\n};\n\n\n(function(global) {\n\n  var sqrt = Math.sqrt,\n      atan2 = Math.atan2,\n      pow = Math.pow,\n      PiBy180 = Math.PI / 180,\n      PiBy2 = Math.PI / 2;\n\n  /**\n   * @namespace fabric.util\n   */\n  fabric.util = {\n\n    /**\n     * Calculate the cos of an angle, avoiding returning floats for known results\n     * @static\n     * @memberOf fabric.util\n     * @param {Number} angle the angle in radians or in degree\n     * @return {Number}\n     */\n    cos: function(angle) {\n      if (angle === 0) { return 1; }\n      if (angle < 0) {\n        // cos(a) = cos(-a)\n        angle = -angle;\n      }\n      var angleSlice = angle / PiBy2;\n      switch (angleSlice) {\n        case 1: case 3: return 0;\n        case 2: return -1;\n      }\n      return Math.cos(angle);\n    },\n\n    /**\n     * Calculate the sin of an angle, avoiding returning floats for known results\n     * @static\n     * @memberOf fabric.util\n     * @param {Number} angle the angle in radians or in degree\n     * @return {Number}\n     */\n    sin: function(angle) {\n      if (angle === 0) { return 0; }\n      var angleSlice = angle / PiBy2, sign = 1;\n      if (angle < 0) {\n        // sin(-a) = -sin(a)\n        sign = -1;\n      }\n      switch (angleSlice) {\n        case 1: return sign;\n        case 2: return 0;\n        case 3: return -sign;\n      }\n      return Math.sin(angle);\n    },\n\n    /**\n     * Removes value from an array.\n     * Presence of value (and its position in an array) is determined via `Array.prototype.indexOf`\n     * @static\n     * @memberOf fabric.util\n     * @param {Array} array\n     * @param {*} value\n     * @return {Array} original array\n     */\n    removeFromArray: function(array, value) {\n      var idx = array.indexOf(value);\n      if (idx !== -1) {\n        array.splice(idx, 1);\n      }\n      return array;\n    },\n\n    /**\n     * Returns random number between 2 specified ones.\n     * @static\n     * @memberOf fabric.util\n     * @param {Number} min lower limit\n     * @param {Number} max upper limit\n     * @return {Number} random value (between min and max)\n     */\n    getRandomInt: function(min, max) {\n      return Math.floor(Math.random() * (max - min + 1)) + min;\n    },\n\n    /**\n     * Transforms degrees to radians.\n     * @static\n     * @memberOf fabric.util\n     * @param {Number} degrees value in degrees\n     * @return {Number} value in radians\n     */\n    degreesToRadians: function(degrees) {\n      return degrees * PiBy180;\n    },\n\n    /**\n     * Transforms radians to degrees.\n     * @static\n     * @memberOf fabric.util\n     * @param {Number} radians value in radians\n     * @return {Number} value in degrees\n     */\n    radiansToDegrees: function(radians) {\n      return radians / PiBy180;\n    },\n\n    /**\n     * Rotates `point` around `origin` with `radians`\n     * @static\n     * @memberOf fabric.util\n     * @param {fabric.Point} point The point to rotate\n     * @param {fabric.Point} origin The origin of the rotation\n     * @param {Number} radians The radians of the angle for the rotation\n     * @return {fabric.Point} The new rotated point\n     */\n    rotatePoint: function(point, origin, radians) {\n      var newPoint = new fabric.Point(point.x - origin.x, point.y - origin.y),\n          v = fabric.util.rotateVector(newPoint, radians);\n      return new fabric.Point(v.x, v.y).addEquals(origin);\n    },\n\n    /**\n     * Rotates `vector` with `radians`\n     * @static\n     * @memberOf fabric.util\n     * @param {Object} vector The vector to rotate (x and y)\n     * @param {Number} radians The radians of the angle for the rotation\n     * @return {Object} The new rotated point\n     */\n    rotateVector: function(vector, radians) {\n      var sin = fabric.util.sin(radians),\n          cos = fabric.util.cos(radians),\n          rx = vector.x * cos - vector.y * sin,\n          ry = vector.x * sin + vector.y * cos;\n      return {\n        x: rx,\n        y: ry\n      };\n    },\n\n    /**\n     * Creates a vetor from points represented as a point\n     * @static\n     * @memberOf fabric.util\n     *\n     * @typedef {Object} Point\n     * @property {number} x\n     * @property {number} y\n     *\n     * @param {Point} from\n     * @param {Point} to\n     * @returns {Point} vector\n     */\n    createVector: function (from, to) {\n      return new fabric.Point(to.x - from.x, to.y - from.y);\n    },\n\n    /**\n     * Calculates angle between 2 vectors using dot product\n     * @static\n     * @memberOf fabric.util\n     * @param {Point} a\n     * @param {Point} b\n     * @returns the angle in radian between the vectors\n     */\n    calcAngleBetweenVectors: function (a, b) {\n      return Math.acos((a.x * b.x + a.y * b.y) / (Math.hypot(a.x, a.y) * Math.hypot(b.x, b.y)));\n    },\n\n    /**\n     * @static\n     * @memberOf fabric.util\n     * @param {Point} v\n     * @returns {Point} vector representing the unit vector of pointing to the direction of `v`\n     */\n    getHatVector: function (v) {\n      return new fabric.Point(v.x, v.y).multiply(1 / Math.hypot(v.x, v.y));\n    },\n\n    /**\n     * @static\n     * @memberOf fabric.util\n     * @param {Point} A\n     * @param {Point} B\n     * @param {Point} C\n     * @returns {{ vector: Point, angle: number }} vector representing the bisector of A and A's angle\n     */\n    getBisector: function (A, B, C) {\n      var AB = fabric.util.createVector(A, B), AC = fabric.util.createVector(A, C);\n      var alpha = fabric.util.calcAngleBetweenVectors(AB, AC);\n      //  check if alpha is relative to AB->BC\n      var ro = fabric.util.calcAngleBetweenVectors(fabric.util.rotateVector(AB, alpha), AC);\n      var phi = alpha * (ro === 0 ? 1 : -1) / 2;\n      return {\n        vector: fabric.util.getHatVector(fabric.util.rotateVector(AB, phi)),\n        angle: alpha\n      };\n    },\n\n    /**\n     * Project stroke width on points returning 2 projections for each point as follows:\n     * - `miter`: 2 points corresponding to the outer boundary and the inner boundary of stroke.\n     * - `bevel`: 2 points corresponding to the bevel boundaries, tangent to the bisector.\n     * - `round`: same as `bevel`\n     * Used to calculate object's bounding box\n     * @static\n     * @memberOf fabric.util\n     * @param {Point[]} points\n     * @param {Object} options\n     * @param {number} options.strokeWidth\n     * @param {'miter'|'bevel'|'round'} options.strokeLineJoin\n     * @param {number} options.strokeMiterLimit https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/stroke-miterlimit\n     * @param {boolean} options.strokeUniform\n     * @param {number} options.scaleX\n     * @param {number} options.scaleY\n     * @param {boolean} [openPath] whether the shape is open or not, affects the calculations of the first and last points\n     * @returns {fabric.Point[]} array of size 2n/4n of all suspected points\n     */\n    projectStrokeOnPoints: function (points, options, openPath) {\n      var coords = [], s = options.strokeWidth / 2,\n          strokeUniformScalar = options.strokeUniform ?\n            new fabric.Point(1 / options.scaleX, 1 / options.scaleY) : new fabric.Point(1, 1),\n          getStrokeHatVector = function (v) {\n            var scalar = s / (Math.hypot(v.x, v.y));\n            return new fabric.Point(v.x * scalar * strokeUniformScalar.x, v.y * scalar * strokeUniformScalar.y);\n          };\n      if (points.length <= 1) {return coords;}\n      points.forEach(function (p, index) {\n        var A = new fabric.Point(p.x, p.y), B, C;\n        if (index === 0) {\n          C = points[index + 1];\n          B = openPath ? getStrokeHatVector(fabric.util.createVector(C, A)).addEquals(A) : points[points.length - 1];\n        }\n        else if (index === points.length - 1) {\n          B = points[index - 1];\n          C = openPath ? getStrokeHatVector(fabric.util.createVector(B, A)).addEquals(A) : points[0];\n        }\n        else {\n          B = points[index - 1];\n          C = points[index + 1];\n        }\n        var bisector = fabric.util.getBisector(A, B, C),\n            bisectorVector = bisector.vector,\n            alpha = bisector.angle,\n            scalar,\n            miterVector;\n        if (options.strokeLineJoin === 'miter') {\n          scalar = -s / Math.sin(alpha / 2);\n          miterVector = new fabric.Point(\n            bisectorVector.x * scalar * strokeUniformScalar.x,\n            bisectorVector.y * scalar * strokeUniformScalar.y\n          );\n          if (Math.hypot(miterVector.x, miterVector.y) / s <= options.strokeMiterLimit) {\n            coords.push(A.add(miterVector));\n            coords.push(A.subtract(miterVector));\n            return;\n          }\n        }\n        scalar = -s * Math.SQRT2;\n        miterVector = new fabric.Point(\n          bisectorVector.x * scalar * strokeUniformScalar.x,\n          bisectorVector.y * scalar * strokeUniformScalar.y\n        );\n        coords.push(A.add(miterVector));\n        coords.push(A.subtract(miterVector));\n      });\n      return coords;\n    },\n\n    /**\n     * Apply transform t to point p\n     * @static\n     * @memberOf fabric.util\n     * @param  {fabric.Point} p The point to transform\n     * @param  {Array} t The transform\n     * @param  {Boolean} [ignoreOffset] Indicates that the offset should not be applied\n     * @return {fabric.Point} The transformed point\n     */\n    transformPoint: function(p, t, ignoreOffset) {\n      if (ignoreOffset) {\n        return new fabric.Point(\n          t[0] * p.x + t[2] * p.y,\n          t[1] * p.x + t[3] * p.y\n        );\n      }\n      return new fabric.Point(\n        t[0] * p.x + t[2] * p.y + t[4],\n        t[1] * p.x + t[3] * p.y + t[5]\n      );\n    },\n\n    /**\n     * Returns coordinates of points's bounding rectangle (left, top, width, height)\n     * @param {Array} points 4 points array\n     * @param {Array} [transform] an array of 6 numbers representing a 2x3 transform matrix\n     * @return {Object} Object with left, top, width, height properties\n     */\n    makeBoundingBoxFromPoints: function(points, transform) {\n      if (transform) {\n        for (var i = 0; i < points.length; i++) {\n          points[i] = fabric.util.transformPoint(points[i], transform);\n        }\n      }\n      var xPoints = [points[0].x, points[1].x, points[2].x, points[3].x],\n          minX = fabric.util.array.min(xPoints),\n          maxX = fabric.util.array.max(xPoints),\n          width = maxX - minX,\n          yPoints = [points[0].y, points[1].y, points[2].y, points[3].y],\n          minY = fabric.util.array.min(yPoints),\n          maxY = fabric.util.array.max(yPoints),\n          height = maxY - minY;\n\n      return {\n        left: minX,\n        top: minY,\n        width: width,\n        height: height\n      };\n    },\n\n    /**\n     * Invert transformation t\n     * @static\n     * @memberOf fabric.util\n     * @param {Array} t The transform\n     * @return {Array} The inverted transform\n     */\n    invertTransform: function(t) {\n      var a = 1 / (t[0] * t[3] - t[1] * t[2]),\n          r = [a * t[3], -a * t[1], -a * t[2], a * t[0]],\n          o = fabric.util.transformPoint({ x: t[4], y: t[5] }, r, true);\n      r[4] = -o.x;\n      r[5] = -o.y;\n      return r;\n    },\n\n    /**\n     * A wrapper around Number#toFixed, which contrary to native method returns number, not string.\n     * @static\n     * @memberOf fabric.util\n     * @param {Number|String} number number to operate on\n     * @param {Number} fractionDigits number of fraction digits to \"leave\"\n     * @return {Number}\n     */\n    toFixed: function(number, fractionDigits) {\n      return parseFloat(Number(number).toFixed(fractionDigits));\n    },\n\n    /**\n     * Converts from attribute value to pixel value if applicable.\n     * Returns converted pixels or original value not converted.\n     * @param {Number|String} value number to operate on\n     * @param {Number} fontSize\n     * @return {Number|String}\n     */\n    parseUnit: function(value, fontSize) {\n      var unit = /\\D{0,2}$/.exec(value),\n          number = parseFloat(value);\n      if (!fontSize) {\n        fontSize = fabric.Text.DEFAULT_SVG_FONT_SIZE;\n      }\n      switch (unit[0]) {\n        case 'mm':\n          return number * fabric.DPI / 25.4;\n\n        case 'cm':\n          return number * fabric.DPI / 2.54;\n\n        case 'in':\n          return number * fabric.DPI;\n\n        case 'pt':\n          return number * fabric.DPI / 72; // or * 4 / 3\n\n        case 'pc':\n          return number * fabric.DPI / 72 * 12; // or * 16\n\n        case 'em':\n          return number * fontSize;\n\n        default:\n          return number;\n      }\n    },\n\n    /**\n     * Function which always returns `false`.\n     * @static\n     * @memberOf fabric.util\n     * @return {Boolean}\n     */\n    falseFunction: function() {\n      return false;\n    },\n\n    /**\n     * Returns klass \"Class\" object of given namespace\n     * @memberOf fabric.util\n     * @param {String} type Type of object (eg. 'circle')\n     * @param {String} namespace Namespace to get klass \"Class\" object from\n     * @return {Object} klass \"Class\"\n     */\n    getKlass: function(type, namespace) {\n      // capitalize first letter only\n      type = fabric.util.string.camelize(type.charAt(0).toUpperCase() + type.slice(1));\n      return fabric.util.resolveNamespace(namespace)[type];\n    },\n\n    /**\n     * Returns array of attributes for given svg that fabric parses\n     * @memberOf fabric.util\n     * @param {String} type Type of svg element (eg. 'circle')\n     * @return {Array} string names of supported attributes\n     */\n    getSvgAttributes: function(type) {\n      var attributes = [\n        'instantiated_by_use',\n        'style',\n        'id',\n        'class'\n      ];\n      switch (type) {\n        case 'linearGradient':\n          attributes = attributes.concat(['x1', 'y1', 'x2', 'y2', 'gradientUnits', 'gradientTransform']);\n          break;\n        case 'radialGradient':\n          attributes = attributes.concat(['gradientUnits', 'gradientTransform', 'cx', 'cy', 'r', 'fx', 'fy', 'fr']);\n          break;\n        case 'stop':\n          attributes = attributes.concat(['offset', 'stop-color', 'stop-opacity']);\n          break;\n      }\n      return attributes;\n    },\n\n    /**\n     * Returns object of given namespace\n     * @memberOf fabric.util\n     * @param {String} namespace Namespace string e.g. 'fabric.Image.filter' or 'fabric'\n     * @return {Object} Object for given namespace (default fabric)\n     */\n    resolveNamespace: function(namespace) {\n      if (!namespace) {\n        return fabric;\n      }\n\n      var parts = namespace.split('.'),\n          len = parts.length, i,\n          obj = global || fabric.window;\n\n      for (i = 0; i < len; ++i) {\n        obj = obj[parts[i]];\n      }\n\n      return obj;\n    },\n\n    /**\n     * Loads image element from given url and passes it to a callback\n     * @memberOf fabric.util\n     * @param {String} url URL representing an image\n     * @param {Function} callback Callback; invoked with loaded image\n     * @param {*} [context] Context to invoke callback in\n     * @param {Object} [crossOrigin] crossOrigin value to set image element to\n     */\n    loadImage: function(url, callback, context, crossOrigin) {\n      if (!url) {\n        callback && callback.call(context, url);\n        return;\n      }\n\n      var img = fabric.util.createImage();\n\n      /** @ignore */\n      var onLoadCallback = function () {\n        callback && callback.call(context, img, false);\n        img = img.onload = img.onerror = null;\n      };\n\n      img.onload = onLoadCallback;\n      /** @ignore */\n      img.onerror = function() {\n        fabric.log('Error loading ' + img.src);\n        callback && callback.call(context, null, true);\n        img = img.onload = img.onerror = null;\n      };\n\n      // data-urls appear to be buggy with crossOrigin\n      // https://github.com/kangax/fabric.js/commit/d0abb90f1cd5c5ef9d2a94d3fb21a22330da3e0a#commitcomment-4513767\n      // see https://code.google.com/p/chromium/issues/detail?id=315152\n      //     https://bugzilla.mozilla.org/show_bug.cgi?id=935069\n      // crossOrigin null is the same as not set.\n      if (url.indexOf('data') !== 0 &&\n        crossOrigin !== undefined &&\n        crossOrigin !== null) {\n        img.crossOrigin = crossOrigin;\n      }\n\n      // IE10 / IE11-Fix: SVG contents from data: URI\n      // will only be available if the IMG is present\n      // in the DOM (and visible)\n      if (url.substring(0,14) === 'data:image/svg') {\n        img.onload = null;\n        fabric.util.loadImageInDom(img, onLoadCallback);\n      }\n\n      img.src = url;\n    },\n\n    /**\n     * Attaches SVG image with data: URL to the dom\n     * @memberOf fabric.util\n     * @param {Object} img Image object with data:image/svg src\n     * @param {Function} callback Callback; invoked with loaded image\n     * @return {Object} DOM element (div containing the SVG image)\n     */\n    loadImageInDom: function(img, onLoadCallback) {\n      var div = fabric.document.createElement('div');\n      div.style.width = div.style.height = '1px';\n      div.style.left = div.style.top = '-100%';\n      div.style.position = 'absolute';\n      div.appendChild(img);\n      fabric.document.querySelector('body').appendChild(div);\n      /**\n       * Wrap in function to:\n       *   1. Call existing callback\n       *   2. Cleanup DOM\n       */\n      img.onload = function () {\n        onLoadCallback();\n        div.parentNode.removeChild(div);\n        div = null;\n      };\n    },\n\n    /**\n     * Creates corresponding fabric instances from their object representations\n     * @static\n     * @memberOf fabric.util\n     * @param {Array} objects Objects to enliven\n     * @param {Function} callback Callback to invoke when all objects are created\n     * @param {String} namespace Namespace to get klass \"Class\" object from\n     * @param {Function} reviver Method for further parsing of object elements,\n     * called after each fabric object created.\n     */\n    enlivenObjects: function(objects, callback, namespace, reviver) {\n      objects = objects || [];\n\n      var enlivenedObjects = [],\n          numLoadedObjects = 0,\n          numTotalObjects = objects.length;\n\n      function onLoaded() {\n        if (++numLoadedObjects === numTotalObjects) {\n          callback && callback(enlivenedObjects.filter(function(obj) {\n            // filter out undefined objects (objects that gave error)\n            return obj;\n          }));\n        }\n      }\n\n      if (!numTotalObjects) {\n        callback && callback(enlivenedObjects);\n        return;\n      }\n\n      objects.forEach(function (o, index) {\n        // if sparse array\n        if (!o || !o.type) {\n          onLoaded();\n          return;\n        }\n        var klass = fabric.util.getKlass(o.type, namespace);\n        klass.fromObject(o, function (obj, error) {\n          error || (enlivenedObjects[index] = obj);\n          reviver && reviver(o, obj, error);\n          onLoaded();\n        });\n      });\n    },\n\n    /**\n     * Creates corresponding fabric instances residing in an object, e.g. `clipPath`\n     * @see {@link fabric.Object.ENLIVEN_PROPS}\n     * @param {Object} object\n     * @param {Object} [context] assign enlived props to this object (pass null to skip this)\n     * @param {(objects:fabric.Object[]) => void} callback\n     */\n    enlivenObjectEnlivables: function (object, context, callback) {\n      var enlivenProps = fabric.Object.ENLIVEN_PROPS.filter(function (key) { return !!object[key]; });\n      fabric.util.enlivenObjects(enlivenProps.map(function (key) { return object[key]; }), function (enlivedProps) {\n        var objects = {};\n        enlivenProps.forEach(function (key, index) {\n          objects[key] = enlivedProps[index];\n          context && (context[key] = enlivedProps[index]);\n        });\n        callback && callback(objects);\n      });\n    },\n\n    /**\n     * Create and wait for loading of patterns\n     * @static\n     * @memberOf fabric.util\n     * @param {Array} patterns Objects to enliven\n     * @param {Function} callback Callback to invoke when all objects are created\n     * called after each fabric object created.\n     */\n    enlivenPatterns: function(patterns, callback) {\n      patterns = patterns || [];\n\n      function onLoaded() {\n        if (++numLoadedPatterns === numPatterns) {\n          callback && callback(enlivenedPatterns);\n        }\n      }\n\n      var enlivenedPatterns = [],\n          numLoadedPatterns = 0,\n          numPatterns = patterns.length;\n\n      if (!numPatterns) {\n        callback && callback(enlivenedPatterns);\n        return;\n      }\n\n      patterns.forEach(function (p, index) {\n        if (p && p.source) {\n          new fabric.Pattern(p, function(pattern) {\n            enlivenedPatterns[index] = pattern;\n            onLoaded();\n          });\n        }\n        else {\n          enlivenedPatterns[index] = p;\n          onLoaded();\n        }\n      });\n    },\n\n    /**\n     * Groups SVG elements (usually those retrieved from SVG document)\n     * @static\n     * @memberOf fabric.util\n     * @param {Array} elements SVG elements to group\n     * @param {Object} [options] Options object\n     * @param {String} path Value to set sourcePath to\n     * @return {fabric.Object|fabric.Group}\n     */\n    groupSVGElements: function(elements, options, path) {\n      var object;\n      if (elements && elements.length === 1) {\n        return elements[0];\n      }\n      if (options) {\n        if (options.width && options.height) {\n          options.centerPoint = {\n            x: options.width / 2,\n            y: options.height / 2\n          };\n        }\n        else {\n          delete options.width;\n          delete options.height;\n        }\n      }\n      object = new fabric.Group(elements, options);\n      if (typeof path !== 'undefined') {\n        object.sourcePath = path;\n      }\n      return object;\n    },\n\n    /**\n     * Populates an object with properties of another object\n     * @static\n     * @memberOf fabric.util\n     * @param {Object} source Source object\n     * @param {Object} destination Destination object\n     * @return {Array} properties Properties names to include\n     */\n    populateWithProperties: function(source, destination, properties) {\n      if (properties && Array.isArray(properties)) {\n        for (var i = 0, len = properties.length; i < len; i++) {\n          if (properties[i] in source) {\n            destination[properties[i]] = source[properties[i]];\n          }\n        }\n      }\n    },\n\n    /**\n     * Creates canvas element\n     * @static\n     * @memberOf fabric.util\n     * @return {CanvasElement} initialized canvas element\n     */\n    createCanvasElement: function() {\n      return fabric.document.createElement('canvas');\n    },\n\n    /**\n     * Creates a canvas element that is a copy of another and is also painted\n     * @param {CanvasElement} canvas to copy size and content of\n     * @static\n     * @memberOf fabric.util\n     * @return {CanvasElement} initialized canvas element\n     */\n    copyCanvasElement: function(canvas) {\n      var newCanvas = fabric.util.createCanvasElement();\n      newCanvas.width = canvas.width;\n      newCanvas.height = canvas.height;\n      newCanvas.getContext('2d').drawImage(canvas, 0, 0);\n      return newCanvas;\n    },\n\n    /**\n     * since 2.6.0 moved from canvas instance to utility.\n     * @param {CanvasElement} canvasEl to copy size and content of\n     * @param {String} format 'jpeg' or 'png', in some browsers 'webp' is ok too\n     * @param {Number} quality <= 1 and > 0\n     * @static\n     * @memberOf fabric.util\n     * @return {String} data url\n     */\n    toDataURL: function(canvasEl, format, quality) {\n      return canvasEl.toDataURL('image/' + format, quality);\n    },\n\n    /**\n     * Creates image element (works on client and node)\n     * @static\n     * @memberOf fabric.util\n     * @return {HTMLImageElement} HTML image element\n     */\n    createImage: function() {\n      return fabric.document.createElement('img');\n    },\n\n    /**\n     * Multiply matrix A by matrix B to nest transformations\n     * @static\n     * @memberOf fabric.util\n     * @param  {Array} a First transformMatrix\n     * @param  {Array} b Second transformMatrix\n     * @param  {Boolean} is2x2 flag to multiply matrices as 2x2 matrices\n     * @return {Array} The product of the two transform matrices\n     */\n    multiplyTransformMatrices: function(a, b, is2x2) {\n      // Matrix multiply a * b\n      return [\n        a[0] * b[0] + a[2] * b[1],\n        a[1] * b[0] + a[3] * b[1],\n        a[0] * b[2] + a[2] * b[3],\n        a[1] * b[2] + a[3] * b[3],\n        is2x2 ? 0 : a[0] * b[4] + a[2] * b[5] + a[4],\n        is2x2 ? 0 : a[1] * b[4] + a[3] * b[5] + a[5]\n      ];\n    },\n\n    /**\n     * Decomposes standard 2x3 matrix into transform components\n     * @static\n     * @memberOf fabric.util\n     * @param  {Array} a transformMatrix\n     * @return {Object} Components of transform\n     */\n    qrDecompose: function(a) {\n      var angle = atan2(a[1], a[0]),\n          denom = pow(a[0], 2) + pow(a[1], 2),\n          scaleX = sqrt(denom),\n          scaleY = (a[0] * a[3] - a[2] * a[1]) / scaleX,\n          skewX = atan2(a[0] * a[2] + a[1] * a [3], denom);\n      return {\n        angle: angle / PiBy180,\n        scaleX: scaleX,\n        scaleY: scaleY,\n        skewX: skewX / PiBy180,\n        skewY: 0,\n        translateX: a[4],\n        translateY: a[5]\n      };\n    },\n\n    /**\n     * Returns a transform matrix starting from an object of the same kind of\n     * the one returned from qrDecompose, useful also if you want to calculate some\n     * transformations from an object that is not enlived yet\n     * @static\n     * @memberOf fabric.util\n     * @param  {Object} options\n     * @param  {Number} [options.angle] angle in degrees\n     * @return {Number[]} transform matrix\n     */\n    calcRotateMatrix: function(options) {\n      if (!options.angle) {\n        return fabric.iMatrix.concat();\n      }\n      var theta = fabric.util.degreesToRadians(options.angle),\n          cos = fabric.util.cos(theta),\n          sin = fabric.util.sin(theta);\n      return [cos, sin, -sin, cos, 0, 0];\n    },\n\n    /**\n     * Returns a transform matrix starting from an object of the same kind of\n     * the one returned from qrDecompose, useful also if you want to calculate some\n     * transformations from an object that is not enlived yet.\n     * is called DimensionsTransformMatrix because those properties are the one that influence\n     * the size of the resulting box of the object.\n     * @static\n     * @memberOf fabric.util\n     * @param  {Object} options\n     * @param  {Number} [options.scaleX]\n     * @param  {Number} [options.scaleY]\n     * @param  {Boolean} [options.flipX]\n     * @param  {Boolean} [options.flipY]\n     * @param  {Number} [options.skewX]\n     * @param  {Number} [options.skewY]\n     * @return {Number[]} transform matrix\n     */\n    calcDimensionsMatrix: function(options) {\n      var scaleX = typeof options.scaleX === 'undefined' ? 1 : options.scaleX,\n          scaleY = typeof options.scaleY === 'undefined' ? 1 : options.scaleY,\n          scaleMatrix = [\n            options.flipX ? -scaleX : scaleX,\n            0,\n            0,\n            options.flipY ? -scaleY : scaleY,\n            0,\n            0],\n          multiply = fabric.util.multiplyTransformMatrices,\n          degreesToRadians = fabric.util.degreesToRadians;\n      if (options.skewX) {\n        scaleMatrix = multiply(\n          scaleMatrix,\n          [1, 0, Math.tan(degreesToRadians(options.skewX)), 1],\n          true);\n      }\n      if (options.skewY) {\n        scaleMatrix = multiply(\n          scaleMatrix,\n          [1, Math.tan(degreesToRadians(options.skewY)), 0, 1],\n          true);\n      }\n      return scaleMatrix;\n    },\n\n    /**\n     * Returns a transform matrix starting from an object of the same kind of\n     * the one returned from qrDecompose, useful also if you want to calculate some\n     * transformations from an object that is not enlived yet\n     * @static\n     * @memberOf fabric.util\n     * @param  {Object} options\n     * @param  {Number} [options.angle]\n     * @param  {Number} [options.scaleX]\n     * @param  {Number} [options.scaleY]\n     * @param  {Boolean} [options.flipX]\n     * @param  {Boolean} [options.flipY]\n     * @param  {Number} [options.skewX]\n     * @param  {Number} [options.skewX]\n     * @param  {Number} [options.translateX]\n     * @param  {Number} [options.translateY]\n     * @return {Number[]} transform matrix\n     */\n    composeMatrix: function(options) {\n      var matrix = [1, 0, 0, 1, options.translateX || 0, options.translateY || 0],\n          multiply = fabric.util.multiplyTransformMatrices;\n      if (options.angle) {\n        matrix = multiply(matrix, fabric.util.calcRotateMatrix(options));\n      }\n      if (options.scaleX !== 1 || options.scaleY !== 1 ||\n          options.skewX || options.skewY || options.flipX || options.flipY) {\n        matrix = multiply(matrix, fabric.util.calcDimensionsMatrix(options));\n      }\n      return matrix;\n    },\n\n    /**\n     * reset an object transform state to neutral. Top and left are not accounted for\n     * @static\n     * @memberOf fabric.util\n     * @param  {fabric.Object} target object to transform\n     */\n    resetObjectTransform: function (target) {\n      target.scaleX = 1;\n      target.scaleY = 1;\n      target.skewX = 0;\n      target.skewY = 0;\n      target.flipX = false;\n      target.flipY = false;\n      target.rotate(0);\n    },\n\n    /**\n     * Extract Object transform values\n     * @static\n     * @memberOf fabric.util\n     * @param  {fabric.Object} target object to read from\n     * @return {Object} Components of transform\n     */\n    saveObjectTransform: function (target) {\n      return {\n        scaleX: target.scaleX,\n        scaleY: target.scaleY,\n        skewX: target.skewX,\n        skewY: target.skewY,\n        angle: target.angle,\n        left: target.left,\n        flipX: target.flipX,\n        flipY: target.flipY,\n        top: target.top\n      };\n    },\n\n    /**\n     * Returns true if context has transparent pixel\n     * at specified location (taking tolerance into account)\n     * @param {CanvasRenderingContext2D} ctx context\n     * @param {Number} x x coordinate\n     * @param {Number} y y coordinate\n     * @param {Number} tolerance Tolerance\n     */\n    isTransparent: function(ctx, x, y, tolerance) {\n\n      // If tolerance is > 0 adjust start coords to take into account.\n      // If moves off Canvas fix to 0\n      if (tolerance > 0) {\n        if (x > tolerance) {\n          x -= tolerance;\n        }\n        else {\n          x = 0;\n        }\n        if (y > tolerance) {\n          y -= tolerance;\n        }\n        else {\n          y = 0;\n        }\n      }\n\n      var _isTransparent = true, i, temp,\n          imageData = ctx.getImageData(x, y, (tolerance * 2) || 1, (tolerance * 2) || 1),\n          l = imageData.data.length;\n\n      // Split image data - for tolerance > 1, pixelDataSize = 4;\n      for (i = 3; i < l; i += 4) {\n        temp = imageData.data[i];\n        _isTransparent = temp <= 0;\n        if (_isTransparent === false) {\n          break; // Stop if colour found\n        }\n      }\n\n      imageData = null;\n\n      return _isTransparent;\n    },\n\n    /**\n     * Parse preserveAspectRatio attribute from element\n     * @param {string} attribute to be parsed\n     * @return {Object} an object containing align and meetOrSlice attribute\n     */\n    parsePreserveAspectRatioAttribute: function(attribute) {\n      var meetOrSlice = 'meet', alignX = 'Mid', alignY = 'Mid',\n          aspectRatioAttrs = attribute.split(' '), align;\n\n      if (aspectRatioAttrs && aspectRatioAttrs.length) {\n        meetOrSlice = aspectRatioAttrs.pop();\n        if (meetOrSlice !== 'meet' && meetOrSlice !== 'slice') {\n          align = meetOrSlice;\n          meetOrSlice = 'meet';\n        }\n        else if (aspectRatioAttrs.length) {\n          align = aspectRatioAttrs.pop();\n        }\n      }\n      //divide align in alignX and alignY\n      alignX = align !== 'none' ? align.slice(1, 4) : 'none';\n      alignY = align !== 'none' ? align.slice(5, 8) : 'none';\n      return {\n        meetOrSlice: meetOrSlice,\n        alignX: alignX,\n        alignY: alignY\n      };\n    },\n\n    /**\n     * Clear char widths cache for the given font family or all the cache if no\n     * fontFamily is specified.\n     * Use it if you know you are loading fonts in a lazy way and you are not waiting\n     * for custom fonts to load properly when adding text objects to the canvas.\n     * If a text object is added when its own font is not loaded yet, you will get wrong\n     * measurement and so wrong bounding boxes.\n     * After the font cache is cleared, either change the textObject text content or call\n     * initDimensions() to trigger a recalculation\n     * @memberOf fabric.util\n     * @param {String} [fontFamily] font family to clear\n     */\n    clearFabricFontCache: function(fontFamily) {\n      fontFamily = (fontFamily || '').toLowerCase();\n      if (!fontFamily) {\n        fabric.charWidthsCache = { };\n      }\n      else if (fabric.charWidthsCache[fontFamily]) {\n        delete fabric.charWidthsCache[fontFamily];\n      }\n    },\n\n    /**\n     * Given current aspect ratio, determines the max width and height that can\n     * respect the total allowed area for the cache.\n     * @memberOf fabric.util\n     * @param {Number} ar aspect ratio\n     * @param {Number} maximumArea Maximum area you want to achieve\n     * @return {Object.x} Limited dimensions by X\n     * @return {Object.y} Limited dimensions by Y\n     */\n    limitDimsByArea: function(ar, maximumArea) {\n      var roughWidth = Math.sqrt(maximumArea * ar),\n          perfLimitSizeY = Math.floor(maximumArea / roughWidth);\n      return { x: Math.floor(roughWidth), y: perfLimitSizeY };\n    },\n\n    capValue: function(min, value, max) {\n      return Math.max(min, Math.min(value, max));\n    },\n\n    /**\n     * Finds the scale for the object source to fit inside the object destination,\n     * keeping aspect ratio intact.\n     * respect the total allowed area for the cache.\n     * @memberOf fabric.util\n     * @param {Object | fabric.Object} source\n     * @param {Number} source.height natural unscaled height of the object\n     * @param {Number} source.width natural unscaled width of the object\n     * @param {Object | fabric.Object} destination\n     * @param {Number} destination.height natural unscaled height of the object\n     * @param {Number} destination.width natural unscaled width of the object\n     * @return {Number} scale factor to apply to source to fit into destination\n     */\n    findScaleToFit: function(source, destination) {\n      return Math.min(destination.width / source.width, destination.height / source.height);\n    },\n\n    /**\n     * Finds the scale for the object source to cover entirely the object destination,\n     * keeping aspect ratio intact.\n     * respect the total allowed area for the cache.\n     * @memberOf fabric.util\n     * @param {Object | fabric.Object} source\n     * @param {Number} source.height natural unscaled height of the object\n     * @param {Number} source.width natural unscaled width of the object\n     * @param {Object | fabric.Object} destination\n     * @param {Number} destination.height natural unscaled height of the object\n     * @param {Number} destination.width natural unscaled width of the object\n     * @return {Number} scale factor to apply to source to cover destination\n     */\n    findScaleToCover: function(source, destination) {\n      return Math.max(destination.width / source.width, destination.height / source.height);\n    },\n\n    /**\n     * given an array of 6 number returns something like `\"matrix(...numbers)\"`\n     * @memberOf fabric.util\n     * @param {Array} transform an array with 6 numbers\n     * @return {String} transform matrix for svg\n     * @return {Object.y} Limited dimensions by Y\n     */\n    matrixToSVG: function(transform) {\n      return 'matrix(' + transform.map(function(value) {\n        return fabric.util.toFixed(value, fabric.Object.NUM_FRACTION_DIGITS);\n      }).join(' ') + ')';\n    },\n\n    /**\n     * given an object and a transform, apply the inverse transform to the object,\n     * this is equivalent to remove from that object that transformation, so that\n     * added in a space with the removed transform, the object will be the same as before.\n     * Removing from an object a transform that scale by 2 is like scaling it by 1/2.\n     * Removing from an object a transfrom that rotate by 30deg is like rotating by 30deg\n     * in the opposite direction.\n     * This util is used to add objects inside transformed groups or nested groups.\n     * @memberOf fabric.util\n     * @param {fabric.Object} object the object you want to transform\n     * @param {Array} transform the destination transform\n     */\n    removeTransformFromObject: function(object, transform) {\n      var inverted = fabric.util.invertTransform(transform),\n          finalTransform = fabric.util.multiplyTransformMatrices(inverted, object.calcOwnMatrix());\n      fabric.util.applyTransformToObject(object, finalTransform);\n    },\n\n    /**\n     * given an object and a transform, apply the transform to the object.\n     * this is equivalent to change the space where the object is drawn.\n     * Adding to an object a transform that scale by 2 is like scaling it by 2.\n     * This is used when removing an object from an active selection for example.\n     * @memberOf fabric.util\n     * @param {fabric.Object} object the object you want to transform\n     * @param {Array} transform the destination transform\n     */\n    addTransformToObject: function(object, transform) {\n      fabric.util.applyTransformToObject(\n        object,\n        fabric.util.multiplyTransformMatrices(transform, object.calcOwnMatrix())\n      );\n    },\n\n    /**\n     * discard an object transform state and apply the one from the matrix.\n     * @memberOf fabric.util\n     * @param {fabric.Object} object the object you want to transform\n     * @param {Array} transform the destination transform\n     */\n    applyTransformToObject: function(object, transform) {\n      var options = fabric.util.qrDecompose(transform),\n          center = new fabric.Point(options.translateX, options.translateY);\n      object.flipX = false;\n      object.flipY = false;\n      object.set('scaleX', options.scaleX);\n      object.set('scaleY', options.scaleY);\n      object.skewX = options.skewX;\n      object.skewY = options.skewY;\n      object.angle = options.angle;\n      object.setPositionByOrigin(center, 'center', 'center');\n    },\n\n    /**\n     * given a width and height, return the size of the bounding box\n     * that can contains the box with width/height with applied transform\n     * described in options.\n     * Use to calculate the boxes around objects for controls.\n     * @memberOf fabric.util\n     * @param {Number} width\n     * @param {Number} height\n     * @param {Object} options\n     * @param {Number} options.scaleX\n     * @param {Number} options.scaleY\n     * @param {Number} options.skewX\n     * @param {Number} options.skewY\n     * @return {Object.x} width of containing\n     * @return {Object.y} height of containing\n     */\n    sizeAfterTransform: function(width, height, options) {\n      var dimX = width / 2, dimY = height / 2,\n          points = [\n            {\n              x: -dimX,\n              y: -dimY\n            },\n            {\n              x: dimX,\n              y: -dimY\n            },\n            {\n              x: -dimX,\n              y: dimY\n            },\n            {\n              x: dimX,\n              y: dimY\n            }],\n          transformMatrix = fabric.util.calcDimensionsMatrix(options),\n          bbox = fabric.util.makeBoundingBoxFromPoints(points, transformMatrix);\n      return {\n        x: bbox.width,\n        y: bbox.height,\n      };\n    },\n\n    /**\n     * Merges 2 clip paths into one visually equal clip path\n     *\n     * **IMPORTANT**:\\\n     * Does **NOT** clone the arguments, clone them proir if necessary.\n     *\n     * Creates a wrapper (group) that contains one clip path and is clipped by the other so content is kept where both overlap.\n     * Use this method if both the clip paths may have nested clip paths of their own, so assigning one to the other's clip path property is not possible.\n     *\n     * In order to handle the `inverted` property we follow logic described in the following cases:\\\n     * **(1)** both clip paths are inverted - the clip paths pass the inverted prop to the wrapper and loose it themselves.\\\n     * **(2)** one is inverted and the other isn't - the wrapper shouldn't become inverted and the inverted clip path must clip the non inverted one to produce an identical visual effect.\\\n     * **(3)** both clip paths are not inverted - wrapper and clip paths remain unchanged.\n     *\n     * @memberOf fabric.util\n     * @param {fabric.Object} c1\n     * @param {fabric.Object} c2\n     * @returns {fabric.Object} merged clip path\n     */\n    mergeClipPaths: function (c1, c2) {\n      var a = c1, b = c2;\n      if (a.inverted && !b.inverted) {\n        //  case (2)\n        a = c2;\n        b = c1;\n      }\n      //  `b` becomes `a`'s clip path so we transform `b` to `a` coordinate plane\n      fabric.util.applyTransformToObject(\n        b,\n        fabric.util.multiplyTransformMatrices(\n          fabric.util.invertTransform(a.calcTransformMatrix()),\n          b.calcTransformMatrix()\n        )\n      );\n      //  assign the `inverted` prop to the wrapping group\n      var inverted = a.inverted && b.inverted;\n      if (inverted) {\n        //  case (1)\n        a.inverted = b.inverted = false;\n      }\n      return new fabric.Group([a], { clipPath: b, inverted: inverted });\n    },\n  };\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function() {\n  var _join = Array.prototype.join,\n      commandLengths = {\n        m: 2,\n        l: 2,\n        h: 1,\n        v: 1,\n        c: 6,\n        s: 4,\n        q: 4,\n        t: 2,\n        a: 7\n      },\n      repeatedCommands = {\n        m: 'l',\n        M: 'L'\n      };\n  function segmentToBezier(th2, th3, cosTh, sinTh, rx, ry, cx1, cy1, mT, fromX, fromY) {\n    var costh2 = fabric.util.cos(th2),\n        sinth2 = fabric.util.sin(th2),\n        costh3 = fabric.util.cos(th3),\n        sinth3 = fabric.util.sin(th3),\n        toX = cosTh * rx * costh3 - sinTh * ry * sinth3 + cx1,\n        toY = sinTh * rx * costh3 + cosTh * ry * sinth3 + cy1,\n        cp1X = fromX + mT * ( -cosTh * rx * sinth2 - sinTh * ry * costh2),\n        cp1Y = fromY + mT * ( -sinTh * rx * sinth2 + cosTh * ry * costh2),\n        cp2X = toX + mT * ( cosTh * rx * sinth3 + sinTh * ry * costh3),\n        cp2Y = toY + mT * ( sinTh * rx * sinth3 - cosTh * ry * costh3);\n\n    return ['C',\n      cp1X, cp1Y,\n      cp2X, cp2Y,\n      toX, toY\n    ];\n  }\n\n  /* Adapted from http://dxr.mozilla.org/mozilla-central/source/content/svg/content/src/nsSVGPathDataParser.cpp\n   * by Andrea Bogazzi code is under MPL. if you don't have a copy of the license you can take it here\n   * http://mozilla.org/MPL/2.0/\n   */\n  function arcToSegments(toX, toY, rx, ry, large, sweep, rotateX) {\n    var PI = Math.PI, th = rotateX * PI / 180,\n        sinTh = fabric.util.sin(th),\n        cosTh = fabric.util.cos(th),\n        fromX = 0, fromY = 0;\n\n    rx = Math.abs(rx);\n    ry = Math.abs(ry);\n\n    var px = -cosTh * toX * 0.5 - sinTh * toY * 0.5,\n        py = -cosTh * toY * 0.5 + sinTh * toX * 0.5,\n        rx2 = rx * rx, ry2 = ry * ry, py2 = py * py, px2 = px * px,\n        pl = rx2 * ry2 - rx2 * py2 - ry2 * px2,\n        root = 0;\n\n    if (pl < 0) {\n      var s = Math.sqrt(1 - pl / (rx2 * ry2));\n      rx *= s;\n      ry *= s;\n    }\n    else {\n      root = (large === sweep ? -1.0 : 1.0) *\n              Math.sqrt( pl / (rx2 * py2 + ry2 * px2));\n    }\n\n    var cx = root * rx * py / ry,\n        cy = -root * ry * px / rx,\n        cx1 = cosTh * cx - sinTh * cy + toX * 0.5,\n        cy1 = sinTh * cx + cosTh * cy + toY * 0.5,\n        mTheta = calcVectorAngle(1, 0, (px - cx) / rx, (py - cy) / ry),\n        dtheta = calcVectorAngle((px - cx) / rx, (py - cy) / ry, (-px - cx) / rx, (-py - cy) / ry);\n\n    if (sweep === 0 && dtheta > 0) {\n      dtheta -= 2 * PI;\n    }\n    else if (sweep === 1 && dtheta < 0) {\n      dtheta += 2 * PI;\n    }\n\n    // Convert into cubic bezier segments <= 90deg\n    var segments = Math.ceil(Math.abs(dtheta / PI * 2)),\n        result = [], mDelta = dtheta / segments,\n        mT = 8 / 3 * Math.sin(mDelta / 4) * Math.sin(mDelta / 4) / Math.sin(mDelta / 2),\n        th3 = mTheta + mDelta;\n\n    for (var i = 0; i < segments; i++) {\n      result[i] = segmentToBezier(mTheta, th3, cosTh, sinTh, rx, ry, cx1, cy1, mT, fromX, fromY);\n      fromX = result[i][5];\n      fromY = result[i][6];\n      mTheta = th3;\n      th3 += mDelta;\n    }\n    return result;\n  }\n\n  /*\n   * Private\n   */\n  function calcVectorAngle(ux, uy, vx, vy) {\n    var ta = Math.atan2(uy, ux),\n        tb = Math.atan2(vy, vx);\n    if (tb >= ta) {\n      return tb - ta;\n    }\n    else {\n      return 2 * Math.PI - (ta - tb);\n    }\n  }\n\n  /**\n   * Calculate bounding box of a beziercurve\n   * @param {Number} x0 starting point\n   * @param {Number} y0\n   * @param {Number} x1 first control point\n   * @param {Number} y1\n   * @param {Number} x2 secondo control point\n   * @param {Number} y2\n   * @param {Number} x3 end of bezier\n   * @param {Number} y3\n   */\n  // taken from http://jsbin.com/ivomiq/56/edit  no credits available for that.\n  // TODO: can we normalize this with the starting points set at 0 and then translated the bbox?\n  function getBoundsOfCurve(x0, y0, x1, y1, x2, y2, x3, y3) {\n    var argsString;\n    if (fabric.cachesBoundsOfCurve) {\n      argsString = _join.call(arguments);\n      if (fabric.boundsOfCurveCache[argsString]) {\n        return fabric.boundsOfCurveCache[argsString];\n      }\n    }\n\n    var sqrt = Math.sqrt,\n        min = Math.min, max = Math.max,\n        abs = Math.abs, tvalues = [],\n        bounds = [[], []],\n        a, b, c, t, t1, t2, b2ac, sqrtb2ac;\n\n    b = 6 * x0 - 12 * x1 + 6 * x2;\n    a = -3 * x0 + 9 * x1 - 9 * x2 + 3 * x3;\n    c = 3 * x1 - 3 * x0;\n\n    for (var i = 0; i < 2; ++i) {\n      if (i > 0) {\n        b = 6 * y0 - 12 * y1 + 6 * y2;\n        a = -3 * y0 + 9 * y1 - 9 * y2 + 3 * y3;\n        c = 3 * y1 - 3 * y0;\n      }\n\n      if (abs(a) < 1e-12) {\n        if (abs(b) < 1e-12) {\n          continue;\n        }\n        t = -c / b;\n        if (0 < t && t < 1) {\n          tvalues.push(t);\n        }\n        continue;\n      }\n      b2ac = b * b - 4 * c * a;\n      if (b2ac < 0) {\n        continue;\n      }\n      sqrtb2ac = sqrt(b2ac);\n      t1 = (-b + sqrtb2ac) / (2 * a);\n      if (0 < t1 && t1 < 1) {\n        tvalues.push(t1);\n      }\n      t2 = (-b - sqrtb2ac) / (2 * a);\n      if (0 < t2 && t2 < 1) {\n        tvalues.push(t2);\n      }\n    }\n\n    var x, y, j = tvalues.length, jlen = j, mt;\n    while (j--) {\n      t = tvalues[j];\n      mt = 1 - t;\n      x = (mt * mt * mt * x0) + (3 * mt * mt * t * x1) + (3 * mt * t * t * x2) + (t * t * t * x3);\n      bounds[0][j] = x;\n\n      y = (mt * mt * mt * y0) + (3 * mt * mt * t * y1) + (3 * mt * t * t * y2) + (t * t * t * y3);\n      bounds[1][j] = y;\n    }\n\n    bounds[0][jlen] = x0;\n    bounds[1][jlen] = y0;\n    bounds[0][jlen + 1] = x3;\n    bounds[1][jlen + 1] = y3;\n    var result = [\n      {\n        x: min.apply(null, bounds[0]),\n        y: min.apply(null, bounds[1])\n      },\n      {\n        x: max.apply(null, bounds[0]),\n        y: max.apply(null, bounds[1])\n      }\n    ];\n    if (fabric.cachesBoundsOfCurve) {\n      fabric.boundsOfCurveCache[argsString] = result;\n    }\n    return result;\n  }\n\n  /**\n   * Converts arc to a bunch of bezier curves\n   * @param {Number} fx starting point x\n   * @param {Number} fy starting point y\n   * @param {Array} coords Arc command\n   */\n  function fromArcToBeziers(fx, fy, coords) {\n    var rx = coords[1],\n        ry = coords[2],\n        rot = coords[3],\n        large = coords[4],\n        sweep = coords[5],\n        tx = coords[6],\n        ty = coords[7],\n        segsNorm = arcToSegments(tx - fx, ty - fy, rx, ry, large, sweep, rot);\n\n    for (var i = 0, len = segsNorm.length; i < len; i++) {\n      segsNorm[i][1] += fx;\n      segsNorm[i][2] += fy;\n      segsNorm[i][3] += fx;\n      segsNorm[i][4] += fy;\n      segsNorm[i][5] += fx;\n      segsNorm[i][6] += fy;\n    }\n    return segsNorm;\n  };\n\n  /**\n   * This function take a parsed SVG path and make it simpler for fabricJS logic.\n   * simplification consist of: only UPPERCASE absolute commands ( relative converted to absolute )\n   * S converted in C, T converted in Q, A converted in C.\n   * @param {Array} path the array of commands of a parsed svg path for fabric.Path\n   * @return {Array} the simplified array of commands of a parsed svg path for fabric.Path\n   */\n  function makePathSimpler(path) {\n    // x and y represent the last point of the path. the previous command point.\n    // we add them to each relative command to make it an absolute comment.\n    // we also swap the v V h H with L, because are easier to transform.\n    var x = 0, y = 0, len = path.length,\n        // x1 and y1 represent the last point of the subpath. the subpath is started with\n        // m or M command. When a z or Z command is drawn, x and y need to be resetted to\n        // the last x1 and y1.\n        x1 = 0, y1 = 0, current, i, converted,\n        // previous will host the letter of the previous command, to handle S and T.\n        // controlX and controlY will host the previous reflected control point\n        destinationPath = [], previous, controlX, controlY;\n    for (i = 0; i < len; ++i) {\n      converted = false;\n      current = path[i].slice(0);\n      switch (current[0]) { // first letter\n        case 'l': // lineto, relative\n          current[0] = 'L';\n          current[1] += x;\n          current[2] += y;\n          // falls through\n        case 'L':\n          x = current[1];\n          y = current[2];\n          break;\n        case 'h': // horizontal lineto, relative\n          current[1] += x;\n          // falls through\n        case 'H':\n          current[0] = 'L';\n          current[2] = y;\n          x = current[1];\n          break;\n        case 'v': // vertical lineto, relative\n          current[1] += y;\n          // falls through\n        case 'V':\n          current[0] = 'L';\n          y = current[1];\n          current[1] = x;\n          current[2] = y;\n          break;\n        case 'm': // moveTo, relative\n          current[0] = 'M';\n          current[1] += x;\n          current[2] += y;\n          // falls through\n        case 'M':\n          x = current[1];\n          y = current[2];\n          x1 = current[1];\n          y1 = current[2];\n          break;\n        case 'c': // bezierCurveTo, relative\n          current[0] = 'C';\n          current[1] += x;\n          current[2] += y;\n          current[3] += x;\n          current[4] += y;\n          current[5] += x;\n          current[6] += y;\n          // falls through\n        case 'C':\n          controlX = current[3];\n          controlY = current[4];\n          x = current[5];\n          y = current[6];\n          break;\n        case 's': // shorthand cubic bezierCurveTo, relative\n          current[0] = 'S';\n          current[1] += x;\n          current[2] += y;\n          current[3] += x;\n          current[4] += y;\n          // falls through\n        case 'S':\n          // would be sScC but since we are swapping sSc for C, we check just that.\n          if (previous === 'C') {\n            // calculate reflection of previous control points\n            controlX = 2 * x - controlX;\n            controlY = 2 * y - controlY;\n          }\n          else {\n            // If there is no previous command or if the previous command was not a C, c, S, or s,\n            // the control point is coincident with the current point\n            controlX = x;\n            controlY = y;\n          }\n          x = current[3];\n          y = current[4];\n          current[0] = 'C';\n          current[5] = current[3];\n          current[6] = current[4];\n          current[3] = current[1];\n          current[4] = current[2];\n          current[1] = controlX;\n          current[2] = controlY;\n          // current[3] and current[4] are NOW the second control point.\n          // we keep it for the next reflection.\n          controlX = current[3];\n          controlY = current[4];\n          break;\n        case 'q': // quadraticCurveTo, relative\n          current[0] = 'Q';\n          current[1] += x;\n          current[2] += y;\n          current[3] += x;\n          current[4] += y;\n          // falls through\n        case 'Q':\n          controlX = current[1];\n          controlY = current[2];\n          x = current[3];\n          y = current[4];\n          break;\n        case 't': // shorthand quadraticCurveTo, relative\n          current[0] = 'T';\n          current[1] += x;\n          current[2] += y;\n          // falls through\n        case 'T':\n          if (previous === 'Q') {\n            // calculate reflection of previous control point\n            controlX = 2 * x - controlX;\n            controlY = 2 * y - controlY;\n          }\n          else {\n            // If there is no previous command or if the previous command was not a Q, q, T or t,\n            // assume the control point is coincident with the current point\n            controlX = x;\n            controlY = y;\n          }\n          current[0] = 'Q';\n          x = current[1];\n          y = current[2];\n          current[1] = controlX;\n          current[2] = controlY;\n          current[3] = x;\n          current[4] = y;\n          break;\n        case 'a':\n          current[0] = 'A';\n          current[6] += x;\n          current[7] += y;\n          // falls through\n        case 'A':\n          converted = true;\n          destinationPath = destinationPath.concat(fromArcToBeziers(x, y, current));\n          x = current[6];\n          y = current[7];\n          break;\n        case 'z':\n        case 'Z':\n          x = x1;\n          y = y1;\n          break;\n        default:\n      }\n      if (!converted) {\n        destinationPath.push(current);\n      }\n      previous = current[0];\n    }\n    return destinationPath;\n  };\n\n  /**\n   * Calc length from point x1,y1 to x2,y2\n   * @param {Number} x1 starting point x\n   * @param {Number} y1 starting point y\n   * @param {Number} x2 starting point x\n   * @param {Number} y2 starting point y\n   * @return {Number} length of segment\n   */\n  function calcLineLength(x1, y1, x2, y2) {\n    return Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1));\n  }\n\n  // functions for the Cubic beizer\n  // taken from: https://github.com/konvajs/konva/blob/7.0.5/src/shapes/Path.ts#L350\n  function CB1(t) {\n    return t * t * t;\n  }\n  function CB2(t) {\n    return 3 * t * t * (1 - t);\n  }\n  function CB3(t) {\n    return 3 * t * (1 - t) * (1 - t);\n  }\n  function CB4(t) {\n    return (1 - t) * (1 - t) * (1 - t);\n  }\n\n  function getPointOnCubicBezierIterator(p1x, p1y, p2x, p2y, p3x, p3y, p4x, p4y) {\n    return function(pct) {\n      var c1 = CB1(pct), c2 = CB2(pct), c3 = CB3(pct), c4 = CB4(pct);\n      return {\n        x: p4x * c1 + p3x * c2 + p2x * c3 + p1x * c4,\n        y: p4y * c1 + p3y * c2 + p2y * c3 + p1y * c4\n      };\n    };\n  }\n\n  function getTangentCubicIterator(p1x, p1y, p2x, p2y, p3x, p3y, p4x, p4y) {\n    return function (pct) {\n      var invT = 1 - pct,\n          tangentX = (3 * invT * invT * (p2x - p1x)) + (6 * invT * pct * (p3x - p2x)) +\n          (3 * pct * pct * (p4x - p3x)),\n          tangentY = (3 * invT * invT * (p2y - p1y)) + (6 * invT * pct * (p3y - p2y)) +\n          (3 * pct * pct * (p4y - p3y));\n      return Math.atan2(tangentY, tangentX);\n    };\n  }\n\n  function QB1(t) {\n    return t * t;\n  }\n\n  function QB2(t) {\n    return 2 * t * (1 - t);\n  }\n\n  function QB3(t) {\n    return (1 - t) * (1 - t);\n  }\n\n  function getPointOnQuadraticBezierIterator(p1x, p1y, p2x, p2y, p3x, p3y) {\n    return function(pct) {\n      var c1 = QB1(pct), c2 = QB2(pct), c3 = QB3(pct);\n      return {\n        x: p3x * c1 + p2x * c2 + p1x * c3,\n        y: p3y * c1 + p2y * c2 + p1y * c3\n      };\n    };\n  }\n\n  function getTangentQuadraticIterator(p1x, p1y, p2x, p2y, p3x, p3y) {\n    return function (pct) {\n      var invT = 1 - pct,\n          tangentX = (2 * invT * (p2x - p1x)) + (2 * pct * (p3x - p2x)),\n          tangentY = (2 * invT * (p2y - p1y)) + (2 * pct * (p3y - p2y));\n      return Math.atan2(tangentY, tangentX);\n    };\n  }\n\n\n  // this will run over a path segment ( a cubic or quadratic segment) and approximate it\n  // with 100 segemnts. This will good enough to calculate the length of the curve\n  function pathIterator(iterator, x1, y1) {\n    var tempP = { x: x1, y: y1 }, p, tmpLen = 0, perc;\n    for (perc = 1; perc <= 100; perc += 1) {\n      p = iterator(perc / 100);\n      tmpLen += calcLineLength(tempP.x, tempP.y, p.x, p.y);\n      tempP = p;\n    }\n    return tmpLen;\n  }\n\n  /**\n   * Given a pathInfo, and a distance in pixels, find the percentage from 0 to 1\n   * that correspond to that pixels run over the path.\n   * The percentage will be then used to find the correct point on the canvas for the path.\n   * @param {Array} segInfo fabricJS collection of information on a parsed path\n   * @param {Number} distance from starting point, in pixels.\n   * @return {Object} info object with x and y ( the point on canvas ) and angle, the tangent on that point;\n   */\n  function findPercentageForDistance(segInfo, distance) {\n    var perc = 0, tmpLen = 0, iterator = segInfo.iterator, tempP = { x: segInfo.x, y: segInfo.y },\n        p, nextLen, nextStep = 0.01, angleFinder = segInfo.angleFinder, lastPerc;\n    // nextStep > 0.0001 covers 0.00015625 that 1/64th of 1/100\n    // the path\n    while (tmpLen < distance && nextStep > 0.0001) {\n      p = iterator(perc);\n      lastPerc = perc;\n      nextLen = calcLineLength(tempP.x, tempP.y, p.x, p.y);\n      // compare tmpLen each cycle with distance, decide next perc to test.\n      if ((nextLen + tmpLen) > distance) {\n        // we discard this step and we make smaller steps.\n        perc -= nextStep;\n        nextStep /= 2;\n      }\n      else {\n        tempP = p;\n        perc += nextStep;\n        tmpLen += nextLen;\n      }\n    }\n    p.angle = angleFinder(lastPerc);\n    return p;\n  }\n\n  /**\n   * Run over a parsed and simplifed path and extrac some informations.\n   * informations are length of each command and starting point\n   * @param {Array} path fabricJS parsed path commands\n   * @return {Array} path commands informations\n   */\n  function getPathSegmentsInfo(path) {\n    var totalLength = 0, len = path.length, current,\n        //x2 and y2 are the coords of segment start\n        //x1 and y1 are the coords of the current point\n        x1 = 0, y1 = 0, x2 = 0, y2 = 0, info = [], iterator, tempInfo, angleFinder;\n    for (var i = 0; i < len; i++) {\n      current = path[i];\n      tempInfo = {\n        x: x1,\n        y: y1,\n        command: current[0],\n      };\n      switch (current[0]) { //first letter\n        case 'M':\n          tempInfo.length = 0;\n          x2 = x1 = current[1];\n          y2 = y1 = current[2];\n          break;\n        case 'L':\n          tempInfo.length = calcLineLength(x1, y1, current[1], current[2]);\n          x1 = current[1];\n          y1 = current[2];\n          break;\n        case 'C':\n          iterator = getPointOnCubicBezierIterator(\n            x1,\n            y1,\n            current[1],\n            current[2],\n            current[3],\n            current[4],\n            current[5],\n            current[6]\n          );\n          angleFinder = getTangentCubicIterator(\n            x1,\n            y1,\n            current[1],\n            current[2],\n            current[3],\n            current[4],\n            current[5],\n            current[6]\n          );\n          tempInfo.iterator = iterator;\n          tempInfo.angleFinder = angleFinder;\n          tempInfo.length = pathIterator(iterator, x1, y1);\n          x1 = current[5];\n          y1 = current[6];\n          break;\n        case 'Q':\n          iterator = getPointOnQuadraticBezierIterator(\n            x1,\n            y1,\n            current[1],\n            current[2],\n            current[3],\n            current[4]\n          );\n          angleFinder = getTangentQuadraticIterator(\n            x1,\n            y1,\n            current[1],\n            current[2],\n            current[3],\n            current[4]\n          );\n          tempInfo.iterator = iterator;\n          tempInfo.angleFinder = angleFinder;\n          tempInfo.length = pathIterator(iterator, x1, y1);\n          x1 = current[3];\n          y1 = current[4];\n          break;\n        case 'Z':\n        case 'z':\n          // we add those in order to ease calculations later\n          tempInfo.destX = x2;\n          tempInfo.destY = y2;\n          tempInfo.length = calcLineLength(x1, y1, x2, y2);\n          x1 = x2;\n          y1 = y2;\n          break;\n      }\n      totalLength += tempInfo.length;\n      info.push(tempInfo);\n    }\n    info.push({ length: totalLength, x: x1, y: y1 });\n    return info;\n  }\n\n  function getPointOnPath(path, distance, infos) {\n    if (!infos) {\n      infos = getPathSegmentsInfo(path);\n    }\n    var i = 0;\n    while ((distance - infos[i].length > 0) && i < (infos.length - 2)) {\n      distance -= infos[i].length;\n      i++;\n    }\n    // var distance = infos[infos.length - 1] * perc;\n    var segInfo = infos[i], segPercent = distance / segInfo.length,\n        command = segInfo.command, segment = path[i], info;\n\n    switch (command) {\n      case 'M':\n        return { x: segInfo.x, y: segInfo.y, angle: 0 };\n      case 'Z':\n      case 'z':\n        info = new fabric.Point(segInfo.x, segInfo.y).lerp(\n          new fabric.Point(segInfo.destX, segInfo.destY),\n          segPercent\n        );\n        info.angle = Math.atan2(segInfo.destY - segInfo.y, segInfo.destX - segInfo.x);\n        return info;\n      case 'L':\n        info = new fabric.Point(segInfo.x, segInfo.y).lerp(\n          new fabric.Point(segment[1], segment[2]),\n          segPercent\n        );\n        info.angle = Math.atan2(segment[2] - segInfo.y, segment[1] - segInfo.x);\n        return info;\n      case 'C':\n        return findPercentageForDistance(segInfo, distance);\n      case 'Q':\n        return findPercentageForDistance(segInfo, distance);\n    }\n  }\n\n  /**\n   *\n   * @param {string} pathString\n   * @return {(string|number)[][]} An array of SVG path commands\n   * @example <caption>Usage</caption>\n   * parsePath('M 3 4 Q 3 5 2 1 4 0 Q 9 12 2 1 4 0') === [\n   *   ['M', 3, 4],\n   *   ['Q', 3, 5, 2, 1, 4, 0],\n   *   ['Q', 9, 12, 2, 1, 4, 0],\n   * ];\n   *\n   */\n  function parsePath(pathString) {\n    var result = [],\n        coords = [],\n        currentPath,\n        parsed,\n        re = fabric.rePathCommand,\n        rNumber = '[-+]?(?:\\\\d*\\\\.\\\\d+|\\\\d+\\\\.?)(?:[eE][-+]?\\\\d+)?\\\\s*',\n        rNumberCommaWsp = '(' + rNumber + ')' + fabric.commaWsp,\n        rFlagCommaWsp = '([01])' + fabric.commaWsp + '?',\n        rArcSeq = rNumberCommaWsp + '?' + rNumberCommaWsp + '?' + rNumberCommaWsp + rFlagCommaWsp + rFlagCommaWsp +\n          rNumberCommaWsp + '?(' + rNumber + ')',\n        regArcArgumentSequence = new RegExp(rArcSeq, 'g'),\n        match,\n        coordsStr,\n        // one of commands (m,M,l,L,q,Q,c,C,etc.) followed by non-command characters (i.e. command values)\n        path;\n    if (!pathString || !pathString.match) {\n      return result;\n    }\n    path = pathString.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);\n\n    for (var i = 0, coordsParsed, len = path.length; i < len; i++) {\n      currentPath = path[i];\n\n      coordsStr = currentPath.slice(1).trim();\n      coords.length = 0;\n\n      var command = currentPath.charAt(0);\n      coordsParsed = [command];\n\n      if (command.toLowerCase() === 'a') {\n        // arcs have special flags that apparently don't require spaces so handle special\n        for (var args; (args = regArcArgumentSequence.exec(coordsStr));) {\n          for (var j = 1; j < args.length; j++) {\n            coords.push(args[j]);\n          }\n        }\n      }\n      else {\n        while ((match = re.exec(coordsStr))) {\n          coords.push(match[0]);\n        }\n      }\n\n      for (var j = 0, jlen = coords.length; j < jlen; j++) {\n        parsed = parseFloat(coords[j]);\n        if (!isNaN(parsed)) {\n          coordsParsed.push(parsed);\n        }\n      }\n\n      var commandLength = commandLengths[command.toLowerCase()],\n          repeatedCommand = repeatedCommands[command] || command;\n\n      if (coordsParsed.length - 1 > commandLength) {\n        for (var k = 1, klen = coordsParsed.length; k < klen; k += commandLength) {\n          result.push([command].concat(coordsParsed.slice(k, k + commandLength)));\n          command = repeatedCommand;\n        }\n      }\n      else {\n        result.push(coordsParsed);\n      }\n    }\n\n    return result;\n  };\n\n  /**\n   *\n   * Converts points to a smooth SVG path\n   * @param {{ x: number,y: number }[]} points Array of points\n   * @param {number} [correction] Apply a correction to the path (usually we use `width / 1000`). If value is undefined 0 is used as the correction value.\n   * @return {(string|number)[][]} An array of SVG path commands\n   */\n  function getSmoothPathFromPoints(points, correction) {\n    var path = [], i,\n        p1 = new fabric.Point(points[0].x, points[0].y),\n        p2 = new fabric.Point(points[1].x, points[1].y),\n        len = points.length, multSignX = 1, multSignY = 0, manyPoints = len > 2;\n    correction = correction || 0;\n\n    if (manyPoints) {\n      multSignX = points[2].x < p2.x ? -1 : points[2].x === p2.x ? 0 : 1;\n      multSignY = points[2].y < p2.y ? -1 : points[2].y === p2.y ? 0 : 1;\n    }\n    path.push(['M', p1.x - multSignX * correction, p1.y - multSignY * correction]);\n    for (i = 1; i < len; i++) {\n      if (!p1.eq(p2)) {\n        var midPoint = p1.midPointFrom(p2);\n        // p1 is our bezier control point\n        // midpoint is our endpoint\n        // start point is p(i-1) value.\n        path.push(['Q', p1.x, p1.y, midPoint.x, midPoint.y]);\n      }\n      p1 = points[i];\n      if ((i + 1) < points.length) {\n        p2 = points[i + 1];\n      }\n    }\n    if (manyPoints) {\n      multSignX = p1.x > points[i - 2].x ? 1 : p1.x === points[i - 2].x ? 0 : -1;\n      multSignY = p1.y > points[i - 2].y ? 1 : p1.y === points[i - 2].y ? 0 : -1;\n    }\n    path.push(['L', p1.x + multSignX * correction, p1.y + multSignY * correction]);\n    return path;\n  }\n  /**\n   * Transform a path by transforming each segment.\n   * it has to be a simplified path or it won't work.\n   * WARNING: this depends from pathOffset for correct operation\n   * @param {Array} path fabricJS parsed and simplified path commands\n   * @param {Array} transform matrix that represent the transformation\n   * @param {Object} [pathOffset] the fabric.Path pathOffset\n   * @param {Number} pathOffset.x\n   * @param {Number} pathOffset.y\n   * @returns {Array} the transformed path\n   */\n  function transformPath(path, transform, pathOffset) {\n    if (pathOffset) {\n      transform = fabric.util.multiplyTransformMatrices(\n        transform,\n        [1, 0, 0, 1, -pathOffset.x, -pathOffset.y]\n      );\n    }\n    return path.map(function(pathSegment) {\n      var newSegment = pathSegment.slice(0), point = {};\n      for (var i = 1; i < pathSegment.length - 1; i += 2) {\n        point.x = pathSegment[i];\n        point.y = pathSegment[i + 1];\n        point = fabric.util.transformPoint(point, transform);\n        newSegment[i] = point.x;\n        newSegment[i + 1] = point.y;\n      }\n      return newSegment;\n    });\n  }\n\n  /**\n   * Join path commands to go back to svg format\n   * @param {Array} pathData fabricJS parsed path commands\n   * @return {String} joined path 'M 0 0 L 20 30'\n   */\n  fabric.util.joinPath = function(pathData) {\n    return pathData.map(function (segment) { return segment.join(' '); }).join(' ');\n  };\n  fabric.util.parsePath = parsePath;\n  fabric.util.makePathSimpler = makePathSimpler;\n  fabric.util.getSmoothPathFromPoints = getSmoothPathFromPoints;\n  fabric.util.getPathSegmentsInfo = getPathSegmentsInfo;\n  fabric.util.getBoundsOfCurve = getBoundsOfCurve;\n  fabric.util.getPointOnPath = getPointOnPath;\n  fabric.util.transformPath = transformPath;\n})();\n\n\n(function() {\n\n  var slice = Array.prototype.slice;\n\n  /**\n   * Invokes method on all items in a given array\n   * @memberOf fabric.util.array\n   * @param {Array} array Array to iterate over\n   * @param {String} method Name of a method to invoke\n   * @return {Array}\n   */\n  function invoke(array, method) {\n    var args = slice.call(arguments, 2), result = [];\n    for (var i = 0, len = array.length; i < len; i++) {\n      result[i] = args.length ? array[i][method].apply(array[i], args) : array[i][method].call(array[i]);\n    }\n    return result;\n  }\n\n  /**\n   * Finds maximum value in array (not necessarily \"first\" one)\n   * @memberOf fabric.util.array\n   * @param {Array} array Array to iterate over\n   * @param {String} byProperty\n   * @return {*}\n   */\n  function max(array, byProperty) {\n    return find(array, byProperty, function(value1, value2) {\n      return value1 >= value2;\n    });\n  }\n\n  /**\n   * Finds minimum value in array (not necessarily \"first\" one)\n   * @memberOf fabric.util.array\n   * @param {Array} array Array to iterate over\n   * @param {String} byProperty\n   * @return {*}\n   */\n  function min(array, byProperty) {\n    return find(array, byProperty, function(value1, value2) {\n      return value1 < value2;\n    });\n  }\n\n  /**\n   * @private\n   */\n  function fill(array, value) {\n    var k = array.length;\n    while (k--) {\n      array[k] = value;\n    }\n    return array;\n  }\n\n  /**\n   * @private\n   */\n  function find(array, byProperty, condition) {\n    if (!array || array.length === 0) {\n      return;\n    }\n\n    var i = array.length - 1,\n        result = byProperty ? array[i][byProperty] : array[i];\n    if (byProperty) {\n      while (i--) {\n        if (condition(array[i][byProperty], result)) {\n          result = array[i][byProperty];\n        }\n      }\n    }\n    else {\n      while (i--) {\n        if (condition(array[i], result)) {\n          result = array[i];\n        }\n      }\n    }\n    return result;\n  }\n\n  /**\n   * @namespace fabric.util.array\n   */\n  fabric.util.array = {\n    fill: fill,\n    invoke: invoke,\n    min: min,\n    max: max\n  };\n\n})();\n\n\n(function() {\n  /**\n   * Copies all enumerable properties of one js object to another\n   * this does not and cannot compete with generic utils.\n   * Does not clone or extend fabric.Object subclasses.\n   * This is mostly for internal use and has extra handling for fabricJS objects\n   * it skips the canvas and group properties in deep cloning.\n   * @memberOf fabric.util.object\n   * @param {Object} destination Where to copy to\n   * @param {Object} source Where to copy from\n   * @param {Boolean} [deep] Whether to extend nested objects\n   * @return {Object}\n   */\n\n  function extend(destination, source, deep) {\n    // JScript DontEnum bug is not taken care of\n    // the deep clone is for internal use, is not meant to avoid\n    // javascript traps or cloning html element or self referenced objects.\n    if (deep) {\n      if (!fabric.isLikelyNode && source instanceof Element) {\n        // avoid cloning deep images, canvases,\n        destination = source;\n      }\n      else if (source instanceof Array) {\n        destination = [];\n        for (var i = 0, len = source.length; i < len; i++) {\n          destination[i] = extend({ }, source[i], deep);\n        }\n      }\n      else if (source && typeof source === 'object') {\n        for (var property in source) {\n          if (property === 'canvas' || property === 'group') {\n            // we do not want to clone this props at all.\n            // we want to keep the keys in the copy\n            destination[property] = null;\n          }\n          else if (source.hasOwnProperty(property)) {\n            destination[property] = extend({ }, source[property], deep);\n          }\n        }\n      }\n      else {\n        // this sounds odd for an extend but is ok for recursive use\n        destination = source;\n      }\n    }\n    else {\n      for (var property in source) {\n        destination[property] = source[property];\n      }\n    }\n    return destination;\n  }\n\n  /**\n   * Creates an empty object and copies all enumerable properties of another object to it\n   * This method is mostly for internal use, and not intended for duplicating shapes in canvas. \n   * @memberOf fabric.util.object\n   * @param {Object} object Object to clone\n   * @param {Boolean} [deep] Whether to clone nested objects\n   * @return {Object}\n   */\n\n  //TODO: this function return an empty object if you try to clone null\n  function clone(object, deep) {\n    return extend({ }, object, deep);\n  }\n\n  /** @namespace fabric.util.object */\n  fabric.util.object = {\n    extend: extend,\n    clone: clone\n  };\n  fabric.util.object.extend(fabric.util, fabric.Observable);\n})();\n\n\n(function() {\n\n  /**\n   * Camelizes a string\n   * @memberOf fabric.util.string\n   * @param {String} string String to camelize\n   * @return {String} Camelized version of a string\n   */\n  function camelize(string) {\n    return string.replace(/-+(.)?/g, function(match, character) {\n      return character ? character.toUpperCase() : '';\n    });\n  }\n\n  /**\n   * Capitalizes a string\n   * @memberOf fabric.util.string\n   * @param {String} string String to capitalize\n   * @param {Boolean} [firstLetterOnly] If true only first letter is capitalized\n   * and other letters stay untouched, if false first letter is capitalized\n   * and other letters are converted to lowercase.\n   * @return {String} Capitalized version of a string\n   */\n  function capitalize(string, firstLetterOnly) {\n    return string.charAt(0).toUpperCase() +\n      (firstLetterOnly ? string.slice(1) : string.slice(1).toLowerCase());\n  }\n\n  /**\n   * Escapes XML in a string\n   * @memberOf fabric.util.string\n   * @param {String} string String to escape\n   * @return {String} Escaped version of a string\n   */\n  function escapeXml(string) {\n    return string.replace(/&/g, '&amp;')\n      .replace(/\"/g, '&quot;')\n      .replace(/'/g, '&apos;')\n      .replace(/</g, '&lt;')\n      .replace(/>/g, '&gt;');\n  }\n\n  /**\n   * Divide a string in the user perceived single units\n   * @memberOf fabric.util.string\n   * @param {String} textstring String to escape\n   * @return {Array} array containing the graphemes\n   */\n  function graphemeSplit(textstring) {\n    var i = 0, chr, graphemes = [];\n    for (i = 0, chr; i < textstring.length; i++) {\n      if ((chr = getWholeChar(textstring, i)) === false) {\n        continue;\n      }\n      graphemes.push(chr);\n    }\n    return graphemes;\n  }\n\n  // taken from mdn in the charAt doc page.\n  function getWholeChar(str, i) {\n    var code = str.charCodeAt(i);\n\n    if (isNaN(code)) {\n      return ''; // Position not found\n    }\n    if (code < 0xD800 || code > 0xDFFF) {\n      return str.charAt(i);\n    }\n\n    // High surrogate (could change last hex to 0xDB7F to treat high private\n    // surrogates as single characters)\n    if (0xD800 <= code && code <= 0xDBFF) {\n      if (str.length <= (i + 1)) {\n        throw 'High surrogate without following low surrogate';\n      }\n      var next = str.charCodeAt(i + 1);\n      if (0xDC00 > next || next > 0xDFFF) {\n        throw 'High surrogate without following low surrogate';\n      }\n      return str.charAt(i) + str.charAt(i + 1);\n    }\n    // Low surrogate (0xDC00 <= code && code <= 0xDFFF)\n    if (i === 0) {\n      throw 'Low surrogate without preceding high surrogate';\n    }\n    var prev = str.charCodeAt(i - 1);\n\n    // (could change last hex to 0xDB7F to treat high private\n    // surrogates as single characters)\n    if (0xD800 > prev || prev > 0xDBFF) {\n      throw 'Low surrogate without preceding high surrogate';\n    }\n    // We can pass over low surrogates now as the second component\n    // in a pair which we have already processed\n    return false;\n  }\n\n\n  /**\n   * String utilities\n   * @namespace fabric.util.string\n   */\n  fabric.util.string = {\n    camelize: camelize,\n    capitalize: capitalize,\n    escapeXml: escapeXml,\n    graphemeSplit: graphemeSplit\n  };\n})();\n\n\n(function() {\n\n  var slice = Array.prototype.slice, emptyFunction = function() { },\n\n      IS_DONTENUM_BUGGY = (function() {\n        for (var p in { toString: 1 }) {\n          if (p === 'toString') {\n            return false;\n          }\n        }\n        return true;\n      })(),\n\n      /** @ignore */\n      addMethods = function(klass, source, parent) {\n        for (var property in source) {\n\n          if (property in klass.prototype &&\n              typeof klass.prototype[property] === 'function' &&\n              (source[property] + '').indexOf('callSuper') > -1) {\n\n            klass.prototype[property] = (function(property) {\n              return function() {\n\n                var superclass = this.constructor.superclass;\n                this.constructor.superclass = parent;\n                var returnValue = source[property].apply(this, arguments);\n                this.constructor.superclass = superclass;\n\n                if (property !== 'initialize') {\n                  return returnValue;\n                }\n              };\n            })(property);\n          }\n          else {\n            klass.prototype[property] = source[property];\n          }\n\n          if (IS_DONTENUM_BUGGY) {\n            if (source.toString !== Object.prototype.toString) {\n              klass.prototype.toString = source.toString;\n            }\n            if (source.valueOf !== Object.prototype.valueOf) {\n              klass.prototype.valueOf = source.valueOf;\n            }\n          }\n        }\n      };\n\n  function Subclass() { }\n\n  function callSuper(methodName) {\n    var parentMethod = null,\n        _this = this;\n\n    // climb prototype chain to find method not equal to callee's method\n    while (_this.constructor.superclass) {\n      var superClassMethod = _this.constructor.superclass.prototype[methodName];\n      if (_this[methodName] !== superClassMethod) {\n        parentMethod = superClassMethod;\n        break;\n      }\n      // eslint-disable-next-line\n      _this = _this.constructor.superclass.prototype;\n    }\n\n    if (!parentMethod) {\n      return console.log('tried to callSuper ' + methodName + ', method not found in prototype chain', this);\n    }\n\n    return (arguments.length > 1)\n      ? parentMethod.apply(this, slice.call(arguments, 1))\n      : parentMethod.call(this);\n  }\n\n  /**\n   * Helper for creation of \"classes\".\n   * @memberOf fabric.util\n   * @param {Function} [parent] optional \"Class\" to inherit from\n   * @param {Object} [properties] Properties shared by all instances of this class\n   *                  (be careful modifying objects defined here as this would affect all instances)\n   */\n  function createClass() {\n    var parent = null,\n        properties = slice.call(arguments, 0);\n\n    if (typeof properties[0] === 'function') {\n      parent = properties.shift();\n    }\n    function klass() {\n      this.initialize.apply(this, arguments);\n    }\n\n    klass.superclass = parent;\n    klass.subclasses = [];\n\n    if (parent) {\n      Subclass.prototype = parent.prototype;\n      klass.prototype = new Subclass();\n      parent.subclasses.push(klass);\n    }\n    for (var i = 0, length = properties.length; i < length; i++) {\n      addMethods(klass, properties[i], parent);\n    }\n    if (!klass.prototype.initialize) {\n      klass.prototype.initialize = emptyFunction;\n    }\n    klass.prototype.constructor = klass;\n    klass.prototype.callSuper = callSuper;\n    return klass;\n  }\n\n  fabric.util.createClass = createClass;\n})();\n\n\n(function () {\n  // since ie11 can use addEventListener but they do not support options, i need to check\n  var couldUseAttachEvent = !!fabric.document.createElement('div').attachEvent,\n      touchEvents = ['touchstart', 'touchmove', 'touchend'];\n  /**\n   * Adds an event listener to an element\n   * @function\n   * @memberOf fabric.util\n   * @param {HTMLElement} element\n   * @param {String} eventName\n   * @param {Function} handler\n   */\n  fabric.util.addListener = function(element, eventName, handler, options) {\n    element && element.addEventListener(eventName, handler, couldUseAttachEvent ? false : options);\n  };\n\n  /**\n   * Removes an event listener from an element\n   * @function\n   * @memberOf fabric.util\n   * @param {HTMLElement} element\n   * @param {String} eventName\n   * @param {Function} handler\n   */\n  fabric.util.removeListener = function(element, eventName, handler, options) {\n    element && element.removeEventListener(eventName, handler, couldUseAttachEvent ? false : options);\n  };\n\n  function getTouchInfo(event) {\n    var touchProp = event.changedTouches;\n    if (touchProp && touchProp[0]) {\n      return touchProp[0];\n    }\n    return event;\n  }\n\n  fabric.util.getPointer = function(event) {\n    var element = event.target,\n        scroll = fabric.util.getScrollLeftTop(element),\n        _evt = getTouchInfo(event);\n    return {\n      x: _evt.clientX + scroll.left,\n      y: _evt.clientY + scroll.top\n    };\n  };\n\n  fabric.util.isTouchEvent = function(event) {\n    return touchEvents.indexOf(event.type) > -1 || event.pointerType === 'touch';\n  };\n})();\n\n\n(function () {\n\n  /**\n   * Cross-browser wrapper for setting element's style\n   * @memberOf fabric.util\n   * @param {HTMLElement} element\n   * @param {Object} styles\n   * @return {HTMLElement} Element that was passed as a first argument\n   */\n  function setStyle(element, styles) {\n    var elementStyle = element.style;\n    if (!elementStyle) {\n      return element;\n    }\n    if (typeof styles === 'string') {\n      element.style.cssText += ';' + styles;\n      return styles.indexOf('opacity') > -1\n        ? setOpacity(element, styles.match(/opacity:\\s*(\\d?\\.?\\d*)/)[1])\n        : element;\n    }\n    for (var property in styles) {\n      if (property === 'opacity') {\n        setOpacity(element, styles[property]);\n      }\n      else {\n        var normalizedProperty = (property === 'float' || property === 'cssFloat')\n          ? (typeof elementStyle.styleFloat === 'undefined' ? 'cssFloat' : 'styleFloat')\n          : property;\n        elementStyle[normalizedProperty] = styles[property];\n      }\n    }\n    return element;\n  }\n\n  var parseEl = fabric.document.createElement('div'),\n      supportsOpacity = typeof parseEl.style.opacity === 'string',\n      supportsFilters = typeof parseEl.style.filter === 'string',\n      reOpacity = /alpha\\s*\\(\\s*opacity\\s*=\\s*([^\\)]+)\\)/,\n\n      /** @ignore */\n      setOpacity = function (element) { return element; };\n\n  if (supportsOpacity) {\n    /** @ignore */\n    setOpacity = function(element, value) {\n      element.style.opacity = value;\n      return element;\n    };\n  }\n  else if (supportsFilters) {\n    /** @ignore */\n    setOpacity = function(element, value) {\n      var es = element.style;\n      if (element.currentStyle && !element.currentStyle.hasLayout) {\n        es.zoom = 1;\n      }\n      if (reOpacity.test(es.filter)) {\n        value = value >= 0.9999 ? '' : ('alpha(opacity=' + (value * 100) + ')');\n        es.filter = es.filter.replace(reOpacity, value);\n      }\n      else {\n        es.filter += ' alpha(opacity=' + (value * 100) + ')';\n      }\n      return element;\n    };\n  }\n\n  fabric.util.setStyle = setStyle;\n\n})();\n\n\n(function() {\n\n  var _slice = Array.prototype.slice;\n\n  /**\n   * Takes id and returns an element with that id (if one exists in a document)\n   * @memberOf fabric.util\n   * @param {String|HTMLElement} id\n   * @return {HTMLElement|null}\n   */\n  function getById(id) {\n    return typeof id === 'string' ? fabric.document.getElementById(id) : id;\n  }\n\n  var sliceCanConvertNodelists,\n      /**\n       * Converts an array-like object (e.g. arguments or NodeList) to an array\n       * @memberOf fabric.util\n       * @param {Object} arrayLike\n       * @return {Array}\n       */\n      toArray = function(arrayLike) {\n        return _slice.call(arrayLike, 0);\n      };\n\n  try {\n    sliceCanConvertNodelists = toArray(fabric.document.childNodes) instanceof Array;\n  }\n  catch (err) { }\n\n  if (!sliceCanConvertNodelists) {\n    toArray = function(arrayLike) {\n      var arr = new Array(arrayLike.length), i = arrayLike.length;\n      while (i--) {\n        arr[i] = arrayLike[i];\n      }\n      return arr;\n    };\n  }\n\n  /**\n   * Creates specified element with specified attributes\n   * @memberOf fabric.util\n   * @param {String} tagName Type of an element to create\n   * @param {Object} [attributes] Attributes to set on an element\n   * @return {HTMLElement} Newly created element\n   */\n  function makeElement(tagName, attributes) {\n    var el = fabric.document.createElement(tagName);\n    for (var prop in attributes) {\n      if (prop === 'class') {\n        el.className = attributes[prop];\n      }\n      else if (prop === 'for') {\n        el.htmlFor = attributes[prop];\n      }\n      else {\n        el.setAttribute(prop, attributes[prop]);\n      }\n    }\n    return el;\n  }\n\n  /**\n   * Adds class to an element\n   * @memberOf fabric.util\n   * @param {HTMLElement} element Element to add class to\n   * @param {String} className Class to add to an element\n   */\n  function addClass(element, className) {\n    if (element && (' ' + element.className + ' ').indexOf(' ' + className + ' ') === -1) {\n      element.className += (element.className ? ' ' : '') + className;\n    }\n  }\n\n  /**\n   * Wraps element with another element\n   * @memberOf fabric.util\n   * @param {HTMLElement} element Element to wrap\n   * @param {HTMLElement|String} wrapper Element to wrap with\n   * @param {Object} [attributes] Attributes to set on a wrapper\n   * @return {HTMLElement} wrapper\n   */\n  function wrapElement(element, wrapper, attributes) {\n    if (typeof wrapper === 'string') {\n      wrapper = makeElement(wrapper, attributes);\n    }\n    if (element.parentNode) {\n      element.parentNode.replaceChild(wrapper, element);\n    }\n    wrapper.appendChild(element);\n    return wrapper;\n  }\n\n  /**\n   * Returns element scroll offsets\n   * @memberOf fabric.util\n   * @param {HTMLElement} element Element to operate on\n   * @return {Object} Object with left/top values\n   */\n  function getScrollLeftTop(element) {\n\n    var left = 0,\n        top = 0,\n        docElement = fabric.document.documentElement,\n        body = fabric.document.body || {\n          scrollLeft: 0, scrollTop: 0\n        };\n\n    // While loop checks (and then sets element to) .parentNode OR .host\n    //  to account for ShadowDOM. We still want to traverse up out of ShadowDOM,\n    //  but the .parentNode of a root ShadowDOM node will always be null, instead\n    //  it should be accessed through .host. See http://stackoverflow.com/a/24765528/4383938\n    while (element && (element.parentNode || element.host)) {\n\n      // Set element to element parent, or 'host' in case of ShadowDOM\n      element = element.parentNode || element.host;\n\n      if (element === fabric.document) {\n        left = body.scrollLeft || docElement.scrollLeft || 0;\n        top = body.scrollTop ||  docElement.scrollTop || 0;\n      }\n      else {\n        left += element.scrollLeft || 0;\n        top += element.scrollTop || 0;\n      }\n\n      if (element.nodeType === 1 && element.style.position === 'fixed') {\n        break;\n      }\n    }\n\n    return { left: left, top: top };\n  }\n\n  /**\n   * Returns offset for a given element\n   * @function\n   * @memberOf fabric.util\n   * @param {HTMLElement} element Element to get offset for\n   * @return {Object} Object with \"left\" and \"top\" properties\n   */\n  function getElementOffset(element) {\n    var docElem,\n        doc = element && element.ownerDocument,\n        box = { left: 0, top: 0 },\n        offset = { left: 0, top: 0 },\n        scrollLeftTop,\n        offsetAttributes = {\n          borderLeftWidth: 'left',\n          borderTopWidth:  'top',\n          paddingLeft:     'left',\n          paddingTop:      'top'\n        };\n\n    if (!doc) {\n      return offset;\n    }\n\n    for (var attr in offsetAttributes) {\n      offset[offsetAttributes[attr]] += parseInt(getElementStyle(element, attr), 10) || 0;\n    }\n\n    docElem = doc.documentElement;\n    if ( typeof element.getBoundingClientRect !== 'undefined' ) {\n      box = element.getBoundingClientRect();\n    }\n\n    scrollLeftTop = getScrollLeftTop(element);\n\n    return {\n      left: box.left + scrollLeftTop.left - (docElem.clientLeft || 0) + offset.left,\n      top: box.top + scrollLeftTop.top - (docElem.clientTop || 0)  + offset.top\n    };\n  }\n\n  /**\n   * Returns style attribute value of a given element\n   * @memberOf fabric.util\n   * @param {HTMLElement} element Element to get style attribute for\n   * @param {String} attr Style attribute to get for element\n   * @return {String} Style attribute value of the given element.\n   */\n  var getElementStyle;\n  if (fabric.document.defaultView && fabric.document.defaultView.getComputedStyle) {\n    getElementStyle = function(element, attr) {\n      var style = fabric.document.defaultView.getComputedStyle(element, null);\n      return style ? style[attr] : undefined;\n    };\n  }\n  else {\n    getElementStyle = function(element, attr) {\n      var value = element.style[attr];\n      if (!value && element.currentStyle) {\n        value = element.currentStyle[attr];\n      }\n      return value;\n    };\n  }\n\n  (function () {\n    var style = fabric.document.documentElement.style,\n        selectProp = 'userSelect' in style\n          ? 'userSelect'\n          : 'MozUserSelect' in style\n            ? 'MozUserSelect'\n            : 'WebkitUserSelect' in style\n              ? 'WebkitUserSelect'\n              : 'KhtmlUserSelect' in style\n                ? 'KhtmlUserSelect'\n                : '';\n\n    /**\n     * Makes element unselectable\n     * @memberOf fabric.util\n     * @param {HTMLElement} element Element to make unselectable\n     * @return {HTMLElement} Element that was passed in\n     */\n    function makeElementUnselectable(element) {\n      if (typeof element.onselectstart !== 'undefined') {\n        element.onselectstart = fabric.util.falseFunction;\n      }\n      if (selectProp) {\n        element.style[selectProp] = 'none';\n      }\n      else if (typeof element.unselectable === 'string') {\n        element.unselectable = 'on';\n      }\n      return element;\n    }\n\n    /**\n     * Makes element selectable\n     * @memberOf fabric.util\n     * @param {HTMLElement} element Element to make selectable\n     * @return {HTMLElement} Element that was passed in\n     */\n    function makeElementSelectable(element) {\n      if (typeof element.onselectstart !== 'undefined') {\n        element.onselectstart = null;\n      }\n      if (selectProp) {\n        element.style[selectProp] = '';\n      }\n      else if (typeof element.unselectable === 'string') {\n        element.unselectable = '';\n      }\n      return element;\n    }\n\n    fabric.util.makeElementUnselectable = makeElementUnselectable;\n    fabric.util.makeElementSelectable = makeElementSelectable;\n  })();\n\n  function getNodeCanvas(element) {\n    var impl = fabric.jsdomImplForWrapper(element);\n    return impl._canvas || impl._image;\n  };\n\n  function cleanUpJsdomNode(element) {\n    if (!fabric.isLikelyNode) {\n      return;\n    }\n    var impl = fabric.jsdomImplForWrapper(element);\n    if (impl) {\n      impl._image = null;\n      impl._canvas = null;\n      // unsure if necessary\n      impl._currentSrc = null;\n      impl._attributes = null;\n      impl._classList = null;\n    }\n  }\n\n  function setImageSmoothing(ctx, value) {\n    ctx.imageSmoothingEnabled = ctx.imageSmoothingEnabled || ctx.webkitImageSmoothingEnabled\n      || ctx.mozImageSmoothingEnabled || ctx.msImageSmoothingEnabled || ctx.oImageSmoothingEnabled;\n    ctx.imageSmoothingEnabled = value;\n  }\n\n  /**\n   * setImageSmoothing sets the context imageSmoothingEnabled property.\n   * Used by canvas and by ImageObject.\n   * @memberOf fabric.util\n   * @since 4.0.0\n   * @param {HTMLRenderingContext2D} ctx to set on\n   * @param {Boolean} value true or false\n   */\n  fabric.util.setImageSmoothing = setImageSmoothing;\n  fabric.util.getById = getById;\n  fabric.util.toArray = toArray;\n  fabric.util.addClass = addClass;\n  fabric.util.makeElement = makeElement;\n  fabric.util.wrapElement = wrapElement;\n  fabric.util.getScrollLeftTop = getScrollLeftTop;\n  fabric.util.getElementOffset = getElementOffset;\n  fabric.util.getNodeCanvas = getNodeCanvas;\n  fabric.util.cleanUpJsdomNode = cleanUpJsdomNode;\n\n})();\n\n\n(function() {\n\n  function addParamToUrl(url, param) {\n    return url + (/\\?/.test(url) ? '&' : '?') + param;\n  }\n\n  function emptyFn() { }\n\n  /**\n   * Cross-browser abstraction for sending XMLHttpRequest\n   * @memberOf fabric.util\n   * @param {String} url URL to send XMLHttpRequest to\n   * @param {Object} [options] Options object\n   * @param {String} [options.method=\"GET\"]\n   * @param {String} [options.parameters] parameters to append to url in GET or in body\n   * @param {String} [options.body] body to send with POST or PUT request\n   * @param {Function} options.onComplete Callback to invoke when request is completed\n   * @return {XMLHttpRequest} request\n   */\n  function request(url, options) {\n    options || (options = { });\n\n    var method = options.method ? options.method.toUpperCase() : 'GET',\n        onComplete = options.onComplete || function() { },\n        xhr = new fabric.window.XMLHttpRequest(),\n        body = options.body || options.parameters;\n\n    /** @ignore */\n    xhr.onreadystatechange = function() {\n      if (xhr.readyState === 4) {\n        onComplete(xhr);\n        xhr.onreadystatechange = emptyFn;\n      }\n    };\n\n    if (method === 'GET') {\n      body = null;\n      if (typeof options.parameters === 'string') {\n        url = addParamToUrl(url, options.parameters);\n      }\n    }\n\n    xhr.open(method, url, true);\n\n    if (method === 'POST' || method === 'PUT') {\n      xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\n    }\n\n    xhr.send(body);\n    return xhr;\n  }\n\n  fabric.util.request = request;\n})();\n\n\n/**\n * Wrapper around `console.log` (when available)\n * @param {*} [values] Values to log\n */\nfabric.log = console.log;\n\n/**\n * Wrapper around `console.warn` (when available)\n * @param {*} [values] Values to log as a warning\n */\nfabric.warn = console.warn;\n\n\n(function () {\n\n  var extend = fabric.util.object.extend,\n      clone = fabric.util.object.clone;\n\n  /**\n   * @typedef {Object} AnimationOptions\n   * Animation of a value or list of values.\n   * When using lists, think of something like this:\n   * fabric.util.animate({\n   *   startValue: [1, 2, 3],\n   *   endValue: [2, 4, 6],\n   *   onChange: function([a, b, c]) {\n   *     canvas.zoomToPoint({x: b, y: c}, a)\n   *     canvas.renderAll()\n   *   }\n   * });\n   * @example\n   * @property {Function} [onChange] Callback; invoked on every value change\n   * @property {Function} [onComplete] Callback; invoked when value change is completed\n   * @example\n   * // Note: startValue, endValue, and byValue must match the type\n   * var animationOptions = { startValue: 0, endValue: 1, byValue: 0.25 }\n   * var animationOptions = { startValue: [0, 1], endValue: [1, 2], byValue: [0.25, 0.25] }\n   * @property {number | number[]} [startValue=0] Starting value\n   * @property {number | number[]} [endValue=100] Ending value\n   * @property {number | number[]} [byValue=100] Value to modify the property by\n   * @property {Function} [easing] Easing function\n   * @property {Number} [duration=500] Duration of change (in ms)\n   * @property {Function} [abort] Additional function with logic. If returns true, animation aborts.\n   *\n   * @typedef {() => void} CancelFunction\n   *\n   * @typedef {Object} AnimationCurrentState\n   * @property {number | number[]} currentValue value in range [`startValue`, `endValue`]\n   * @property {number} completionRate value in range [0, 1]\n   * @property {number} durationRate value in range [0, 1]\n   *\n   * @typedef {(AnimationOptions & AnimationCurrentState & { cancel: CancelFunction }} AnimationContext\n   */\n\n  /**\n   * Array holding all running animations\n   * @memberof fabric\n   * @type {AnimationContext[]}\n   */\n  var RUNNING_ANIMATIONS = [];\n  fabric.util.object.extend(RUNNING_ANIMATIONS, {\n\n    /**\n     * cancel all running animations at the next requestAnimFrame\n     * @returns {AnimationContext[]}\n     */\n    cancelAll: function () {\n      var animations = this.splice(0);\n      animations.forEach(function (animation) {\n        animation.cancel();\n      });\n      return animations;\n    },\n\n    /**\n     * cancel all running animations attached to canvas at the next requestAnimFrame\n     * @param {fabric.Canvas} canvas\n     * @returns {AnimationContext[]}\n     */\n    cancelByCanvas: function (canvas) {\n      if (!canvas) {\n        return [];\n      }\n      var cancelled = this.filter(function (animation) {\n        return typeof animation.target === 'object' && animation.target.canvas === canvas;\n      });\n      cancelled.forEach(function (animation) {\n        animation.cancel();\n      });\n      return cancelled;\n    },\n\n    /**\n     * cancel all running animations for target at the next requestAnimFrame\n     * @param {*} target\n     * @returns {AnimationContext[]}\n     */\n    cancelByTarget: function (target) {\n      var cancelled = this.findAnimationsByTarget(target);\n      cancelled.forEach(function (animation) {\n        animation.cancel();\n      });\n      return cancelled;\n    },\n\n    /**\n     *\n     * @param {CancelFunction} cancelFunc the function returned by animate\n     * @returns {number}\n     */\n    findAnimationIndex: function (cancelFunc) {\n      return this.indexOf(this.findAnimation(cancelFunc));\n    },\n\n    /**\n     *\n     * @param {CancelFunction} cancelFunc the function returned by animate\n     * @returns {AnimationContext | undefined} animation's options object\n     */\n    findAnimation: function (cancelFunc) {\n      return this.find(function (animation) {\n        return animation.cancel === cancelFunc;\n      });\n    },\n\n    /**\n     *\n     * @param {*} target the object that is assigned to the target property of the animation context\n     * @returns {AnimationContext[]} array of animation options object associated with target\n     */\n    findAnimationsByTarget: function (target) {\n      if (!target) {\n        return [];\n      }\n      return this.filter(function (animation) {\n        return animation.target === target;\n      });\n    }\n  });\n\n  function noop() {\n    return false;\n  }\n\n  function defaultEasing(t, b, c, d) {\n    return -c * Math.cos(t / d * (Math.PI / 2)) + c + b;\n  }\n\n  /**\n   * Changes value from one to another within certain period of time, invoking callbacks as value is being changed.\n   * @memberOf fabric.util\n   * @param {AnimationOptions} [options] Animation options\n   * @example\n   * // Note: startValue, endValue, and byValue must match the type\n   * fabric.util.animate({ startValue: 0, endValue: 1, byValue: 0.25 })\n   * fabric.util.animate({ startValue: [0, 1], endValue: [1, 2], byValue: [0.25, 0.25] })\n   * @returns {CancelFunction} cancel function\n   */\n  function animate(options) {\n    options || (options = {});\n    var cancel = false,\n        context,\n        removeFromRegistry = function () {\n          var index = fabric.runningAnimations.indexOf(context);\n          return index > -1 && fabric.runningAnimations.splice(index, 1)[0];\n        };\n\n    context = extend(clone(options), {\n      cancel: function () {\n        cancel = true;\n        return removeFromRegistry();\n      },\n      currentValue: 'startValue' in options ? options.startValue : 0,\n      completionRate: 0,\n      durationRate: 0\n    });\n    fabric.runningAnimations.push(context);\n\n    requestAnimFrame(function(timestamp) {\n      var start = timestamp || +new Date(),\n          duration = options.duration || 500,\n          finish = start + duration, time,\n          onChange = options.onChange || noop,\n          abort = options.abort || noop,\n          onComplete = options.onComplete || noop,\n          easing = options.easing || defaultEasing,\n          isMany = 'startValue' in options ? options.startValue.length > 0 : false,\n          startValue = 'startValue' in options ? options.startValue : 0,\n          endValue = 'endValue' in options ? options.endValue : 100,\n          byValue = options.byValue || (isMany ? startValue.map(function(value, i) {\n            return endValue[i] - startValue[i];\n          }) : endValue - startValue);\n\n      options.onStart && options.onStart();\n\n      (function tick(ticktime) {\n        time = ticktime || +new Date();\n        var currentTime = time > finish ? duration : (time - start),\n            timePerc = currentTime / duration,\n            current = isMany ? startValue.map(function(_value, i) {\n              return easing(currentTime, startValue[i], byValue[i], duration);\n            }) : easing(currentTime, startValue, byValue, duration),\n            valuePerc = isMany ? Math.abs((current[0] - startValue[0]) / byValue[0])\n              : Math.abs((current - startValue) / byValue);\n        //  update context\n        context.currentValue = isMany ? current.slice() : current;\n        context.completionRate = valuePerc;\n        context.durationRate = timePerc;\n        if (cancel) {\n          return;\n        }\n        if (abort(current, valuePerc, timePerc)) {\n          removeFromRegistry();\n          return;\n        }\n        if (time > finish) {\n          //  update context\n          context.currentValue = isMany ? endValue.slice() : endValue;\n          context.completionRate = 1;\n          context.durationRate = 1;\n          //  execute callbacks\n          onChange(isMany ? endValue.slice() : endValue, 1, 1);\n          onComplete(endValue, 1, 1);\n          removeFromRegistry();\n          return;\n        }\n        else {\n          onChange(current, valuePerc, timePerc);\n          requestAnimFrame(tick);\n        }\n      })(start);\n    });\n\n    return context.cancel;\n  }\n\n  var _requestAnimFrame = fabric.window.requestAnimationFrame       ||\n                          fabric.window.webkitRequestAnimationFrame ||\n                          fabric.window.mozRequestAnimationFrame    ||\n                          fabric.window.oRequestAnimationFrame      ||\n                          fabric.window.msRequestAnimationFrame     ||\n                          function(callback) {\n                            return fabric.window.setTimeout(callback, 1000 / 60);\n                          };\n\n  var _cancelAnimFrame = fabric.window.cancelAnimationFrame || fabric.window.clearTimeout;\n\n  /**\n   * requestAnimationFrame polyfill based on http://paulirish.com/2011/requestanimationframe-for-smart-animating/\n   * In order to get a precise start time, `requestAnimFrame` should be called as an entry into the method\n   * @memberOf fabric.util\n   * @param {Function} callback Callback to invoke\n   * @param {DOMElement} element optional Element to associate with animation\n   */\n  function requestAnimFrame() {\n    return _requestAnimFrame.apply(fabric.window, arguments);\n  }\n\n  function cancelAnimFrame() {\n    return _cancelAnimFrame.apply(fabric.window, arguments);\n  }\n\n  fabric.util.animate = animate;\n  fabric.util.requestAnimFrame = requestAnimFrame;\n  fabric.util.cancelAnimFrame = cancelAnimFrame;\n  fabric.runningAnimations = RUNNING_ANIMATIONS;\n})();\n\n\n(function() {\n  // Calculate an in-between color. Returns a \"rgba()\" string.\n  // Credit: Edwin Martin <edwin@bitstorm.org>\n  //         http://www.bitstorm.org/jquery/color-animation/jquery.animate-colors.js\n  function calculateColor(begin, end, pos) {\n    var color = 'rgba('\n        + parseInt((begin[0] + pos * (end[0] - begin[0])), 10) + ','\n        + parseInt((begin[1] + pos * (end[1] - begin[1])), 10) + ','\n        + parseInt((begin[2] + pos * (end[2] - begin[2])), 10);\n\n    color += ',' + (begin && end ? parseFloat(begin[3] + pos * (end[3] - begin[3])) : 1);\n    color += ')';\n    return color;\n  }\n\n  /**\n   * Changes the color from one to another within certain period of time, invoking callbacks as value is being changed.\n   * @memberOf fabric.util\n   * @param {String} fromColor The starting color in hex or rgb(a) format.\n   * @param {String} toColor The starting color in hex or rgb(a) format.\n   * @param {Number} [duration] Duration of change (in ms).\n   * @param {Object} [options] Animation options\n   * @param {Function} [options.onChange] Callback; invoked on every value change\n   * @param {Function} [options.onComplete] Callback; invoked when value change is completed\n   * @param {Function} [options.colorEasing] Easing function. Note that this function only take two arguments (currentTime, duration). Thus the regular animation easing functions cannot be used.\n   * @param {Function} [options.abort] Additional function with logic. If returns true, onComplete is called.\n   * @returns {Function} abort function\n   */\n  function animateColor(fromColor, toColor, duration, options) {\n    var startColor = new fabric.Color(fromColor).getSource(),\n        endColor = new fabric.Color(toColor).getSource(),\n        originalOnComplete = options.onComplete,\n        originalOnChange = options.onChange;\n    options = options || {};\n\n    return fabric.util.animate(fabric.util.object.extend(options, {\n      duration: duration || 500,\n      startValue: startColor,\n      endValue: endColor,\n      byValue: endColor,\n      easing: function (currentTime, startValue, byValue, duration) {\n        var posValue = options.colorEasing\n          ? options.colorEasing(currentTime, duration)\n          : 1 - Math.cos(currentTime / duration * (Math.PI / 2));\n        return calculateColor(startValue, byValue, posValue);\n      },\n      // has to take in account for color restoring;\n      onComplete: function(current, valuePerc, timePerc) {\n        if (originalOnComplete) {\n          return originalOnComplete(\n            calculateColor(endColor, endColor, 0),\n            valuePerc,\n            timePerc\n          );\n        }\n      },\n      onChange: function(current, valuePerc, timePerc) {\n        if (originalOnChange) {\n          if (Array.isArray(current)) {\n            return originalOnChange(\n              calculateColor(current, current, 0),\n              valuePerc,\n              timePerc\n            );\n          }\n          originalOnChange(current, valuePerc, timePerc);\n        }\n      }\n    }));\n  }\n\n  fabric.util.animateColor = animateColor;\n\n})();\n\n\n(function() {\n\n  function normalize(a, c, p, s) {\n    if (a < Math.abs(c)) {\n      a = c;\n      s = p / 4;\n    }\n    else {\n      //handle the 0/0 case:\n      if (c === 0 && a === 0) {\n        s = p / (2 * Math.PI) * Math.asin(1);\n      }\n      else {\n        s = p / (2 * Math.PI) * Math.asin(c / a);\n      }\n    }\n    return { a: a, c: c, p: p, s: s };\n  }\n\n  function elastic(opts, t, d) {\n    return opts.a *\n      Math.pow(2, 10 * (t -= 1)) *\n      Math.sin( (t * d - opts.s) * (2 * Math.PI) / opts.p );\n  }\n\n  /**\n   * Cubic easing out\n   * @memberOf fabric.util.ease\n   */\n  function easeOutCubic(t, b, c, d) {\n    return c * ((t = t / d - 1) * t * t + 1) + b;\n  }\n\n  /**\n   * Cubic easing in and out\n   * @memberOf fabric.util.ease\n   */\n  function easeInOutCubic(t, b, c, d) {\n    t /= d / 2;\n    if (t < 1) {\n      return c / 2 * t * t * t + b;\n    }\n    return c / 2 * ((t -= 2) * t * t + 2) + b;\n  }\n\n  /**\n   * Quartic easing in\n   * @memberOf fabric.util.ease\n   */\n  function easeInQuart(t, b, c, d) {\n    return c * (t /= d) * t * t * t + b;\n  }\n\n  /**\n   * Quartic easing out\n   * @memberOf fabric.util.ease\n   */\n  function easeOutQuart(t, b, c, d) {\n    return -c * ((t = t / d - 1) * t * t * t - 1) + b;\n  }\n\n  /**\n   * Quartic easing in and out\n   * @memberOf fabric.util.ease\n   */\n  function easeInOutQuart(t, b, c, d) {\n    t /= d / 2;\n    if (t < 1) {\n      return c / 2 * t * t * t * t + b;\n    }\n    return -c / 2 * ((t -= 2) * t * t * t - 2) + b;\n  }\n\n  /**\n   * Quintic easing in\n   * @memberOf fabric.util.ease\n   */\n  function easeInQuint(t, b, c, d) {\n    return c * (t /= d) * t * t * t * t + b;\n  }\n\n  /**\n   * Quintic easing out\n   * @memberOf fabric.util.ease\n   */\n  function easeOutQuint(t, b, c, d) {\n    return c * ((t = t / d - 1) * t * t * t * t + 1) + b;\n  }\n\n  /**\n   * Quintic easing in and out\n   * @memberOf fabric.util.ease\n   */\n  function easeInOutQuint(t, b, c, d) {\n    t /= d / 2;\n    if (t < 1) {\n      return c / 2 * t * t * t * t * t + b;\n    }\n    return c / 2 * ((t -= 2) * t * t * t * t + 2) + b;\n  }\n\n  /**\n   * Sinusoidal easing in\n   * @memberOf fabric.util.ease\n   */\n  function easeInSine(t, b, c, d) {\n    return -c * Math.cos(t / d * (Math.PI / 2)) + c + b;\n  }\n\n  /**\n   * Sinusoidal easing out\n   * @memberOf fabric.util.ease\n   */\n  function easeOutSine(t, b, c, d) {\n    return c * Math.sin(t / d * (Math.PI / 2)) + b;\n  }\n\n  /**\n   * Sinusoidal easing in and out\n   * @memberOf fabric.util.ease\n   */\n  function easeInOutSine(t, b, c, d) {\n    return -c / 2 * (Math.cos(Math.PI * t / d) - 1) + b;\n  }\n\n  /**\n   * Exponential easing in\n   * @memberOf fabric.util.ease\n   */\n  function easeInExpo(t, b, c, d) {\n    return (t === 0) ? b : c * Math.pow(2, 10 * (t / d - 1)) + b;\n  }\n\n  /**\n   * Exponential easing out\n   * @memberOf fabric.util.ease\n   */\n  function easeOutExpo(t, b, c, d) {\n    return (t === d) ? b + c : c * (-Math.pow(2, -10 * t / d) + 1) + b;\n  }\n\n  /**\n   * Exponential easing in and out\n   * @memberOf fabric.util.ease\n   */\n  function easeInOutExpo(t, b, c, d) {\n    if (t === 0) {\n      return b;\n    }\n    if (t === d) {\n      return b + c;\n    }\n    t /= d / 2;\n    if (t < 1) {\n      return c / 2 * Math.pow(2, 10 * (t - 1)) + b;\n    }\n    return c / 2 * (-Math.pow(2, -10 * --t) + 2) + b;\n  }\n\n  /**\n   * Circular easing in\n   * @memberOf fabric.util.ease\n   */\n  function easeInCirc(t, b, c, d) {\n    return -c * (Math.sqrt(1 - (t /= d) * t) - 1) + b;\n  }\n\n  /**\n   * Circular easing out\n   * @memberOf fabric.util.ease\n   */\n  function easeOutCirc(t, b, c, d) {\n    return c * Math.sqrt(1 - (t = t / d - 1) * t) + b;\n  }\n\n  /**\n   * Circular easing in and out\n   * @memberOf fabric.util.ease\n   */\n  function easeInOutCirc(t, b, c, d) {\n    t /= d / 2;\n    if (t < 1) {\n      return -c / 2 * (Math.sqrt(1 - t * t) - 1) + b;\n    }\n    return c / 2 * (Math.sqrt(1 - (t -= 2) * t) + 1) + b;\n  }\n\n  /**\n   * Elastic easing in\n   * @memberOf fabric.util.ease\n   */\n  function easeInElastic(t, b, c, d) {\n    var s = 1.70158, p = 0, a = c;\n    if (t === 0) {\n      return b;\n    }\n    t /= d;\n    if (t === 1) {\n      return b + c;\n    }\n    if (!p) {\n      p = d * 0.3;\n    }\n    var opts = normalize(a, c, p, s);\n    return -elastic(opts, t, d) + b;\n  }\n\n  /**\n   * Elastic easing out\n   * @memberOf fabric.util.ease\n   */\n  function easeOutElastic(t, b, c, d) {\n    var s = 1.70158, p = 0, a = c;\n    if (t === 0) {\n      return b;\n    }\n    t /= d;\n    if (t === 1) {\n      return b + c;\n    }\n    if (!p) {\n      p = d * 0.3;\n    }\n    var opts = normalize(a, c, p, s);\n    return opts.a * Math.pow(2, -10 * t) * Math.sin((t * d - opts.s) * (2 * Math.PI) / opts.p ) + opts.c + b;\n  }\n\n  /**\n   * Elastic easing in and out\n   * @memberOf fabric.util.ease\n   */\n  function easeInOutElastic(t, b, c, d) {\n    var s = 1.70158, p = 0, a = c;\n    if (t === 0) {\n      return b;\n    }\n    t /= d / 2;\n    if (t === 2) {\n      return b + c;\n    }\n    if (!p) {\n      p = d * (0.3 * 1.5);\n    }\n    var opts = normalize(a, c, p, s);\n    if (t < 1) {\n      return -0.5 * elastic(opts, t, d) + b;\n    }\n    return opts.a * Math.pow(2, -10 * (t -= 1)) *\n      Math.sin((t * d - opts.s) * (2 * Math.PI) / opts.p ) * 0.5 + opts.c + b;\n  }\n\n  /**\n   * Backwards easing in\n   * @memberOf fabric.util.ease\n   */\n  function easeInBack(t, b, c, d, s) {\n    if (s === undefined) {\n      s = 1.70158;\n    }\n    return c * (t /= d) * t * ((s + 1) * t - s) + b;\n  }\n\n  /**\n   * Backwards easing out\n   * @memberOf fabric.util.ease\n   */\n  function easeOutBack(t, b, c, d, s) {\n    if (s === undefined) {\n      s = 1.70158;\n    }\n    return c * ((t = t / d - 1) * t * ((s + 1) * t + s) + 1) + b;\n  }\n\n  /**\n   * Backwards easing in and out\n   * @memberOf fabric.util.ease\n   */\n  function easeInOutBack(t, b, c, d, s) {\n    if (s === undefined) {\n      s = 1.70158;\n    }\n    t /= d / 2;\n    if (t < 1) {\n      return c / 2 * (t * t * (((s *= (1.525)) + 1) * t - s)) + b;\n    }\n    return c / 2 * ((t -= 2) * t * (((s *= (1.525)) + 1) * t + s) + 2) + b;\n  }\n\n  /**\n   * Bouncing easing in\n   * @memberOf fabric.util.ease\n   */\n  function easeInBounce(t, b, c, d) {\n    return c - easeOutBounce (d - t, 0, c, d) + b;\n  }\n\n  /**\n   * Bouncing easing out\n   * @memberOf fabric.util.ease\n   */\n  function easeOutBounce(t, b, c, d) {\n    if ((t /= d) < (1 / 2.75)) {\n      return c * (7.5625 * t * t) + b;\n    }\n    else if (t < (2 / 2.75)) {\n      return c * (7.5625 * (t -= (1.5 / 2.75)) * t + 0.75) + b;\n    }\n    else if (t < (2.5 / 2.75)) {\n      return c * (7.5625 * (t -= (2.25 / 2.75)) * t + 0.9375) + b;\n    }\n    else {\n      return c * (7.5625 * (t -= (2.625 / 2.75)) * t + 0.984375) + b;\n    }\n  }\n\n  /**\n   * Bouncing easing in and out\n   * @memberOf fabric.util.ease\n   */\n  function easeInOutBounce(t, b, c, d) {\n    if (t < d / 2) {\n      return easeInBounce (t * 2, 0, c, d) * 0.5 + b;\n    }\n    return easeOutBounce(t * 2 - d, 0, c, d) * 0.5 + c * 0.5 + b;\n  }\n\n  /**\n   * Easing functions\n   * See <a href=\"http://gizma.com/easing/\">Easing Equations by Robert Penner</a>\n   * @namespace fabric.util.ease\n   */\n  fabric.util.ease = {\n\n    /**\n     * Quadratic easing in\n     * @memberOf fabric.util.ease\n     */\n    easeInQuad: function(t, b, c, d) {\n      return c * (t /= d) * t + b;\n    },\n\n    /**\n     * Quadratic easing out\n     * @memberOf fabric.util.ease\n     */\n    easeOutQuad: function(t, b, c, d) {\n      return -c * (t /= d) * (t - 2) + b;\n    },\n\n    /**\n     * Quadratic easing in and out\n     * @memberOf fabric.util.ease\n     */\n    easeInOutQuad: function(t, b, c, d) {\n      t /= (d / 2);\n      if (t < 1) {\n        return c / 2 * t * t + b;\n      }\n      return -c / 2 * ((--t) * (t - 2) - 1) + b;\n    },\n\n    /**\n     * Cubic easing in\n     * @memberOf fabric.util.ease\n     */\n    easeInCubic: function(t, b, c, d) {\n      return c * (t /= d) * t * t + b;\n    },\n\n    easeOutCubic: easeOutCubic,\n    easeInOutCubic: easeInOutCubic,\n    easeInQuart: easeInQuart,\n    easeOutQuart: easeOutQuart,\n    easeInOutQuart: easeInOutQuart,\n    easeInQuint: easeInQuint,\n    easeOutQuint: easeOutQuint,\n    easeInOutQuint: easeInOutQuint,\n    easeInSine: easeInSine,\n    easeOutSine: easeOutSine,\n    easeInOutSine: easeInOutSine,\n    easeInExpo: easeInExpo,\n    easeOutExpo: easeOutExpo,\n    easeInOutExpo: easeInOutExpo,\n    easeInCirc: easeInCirc,\n    easeOutCirc: easeOutCirc,\n    easeInOutCirc: easeInOutCirc,\n    easeInElastic: easeInElastic,\n    easeOutElastic: easeOutElastic,\n    easeInOutElastic: easeInOutElastic,\n    easeInBack: easeInBack,\n    easeOutBack: easeOutBack,\n    easeInOutBack: easeInOutBack,\n    easeInBounce: easeInBounce,\n    easeOutBounce: easeOutBounce,\n    easeInOutBounce: easeInOutBounce\n  };\n\n})();\n\n\n(function(global) {\n\n  'use strict';\n\n  /**\n   * @name fabric\n   * @namespace\n   */\n\n  var fabric = global.fabric || (global.fabric = { }),\n      extend = fabric.util.object.extend,\n      clone = fabric.util.object.clone,\n      toFixed = fabric.util.toFixed,\n      parseUnit = fabric.util.parseUnit,\n      multiplyTransformMatrices = fabric.util.multiplyTransformMatrices,\n\n      svgValidTagNames = ['path', 'circle', 'polygon', 'polyline', 'ellipse', 'rect', 'line',\n        'image', 'text'],\n      svgViewBoxElements = ['symbol', 'image', 'marker', 'pattern', 'view', 'svg'],\n      svgInvalidAncestors = ['pattern', 'defs', 'symbol', 'metadata', 'clipPath', 'mask', 'desc'],\n      svgValidParents = ['symbol', 'g', 'a', 'svg', 'clipPath', 'defs'],\n\n      attributesMap = {\n        cx:                   'left',\n        x:                    'left',\n        r:                    'radius',\n        cy:                   'top',\n        y:                    'top',\n        display:              'visible',\n        visibility:           'visible',\n        transform:            'transformMatrix',\n        'fill-opacity':       'fillOpacity',\n        'fill-rule':          'fillRule',\n        'font-family':        'fontFamily',\n        'font-size':          'fontSize',\n        'font-style':         'fontStyle',\n        'font-weight':        'fontWeight',\n        'letter-spacing':     'charSpacing',\n        'paint-order':        'paintFirst',\n        'stroke-dasharray':   'strokeDashArray',\n        'stroke-dashoffset':  'strokeDashOffset',\n        'stroke-linecap':     'strokeLineCap',\n        'stroke-linejoin':    'strokeLineJoin',\n        'stroke-miterlimit':  'strokeMiterLimit',\n        'stroke-opacity':     'strokeOpacity',\n        'stroke-width':       'strokeWidth',\n        'text-decoration':    'textDecoration',\n        'text-anchor':        'textAnchor',\n        opacity:              'opacity',\n        'clip-path':          'clipPath',\n        'clip-rule':          'clipRule',\n        'vector-effect':      'strokeUniform',\n        'image-rendering':    'imageSmoothing',\n      },\n\n      colorAttributes = {\n        stroke: 'strokeOpacity',\n        fill:   'fillOpacity'\n      },\n\n      fSize = 'font-size', cPath = 'clip-path';\n\n  fabric.svgValidTagNamesRegEx = getSvgRegex(svgValidTagNames);\n  fabric.svgViewBoxElementsRegEx = getSvgRegex(svgViewBoxElements);\n  fabric.svgInvalidAncestorsRegEx = getSvgRegex(svgInvalidAncestors);\n  fabric.svgValidParentsRegEx = getSvgRegex(svgValidParents);\n\n  fabric.cssRules = { };\n  fabric.gradientDefs = { };\n  fabric.clipPaths = { };\n\n  function normalizeAttr(attr) {\n    // transform attribute names\n    if (attr in attributesMap) {\n      return attributesMap[attr];\n    }\n    return attr;\n  }\n\n  function normalizeValue(attr, value, parentAttributes, fontSize) {\n    var isArray = Array.isArray(value), parsed;\n\n    if ((attr === 'fill' || attr === 'stroke') && value === 'none') {\n      value = '';\n    }\n    else if (attr === 'strokeUniform') {\n      return (value === 'non-scaling-stroke');\n    }\n    else if (attr === 'strokeDashArray') {\n      if (value === 'none') {\n        value = null;\n      }\n      else {\n        value = value.replace(/,/g, ' ').split(/\\s+/).map(parseFloat);\n      }\n    }\n    else if (attr === 'transformMatrix') {\n      if (parentAttributes && parentAttributes.transformMatrix) {\n        value = multiplyTransformMatrices(\n          parentAttributes.transformMatrix, fabric.parseTransformAttribute(value));\n      }\n      else {\n        value = fabric.parseTransformAttribute(value);\n      }\n    }\n    else if (attr === 'visible') {\n      value = value !== 'none' && value !== 'hidden';\n      // display=none on parent element always takes precedence over child element\n      if (parentAttributes && parentAttributes.visible === false) {\n        value = false;\n      }\n    }\n    else if (attr === 'opacity') {\n      value = parseFloat(value);\n      if (parentAttributes && typeof parentAttributes.opacity !== 'undefined') {\n        value *= parentAttributes.opacity;\n      }\n    }\n    else if (attr === 'textAnchor' /* text-anchor */) {\n      value = value === 'start' ? 'left' : value === 'end' ? 'right' : 'center';\n    }\n    else if (attr === 'charSpacing') {\n      // parseUnit returns px and we convert it to em\n      parsed = parseUnit(value, fontSize) / fontSize * 1000;\n    }\n    else if (attr === 'paintFirst') {\n      var fillIndex = value.indexOf('fill');\n      var strokeIndex = value.indexOf('stroke');\n      var value = 'fill';\n      if (fillIndex > -1 && strokeIndex > -1 && strokeIndex < fillIndex) {\n        value = 'stroke';\n      }\n      else if (fillIndex === -1 && strokeIndex > -1) {\n        value = 'stroke';\n      }\n    }\n    else if (attr === 'href' || attr === 'xlink:href' || attr === 'font') {\n      return value;\n    }\n    else if (attr === 'imageSmoothing') {\n      return (value === 'optimizeQuality');\n    }\n    else {\n      parsed = isArray ? value.map(parseUnit) : parseUnit(value, fontSize);\n    }\n\n    return (!isArray && isNaN(parsed) ? value : parsed);\n  }\n\n  /**\n    * @private\n    */\n  function getSvgRegex(arr) {\n    return new RegExp('^(' + arr.join('|') + ')\\\\b', 'i');\n  }\n\n  /**\n   * @private\n   * @param {Object} attributes Array of attributes to parse\n   */\n  function _setStrokeFillOpacity(attributes) {\n    for (var attr in colorAttributes) {\n\n      if (typeof attributes[colorAttributes[attr]] === 'undefined' || attributes[attr] === '') {\n        continue;\n      }\n\n      if (typeof attributes[attr] === 'undefined') {\n        if (!fabric.Object.prototype[attr]) {\n          continue;\n        }\n        attributes[attr] = fabric.Object.prototype[attr];\n      }\n\n      if (attributes[attr].indexOf('url(') === 0) {\n        continue;\n      }\n\n      var color = new fabric.Color(attributes[attr]);\n      attributes[attr] = color.setAlpha(toFixed(color.getAlpha() * attributes[colorAttributes[attr]], 2)).toRgba();\n    }\n    return attributes;\n  }\n\n  /**\n   * @private\n   */\n  function _getMultipleNodes(doc, nodeNames) {\n    var nodeName, nodeArray = [], nodeList, i, len;\n    for (i = 0, len = nodeNames.length; i < len; i++) {\n      nodeName = nodeNames[i];\n      nodeList = doc.getElementsByTagName(nodeName);\n      nodeArray = nodeArray.concat(Array.prototype.slice.call(nodeList));\n    }\n    return nodeArray;\n  }\n\n  /**\n   * Parses \"transform\" attribute, returning an array of values\n   * @static\n   * @function\n   * @memberOf fabric\n   * @param {String} attributeValue String containing attribute value\n   * @return {Array} Array of 6 elements representing transformation matrix\n   */\n  fabric.parseTransformAttribute = (function() {\n    function rotateMatrix(matrix, args) {\n      var cos = fabric.util.cos(args[0]), sin = fabric.util.sin(args[0]),\n          x = 0, y = 0;\n      if (args.length === 3) {\n        x = args[1];\n        y = args[2];\n      }\n\n      matrix[0] = cos;\n      matrix[1] = sin;\n      matrix[2] = -sin;\n      matrix[3] = cos;\n      matrix[4] = x - (cos * x - sin * y);\n      matrix[5] = y - (sin * x + cos * y);\n    }\n\n    function scaleMatrix(matrix, args) {\n      var multiplierX = args[0],\n          multiplierY = (args.length === 2) ? args[1] : args[0];\n\n      matrix[0] = multiplierX;\n      matrix[3] = multiplierY;\n    }\n\n    function skewMatrix(matrix, args, pos) {\n      matrix[pos] = Math.tan(fabric.util.degreesToRadians(args[0]));\n    }\n\n    function translateMatrix(matrix, args) {\n      matrix[4] = args[0];\n      if (args.length === 2) {\n        matrix[5] = args[1];\n      }\n    }\n\n    // identity matrix\n    var iMatrix = fabric.iMatrix,\n\n        // == begin transform regexp\n        number = fabric.reNum,\n\n        commaWsp = fabric.commaWsp,\n\n        skewX = '(?:(skewX)\\\\s*\\\\(\\\\s*(' + number + ')\\\\s*\\\\))',\n\n        skewY = '(?:(skewY)\\\\s*\\\\(\\\\s*(' + number + ')\\\\s*\\\\))',\n\n        rotate = '(?:(rotate)\\\\s*\\\\(\\\\s*(' + number + ')(?:' +\n                    commaWsp + '(' + number + ')' +\n                    commaWsp + '(' + number + '))?\\\\s*\\\\))',\n\n        scale = '(?:(scale)\\\\s*\\\\(\\\\s*(' + number + ')(?:' +\n                    commaWsp + '(' + number + '))?\\\\s*\\\\))',\n\n        translate = '(?:(translate)\\\\s*\\\\(\\\\s*(' + number + ')(?:' +\n                    commaWsp + '(' + number + '))?\\\\s*\\\\))',\n\n        matrix = '(?:(matrix)\\\\s*\\\\(\\\\s*' +\n                  '(' + number + ')' + commaWsp +\n                  '(' + number + ')' + commaWsp +\n                  '(' + number + ')' + commaWsp +\n                  '(' + number + ')' + commaWsp +\n                  '(' + number + ')' + commaWsp +\n                  '(' + number + ')' +\n                  '\\\\s*\\\\))',\n\n        transform = '(?:' +\n                    matrix + '|' +\n                    translate + '|' +\n                    scale + '|' +\n                    rotate + '|' +\n                    skewX + '|' +\n                    skewY +\n                    ')',\n\n        transforms = '(?:' + transform + '(?:' + commaWsp + '*' + transform + ')*' + ')',\n\n        transformList = '^\\\\s*(?:' + transforms + '?)\\\\s*$',\n\n        // http://www.w3.org/TR/SVG/coords.html#TransformAttribute\n        reTransformList = new RegExp(transformList),\n        // == end transform regexp\n\n        reTransform = new RegExp(transform, 'g');\n\n    return function(attributeValue) {\n\n      // start with identity matrix\n      var matrix = iMatrix.concat(),\n          matrices = [];\n\n      // return if no argument was given or\n      // an argument does not match transform attribute regexp\n      if (!attributeValue || (attributeValue && !reTransformList.test(attributeValue))) {\n        return matrix;\n      }\n\n      attributeValue.replace(reTransform, function(match) {\n\n        var m = new RegExp(transform).exec(match).filter(function (match) {\n              // match !== '' && match != null\n              return (!!match);\n            }),\n            operation = m[1],\n            args = m.slice(2).map(parseFloat);\n\n        switch (operation) {\n          case 'translate':\n            translateMatrix(matrix, args);\n            break;\n          case 'rotate':\n            args[0] = fabric.util.degreesToRadians(args[0]);\n            rotateMatrix(matrix, args);\n            break;\n          case 'scale':\n            scaleMatrix(matrix, args);\n            break;\n          case 'skewX':\n            skewMatrix(matrix, args, 2);\n            break;\n          case 'skewY':\n            skewMatrix(matrix, args, 1);\n            break;\n          case 'matrix':\n            matrix = args;\n            break;\n        }\n\n        // snapshot current matrix into matrices array\n        matrices.push(matrix.concat());\n        // reset\n        matrix = iMatrix.concat();\n      });\n\n      var combinedMatrix = matrices[0];\n      while (matrices.length > 1) {\n        matrices.shift();\n        combinedMatrix = fabric.util.multiplyTransformMatrices(combinedMatrix, matrices[0]);\n      }\n      return combinedMatrix;\n    };\n  })();\n\n  /**\n   * @private\n   */\n  function parseStyleString(style, oStyle) {\n    var attr, value;\n    style.replace(/;\\s*$/, '').split(';').forEach(function (chunk) {\n      var pair = chunk.split(':');\n\n      attr = pair[0].trim().toLowerCase();\n      value =  pair[1].trim();\n\n      oStyle[attr] = value;\n    });\n  }\n\n  /**\n   * @private\n   */\n  function parseStyleObject(style, oStyle) {\n    var attr, value;\n    for (var prop in style) {\n      if (typeof style[prop] === 'undefined') {\n        continue;\n      }\n\n      attr = prop.toLowerCase();\n      value = style[prop];\n\n      oStyle[attr] = value;\n    }\n  }\n\n  /**\n   * @private\n   */\n  function getGlobalStylesForElement(element, svgUid) {\n    var styles = { };\n    for (var rule in fabric.cssRules[svgUid]) {\n      if (elementMatchesRule(element, rule.split(' '))) {\n        for (var property in fabric.cssRules[svgUid][rule]) {\n          styles[property] = fabric.cssRules[svgUid][rule][property];\n        }\n      }\n    }\n    return styles;\n  }\n\n  /**\n   * @private\n   */\n  function elementMatchesRule(element, selectors) {\n    var firstMatching, parentMatching = true;\n    //start from rightmost selector.\n    firstMatching = selectorMatches(element, selectors.pop());\n    if (firstMatching && selectors.length) {\n      parentMatching = doesSomeParentMatch(element, selectors);\n    }\n    return firstMatching && parentMatching && (selectors.length === 0);\n  }\n\n  function doesSomeParentMatch(element, selectors) {\n    var selector, parentMatching = true;\n    while (element.parentNode && element.parentNode.nodeType === 1 && selectors.length) {\n      if (parentMatching) {\n        selector = selectors.pop();\n      }\n      element = element.parentNode;\n      parentMatching = selectorMatches(element, selector);\n    }\n    return selectors.length === 0;\n  }\n\n  /**\n   * @private\n   */\n  function selectorMatches(element, selector) {\n    var nodeName = element.nodeName,\n        classNames = element.getAttribute('class'),\n        id = element.getAttribute('id'), matcher, i;\n    // i check if a selector matches slicing away part from it.\n    // if i get empty string i should match\n    matcher = new RegExp('^' + nodeName, 'i');\n    selector = selector.replace(matcher, '');\n    if (id && selector.length) {\n      matcher = new RegExp('#' + id + '(?![a-zA-Z\\\\-]+)', 'i');\n      selector = selector.replace(matcher, '');\n    }\n    if (classNames && selector.length) {\n      classNames = classNames.split(' ');\n      for (i = classNames.length; i--;) {\n        matcher = new RegExp('\\\\.' + classNames[i] + '(?![a-zA-Z\\\\-]+)', 'i');\n        selector = selector.replace(matcher, '');\n      }\n    }\n    return selector.length === 0;\n  }\n\n  /**\n   * @private\n   * to support IE8 missing getElementById on SVGdocument and on node xmlDOM\n   */\n  function elementById(doc, id) {\n    var el;\n    doc.getElementById && (el = doc.getElementById(id));\n    if (el) {\n      return el;\n    }\n    var node, i, len, nodelist = doc.getElementsByTagName('*');\n    for (i = 0, len = nodelist.length; i < len; i++) {\n      node = nodelist[i];\n      if (id === node.getAttribute('id')) {\n        return node;\n      }\n    }\n  }\n\n  /**\n   * @private\n   */\n  function parseUseDirectives(doc) {\n    var nodelist = _getMultipleNodes(doc, ['use', 'svg:use']), i = 0;\n    while (nodelist.length && i < nodelist.length) {\n      var el = nodelist[i],\n          xlinkAttribute = el.getAttribute('xlink:href') || el.getAttribute('href');\n\n      if (xlinkAttribute === null) {\n        return;\n      }\n\n      var xlink = xlinkAttribute.slice(1),\n          x = el.getAttribute('x') || 0,\n          y = el.getAttribute('y') || 0,\n          el2 = elementById(doc, xlink).cloneNode(true),\n          currentTrans = (el2.getAttribute('transform') || '') + ' translate(' + x + ', ' + y + ')',\n          parentNode,\n          oldLength = nodelist.length, attr,\n          j,\n          attrs,\n          len,\n          namespace = fabric.svgNS;\n\n      applyViewboxTransform(el2);\n      if (/^svg$/i.test(el2.nodeName)) {\n        var el3 = el2.ownerDocument.createElementNS(namespace, 'g');\n        for (j = 0, attrs = el2.attributes, len = attrs.length; j < len; j++) {\n          attr = attrs.item(j);\n          el3.setAttributeNS(namespace, attr.nodeName, attr.nodeValue);\n        }\n        // el2.firstChild != null\n        while (el2.firstChild) {\n          el3.appendChild(el2.firstChild);\n        }\n        el2 = el3;\n      }\n\n      for (j = 0, attrs = el.attributes, len = attrs.length; j < len; j++) {\n        attr = attrs.item(j);\n        if (attr.nodeName === 'x' || attr.nodeName === 'y' ||\n          attr.nodeName === 'xlink:href' || attr.nodeName === 'href') {\n          continue;\n        }\n\n        if (attr.nodeName === 'transform') {\n          currentTrans = attr.nodeValue + ' ' + currentTrans;\n        }\n        else {\n          el2.setAttribute(attr.nodeName, attr.nodeValue);\n        }\n      }\n\n      el2.setAttribute('transform', currentTrans);\n      el2.setAttribute('instantiated_by_use', '1');\n      el2.removeAttribute('id');\n      parentNode = el.parentNode;\n      parentNode.replaceChild(el2, el);\n      // some browsers do not shorten nodelist after replaceChild (IE8)\n      if (nodelist.length === oldLength) {\n        i++;\n      }\n    }\n  }\n\n  // http://www.w3.org/TR/SVG/coords.html#ViewBoxAttribute\n  // matches, e.g.: +14.56e-12, etc.\n  var reViewBoxAttrValue = new RegExp(\n    '^' +\n    '\\\\s*(' + fabric.reNum + '+)\\\\s*,?' +\n    '\\\\s*(' + fabric.reNum + '+)\\\\s*,?' +\n    '\\\\s*(' + fabric.reNum + '+)\\\\s*,?' +\n    '\\\\s*(' + fabric.reNum + '+)\\\\s*' +\n    '$'\n  );\n\n  /**\n   * Add a <g> element that envelop all child elements and makes the viewbox transformMatrix descend on all elements\n   */\n  function applyViewboxTransform(element) {\n    if (!fabric.svgViewBoxElementsRegEx.test(element.nodeName)) {\n      return {};\n    }\n    var viewBoxAttr = element.getAttribute('viewBox'),\n        scaleX = 1,\n        scaleY = 1,\n        minX = 0,\n        minY = 0,\n        viewBoxWidth, viewBoxHeight, matrix, el,\n        widthAttr = element.getAttribute('width'),\n        heightAttr = element.getAttribute('height'),\n        x = element.getAttribute('x') || 0,\n        y = element.getAttribute('y') || 0,\n        preserveAspectRatio = element.getAttribute('preserveAspectRatio') || '',\n        missingViewBox = (!viewBoxAttr || !(viewBoxAttr = viewBoxAttr.match(reViewBoxAttrValue))),\n        missingDimAttr = (!widthAttr || !heightAttr || widthAttr === '100%' || heightAttr === '100%'),\n        toBeParsed = missingViewBox && missingDimAttr,\n        parsedDim = { }, translateMatrix = '', widthDiff = 0, heightDiff = 0;\n\n    parsedDim.width = 0;\n    parsedDim.height = 0;\n    parsedDim.toBeParsed = toBeParsed;\n\n    if (missingViewBox) {\n      if (((x || y) && element.parentNode && element.parentNode.nodeName !== '#document')) {\n        translateMatrix = ' translate(' + parseUnit(x) + ' ' + parseUnit(y) + ') ';\n        matrix = (element.getAttribute('transform') || '') + translateMatrix;\n        element.setAttribute('transform', matrix);\n        element.removeAttribute('x');\n        element.removeAttribute('y');\n      }\n    }\n\n    if (toBeParsed) {\n      return parsedDim;\n    }\n\n    if (missingViewBox) {\n      parsedDim.width = parseUnit(widthAttr);\n      parsedDim.height = parseUnit(heightAttr);\n      // set a transform for elements that have x y and are inner(only) SVGs\n      return parsedDim;\n    }\n    minX = -parseFloat(viewBoxAttr[1]);\n    minY = -parseFloat(viewBoxAttr[2]);\n    viewBoxWidth = parseFloat(viewBoxAttr[3]);\n    viewBoxHeight = parseFloat(viewBoxAttr[4]);\n    parsedDim.minX = minX;\n    parsedDim.minY = minY;\n    parsedDim.viewBoxWidth = viewBoxWidth;\n    parsedDim.viewBoxHeight = viewBoxHeight;\n    if (!missingDimAttr) {\n      parsedDim.width = parseUnit(widthAttr);\n      parsedDim.height = parseUnit(heightAttr);\n      scaleX = parsedDim.width / viewBoxWidth;\n      scaleY = parsedDim.height / viewBoxHeight;\n    }\n    else {\n      parsedDim.width = viewBoxWidth;\n      parsedDim.height = viewBoxHeight;\n    }\n\n    // default is to preserve aspect ratio\n    preserveAspectRatio = fabric.util.parsePreserveAspectRatioAttribute(preserveAspectRatio);\n    if (preserveAspectRatio.alignX !== 'none') {\n      //translate all container for the effect of Mid, Min, Max\n      if (preserveAspectRatio.meetOrSlice === 'meet') {\n        scaleY = scaleX = (scaleX > scaleY ? scaleY : scaleX);\n        // calculate additional translation to move the viewbox\n      }\n      if (preserveAspectRatio.meetOrSlice === 'slice') {\n        scaleY = scaleX = (scaleX > scaleY ? scaleX : scaleY);\n        // calculate additional translation to move the viewbox\n      }\n      widthDiff = parsedDim.width - viewBoxWidth * scaleX;\n      heightDiff = parsedDim.height - viewBoxHeight * scaleX;\n      if (preserveAspectRatio.alignX === 'Mid') {\n        widthDiff /= 2;\n      }\n      if (preserveAspectRatio.alignY === 'Mid') {\n        heightDiff /= 2;\n      }\n      if (preserveAspectRatio.alignX === 'Min') {\n        widthDiff = 0;\n      }\n      if (preserveAspectRatio.alignY === 'Min') {\n        heightDiff = 0;\n      }\n    }\n\n    if (scaleX === 1 && scaleY === 1 && minX === 0 && minY === 0 && x === 0 && y === 0) {\n      return parsedDim;\n    }\n    if ((x || y) && element.parentNode.nodeName !== '#document') {\n      translateMatrix = ' translate(' + parseUnit(x) + ' ' + parseUnit(y) + ') ';\n    }\n\n    matrix = translateMatrix + ' matrix(' + scaleX +\n                  ' 0' +\n                  ' 0 ' +\n                  scaleY + ' ' +\n                  (minX * scaleX + widthDiff) + ' ' +\n                  (minY * scaleY + heightDiff) + ') ';\n    // seems unused.\n    // parsedDim.viewboxTransform = fabric.parseTransformAttribute(matrix);\n    if (element.nodeName === 'svg') {\n      el = element.ownerDocument.createElementNS(fabric.svgNS, 'g');\n      // element.firstChild != null\n      while (element.firstChild) {\n        el.appendChild(element.firstChild);\n      }\n      element.appendChild(el);\n    }\n    else {\n      el = element;\n      el.removeAttribute('x');\n      el.removeAttribute('y');\n      matrix = el.getAttribute('transform') + matrix;\n    }\n    el.setAttribute('transform', matrix);\n    return parsedDim;\n  }\n\n  function hasAncestorWithNodeName(element, nodeName) {\n    while (element && (element = element.parentNode)) {\n      if (element.nodeName && nodeName.test(element.nodeName.replace('svg:', ''))\n        && !element.getAttribute('instantiated_by_use')) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  /**\n   * Parses an SVG document, converts it to an array of corresponding fabric.* instances and passes them to a callback\n   * @static\n   * @function\n   * @memberOf fabric\n   * @param {SVGDocument} doc SVG document to parse\n   * @param {Function} callback Callback to call when parsing is finished;\n   * It's being passed an array of elements (parsed from a document).\n   * @param {Function} [reviver] Method for further parsing of SVG elements, called after each fabric object created.\n   * @param {Object} [parsingOptions] options for parsing document\n   * @param {String} [parsingOptions.crossOrigin] crossOrigin settings\n   */\n  fabric.parseSVGDocument = function(doc, callback, reviver, parsingOptions) {\n    if (!doc) {\n      return;\n    }\n\n    parseUseDirectives(doc);\n\n    var svgUid =  fabric.Object.__uid++, i, len,\n        options = applyViewboxTransform(doc),\n        descendants = fabric.util.toArray(doc.getElementsByTagName('*'));\n    options.crossOrigin = parsingOptions && parsingOptions.crossOrigin;\n    options.svgUid = svgUid;\n\n    if (descendants.length === 0 && fabric.isLikelyNode) {\n      // we're likely in node, where \"o3-xml\" library fails to gEBTN(\"*\")\n      // https://github.com/ajaxorg/node-o3-xml/issues/21\n      descendants = doc.selectNodes('//*[name(.)!=\"svg\"]');\n      var arr = [];\n      for (i = 0, len = descendants.length; i < len; i++) {\n        arr[i] = descendants[i];\n      }\n      descendants = arr;\n    }\n\n    var elements = descendants.filter(function(el) {\n      applyViewboxTransform(el);\n      return fabric.svgValidTagNamesRegEx.test(el.nodeName.replace('svg:', '')) &&\n            !hasAncestorWithNodeName(el, fabric.svgInvalidAncestorsRegEx); // http://www.w3.org/TR/SVG/struct.html#DefsElement\n    });\n    if (!elements || (elements && !elements.length)) {\n      callback && callback([], {});\n      return;\n    }\n    var clipPaths = { };\n    descendants.filter(function(el) {\n      return el.nodeName.replace('svg:', '') === 'clipPath';\n    }).forEach(function(el) {\n      var id = el.getAttribute('id');\n      clipPaths[id] = fabric.util.toArray(el.getElementsByTagName('*')).filter(function(el) {\n        return fabric.svgValidTagNamesRegEx.test(el.nodeName.replace('svg:', ''));\n      });\n    });\n    fabric.gradientDefs[svgUid] = fabric.getGradientDefs(doc);\n    fabric.cssRules[svgUid] = fabric.getCSSRules(doc);\n    fabric.clipPaths[svgUid] = clipPaths;\n    // Precedence of rules:   style > class > attribute\n    fabric.parseElements(elements, function(instances, elements) {\n      if (callback) {\n        callback(instances, options, elements, descendants);\n        delete fabric.gradientDefs[svgUid];\n        delete fabric.cssRules[svgUid];\n        delete fabric.clipPaths[svgUid];\n      }\n    }, clone(options), reviver, parsingOptions);\n  };\n\n  function recursivelyParseGradientsXlink(doc, gradient) {\n    var gradientsAttrs = ['gradientTransform', 'x1', 'x2', 'y1', 'y2', 'gradientUnits', 'cx', 'cy', 'r', 'fx', 'fy'],\n        xlinkAttr = 'xlink:href',\n        xLink = gradient.getAttribute(xlinkAttr).slice(1),\n        referencedGradient = elementById(doc, xLink);\n    if (referencedGradient && referencedGradient.getAttribute(xlinkAttr)) {\n      recursivelyParseGradientsXlink(doc, referencedGradient);\n    }\n    gradientsAttrs.forEach(function(attr) {\n      if (referencedGradient && !gradient.hasAttribute(attr) && referencedGradient.hasAttribute(attr)) {\n        gradient.setAttribute(attr, referencedGradient.getAttribute(attr));\n      }\n    });\n    if (!gradient.children.length) {\n      var referenceClone = referencedGradient.cloneNode(true);\n      while (referenceClone.firstChild) {\n        gradient.appendChild(referenceClone.firstChild);\n      }\n    }\n    gradient.removeAttribute(xlinkAttr);\n  }\n\n  var reFontDeclaration = new RegExp(\n    '(normal|italic)?\\\\s*(normal|small-caps)?\\\\s*' +\n    '(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\\\s*(' +\n      fabric.reNum +\n    '(?:px|cm|mm|em|pt|pc|in)*)(?:\\\\/(normal|' + fabric.reNum + '))?\\\\s+(.*)');\n\n  extend(fabric, {\n    /**\n     * Parses a short font declaration, building adding its properties to a style object\n     * @static\n     * @function\n     * @memberOf fabric\n     * @param {String} value font declaration\n     * @param {Object} oStyle definition\n     */\n    parseFontDeclaration: function(value, oStyle) {\n      var match = value.match(reFontDeclaration);\n\n      if (!match) {\n        return;\n      }\n      var fontStyle = match[1],\n          // font variant is not used\n          // fontVariant = match[2],\n          fontWeight = match[3],\n          fontSize = match[4],\n          lineHeight = match[5],\n          fontFamily = match[6];\n\n      if (fontStyle) {\n        oStyle.fontStyle = fontStyle;\n      }\n      if (fontWeight) {\n        oStyle.fontWeight = isNaN(parseFloat(fontWeight)) ? fontWeight : parseFloat(fontWeight);\n      }\n      if (fontSize) {\n        oStyle.fontSize = parseUnit(fontSize);\n      }\n      if (fontFamily) {\n        oStyle.fontFamily = fontFamily;\n      }\n      if (lineHeight) {\n        oStyle.lineHeight = lineHeight === 'normal' ? 1 : lineHeight;\n      }\n    },\n\n    /**\n     * Parses an SVG document, returning all of the gradient declarations found in it\n     * @static\n     * @function\n     * @memberOf fabric\n     * @param {SVGDocument} doc SVG document to parse\n     * @return {Object} Gradient definitions; key corresponds to element id, value -- to gradient definition element\n     */\n    getGradientDefs: function(doc) {\n      var tagArray = [\n            'linearGradient',\n            'radialGradient',\n            'svg:linearGradient',\n            'svg:radialGradient'],\n          elList = _getMultipleNodes(doc, tagArray),\n          el, j = 0, gradientDefs = { };\n      j = elList.length;\n      while (j--) {\n        el = elList[j];\n        if (el.getAttribute('xlink:href')) {\n          recursivelyParseGradientsXlink(doc, el);\n        }\n        gradientDefs[el.getAttribute('id')] = el;\n      }\n      return gradientDefs;\n    },\n\n    /**\n     * Returns an object of attributes' name/value, given element and an array of attribute names;\n     * Parses parent \"g\" nodes recursively upwards.\n     * @static\n     * @memberOf fabric\n     * @param {DOMElement} element Element to parse\n     * @param {Array} attributes Array of attributes to parse\n     * @return {Object} object containing parsed attributes' names/values\n     */\n    parseAttributes: function(element, attributes, svgUid) {\n\n      if (!element) {\n        return;\n      }\n\n      var value,\n          parentAttributes = { },\n          fontSize, parentFontSize;\n\n      if (typeof svgUid === 'undefined') {\n        svgUid = element.getAttribute('svgUid');\n      }\n      // if there's a parent container (`g` or `a` or `symbol` node), parse its attributes recursively upwards\n      if (element.parentNode && fabric.svgValidParentsRegEx.test(element.parentNode.nodeName)) {\n        parentAttributes = fabric.parseAttributes(element.parentNode, attributes, svgUid);\n      }\n\n      var ownAttributes = attributes.reduce(function(memo, attr) {\n        value = element.getAttribute(attr);\n        if (value) { // eslint-disable-line\n          memo[attr] = value;\n        }\n        return memo;\n      }, { });\n      // add values parsed from style, which take precedence over attributes\n      // (see: http://www.w3.org/TR/SVG/styling.html#UsingPresentationAttributes)\n      var cssAttrs = extend(\n        getGlobalStylesForElement(element, svgUid),\n        fabric.parseStyleAttribute(element)\n      );\n      ownAttributes = extend(\n        ownAttributes,\n        cssAttrs\n      );\n      if (cssAttrs[cPath]) {\n        element.setAttribute(cPath, cssAttrs[cPath]);\n      }\n      fontSize = parentFontSize = parentAttributes.fontSize || fabric.Text.DEFAULT_SVG_FONT_SIZE;\n      if (ownAttributes[fSize]) {\n        // looks like the minimum should be 9px when dealing with ems. this is what looks like in browsers.\n        ownAttributes[fSize] = fontSize = parseUnit(ownAttributes[fSize], parentFontSize);\n      }\n\n      var normalizedAttr, normalizedValue, normalizedStyle = {};\n      for (var attr in ownAttributes) {\n        normalizedAttr = normalizeAttr(attr);\n        normalizedValue = normalizeValue(normalizedAttr, ownAttributes[attr], parentAttributes, fontSize);\n        normalizedStyle[normalizedAttr] = normalizedValue;\n      }\n      if (normalizedStyle && normalizedStyle.font) {\n        fabric.parseFontDeclaration(normalizedStyle.font, normalizedStyle);\n      }\n      var mergedAttrs = extend(parentAttributes, normalizedStyle);\n      return fabric.svgValidParentsRegEx.test(element.nodeName) ? mergedAttrs : _setStrokeFillOpacity(mergedAttrs);\n    },\n\n    /**\n     * Transforms an array of svg elements to corresponding fabric.* instances\n     * @static\n     * @memberOf fabric\n     * @param {Array} elements Array of elements to parse\n     * @param {Function} callback Being passed an array of fabric instances (transformed from SVG elements)\n     * @param {Object} [options] Options object\n     * @param {Function} [reviver] Method for further parsing of SVG elements, called after each fabric object created.\n     */\n    parseElements: function(elements, callback, options, reviver, parsingOptions) {\n      new fabric.ElementsParser(elements, callback, options, reviver, parsingOptions).parse();\n    },\n\n    /**\n     * Parses \"style\" attribute, retuning an object with values\n     * @static\n     * @memberOf fabric\n     * @param {SVGElement} element Element to parse\n     * @return {Object} Objects with values parsed from style attribute of an element\n     */\n    parseStyleAttribute: function(element) {\n      var oStyle = { },\n          style = element.getAttribute('style');\n\n      if (!style) {\n        return oStyle;\n      }\n\n      if (typeof style === 'string') {\n        parseStyleString(style, oStyle);\n      }\n      else {\n        parseStyleObject(style, oStyle);\n      }\n\n      return oStyle;\n    },\n\n    /**\n     * Parses \"points\" attribute, returning an array of values\n     * @static\n     * @memberOf fabric\n     * @param {String} points points attribute string\n     * @return {Array} array of points\n     */\n    parsePointsAttribute: function(points) {\n\n      // points attribute is required and must not be empty\n      if (!points) {\n        return null;\n      }\n\n      // replace commas with whitespace and remove bookending whitespace\n      points = points.replace(/,/g, ' ').trim();\n\n      points = points.split(/\\s+/);\n      var parsedPoints = [], i, len;\n\n      for (i = 0, len = points.length; i < len; i += 2) {\n        parsedPoints.push({\n          x: parseFloat(points[i]),\n          y: parseFloat(points[i + 1])\n        });\n      }\n\n      // odd number of points is an error\n      // if (parsedPoints.length % 2 !== 0) {\n      //   return null;\n      // }\n\n      return parsedPoints;\n    },\n\n    /**\n     * Returns CSS rules for a given SVG document\n     * @static\n     * @function\n     * @memberOf fabric\n     * @param {SVGDocument} doc SVG document to parse\n     * @return {Object} CSS rules of this document\n     */\n    getCSSRules: function(doc) {\n      var styles = doc.getElementsByTagName('style'), i, len,\n          allRules = { }, rules;\n\n      // very crude parsing of style contents\n      for (i = 0, len = styles.length; i < len; i++) {\n        var styleContents = styles[i].textContent;\n\n        // remove comments\n        styleContents = styleContents.replace(/\\/\\*[\\s\\S]*?\\*\\//g, '');\n        if (styleContents.trim() === '') {\n          continue;\n        }\n        // recovers all the rule in this form `body { style code... }`\n        // rules = styleContents.match(/[^{]*\\{[\\s\\S]*?\\}/g);\n        rules = styleContents.split('}');\n        // remove empty rules.\n        rules = rules.filter(function(rule) { return rule.trim(); });\n        // at this point we have hopefully an array of rules `body { style code... `\n        // eslint-disable-next-line no-loop-func\n        rules.forEach(function(rule) {\n\n          var match = rule.split('{'),\n              ruleObj = { }, declaration = match[1].trim(),\n              propertyValuePairs = declaration.split(';').filter(function(pair) { return pair.trim(); });\n\n          for (i = 0, len = propertyValuePairs.length; i < len; i++) {\n            var pair = propertyValuePairs[i].split(':'),\n                property = pair[0].trim(),\n                value = pair[1].trim();\n            ruleObj[property] = value;\n          }\n          rule = match[0].trim();\n          rule.split(',').forEach(function(_rule) {\n            _rule = _rule.replace(/^svg/i, '').trim();\n            if (_rule === '') {\n              return;\n            }\n            if (allRules[_rule]) {\n              fabric.util.object.extend(allRules[_rule], ruleObj);\n            }\n            else {\n              allRules[_rule] = fabric.util.object.clone(ruleObj);\n            }\n          });\n        });\n      }\n      return allRules;\n    },\n\n    /**\n     * Takes url corresponding to an SVG document, and parses it into a set of fabric objects.\n     * Note that SVG is fetched via XMLHttpRequest, so it needs to conform to SOP (Same Origin Policy)\n     * @memberOf fabric\n     * @param {String} url\n     * @param {Function} callback\n     * @param {Function} [reviver] Method for further parsing of SVG elements, called after each fabric object created.\n     * @param {Object} [options] Object containing options for parsing\n     * @param {String} [options.crossOrigin] crossOrigin crossOrigin setting to use for external resources\n     */\n    loadSVGFromURL: function(url, callback, reviver, options) {\n\n      url = url.replace(/^\\n\\s*/, '').trim();\n      new fabric.util.request(url, {\n        method: 'get',\n        onComplete: onComplete\n      });\n\n      function onComplete(r) {\n\n        var xml = r.responseXML;\n        if (!xml || !xml.documentElement) {\n          callback && callback(null);\n          return false;\n        }\n\n        fabric.parseSVGDocument(xml.documentElement, function (results, _options, elements, allElements) {\n          callback && callback(results, _options, elements, allElements);\n        }, reviver, options);\n      }\n    },\n\n    /**\n     * Takes string corresponding to an SVG document, and parses it into a set of fabric objects\n     * @memberOf fabric\n     * @param {String} string\n     * @param {Function} callback\n     * @param {Function} [reviver] Method for further parsing of SVG elements, called after each fabric object created.\n     * @param {Object} [options] Object containing options for parsing\n     * @param {String} [options.crossOrigin] crossOrigin crossOrigin setting to use for external resources\n     */\n    loadSVGFromString: function(string, callback, reviver, options) {\n      var parser = new fabric.window.DOMParser(),\n          doc = parser.parseFromString(string.trim(), 'text/xml');\n      fabric.parseSVGDocument(doc.documentElement, function (results, _options, elements, allElements) {\n        callback(results, _options, elements, allElements);\n      }, reviver, options);\n    }\n  });\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\nfabric.ElementsParser = function(elements, callback, options, reviver, parsingOptions, doc) {\n  this.elements = elements;\n  this.callback = callback;\n  this.options = options;\n  this.reviver = reviver;\n  this.svgUid = (options && options.svgUid) || 0;\n  this.parsingOptions = parsingOptions;\n  this.regexUrl = /^url\\(['\"]?#([^'\"]+)['\"]?\\)/g;\n  this.doc = doc;\n};\n\n(function(proto) {\n  proto.parse = function() {\n    this.instances = new Array(this.elements.length);\n    this.numElements = this.elements.length;\n    this.createObjects();\n  };\n\n  proto.createObjects = function() {\n    var _this = this;\n    this.elements.forEach(function(element, i) {\n      element.setAttribute('svgUid', _this.svgUid);\n      _this.createObject(element, i);\n    });\n  };\n\n  proto.findTag = function(el) {\n    return fabric[fabric.util.string.capitalize(el.tagName.replace('svg:', ''))];\n  };\n\n  proto.createObject = function(el, index) {\n    var klass = this.findTag(el);\n    if (klass && klass.fromElement) {\n      try {\n        klass.fromElement(el, this.createCallback(index, el), this.options);\n      }\n      catch (err) {\n        fabric.log(err);\n      }\n    }\n    else {\n      this.checkIfDone();\n    }\n  };\n\n  proto.createCallback = function(index, el) {\n    var _this = this;\n    return function(obj) {\n      var _options;\n      _this.resolveGradient(obj, el, 'fill');\n      _this.resolveGradient(obj, el, 'stroke');\n      if (obj instanceof fabric.Image && obj._originalElement) {\n        _options = obj.parsePreserveAspectRatioAttribute(el);\n      }\n      obj._removeTransformMatrix(_options);\n      _this.resolveClipPath(obj, el);\n      _this.reviver && _this.reviver(el, obj);\n      _this.instances[index] = obj;\n      _this.checkIfDone();\n    };\n  };\n\n  proto.extractPropertyDefinition = function(obj, property, storage) {\n    var value = obj[property], regex = this.regexUrl;\n    if (!regex.test(value)) {\n      return;\n    }\n    regex.lastIndex = 0;\n    var id = regex.exec(value)[1];\n    regex.lastIndex = 0;\n    return fabric[storage][this.svgUid][id];\n  };\n\n  proto.resolveGradient = function(obj, el, property) {\n    var gradientDef = this.extractPropertyDefinition(obj, property, 'gradientDefs');\n    if (gradientDef) {\n      var opacityAttr = el.getAttribute(property + '-opacity');\n      var gradient = fabric.Gradient.fromElement(gradientDef, obj, opacityAttr, this.options);\n      obj.set(property, gradient);\n    }\n  };\n\n  proto.createClipPathCallback = function(obj, container) {\n    return function(_newObj) {\n      _newObj._removeTransformMatrix();\n      _newObj.fillRule = _newObj.clipRule;\n      container.push(_newObj);\n    };\n  };\n\n  proto.resolveClipPath = function(obj, usingElement) {\n    var clipPath = this.extractPropertyDefinition(obj, 'clipPath', 'clipPaths'),\n        element, klass, objTransformInv, container, gTransform, options;\n    if (clipPath) {\n      container = [];\n      objTransformInv = fabric.util.invertTransform(obj.calcTransformMatrix());\n      // move the clipPath tag as sibling to the real element that is using it\n      var clipPathTag = clipPath[0].parentNode;\n      var clipPathOwner = usingElement;\n      while (clipPathOwner.parentNode && clipPathOwner.getAttribute('clip-path') !== obj.clipPath) {\n        clipPathOwner = clipPathOwner.parentNode;\n      }\n      clipPathOwner.parentNode.appendChild(clipPathTag);\n      for (var i = 0; i < clipPath.length; i++) {\n        element = clipPath[i];\n        klass = this.findTag(element);\n        klass.fromElement(\n          element,\n          this.createClipPathCallback(obj, container),\n          this.options\n        );\n      }\n      if (container.length === 1) {\n        clipPath = container[0];\n      }\n      else {\n        clipPath = new fabric.Group(container);\n      }\n      gTransform = fabric.util.multiplyTransformMatrices(\n        objTransformInv,\n        clipPath.calcTransformMatrix()\n      );\n      if (clipPath.clipPath) {\n        this.resolveClipPath(clipPath, clipPathOwner);\n      }\n      var options = fabric.util.qrDecompose(gTransform);\n      clipPath.flipX = false;\n      clipPath.flipY = false;\n      clipPath.set('scaleX', options.scaleX);\n      clipPath.set('scaleY', options.scaleY);\n      clipPath.angle = options.angle;\n      clipPath.skewX = options.skewX;\n      clipPath.skewY = 0;\n      clipPath.setPositionByOrigin({ x: options.translateX, y: options.translateY }, 'center', 'center');\n      obj.clipPath = clipPath;\n    }\n    else {\n      // if clip-path does not resolve to any element, delete the property.\n      delete obj.clipPath;\n    }\n  };\n\n  proto.checkIfDone = function() {\n    if (--this.numElements === 0) {\n      this.instances = this.instances.filter(function(el) {\n        // eslint-disable-next-line no-eq-null, eqeqeq\n        return el != null;\n      });\n      this.callback(this.instances, this.elements);\n    }\n  };\n})(fabric.ElementsParser.prototype);\n\n\n(function(global) {\n\n  'use strict';\n\n  /* Adaptation of work of Kevin Lindsey (kevin@kevlindev.com) */\n\n  var fabric = global.fabric || (global.fabric = { });\n\n  if (fabric.Point) {\n    fabric.warn('fabric.Point is already defined');\n    return;\n  }\n\n  fabric.Point = Point;\n\n  /**\n   * Point class\n   * @class fabric.Point\n   * @memberOf fabric\n   * @constructor\n   * @param {Number} x\n   * @param {Number} y\n   * @return {fabric.Point} thisArg\n   */\n  function Point(x, y) {\n    this.x = x;\n    this.y = y;\n  }\n\n  Point.prototype = /** @lends fabric.Point.prototype */ {\n\n    type: 'point',\n\n    constructor: Point,\n\n    /**\n     * Adds another point to this one and returns another one\n     * @param {fabric.Point} that\n     * @return {fabric.Point} new Point instance with added values\n     */\n    add: function (that) {\n      return new Point(this.x + that.x, this.y + that.y);\n    },\n\n    /**\n     * Adds another point to this one\n     * @param {fabric.Point} that\n     * @return {fabric.Point} thisArg\n     * @chainable\n     */\n    addEquals: function (that) {\n      this.x += that.x;\n      this.y += that.y;\n      return this;\n    },\n\n    /**\n     * Adds value to this point and returns a new one\n     * @param {Number} scalar\n     * @return {fabric.Point} new Point with added value\n     */\n    scalarAdd: function (scalar) {\n      return new Point(this.x + scalar, this.y + scalar);\n    },\n\n    /**\n     * Adds value to this point\n     * @param {Number} scalar\n     * @return {fabric.Point} thisArg\n     * @chainable\n     */\n    scalarAddEquals: function (scalar) {\n      this.x += scalar;\n      this.y += scalar;\n      return this;\n    },\n\n    /**\n     * Subtracts another point from this point and returns a new one\n     * @param {fabric.Point} that\n     * @return {fabric.Point} new Point object with subtracted values\n     */\n    subtract: function (that) {\n      return new Point(this.x - that.x, this.y - that.y);\n    },\n\n    /**\n     * Subtracts another point from this point\n     * @param {fabric.Point} that\n     * @return {fabric.Point} thisArg\n     * @chainable\n     */\n    subtractEquals: function (that) {\n      this.x -= that.x;\n      this.y -= that.y;\n      return this;\n    },\n\n    /**\n     * Subtracts value from this point and returns a new one\n     * @param {Number} scalar\n     * @return {fabric.Point}\n     */\n    scalarSubtract: function (scalar) {\n      return new Point(this.x - scalar, this.y - scalar);\n    },\n\n    /**\n     * Subtracts value from this point\n     * @param {Number} scalar\n     * @return {fabric.Point} thisArg\n     * @chainable\n     */\n    scalarSubtractEquals: function (scalar) {\n      this.x -= scalar;\n      this.y -= scalar;\n      return this;\n    },\n\n    /**\n     * Multiplies this point by a value and returns a new one\n     * TODO: rename in scalarMultiply in 2.0\n     * @param {Number} scalar\n     * @return {fabric.Point}\n     */\n    multiply: function (scalar) {\n      return new Point(this.x * scalar, this.y * scalar);\n    },\n\n    /**\n     * Multiplies this point by a value\n     * TODO: rename in scalarMultiplyEquals in 2.0\n     * @param {Number} scalar\n     * @return {fabric.Point} thisArg\n     * @chainable\n     */\n    multiplyEquals: function (scalar) {\n      this.x *= scalar;\n      this.y *= scalar;\n      return this;\n    },\n\n    /**\n     * Divides this point by a value and returns a new one\n     * TODO: rename in scalarDivide in 2.0\n     * @param {Number} scalar\n     * @return {fabric.Point}\n     */\n    divide: function (scalar) {\n      return new Point(this.x / scalar, this.y / scalar);\n    },\n\n    /**\n     * Divides this point by a value\n     * TODO: rename in scalarDivideEquals in 2.0\n     * @param {Number} scalar\n     * @return {fabric.Point} thisArg\n     * @chainable\n     */\n    divideEquals: function (scalar) {\n      this.x /= scalar;\n      this.y /= scalar;\n      return this;\n    },\n\n    /**\n     * Returns true if this point is equal to another one\n     * @param {fabric.Point} that\n     * @return {Boolean}\n     */\n    eq: function (that) {\n      return (this.x === that.x && this.y === that.y);\n    },\n\n    /**\n     * Returns true if this point is less than another one\n     * @param {fabric.Point} that\n     * @return {Boolean}\n     */\n    lt: function (that) {\n      return (this.x < that.x && this.y < that.y);\n    },\n\n    /**\n     * Returns true if this point is less than or equal to another one\n     * @param {fabric.Point} that\n     * @return {Boolean}\n     */\n    lte: function (that) {\n      return (this.x <= that.x && this.y <= that.y);\n    },\n\n    /**\n\n     * Returns true if this point is greater another one\n     * @param {fabric.Point} that\n     * @return {Boolean}\n     */\n    gt: function (that) {\n      return (this.x > that.x && this.y > that.y);\n    },\n\n    /**\n     * Returns true if this point is greater than or equal to another one\n     * @param {fabric.Point} that\n     * @return {Boolean}\n     */\n    gte: function (that) {\n      return (this.x >= that.x && this.y >= that.y);\n    },\n\n    /**\n     * Returns new point which is the result of linear interpolation with this one and another one\n     * @param {fabric.Point} that\n     * @param {Number} t , position of interpolation, between 0 and 1 default 0.5\n     * @return {fabric.Point}\n     */\n    lerp: function (that, t) {\n      if (typeof t === 'undefined') {\n        t = 0.5;\n      }\n      t = Math.max(Math.min(1, t), 0);\n      return new Point(this.x + (that.x - this.x) * t, this.y + (that.y - this.y) * t);\n    },\n\n    /**\n     * Returns distance from this point and another one\n     * @param {fabric.Point} that\n     * @return {Number}\n     */\n    distanceFrom: function (that) {\n      var dx = this.x - that.x,\n          dy = this.y - that.y;\n      return Math.sqrt(dx * dx + dy * dy);\n    },\n\n    /**\n     * Returns the point between this point and another one\n     * @param {fabric.Point} that\n     * @return {fabric.Point}\n     */\n    midPointFrom: function (that) {\n      return this.lerp(that);\n    },\n\n    /**\n     * Returns a new point which is the min of this and another one\n     * @param {fabric.Point} that\n     * @return {fabric.Point}\n     */\n    min: function (that) {\n      return new Point(Math.min(this.x, that.x), Math.min(this.y, that.y));\n    },\n\n    /**\n     * Returns a new point which is the max of this and another one\n     * @param {fabric.Point} that\n     * @return {fabric.Point}\n     */\n    max: function (that) {\n      return new Point(Math.max(this.x, that.x), Math.max(this.y, that.y));\n    },\n\n    /**\n     * Returns string representation of this point\n     * @return {String}\n     */\n    toString: function () {\n      return this.x + ',' + this.y;\n    },\n\n    /**\n     * Sets x/y of this point\n     * @param {Number} x\n     * @param {Number} y\n     * @chainable\n     */\n    setXY: function (x, y) {\n      this.x = x;\n      this.y = y;\n      return this;\n    },\n\n    /**\n     * Sets x of this point\n     * @param {Number} x\n     * @chainable\n     */\n    setX: function (x) {\n      this.x = x;\n      return this;\n    },\n\n    /**\n     * Sets y of this point\n     * @param {Number} y\n     * @chainable\n     */\n    setY: function (y) {\n      this.y = y;\n      return this;\n    },\n\n    /**\n     * Sets x/y of this point from another point\n     * @param {fabric.Point} that\n     * @chainable\n     */\n    setFromPoint: function (that) {\n      this.x = that.x;\n      this.y = that.y;\n      return this;\n    },\n\n    /**\n     * Swaps x/y of this point and another point\n     * @param {fabric.Point} that\n     */\n    swap: function (that) {\n      var x = this.x,\n          y = this.y;\n      this.x = that.x;\n      this.y = that.y;\n      that.x = x;\n      that.y = y;\n    },\n\n    /**\n     * return a cloned instance of the point\n     * @return {fabric.Point}\n     */\n    clone: function () {\n      return new Point(this.x, this.y);\n    }\n  };\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  /* Adaptation of work of Kevin Lindsey (kevin@kevlindev.com) */\n  var fabric = global.fabric || (global.fabric = { });\n\n  if (fabric.Intersection) {\n    fabric.warn('fabric.Intersection is already defined');\n    return;\n  }\n\n  /**\n   * Intersection class\n   * @class fabric.Intersection\n   * @memberOf fabric\n   * @constructor\n   */\n  function Intersection(status) {\n    this.status = status;\n    this.points = [];\n  }\n\n  fabric.Intersection = Intersection;\n\n  fabric.Intersection.prototype = /** @lends fabric.Intersection.prototype */ {\n\n    constructor: Intersection,\n\n    /**\n     * Appends a point to intersection\n     * @param {fabric.Point} point\n     * @return {fabric.Intersection} thisArg\n     * @chainable\n     */\n    appendPoint: function (point) {\n      this.points.push(point);\n      return this;\n    },\n\n    /**\n     * Appends points to intersection\n     * @param {Array} points\n     * @return {fabric.Intersection} thisArg\n     * @chainable\n     */\n    appendPoints: function (points) {\n      this.points = this.points.concat(points);\n      return this;\n    }\n  };\n\n  /**\n   * Checks if one line intersects another\n   * TODO: rename in intersectSegmentSegment\n   * @static\n   * @param {fabric.Point} a1\n   * @param {fabric.Point} a2\n   * @param {fabric.Point} b1\n   * @param {fabric.Point} b2\n   * @return {fabric.Intersection}\n   */\n  fabric.Intersection.intersectLineLine = function (a1, a2, b1, b2) {\n    var result,\n        uaT = (b2.x - b1.x) * (a1.y - b1.y) - (b2.y - b1.y) * (a1.x - b1.x),\n        ubT = (a2.x - a1.x) * (a1.y - b1.y) - (a2.y - a1.y) * (a1.x - b1.x),\n        uB = (b2.y - b1.y) * (a2.x - a1.x) - (b2.x - b1.x) * (a2.y - a1.y);\n    if (uB !== 0) {\n      var ua = uaT / uB,\n          ub = ubT / uB;\n      if (0 <= ua && ua <= 1 && 0 <= ub && ub <= 1) {\n        result = new Intersection('Intersection');\n        result.appendPoint(new fabric.Point(a1.x + ua * (a2.x - a1.x), a1.y + ua * (a2.y - a1.y)));\n      }\n      else {\n        result = new Intersection();\n      }\n    }\n    else {\n      if (uaT === 0 || ubT === 0) {\n        result = new Intersection('Coincident');\n      }\n      else {\n        result = new Intersection('Parallel');\n      }\n    }\n    return result;\n  };\n\n  /**\n   * Checks if line intersects polygon\n   * TODO: rename in intersectSegmentPolygon\n   * fix detection of coincident\n   * @static\n   * @param {fabric.Point} a1\n   * @param {fabric.Point} a2\n   * @param {Array} points\n   * @return {fabric.Intersection}\n   */\n  fabric.Intersection.intersectLinePolygon = function(a1, a2, points) {\n    var result = new Intersection(),\n        length = points.length,\n        b1, b2, inter, i;\n\n    for (i = 0; i < length; i++) {\n      b1 = points[i];\n      b2 = points[(i + 1) % length];\n      inter = Intersection.intersectLineLine(a1, a2, b1, b2);\n\n      result.appendPoints(inter.points);\n    }\n    if (result.points.length > 0) {\n      result.status = 'Intersection';\n    }\n    return result;\n  };\n\n  /**\n   * Checks if polygon intersects another polygon\n   * @static\n   * @param {Array} points1\n   * @param {Array} points2\n   * @return {fabric.Intersection}\n   */\n  fabric.Intersection.intersectPolygonPolygon = function (points1, points2) {\n    var result = new Intersection(),\n        length = points1.length, i;\n\n    for (i = 0; i < length; i++) {\n      var a1 = points1[i],\n          a2 = points1[(i + 1) % length],\n          inter = Intersection.intersectLinePolygon(a1, a2, points2);\n\n      result.appendPoints(inter.points);\n    }\n    if (result.points.length > 0) {\n      result.status = 'Intersection';\n    }\n    return result;\n  };\n\n  /**\n   * Checks if polygon intersects rectangle\n   * @static\n   * @param {Array} points\n   * @param {fabric.Point} r1\n   * @param {fabric.Point} r2\n   * @return {fabric.Intersection}\n   */\n  fabric.Intersection.intersectPolygonRectangle = function (points, r1, r2) {\n    var min = r1.min(r2),\n        max = r1.max(r2),\n        topRight = new fabric.Point(max.x, min.y),\n        bottomLeft = new fabric.Point(min.x, max.y),\n        inter1 = Intersection.intersectLinePolygon(min, topRight, points),\n        inter2 = Intersection.intersectLinePolygon(topRight, max, points),\n        inter3 = Intersection.intersectLinePolygon(max, bottomLeft, points),\n        inter4 = Intersection.intersectLinePolygon(bottomLeft, min, points),\n        result = new Intersection();\n\n    result.appendPoints(inter1.points);\n    result.appendPoints(inter2.points);\n    result.appendPoints(inter3.points);\n    result.appendPoints(inter4.points);\n\n    if (result.points.length > 0) {\n      result.status = 'Intersection';\n    }\n    return result;\n  };\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric = global.fabric || (global.fabric = { });\n\n  if (fabric.Color) {\n    fabric.warn('fabric.Color is already defined.');\n    return;\n  }\n\n  /**\n   * Color class\n   * The purpose of {@link fabric.Color} is to abstract and encapsulate common color operations;\n   * {@link fabric.Color} is a constructor and creates instances of {@link fabric.Color} objects.\n   *\n   * @class fabric.Color\n   * @param {String} color optional in hex or rgb(a) or hsl format or from known color list\n   * @return {fabric.Color} thisArg\n   * @tutorial {@link http://fabricjs.com/fabric-intro-part-2/#colors}\n   */\n  function Color(color) {\n    if (!color) {\n      this.setSource([0, 0, 0, 1]);\n    }\n    else {\n      this._tryParsingColor(color);\n    }\n  }\n\n  fabric.Color = Color;\n\n  fabric.Color.prototype = /** @lends fabric.Color.prototype */ {\n\n    /**\n     * @private\n     * @param {String|Array} color Color value to parse\n     */\n    _tryParsingColor: function(color) {\n      var source;\n\n      if (color in Color.colorNameMap) {\n        color = Color.colorNameMap[color];\n      }\n\n      if (color === 'transparent') {\n        source = [255, 255, 255, 0];\n      }\n\n      if (!source) {\n        source = Color.sourceFromHex(color);\n      }\n      if (!source) {\n        source = Color.sourceFromRgb(color);\n      }\n      if (!source) {\n        source = Color.sourceFromHsl(color);\n      }\n      if (!source) {\n        //if color is not recognize let's make black as canvas does\n        source = [0, 0, 0, 1];\n      }\n      if (source) {\n        this.setSource(source);\n      }\n    },\n\n    /**\n     * Adapted from <a href=\"https://rawgithub.com/mjijackson/mjijackson.github.com/master/2008/02/rgb-to-hsl-and-rgb-to-hsv-color-model-conversion-algorithms-in-javascript.html\">https://github.com/mjijackson</a>\n     * @private\n     * @param {Number} r Red color value\n     * @param {Number} g Green color value\n     * @param {Number} b Blue color value\n     * @return {Array} Hsl color\n     */\n    _rgbToHsl: function(r, g, b) {\n      r /= 255; g /= 255; b /= 255;\n\n      var h, s, l,\n          max = fabric.util.array.max([r, g, b]),\n          min = fabric.util.array.min([r, g, b]);\n\n      l = (max + min) / 2;\n\n      if (max === min) {\n        h = s = 0; // achromatic\n      }\n      else {\n        var d = max - min;\n        s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n        switch (max) {\n          case r:\n            h = (g - b) / d + (g < b ? 6 : 0);\n            break;\n          case g:\n            h = (b - r) / d + 2;\n            break;\n          case b:\n            h = (r - g) / d + 4;\n            break;\n        }\n        h /= 6;\n      }\n\n      return [\n        Math.round(h * 360),\n        Math.round(s * 100),\n        Math.round(l * 100)\n      ];\n    },\n\n    /**\n     * Returns source of this color (where source is an array representation; ex: [200, 200, 100, 1])\n     * @return {Array}\n     */\n    getSource: function() {\n      return this._source;\n    },\n\n    /**\n     * Sets source of this color (where source is an array representation; ex: [200, 200, 100, 1])\n     * @param {Array} source\n     */\n    setSource: function(source) {\n      this._source = source;\n    },\n\n    /**\n     * Returns color representation in RGB format\n     * @return {String} ex: rgb(0-255,0-255,0-255)\n     */\n    toRgb: function() {\n      var source = this.getSource();\n      return 'rgb(' + source[0] + ',' + source[1] + ',' + source[2] + ')';\n    },\n\n    /**\n     * Returns color representation in RGBA format\n     * @return {String} ex: rgba(0-255,0-255,0-255,0-1)\n     */\n    toRgba: function() {\n      var source = this.getSource();\n      return 'rgba(' + source[0] + ',' + source[1] + ',' + source[2] + ',' + source[3] + ')';\n    },\n\n    /**\n     * Returns color representation in HSL format\n     * @return {String} ex: hsl(0-360,0%-100%,0%-100%)\n     */\n    toHsl: function() {\n      var source = this.getSource(),\n          hsl = this._rgbToHsl(source[0], source[1], source[2]);\n\n      return 'hsl(' + hsl[0] + ',' + hsl[1] + '%,' + hsl[2] + '%)';\n    },\n\n    /**\n     * Returns color representation in HSLA format\n     * @return {String} ex: hsla(0-360,0%-100%,0%-100%,0-1)\n     */\n    toHsla: function() {\n      var source = this.getSource(),\n          hsl = this._rgbToHsl(source[0], source[1], source[2]);\n\n      return 'hsla(' + hsl[0] + ',' + hsl[1] + '%,' + hsl[2] + '%,' + source[3] + ')';\n    },\n\n    /**\n     * Returns color representation in HEX format\n     * @return {String} ex: FF5555\n     */\n    toHex: function() {\n      var source = this.getSource(), r, g, b;\n\n      r = source[0].toString(16);\n      r = (r.length === 1) ? ('0' + r) : r;\n\n      g = source[1].toString(16);\n      g = (g.length === 1) ? ('0' + g) : g;\n\n      b = source[2].toString(16);\n      b = (b.length === 1) ? ('0' + b) : b;\n\n      return r.toUpperCase() + g.toUpperCase() + b.toUpperCase();\n    },\n\n    /**\n     * Returns color representation in HEXA format\n     * @return {String} ex: FF5555CC\n     */\n    toHexa: function() {\n      var source = this.getSource(), a;\n\n      a = Math.round(source[3] * 255);\n      a = a.toString(16);\n      a = (a.length === 1) ? ('0' + a) : a;\n\n      return this.toHex() + a.toUpperCase();\n    },\n\n    /**\n     * Gets value of alpha channel for this color\n     * @return {Number} 0-1\n     */\n    getAlpha: function() {\n      return this.getSource()[3];\n    },\n\n    /**\n     * Sets value of alpha channel for this color\n     * @param {Number} alpha Alpha value 0-1\n     * @return {fabric.Color} thisArg\n     */\n    setAlpha: function(alpha) {\n      var source = this.getSource();\n      source[3] = alpha;\n      this.setSource(source);\n      return this;\n    },\n\n    /**\n     * Transforms color to its grayscale representation\n     * @return {fabric.Color} thisArg\n     */\n    toGrayscale: function() {\n      var source = this.getSource(),\n          average = parseInt((source[0] * 0.3 + source[1] * 0.59 + source[2] * 0.11).toFixed(0), 10),\n          currentAlpha = source[3];\n      this.setSource([average, average, average, currentAlpha]);\n      return this;\n    },\n\n    /**\n     * Transforms color to its black and white representation\n     * @param {Number} threshold\n     * @return {fabric.Color} thisArg\n     */\n    toBlackWhite: function(threshold) {\n      var source = this.getSource(),\n          average = (source[0] * 0.3 + source[1] * 0.59 + source[2] * 0.11).toFixed(0),\n          currentAlpha = source[3];\n\n      threshold = threshold || 127;\n\n      average = (Number(average) < Number(threshold)) ? 0 : 255;\n      this.setSource([average, average, average, currentAlpha]);\n      return this;\n    },\n\n    /**\n     * Overlays color with another color\n     * @param {String|fabric.Color} otherColor\n     * @return {fabric.Color} thisArg\n     */\n    overlayWith: function(otherColor) {\n      if (!(otherColor instanceof Color)) {\n        otherColor = new Color(otherColor);\n      }\n\n      var result = [],\n          alpha = this.getAlpha(),\n          otherAlpha = 0.5,\n          source = this.getSource(),\n          otherSource = otherColor.getSource(), i;\n\n      for (i = 0; i < 3; i++) {\n        result.push(Math.round((source[i] * (1 - otherAlpha)) + (otherSource[i] * otherAlpha)));\n      }\n\n      result[3] = alpha;\n      this.setSource(result);\n      return this;\n    }\n  };\n\n  /**\n   * Regex matching color in RGB or RGBA formats (ex: rgb(0, 0, 0), rgba(255, 100, 10, 0.5), rgba( 255 , 100 , 10 , 0.5 ), rgb(1,1,1), rgba(100%, 60%, 10%, 0.5))\n   * @static\n   * @field\n   * @memberOf fabric.Color\n   */\n  // eslint-disable-next-line max-len\n  fabric.Color.reRGBa = /^rgba?\\(\\s*(\\d{1,3}(?:\\.\\d+)?\\%?)\\s*,\\s*(\\d{1,3}(?:\\.\\d+)?\\%?)\\s*,\\s*(\\d{1,3}(?:\\.\\d+)?\\%?)\\s*(?:\\s*,\\s*((?:\\d*\\.?\\d+)?)\\s*)?\\)$/i;\n\n  /**\n   * Regex matching color in HSL or HSLA formats (ex: hsl(200, 80%, 10%), hsla(300, 50%, 80%, 0.5), hsla( 300 , 50% , 80% , 0.5 ))\n   * @static\n   * @field\n   * @memberOf fabric.Color\n   */\n  fabric.Color.reHSLa = /^hsla?\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3}\\%)\\s*,\\s*(\\d{1,3}\\%)\\s*(?:\\s*,\\s*(\\d+(?:\\.\\d+)?)\\s*)?\\)$/i;\n\n  /**\n   * Regex matching color in HEX format (ex: #FF5544CC, #FF5555, 010155, aff)\n   * @static\n   * @field\n   * @memberOf fabric.Color\n   */\n  fabric.Color.reHex = /^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i;\n\n  /**\n   * Map of the 148 color names with HEX code\n   * @static\n   * @field\n   * @memberOf fabric.Color\n   * @see: https://www.w3.org/TR/css3-color/#svg-color\n   */\n  fabric.Color.colorNameMap = {\n    aliceblue:            '#F0F8FF',\n    antiquewhite:         '#FAEBD7',\n    aqua:                 '#00FFFF',\n    aquamarine:           '#7FFFD4',\n    azure:                '#F0FFFF',\n    beige:                '#F5F5DC',\n    bisque:               '#FFE4C4',\n    black:                '#000000',\n    blanchedalmond:       '#FFEBCD',\n    blue:                 '#0000FF',\n    blueviolet:           '#8A2BE2',\n    brown:                '#A52A2A',\n    burlywood:            '#DEB887',\n    cadetblue:            '#5F9EA0',\n    chartreuse:           '#7FFF00',\n    chocolate:            '#D2691E',\n    coral:                '#FF7F50',\n    cornflowerblue:       '#6495ED',\n    cornsilk:             '#FFF8DC',\n    crimson:              '#DC143C',\n    cyan:                 '#00FFFF',\n    darkblue:             '#00008B',\n    darkcyan:             '#008B8B',\n    darkgoldenrod:        '#B8860B',\n    darkgray:             '#A9A9A9',\n    darkgrey:             '#A9A9A9',\n    darkgreen:            '#006400',\n    darkkhaki:            '#BDB76B',\n    darkmagenta:          '#8B008B',\n    darkolivegreen:       '#556B2F',\n    darkorange:           '#FF8C00',\n    darkorchid:           '#9932CC',\n    darkred:              '#8B0000',\n    darksalmon:           '#E9967A',\n    darkseagreen:         '#8FBC8F',\n    darkslateblue:        '#483D8B',\n    darkslategray:        '#2F4F4F',\n    darkslategrey:        '#2F4F4F',\n    darkturquoise:        '#00CED1',\n    darkviolet:           '#9400D3',\n    deeppink:             '#FF1493',\n    deepskyblue:          '#00BFFF',\n    dimgray:              '#696969',\n    dimgrey:              '#696969',\n    dodgerblue:           '#1E90FF',\n    firebrick:            '#B22222',\n    floralwhite:          '#FFFAF0',\n    forestgreen:          '#228B22',\n    fuchsia:              '#FF00FF',\n    gainsboro:            '#DCDCDC',\n    ghostwhite:           '#F8F8FF',\n    gold:                 '#FFD700',\n    goldenrod:            '#DAA520',\n    gray:                 '#808080',\n    grey:                 '#808080',\n    green:                '#008000',\n    greenyellow:          '#ADFF2F',\n    honeydew:             '#F0FFF0',\n    hotpink:              '#FF69B4',\n    indianred:            '#CD5C5C',\n    indigo:               '#4B0082',\n    ivory:                '#FFFFF0',\n    khaki:                '#F0E68C',\n    lavender:             '#E6E6FA',\n    lavenderblush:        '#FFF0F5',\n    lawngreen:            '#7CFC00',\n    lemonchiffon:         '#FFFACD',\n    lightblue:            '#ADD8E6',\n    lightcoral:           '#F08080',\n    lightcyan:            '#E0FFFF',\n    lightgoldenrodyellow: '#FAFAD2',\n    lightgray:            '#D3D3D3',\n    lightgrey:            '#D3D3D3',\n    lightgreen:           '#90EE90',\n    lightpink:            '#FFB6C1',\n    lightsalmon:          '#FFA07A',\n    lightseagreen:        '#20B2AA',\n    lightskyblue:         '#87CEFA',\n    lightslategray:       '#778899',\n    lightslategrey:       '#778899',\n    lightsteelblue:       '#B0C4DE',\n    lightyellow:          '#FFFFE0',\n    lime:                 '#00FF00',\n    limegreen:            '#32CD32',\n    linen:                '#FAF0E6',\n    magenta:              '#FF00FF',\n    maroon:               '#800000',\n    mediumaquamarine:     '#66CDAA',\n    mediumblue:           '#0000CD',\n    mediumorchid:         '#BA55D3',\n    mediumpurple:         '#9370DB',\n    mediumseagreen:       '#3CB371',\n    mediumslateblue:      '#7B68EE',\n    mediumspringgreen:    '#00FA9A',\n    mediumturquoise:      '#48D1CC',\n    mediumvioletred:      '#C71585',\n    midnightblue:         '#191970',\n    mintcream:            '#F5FFFA',\n    mistyrose:            '#FFE4E1',\n    moccasin:             '#FFE4B5',\n    navajowhite:          '#FFDEAD',\n    navy:                 '#000080',\n    oldlace:              '#FDF5E6',\n    olive:                '#808000',\n    olivedrab:            '#6B8E23',\n    orange:               '#FFA500',\n    orangered:            '#FF4500',\n    orchid:               '#DA70D6',\n    palegoldenrod:        '#EEE8AA',\n    palegreen:            '#98FB98',\n    paleturquoise:        '#AFEEEE',\n    palevioletred:        '#DB7093',\n    papayawhip:           '#FFEFD5',\n    peachpuff:            '#FFDAB9',\n    peru:                 '#CD853F',\n    pink:                 '#FFC0CB',\n    plum:                 '#DDA0DD',\n    powderblue:           '#B0E0E6',\n    purple:               '#800080',\n    rebeccapurple:        '#663399',\n    red:                  '#FF0000',\n    rosybrown:            '#BC8F8F',\n    royalblue:            '#4169E1',\n    saddlebrown:          '#8B4513',\n    salmon:               '#FA8072',\n    sandybrown:           '#F4A460',\n    seagreen:             '#2E8B57',\n    seashell:             '#FFF5EE',\n    sienna:               '#A0522D',\n    silver:               '#C0C0C0',\n    skyblue:              '#87CEEB',\n    slateblue:            '#6A5ACD',\n    slategray:            '#708090',\n    slategrey:            '#708090',\n    snow:                 '#FFFAFA',\n    springgreen:          '#00FF7F',\n    steelblue:            '#4682B4',\n    tan:                  '#D2B48C',\n    teal:                 '#008080',\n    thistle:              '#D8BFD8',\n    tomato:               '#FF6347',\n    turquoise:            '#40E0D0',\n    violet:               '#EE82EE',\n    wheat:                '#F5DEB3',\n    white:                '#FFFFFF',\n    whitesmoke:           '#F5F5F5',\n    yellow:               '#FFFF00',\n    yellowgreen:          '#9ACD32'\n  };\n\n  /**\n   * @private\n   * @param {Number} p\n   * @param {Number} q\n   * @param {Number} t\n   * @return {Number}\n   */\n  function hue2rgb(p, q, t) {\n    if (t < 0) {\n      t += 1;\n    }\n    if (t > 1) {\n      t -= 1;\n    }\n    if (t < 1 / 6) {\n      return p + (q - p) * 6 * t;\n    }\n    if (t < 1 / 2) {\n      return q;\n    }\n    if (t < 2 / 3) {\n      return p + (q - p) * (2 / 3 - t) * 6;\n    }\n    return p;\n  }\n\n  /**\n   * Returns new color object, when given a color in RGB format\n   * @memberOf fabric.Color\n   * @param {String} color Color value ex: rgb(0-255,0-255,0-255)\n   * @return {fabric.Color}\n   */\n  fabric.Color.fromRgb = function(color) {\n    return Color.fromSource(Color.sourceFromRgb(color));\n  };\n\n  /**\n   * Returns array representation (ex: [100, 100, 200, 1]) of a color that's in RGB or RGBA format\n   * @memberOf fabric.Color\n   * @param {String} color Color value ex: rgb(0-255,0-255,0-255), rgb(0%-100%,0%-100%,0%-100%)\n   * @return {Array} source\n   */\n  fabric.Color.sourceFromRgb = function(color) {\n    var match = color.match(Color.reRGBa);\n    if (match) {\n      var r = parseInt(match[1], 10) / (/%$/.test(match[1]) ? 100 : 1) * (/%$/.test(match[1]) ? 255 : 1),\n          g = parseInt(match[2], 10) / (/%$/.test(match[2]) ? 100 : 1) * (/%$/.test(match[2]) ? 255 : 1),\n          b = parseInt(match[3], 10) / (/%$/.test(match[3]) ? 100 : 1) * (/%$/.test(match[3]) ? 255 : 1);\n\n      return [\n        parseInt(r, 10),\n        parseInt(g, 10),\n        parseInt(b, 10),\n        match[4] ? parseFloat(match[4]) : 1\n      ];\n    }\n  };\n\n  /**\n   * Returns new color object, when given a color in RGBA format\n   * @static\n   * @function\n   * @memberOf fabric.Color\n   * @param {String} color\n   * @return {fabric.Color}\n   */\n  fabric.Color.fromRgba = Color.fromRgb;\n\n  /**\n   * Returns new color object, when given a color in HSL format\n   * @param {String} color Color value ex: hsl(0-260,0%-100%,0%-100%)\n   * @memberOf fabric.Color\n   * @return {fabric.Color}\n   */\n  fabric.Color.fromHsl = function(color) {\n    return Color.fromSource(Color.sourceFromHsl(color));\n  };\n\n  /**\n   * Returns array representation (ex: [100, 100, 200, 1]) of a color that's in HSL or HSLA format.\n   * Adapted from <a href=\"https://rawgithub.com/mjijackson/mjijackson.github.com/master/2008/02/rgb-to-hsl-and-rgb-to-hsv-color-model-conversion-algorithms-in-javascript.html\">https://github.com/mjijackson</a>\n   * @memberOf fabric.Color\n   * @param {String} color Color value ex: hsl(0-360,0%-100%,0%-100%) or hsla(0-360,0%-100%,0%-100%, 0-1)\n   * @return {Array} source\n   * @see http://http://www.w3.org/TR/css3-color/#hsl-color\n   */\n  fabric.Color.sourceFromHsl = function(color) {\n    var match = color.match(Color.reHSLa);\n    if (!match) {\n      return;\n    }\n\n    var h = (((parseFloat(match[1]) % 360) + 360) % 360) / 360,\n        s = parseFloat(match[2]) / (/%$/.test(match[2]) ? 100 : 1),\n        l = parseFloat(match[3]) / (/%$/.test(match[3]) ? 100 : 1),\n        r, g, b;\n\n    if (s === 0) {\n      r = g = b = l;\n    }\n    else {\n      var q = l <= 0.5 ? l * (s + 1) : l + s - l * s,\n          p = l * 2 - q;\n\n      r = hue2rgb(p, q, h + 1 / 3);\n      g = hue2rgb(p, q, h);\n      b = hue2rgb(p, q, h - 1 / 3);\n    }\n\n    return [\n      Math.round(r * 255),\n      Math.round(g * 255),\n      Math.round(b * 255),\n      match[4] ? parseFloat(match[4]) : 1\n    ];\n  };\n\n  /**\n   * Returns new color object, when given a color in HSLA format\n   * @static\n   * @function\n   * @memberOf fabric.Color\n   * @param {String} color\n   * @return {fabric.Color}\n   */\n  fabric.Color.fromHsla = Color.fromHsl;\n\n  /**\n   * Returns new color object, when given a color in HEX format\n   * @static\n   * @memberOf fabric.Color\n   * @param {String} color Color value ex: FF5555\n   * @return {fabric.Color}\n   */\n  fabric.Color.fromHex = function(color) {\n    return Color.fromSource(Color.sourceFromHex(color));\n  };\n\n  /**\n   * Returns array representation (ex: [100, 100, 200, 1]) of a color that's in HEX format\n   * @static\n   * @memberOf fabric.Color\n   * @param {String} color ex: FF5555 or FF5544CC (RGBa)\n   * @return {Array} source\n   */\n  fabric.Color.sourceFromHex = function(color) {\n    if (color.match(Color.reHex)) {\n      var value = color.slice(color.indexOf('#') + 1),\n          isShortNotation = (value.length === 3 || value.length === 4),\n          isRGBa = (value.length === 8 || value.length === 4),\n          r = isShortNotation ? (value.charAt(0) + value.charAt(0)) : value.substring(0, 2),\n          g = isShortNotation ? (value.charAt(1) + value.charAt(1)) : value.substring(2, 4),\n          b = isShortNotation ? (value.charAt(2) + value.charAt(2)) : value.substring(4, 6),\n          a = isRGBa ? (isShortNotation ? (value.charAt(3) + value.charAt(3)) : value.substring(6, 8)) : 'FF';\n\n      return [\n        parseInt(r, 16),\n        parseInt(g, 16),\n        parseInt(b, 16),\n        parseFloat((parseInt(a, 16) / 255).toFixed(2))\n      ];\n    }\n  };\n\n  /**\n   * Returns new color object, when given color in array representation (ex: [200, 100, 100, 0.5])\n   * @static\n   * @memberOf fabric.Color\n   * @param {Array} source\n   * @return {fabric.Color}\n   */\n  fabric.Color.fromSource = function(source) {\n    var oColor = new Color();\n    oColor.setSource(source);\n    return oColor;\n  };\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric = global.fabric || (global.fabric = { }),\n      scaleMap = ['e', 'se', 's', 'sw', 'w', 'nw', 'n', 'ne', 'e'],\n      skewMap = ['ns', 'nesw', 'ew', 'nwse'],\n      controls = {},\n      LEFT = 'left', TOP = 'top', RIGHT = 'right', BOTTOM = 'bottom', CENTER = 'center',\n      opposite = {\n        top: BOTTOM,\n        bottom: TOP,\n        left: RIGHT,\n        right: LEFT,\n        center: CENTER,\n      }, radiansToDegrees = fabric.util.radiansToDegrees,\n      sign = (Math.sign || function(x) { return ((x > 0) - (x < 0)) || +x; });\n\n  /**\n   * Combine control position and object angle to find the control direction compared\n   * to the object center.\n   * @param {fabric.Object} fabricObject the fabric object for which we are rendering controls\n   * @param {fabric.Control} control the control class\n   * @return {Number} 0 - 7 a quadrant number\n   */\n  function findCornerQuadrant(fabricObject, control) {\n    var cornerAngle = fabricObject.angle + radiansToDegrees(Math.atan2(control.y, control.x)) + 360;\n    return Math.round((cornerAngle % 360) / 45);\n  }\n\n  function fireEvent(eventName, options) {\n    var target = options.transform.target,\n        canvas = target.canvas,\n        canvasOptions = fabric.util.object.clone(options);\n    canvasOptions.target = target;\n    canvas && canvas.fire('object:' + eventName, canvasOptions);\n    target.fire(eventName, options);\n  }\n\n  /**\n   * Inspect event and fabricObject properties to understand if the scaling action\n   * @param {Event} eventData from the user action\n   * @param {fabric.Object} fabricObject the fabric object about to scale\n   * @return {Boolean} true if scale is proportional\n   */\n  function scaleIsProportional(eventData, fabricObject) {\n    var canvas = fabricObject.canvas, uniScaleKey = canvas.uniScaleKey,\n        uniformIsToggled = eventData[uniScaleKey];\n    return (canvas.uniformScaling && !uniformIsToggled) ||\n    (!canvas.uniformScaling && uniformIsToggled);\n  }\n\n  /**\n   * Checks if transform is centered\n   * @param {Object} transform transform data\n   * @return {Boolean} true if transform is centered\n   */\n  function isTransformCentered(transform) {\n    return transform.originX === CENTER && transform.originY === CENTER;\n  }\n\n  /**\n   * Inspect fabricObject to understand if the current scaling action is allowed\n   * @param {fabric.Object} fabricObject the fabric object about to scale\n   * @param {String} by 'x' or 'y' or ''\n   * @param {Boolean} scaleProportionally true if we are trying to scale proportionally\n   * @return {Boolean} true if scaling is not allowed at current conditions\n   */\n  function scalingIsForbidden(fabricObject, by, scaleProportionally) {\n    var lockX = fabricObject.lockScalingX, lockY = fabricObject.lockScalingY;\n    if (lockX && lockY) {\n      return true;\n    }\n    if (!by && (lockX || lockY) && scaleProportionally) {\n      return true;\n    }\n    if (lockX && by === 'x') {\n      return true;\n    }\n    if (lockY && by === 'y') {\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * return the correct cursor style for the scale action\n   * @param {Event} eventData the javascript event that is causing the scale\n   * @param {fabric.Control} control the control that is interested in the action\n   * @param {fabric.Object} fabricObject the fabric object that is interested in the action\n   * @return {String} a valid css string for the cursor\n   */\n  function scaleCursorStyleHandler(eventData, control, fabricObject) {\n    var notAllowed = 'not-allowed',\n        scaleProportionally = scaleIsProportional(eventData, fabricObject),\n        by = '';\n    if (control.x !== 0 && control.y === 0) {\n      by = 'x';\n    }\n    else if (control.x === 0 && control.y !== 0) {\n      by = 'y';\n    }\n    if (scalingIsForbidden(fabricObject, by, scaleProportionally)) {\n      return notAllowed;\n    }\n    var n = findCornerQuadrant(fabricObject, control);\n    return scaleMap[n] + '-resize';\n  }\n\n  /**\n   * return the correct cursor style for the skew action\n   * @param {Event} eventData the javascript event that is causing the scale\n   * @param {fabric.Control} control the control that is interested in the action\n   * @param {fabric.Object} fabricObject the fabric object that is interested in the action\n   * @return {String} a valid css string for the cursor\n   */\n  function skewCursorStyleHandler(eventData, control, fabricObject) {\n    var notAllowed = 'not-allowed';\n    if (control.x !== 0 && fabricObject.lockSkewingY) {\n      return notAllowed;\n    }\n    if (control.y !== 0 && fabricObject.lockSkewingX) {\n      return notAllowed;\n    }\n    var n = findCornerQuadrant(fabricObject, control) % 4;\n    return skewMap[n] + '-resize';\n  }\n\n  /**\n   * Combine skew and scale style handlers to cover fabric standard use case\n   * @param {Event} eventData the javascript event that is causing the scale\n   * @param {fabric.Control} control the control that is interested in the action\n   * @param {fabric.Object} fabricObject the fabric object that is interested in the action\n   * @return {String} a valid css string for the cursor\n   */\n  function scaleSkewCursorStyleHandler(eventData, control, fabricObject) {\n    if (eventData[fabricObject.canvas.altActionKey]) {\n      return controls.skewCursorStyleHandler(eventData, control, fabricObject);\n    }\n    return controls.scaleCursorStyleHandler(eventData, control, fabricObject);\n  }\n\n  /**\n   * Inspect event, control and fabricObject to return the correct action name\n   * @param {Event} eventData the javascript event that is causing the scale\n   * @param {fabric.Control} control the control that is interested in the action\n   * @param {fabric.Object} fabricObject the fabric object that is interested in the action\n   * @return {String} an action name\n   */\n  function scaleOrSkewActionName(eventData, control, fabricObject) {\n    var isAlternative = eventData[fabricObject.canvas.altActionKey];\n    if (control.x === 0) {\n      // then is scaleY or skewX\n      return isAlternative ? 'skewX' : 'scaleY';\n    }\n    if (control.y === 0) {\n      // then is scaleY or skewX\n      return isAlternative ? 'skewY' : 'scaleX';\n    }\n  }\n\n  /**\n   * Find the correct style for the control that is used for rotation.\n   * this function is very simple and it just take care of not-allowed or standard cursor\n   * @param {Event} eventData the javascript event that is causing the scale\n   * @param {fabric.Control} control the control that is interested in the action\n   * @param {fabric.Object} fabricObject the fabric object that is interested in the action\n   * @return {String} a valid css string for the cursor\n   */\n  function rotationStyleHandler(eventData, control, fabricObject) {\n    if (fabricObject.lockRotation) {\n      return 'not-allowed';\n    }\n    return control.cursorStyle;\n  }\n\n  function commonEventInfo(eventData, transform, x, y) {\n    return {\n      e: eventData,\n      transform: transform,\n      pointer: {\n        x: x,\n        y: y,\n      }\n    };\n  }\n\n  /**\n   * Wrap an action handler with saving/restoring object position on the transform.\n   * this is the code that permits to objects to keep their position while transforming.\n   * @param {Function} actionHandler the function to wrap\n   * @return {Function} a function with an action handler signature\n   */\n  function wrapWithFixedAnchor(actionHandler) {\n    return function(eventData, transform, x, y) {\n      var target = transform.target, centerPoint = target.getCenterPoint(),\n          constraint = target.translateToOriginPoint(centerPoint, transform.originX, transform.originY),\n          actionPerformed = actionHandler(eventData, transform, x, y);\n      target.setPositionByOrigin(constraint, transform.originX, transform.originY);\n      return actionPerformed;\n    };\n  }\n\n  /**\n   * Wrap an action handler with firing an event if the action is performed\n   * @param {Function} actionHandler the function to wrap\n   * @return {Function} a function with an action handler signature\n   */\n  function wrapWithFireEvent(eventName, actionHandler) {\n    return function(eventData, transform, x, y) {\n      var actionPerformed = actionHandler(eventData, transform, x, y);\n      if (actionPerformed) {\n        fireEvent(eventName, commonEventInfo(eventData, transform, x, y));\n      }\n      return actionPerformed;\n    };\n  }\n\n  /**\n   * Transforms a point described by x and y in a distance from the top left corner of the object\n   * bounding box.\n   * @param {Object} transform\n   * @param {String} originX\n   * @param {String} originY\n   * @param {number} x\n   * @param {number} y\n   * @return {Fabric.Point} the normalized point\n   */\n  function getLocalPoint(transform, originX, originY, x, y) {\n    var target = transform.target,\n        control = target.controls[transform.corner],\n        zoom = target.canvas.getZoom(),\n        padding = target.padding / zoom,\n        localPoint = target.toLocalPoint(new fabric.Point(x, y), originX, originY);\n    if (localPoint.x >= padding) {\n      localPoint.x -= padding;\n    }\n    if (localPoint.x <= -padding) {\n      localPoint.x += padding;\n    }\n    if (localPoint.y >= padding) {\n      localPoint.y -= padding;\n    }\n    if (localPoint.y <= padding) {\n      localPoint.y += padding;\n    }\n    localPoint.x -= control.offsetX;\n    localPoint.y -= control.offsetY;\n    return localPoint;\n  }\n\n  /**\n   * Detect if the fabric object is flipped on one side.\n   * @param {fabric.Object} target\n   * @return {Boolean} true if one flip, but not two.\n   */\n  function targetHasOneFlip(target) {\n    return target.flipX !== target.flipY;\n  }\n\n  /**\n   * Utility function to compensate the scale factor when skew is applied on both axes\n   * @private\n   */\n  function compensateScaleForSkew(target, oppositeSkew, scaleToCompensate, axis, reference) {\n    if (target[oppositeSkew] !== 0) {\n      var newDim = target._getTransformedDimensions()[axis];\n      var newValue = reference / newDim * target[scaleToCompensate];\n      target.set(scaleToCompensate, newValue);\n    }\n  }\n\n  /**\n   * Action handler for skewing on the X axis\n   * @private\n   */\n  function skewObjectX(eventData, transform, x, y) {\n    var target = transform.target,\n        // find how big the object would be, if there was no skewX. takes in account scaling\n        dimNoSkew = target._getTransformedDimensions(0, target.skewY),\n        localPoint = getLocalPoint(transform, transform.originX, transform.originY, x, y),\n        // the mouse is in the center of the object, and we want it to stay there.\n        // so the object will grow twice as much as the mouse.\n        // this makes the skew growth to localPoint * 2 - dimNoSkew.\n        totalSkewSize = Math.abs(localPoint.x * 2) - dimNoSkew.x,\n        currentSkew = target.skewX, newSkew;\n    if (totalSkewSize < 2) {\n      // let's make it easy to go back to position 0.\n      newSkew = 0;\n    }\n    else {\n      newSkew = radiansToDegrees(\n        Math.atan2((totalSkewSize / target.scaleX), (dimNoSkew.y / target.scaleY))\n      );\n      // now we have to find the sign of the skew.\n      // it mostly depend on the origin of transformation.\n      if (transform.originX === LEFT && transform.originY === BOTTOM) {\n        newSkew = -newSkew;\n      }\n      if (transform.originX === RIGHT && transform.originY === TOP) {\n        newSkew = -newSkew;\n      }\n      if (targetHasOneFlip(target)) {\n        newSkew = -newSkew;\n      }\n    }\n    var hasSkewed = currentSkew !== newSkew;\n    if (hasSkewed) {\n      var dimBeforeSkewing = target._getTransformedDimensions().y;\n      target.set('skewX', newSkew);\n      compensateScaleForSkew(target, 'skewY', 'scaleY', 'y', dimBeforeSkewing);\n    }\n    return hasSkewed;\n  }\n\n  /**\n   * Action handler for skewing on the Y axis\n   * @private\n   */\n  function skewObjectY(eventData, transform, x, y) {\n    var target = transform.target,\n        // find how big the object would be, if there was no skewX. takes in account scaling\n        dimNoSkew = target._getTransformedDimensions(target.skewX, 0),\n        localPoint = getLocalPoint(transform, transform.originX, transform.originY, x, y),\n        // the mouse is in the center of the object, and we want it to stay there.\n        // so the object will grow twice as much as the mouse.\n        // this makes the skew growth to localPoint * 2 - dimNoSkew.\n        totalSkewSize = Math.abs(localPoint.y * 2) - dimNoSkew.y,\n        currentSkew = target.skewY, newSkew;\n    if (totalSkewSize < 2) {\n      // let's make it easy to go back to position 0.\n      newSkew = 0;\n    }\n    else {\n      newSkew = radiansToDegrees(\n        Math.atan2((totalSkewSize / target.scaleY), (dimNoSkew.x / target.scaleX))\n      );\n      // now we have to find the sign of the skew.\n      // it mostly depend on the origin of transformation.\n      if (transform.originX === LEFT && transform.originY === BOTTOM) {\n        newSkew = -newSkew;\n      }\n      if (transform.originX === RIGHT && transform.originY === TOP) {\n        newSkew = -newSkew;\n      }\n      if (targetHasOneFlip(target)) {\n        newSkew = -newSkew;\n      }\n    }\n    var hasSkewed = currentSkew !== newSkew;\n    if (hasSkewed) {\n      var dimBeforeSkewing = target._getTransformedDimensions().x;\n      target.set('skewY', newSkew);\n      compensateScaleForSkew(target, 'skewX', 'scaleX', 'x', dimBeforeSkewing);\n    }\n    return hasSkewed;\n  }\n\n  /**\n   * Wrapped Action handler for skewing on the Y axis, takes care of the\n   * skew direction and determine the correct transform origin for the anchor point\n   * @param {Event} eventData javascript event that is doing the transform\n   * @param {Object} transform javascript object containing a series of information around the current transform\n   * @param {number} x current mouse x position, canvas normalized\n   * @param {number} y current mouse y position, canvas normalized\n   * @return {Boolean} true if some change happened\n   */\n  function skewHandlerX(eventData, transform, x, y) {\n    // step1 figure out and change transform origin.\n    // if skewX > 0 and originY bottom we anchor on right\n    // if skewX > 0 and originY top we anchor on left\n    // if skewX < 0 and originY bottom we anchor on left\n    // if skewX < 0 and originY top we anchor on right\n    // if skewX is 0, we look for mouse position to understand where are we going.\n    var target = transform.target, currentSkew = target.skewX, originX, originY = transform.originY;\n    if (target.lockSkewingX) {\n      return false;\n    }\n    if (currentSkew === 0) {\n      var localPointFromCenter = getLocalPoint(transform, CENTER, CENTER, x, y);\n      if (localPointFromCenter.x > 0) {\n        // we are pulling right, anchor left;\n        originX = LEFT;\n      }\n      else {\n        // we are pulling right, anchor right\n        originX = RIGHT;\n      }\n    }\n    else {\n      if (currentSkew > 0) {\n        originX = originY === TOP ? LEFT : RIGHT;\n      }\n      if (currentSkew < 0) {\n        originX = originY === TOP ? RIGHT : LEFT;\n      }\n      // is the object flipped on one side only? swap the origin.\n      if (targetHasOneFlip(target)) {\n        originX = originX === LEFT ? RIGHT : LEFT;\n      }\n    }\n\n    // once we have the origin, we find the anchor point\n    transform.originX = originX;\n    var finalHandler = wrapWithFireEvent('skewing', wrapWithFixedAnchor(skewObjectX));\n    return finalHandler(eventData, transform, x, y);\n  }\n\n  /**\n   * Wrapped Action handler for skewing on the Y axis, takes care of the\n   * skew direction and determine the correct transform origin for the anchor point\n   * @param {Event} eventData javascript event that is doing the transform\n   * @param {Object} transform javascript object containing a series of information around the current transform\n   * @param {number} x current mouse x position, canvas normalized\n   * @param {number} y current mouse y position, canvas normalized\n   * @return {Boolean} true if some change happened\n   */\n  function skewHandlerY(eventData, transform, x, y) {\n    // step1 figure out and change transform origin.\n    // if skewY > 0 and originX left we anchor on top\n    // if skewY > 0 and originX right we anchor on bottom\n    // if skewY < 0 and originX left we anchor on bottom\n    // if skewY < 0 and originX right we anchor on top\n    // if skewY is 0, we look for mouse position to understand where are we going.\n    var target = transform.target, currentSkew = target.skewY, originY, originX = transform.originX;\n    if (target.lockSkewingY) {\n      return false;\n    }\n    if (currentSkew === 0) {\n      var localPointFromCenter = getLocalPoint(transform, CENTER, CENTER, x, y);\n      if (localPointFromCenter.y > 0) {\n        // we are pulling down, anchor up;\n        originY = TOP;\n      }\n      else {\n        // we are pulling up, anchor down\n        originY = BOTTOM;\n      }\n    }\n    else {\n      if (currentSkew > 0) {\n        originY = originX === LEFT ? TOP : BOTTOM;\n      }\n      if (currentSkew < 0) {\n        originY = originX === LEFT ? BOTTOM : TOP;\n      }\n      // is the object flipped on one side only? swap the origin.\n      if (targetHasOneFlip(target)) {\n        originY = originY === TOP ? BOTTOM : TOP;\n      }\n    }\n\n    // once we have the origin, we find the anchor point\n    transform.originY = originY;\n    var finalHandler = wrapWithFireEvent('skewing', wrapWithFixedAnchor(skewObjectY));\n    return finalHandler(eventData, transform, x, y);\n  }\n\n  /**\n   * Action handler for rotation and snapping, without anchor point.\n   * Needs to be wrapped with `wrapWithFixedAnchor` to be effective\n   * @param {Event} eventData javascript event that is doing the transform\n   * @param {Object} transform javascript object containing a series of information around the current transform\n   * @param {number} x current mouse x position, canvas normalized\n   * @param {number} y current mouse y position, canvas normalized\n   * @return {Boolean} true if some change happened\n   * @private\n   */\n  function rotationWithSnapping(eventData, transform, x, y) {\n    var t = transform,\n        target = t.target,\n        pivotPoint = target.translateToOriginPoint(target.getCenterPoint(), t.originX, t.originY);\n\n    if (target.lockRotation) {\n      return false;\n    }\n\n    var lastAngle = Math.atan2(t.ey - pivotPoint.y, t.ex - pivotPoint.x),\n        curAngle = Math.atan2(y - pivotPoint.y, x - pivotPoint.x),\n        angle = radiansToDegrees(curAngle - lastAngle + t.theta),\n        hasRotated = true;\n\n    if (target.snapAngle > 0) {\n      var snapAngle  = target.snapAngle,\n          snapThreshold  = target.snapThreshold || snapAngle,\n          rightAngleLocked = Math.ceil(angle / snapAngle) * snapAngle,\n          leftAngleLocked = Math.floor(angle / snapAngle) * snapAngle;\n\n      if (Math.abs(angle - leftAngleLocked) < snapThreshold) {\n        angle = leftAngleLocked;\n      }\n      else if (Math.abs(angle - rightAngleLocked) < snapThreshold) {\n        angle = rightAngleLocked;\n      }\n    }\n\n    // normalize angle to positive value\n    if (angle < 0) {\n      angle = 360 + angle;\n    }\n    angle %= 360;\n\n    hasRotated = target.angle !== angle;\n    target.angle = angle;\n    return hasRotated;\n  }\n\n  /**\n   * Basic scaling logic, reused with different constrain for scaling X,Y, freely or equally.\n   * Needs to be wrapped with `wrapWithFixedAnchor` to be effective\n   * @param {Event} eventData javascript event that is doing the transform\n   * @param {Object} transform javascript object containing a series of information around the current transform\n   * @param {number} x current mouse x position, canvas normalized\n   * @param {number} y current mouse y position, canvas normalized\n   * @param {Object} options additional information for scaling\n   * @param {String} options.by 'x', 'y', 'equally' or '' to indicate type of scaling\n   * @return {Boolean} true if some change happened\n   * @private\n   */\n  function scaleObject(eventData, transform, x, y, options) {\n    options = options || {};\n    var target = transform.target,\n        lockScalingX = target.lockScalingX, lockScalingY = target.lockScalingY,\n        by = options.by, newPoint, scaleX, scaleY, dim,\n        scaleProportionally = scaleIsProportional(eventData, target),\n        forbidScaling = scalingIsForbidden(target, by, scaleProportionally),\n        signX, signY, gestureScale = transform.gestureScale;\n\n    if (forbidScaling) {\n      return false;\n    }\n    if (gestureScale) {\n      scaleX = transform.scaleX * gestureScale;\n      scaleY = transform.scaleY * gestureScale;\n    }\n    else {\n      newPoint = getLocalPoint(transform, transform.originX, transform.originY, x, y);\n      // use of sign: We use sign to detect change of direction of an action. sign usually change when\n      // we cross the origin point with the mouse. So a scale flip for example. There is an issue when scaling\n      // by center and scaling using one middle control ( default: mr, mt, ml, mb), the mouse movement can easily\n      // cross many time the origin point and flip the object. so we need a way to filter out the noise.\n      // This ternary here should be ok to filter out X scaling when we want Y only and vice versa.\n      signX = by !== 'y' ? sign(newPoint.x) : 1;\n      signY = by !== 'x' ? sign(newPoint.y) : 1;\n      if (!transform.signX) {\n        transform.signX = signX;\n      }\n      if (!transform.signY) {\n        transform.signY = signY;\n      }\n\n      if (target.lockScalingFlip &&\n        (transform.signX !== signX || transform.signY !== signY)\n      ) {\n        return false;\n      }\n\n      dim = target._getTransformedDimensions();\n      // missing detection of flip and logic to switch the origin\n      if (scaleProportionally && !by) {\n        // uniform scaling\n        var distance = Math.abs(newPoint.x) + Math.abs(newPoint.y),\n            original = transform.original,\n            originalDistance = Math.abs(dim.x * original.scaleX / target.scaleX) +\n              Math.abs(dim.y * original.scaleY / target.scaleY),\n            scale = distance / originalDistance;\n        scaleX = original.scaleX * scale;\n        scaleY = original.scaleY * scale;\n      }\n      else {\n        scaleX = Math.abs(newPoint.x * target.scaleX / dim.x);\n        scaleY = Math.abs(newPoint.y * target.scaleY / dim.y);\n      }\n      // if we are scaling by center, we need to double the scale\n      if (isTransformCentered(transform)) {\n        scaleX *= 2;\n        scaleY *= 2;\n      }\n      if (transform.signX !== signX && by !== 'y') {\n        transform.originX = opposite[transform.originX];\n        scaleX *= -1;\n        transform.signX = signX;\n      }\n      if (transform.signY !== signY && by !== 'x') {\n        transform.originY = opposite[transform.originY];\n        scaleY *= -1;\n        transform.signY = signY;\n      }\n    }\n    // minScale is taken are in the setter.\n    var oldScaleX = target.scaleX, oldScaleY = target.scaleY;\n    if (!by) {\n      !lockScalingX && target.set('scaleX', scaleX);\n      !lockScalingY && target.set('scaleY', scaleY);\n    }\n    else {\n      // forbidden cases already handled on top here.\n      by === 'x' && target.set('scaleX', scaleX);\n      by === 'y' && target.set('scaleY', scaleY);\n    }\n    return oldScaleX !== target.scaleX || oldScaleY !== target.scaleY;\n  }\n\n  /**\n   * Generic scaling logic, to scale from corners either equally or freely.\n   * Needs to be wrapped with `wrapWithFixedAnchor` to be effective\n   * @param {Event} eventData javascript event that is doing the transform\n   * @param {Object} transform javascript object containing a series of information around the current transform\n   * @param {number} x current mouse x position, canvas normalized\n   * @param {number} y current mouse y position, canvas normalized\n   * @return {Boolean} true if some change happened\n   */\n  function scaleObjectFromCorner(eventData, transform, x, y) {\n    return scaleObject(eventData, transform, x, y);\n  }\n\n  /**\n   * Scaling logic for the X axis.\n   * Needs to be wrapped with `wrapWithFixedAnchor` to be effective\n   * @param {Event} eventData javascript event that is doing the transform\n   * @param {Object} transform javascript object containing a series of information around the current transform\n   * @param {number} x current mouse x position, canvas normalized\n   * @param {number} y current mouse y position, canvas normalized\n   * @return {Boolean} true if some change happened\n   */\n  function scaleObjectX(eventData, transform, x, y) {\n    return scaleObject(eventData, transform, x, y , { by: 'x' });\n  }\n\n  /**\n   * Scaling logic for the Y axis.\n   * Needs to be wrapped with `wrapWithFixedAnchor` to be effective\n   * @param {Event} eventData javascript event that is doing the transform\n   * @param {Object} transform javascript object containing a series of information around the current transform\n   * @param {number} x current mouse x position, canvas normalized\n   * @param {number} y current mouse y position, canvas normalized\n   * @return {Boolean} true if some change happened\n   */\n  function scaleObjectY(eventData, transform, x, y) {\n    return scaleObject(eventData, transform, x, y , { by: 'y' });\n  }\n\n  /**\n   * Composed action handler to either scale Y or skew X\n   * Needs to be wrapped with `wrapWithFixedAnchor` to be effective\n   * @param {Event} eventData javascript event that is doing the transform\n   * @param {Object} transform javascript object containing a series of information around the current transform\n   * @param {number} x current mouse x position, canvas normalized\n   * @param {number} y current mouse y position, canvas normalized\n   * @return {Boolean} true if some change happened\n   */\n  function scalingYOrSkewingX(eventData, transform, x, y) {\n    // ok some safety needed here.\n    if (eventData[transform.target.canvas.altActionKey]) {\n      return controls.skewHandlerX(eventData, transform, x, y);\n    }\n    return controls.scalingY(eventData, transform, x, y);\n  }\n\n  /**\n   * Composed action handler to either scale X or skew Y\n   * Needs to be wrapped with `wrapWithFixedAnchor` to be effective\n   * @param {Event} eventData javascript event that is doing the transform\n   * @param {Object} transform javascript object containing a series of information around the current transform\n   * @param {number} x current mouse x position, canvas normalized\n   * @param {number} y current mouse y position, canvas normalized\n   * @return {Boolean} true if some change happened\n   */\n  function scalingXOrSkewingY(eventData, transform, x, y) {\n    // ok some safety needed here.\n    if (eventData[transform.target.canvas.altActionKey]) {\n      return controls.skewHandlerY(eventData, transform, x, y);\n    }\n    return controls.scalingX(eventData, transform, x, y);\n  }\n\n  /**\n   * Action handler to change textbox width\n   * Needs to be wrapped with `wrapWithFixedAnchor` to be effective\n   * @param {Event} eventData javascript event that is doing the transform\n   * @param {Object} transform javascript object containing a series of information around the current transform\n   * @param {number} x current mouse x position, canvas normalized\n   * @param {number} y current mouse y position, canvas normalized\n   * @return {Boolean} true if some change happened\n   */\n  function changeWidth(eventData, transform, x, y) {\n    var target = transform.target, localPoint = getLocalPoint(transform, transform.originX, transform.originY, x, y),\n        strokePadding = target.strokeWidth / (target.strokeUniform ? target.scaleX : 1),\n        multiplier = isTransformCentered(transform) ? 2 : 1,\n        oldWidth = target.width,\n        newWidth = Math.abs(localPoint.x * multiplier / target.scaleX) - strokePadding;\n    target.set('width', Math.max(newWidth, 0));\n    return oldWidth !== newWidth;\n  }\n\n  /**\n   * Action handler\n   * @private\n   * @param {Event} eventData javascript event that is doing the transform\n   * @param {Object} transform javascript object containing a series of information around the current transform\n   * @param {number} x current mouse x position, canvas normalized\n   * @param {number} y current mouse y position, canvas normalized\n   * @return {Boolean} true if the translation occurred\n   */\n  function dragHandler(eventData, transform, x, y) {\n    var target = transform.target,\n        newLeft = x - transform.offsetX,\n        newTop = y - transform.offsetY,\n        moveX = !target.get('lockMovementX') && target.left !== newLeft,\n        moveY = !target.get('lockMovementY') && target.top !== newTop;\n    moveX && target.set('left', newLeft);\n    moveY && target.set('top', newTop);\n    if (moveX || moveY) {\n      fireEvent('moving', commonEventInfo(eventData, transform, x, y));\n    }\n    return moveX || moveY;\n  }\n\n  controls.scaleCursorStyleHandler = scaleCursorStyleHandler;\n  controls.skewCursorStyleHandler = skewCursorStyleHandler;\n  controls.scaleSkewCursorStyleHandler = scaleSkewCursorStyleHandler;\n  controls.rotationWithSnapping = wrapWithFireEvent('rotating', wrapWithFixedAnchor(rotationWithSnapping));\n  controls.scalingEqually = wrapWithFireEvent('scaling', wrapWithFixedAnchor( scaleObjectFromCorner));\n  controls.scalingX = wrapWithFireEvent('scaling', wrapWithFixedAnchor(scaleObjectX));\n  controls.scalingY = wrapWithFireEvent('scaling', wrapWithFixedAnchor(scaleObjectY));\n  controls.scalingYOrSkewingX = scalingYOrSkewingX;\n  controls.scalingXOrSkewingY = scalingXOrSkewingY;\n  controls.changeWidth = wrapWithFireEvent('resizing', wrapWithFixedAnchor(changeWidth));\n  controls.skewHandlerX = skewHandlerX;\n  controls.skewHandlerY = skewHandlerY;\n  controls.dragHandler = dragHandler;\n  controls.scaleOrSkewActionName = scaleOrSkewActionName;\n  controls.rotationStyleHandler = rotationStyleHandler;\n  controls.fireEvent = fireEvent;\n  controls.wrapWithFixedAnchor = wrapWithFixedAnchor;\n  controls.wrapWithFireEvent = wrapWithFireEvent;\n  controls.getLocalPoint = getLocalPoint;\n  fabric.controlsUtils = controls;\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric = global.fabric || (global.fabric = { }),\n      degreesToRadians = fabric.util.degreesToRadians,\n      controls = fabric.controlsUtils;\n\n  /**\n   * Render a round control, as per fabric features.\n   * This function is written to respect object properties like transparentCorners, cornerSize\n   * cornerColor, cornerStrokeColor\n   * plus the addition of offsetY and offsetX.\n   * @param {CanvasRenderingContext2D} ctx context to render on\n   * @param {Number} left x coordinate where the control center should be\n   * @param {Number} top y coordinate where the control center should be\n   * @param {Object} styleOverride override for fabric.Object controls style\n   * @param {fabric.Object} fabricObject the fabric object for which we are rendering controls\n   */\n  function renderCircleControl (ctx, left, top, styleOverride, fabricObject) {\n    styleOverride = styleOverride || {};\n    var xSize = this.sizeX || styleOverride.cornerSize || fabricObject.cornerSize,\n        ySize = this.sizeY || styleOverride.cornerSize || fabricObject.cornerSize,\n        transparentCorners = typeof styleOverride.transparentCorners !== 'undefined' ?\n          styleOverride.transparentCorners : fabricObject.transparentCorners,\n        methodName = transparentCorners ? 'stroke' : 'fill',\n        stroke = !transparentCorners && (styleOverride.cornerStrokeColor || fabricObject.cornerStrokeColor),\n        myLeft = left,\n        myTop = top, size;\n    ctx.save();\n    ctx.fillStyle = styleOverride.cornerColor || fabricObject.cornerColor;\n    ctx.strokeStyle = styleOverride.cornerStrokeColor || fabricObject.cornerStrokeColor;\n    // as soon as fabric react v5, remove ie11, use proper ellipse code.\n    if (xSize > ySize) {\n      size = xSize;\n      ctx.scale(1.0, ySize / xSize);\n      myTop = top * xSize / ySize;\n    }\n    else if (ySize > xSize) {\n      size = ySize;\n      ctx.scale(xSize / ySize, 1.0);\n      myLeft = left * ySize / xSize;\n    }\n    else {\n      size = xSize;\n    }\n    // this is still wrong\n    ctx.lineWidth = 1;\n    ctx.beginPath();\n    ctx.arc(myLeft, myTop, size / 2, 0, 2 * Math.PI, false);\n    ctx[methodName]();\n    if (stroke) {\n      ctx.stroke();\n    }\n    ctx.restore();\n  }\n\n  /**\n   * Render a square control, as per fabric features.\n   * This function is written to respect object properties like transparentCorners, cornerSize\n   * cornerColor, cornerStrokeColor\n   * plus the addition of offsetY and offsetX.\n   * @param {CanvasRenderingContext2D} ctx context to render on\n   * @param {Number} left x coordinate where the control center should be\n   * @param {Number} top y coordinate where the control center should be\n   * @param {Object} styleOverride override for fabric.Object controls style\n   * @param {fabric.Object} fabricObject the fabric object for which we are rendering controls\n   */\n  function renderSquareControl(ctx, left, top, styleOverride, fabricObject) {\n    styleOverride = styleOverride || {};\n    var xSize = this.sizeX || styleOverride.cornerSize || fabricObject.cornerSize,\n        ySize = this.sizeY || styleOverride.cornerSize || fabricObject.cornerSize,\n        transparentCorners = typeof styleOverride.transparentCorners !== 'undefined' ?\n          styleOverride.transparentCorners : fabricObject.transparentCorners,\n        methodName = transparentCorners ? 'stroke' : 'fill',\n        stroke = !transparentCorners && (\n          styleOverride.cornerStrokeColor || fabricObject.cornerStrokeColor\n        ), xSizeBy2 = xSize / 2, ySizeBy2 = ySize / 2;\n    ctx.save();\n    ctx.fillStyle = styleOverride.cornerColor || fabricObject.cornerColor;\n    ctx.strokeStyle = styleOverride.cornerStrokeColor || fabricObject.cornerStrokeColor;\n    // this is still wrong\n    ctx.lineWidth = 1;\n    ctx.translate(left, top);\n    ctx.rotate(degreesToRadians(fabricObject.angle));\n    // this does not work, and fixed with ( && ) does not make sense.\n    // to have real transparent corners we need the controls on upperCanvas\n    // transparentCorners || ctx.clearRect(-xSizeBy2, -ySizeBy2, xSize, ySize);\n    ctx[methodName + 'Rect'](-xSizeBy2, -ySizeBy2, xSize, ySize);\n    if (stroke) {\n      ctx.strokeRect(-xSizeBy2, -ySizeBy2, xSize, ySize);\n    }\n    ctx.restore();\n  }\n\n  controls.renderCircleControl = renderCircleControl;\n  controls.renderSquareControl = renderSquareControl;\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric = global.fabric || (global.fabric = { });\n\n  function Control(options) {\n    for (var i in options) {\n      this[i] = options[i];\n    }\n  }\n\n  fabric.Control = Control;\n\n  fabric.Control.prototype = /** @lends fabric.Control.prototype */ {\n\n    /**\n     * keep track of control visibility.\n     * mainly for backward compatibility.\n     * if you do not want to see a control, you can remove it\n     * from the controlset.\n     * @type {Boolean}\n     * @default true\n     */\n    visible: true,\n\n    /**\n     * Name of the action that the control will likely execute.\n     * This is optional. FabricJS uses to identify what the user is doing for some\n     * extra optimizations. If you are writing a custom control and you want to know\n     * somewhere else in the code what is going on, you can use this string here.\n     * you can also provide a custom getActionName if your control run multiple actions\n     * depending on some external state.\n     * default to scale since is the most common, used on 4 corners by default\n     * @type {String}\n     * @default 'scale'\n     */\n    actionName: 'scale',\n\n    /**\n     * Drawing angle of the control.\n     * NOT used for now, but name marked as needed for internal logic\n     * example: to reuse the same drawing function for different rotated controls\n     * @type {Number}\n     * @default 0\n     */\n    angle: 0,\n\n    /**\n     * Relative position of the control. X\n     * 0,0 is the center of the Object, while -0.5 (left) or 0.5 (right) are the extremities\n     * of the bounding box.\n     * @type {Number}\n     * @default 0\n     */\n    x: 0,\n\n    /**\n     * Relative position of the control. Y\n     * 0,0 is the center of the Object, while -0.5 (top) or 0.5 (bottom) are the extremities\n     * of the bounding box.\n     * @type {Number}\n     * @default 0\n     */\n    y: 0,\n\n    /**\n     * Horizontal offset of the control from the defined position. In pixels\n     * Positive offset moves the control to the right, negative to the left.\n     * It used when you want to have position of control that does not scale with\n     * the bounding box. Example: rotation control is placed at x:0, y: 0.5 on\n     * the boundindbox, with an offset of 30 pixels vertically. Those 30 pixels will\n     * stay 30 pixels no matter how the object is big. Another example is having 2\n     * controls in the corner, that stay in the same position when the object scale.\n     * of the bounding box.\n     * @type {Number}\n     * @default 0\n     */\n    offsetX: 0,\n\n    /**\n     * Vertical offset of the control from the defined position. In pixels\n     * Positive offset moves the control to the bottom, negative to the top.\n     * @type {Number}\n     * @default 0\n     */\n    offsetY: 0,\n\n    /**\n     * Sets the length of the control. If null, defaults to object's cornerSize.\n     * Expects both sizeX and sizeY to be set when set.\n     * @type {?Number}\n     * @default null\n     */\n    sizeX: null,\n\n    /**\n     * Sets the height of the control. If null, defaults to object's cornerSize.\n     * Expects both sizeX and sizeY to be set when set.\n     * @type {?Number}\n     * @default null\n     */\n    sizeY: null,\n\n    /**\n     * Sets the length of the touch area of the control. If null, defaults to object's touchCornerSize.\n     * Expects both touchSizeX and touchSizeY to be set when set.\n     * @type {?Number}\n     * @default null\n     */\n    touchSizeX: null,\n\n    /**\n     * Sets the height of the touch area of the control. If null, defaults to object's touchCornerSize.\n     * Expects both touchSizeX and touchSizeY to be set when set.\n     * @type {?Number}\n     * @default null\n     */\n    touchSizeY: null,\n\n    /**\n     * Css cursor style to display when the control is hovered.\n     * if the method `cursorStyleHandler` is provided, this property is ignored.\n     * @type {String}\n     * @default 'crosshair'\n     */\n    cursorStyle: 'crosshair',\n\n    /**\n     * If controls has an offsetY or offsetX, draw a line that connects\n     * the control to the bounding box\n     * @type {Boolean}\n     * @default false\n     */\n    withConnection: false,\n\n    /**\n     * The control actionHandler, provide one to handle action ( control being moved )\n     * @param {Event} eventData the native mouse event\n     * @param {Object} transformData properties of the current transform\n     * @param {Number} x x position of the cursor\n     * @param {Number} y y position of the cursor\n     * @return {Boolean} true if the action/event modified the object\n     */\n    actionHandler: function(/* eventData, transformData, x, y */) { },\n\n    /**\n     * The control handler for mouse down, provide one to handle mouse down on control\n     * @param {Event} eventData the native mouse event\n     * @param {Object} transformData properties of the current transform\n     * @param {Number} x x position of the cursor\n     * @param {Number} y y position of the cursor\n     * @return {Boolean} true if the action/event modified the object\n     */\n    mouseDownHandler: function(/* eventData, transformData, x, y */) { },\n\n    /**\n     * The control mouseUpHandler, provide one to handle an effect on mouse up.\n     * @param {Event} eventData the native mouse event\n     * @param {Object} transformData properties of the current transform\n     * @param {Number} x x position of the cursor\n     * @param {Number} y y position of the cursor\n     * @return {Boolean} true if the action/event modified the object\n     */\n    mouseUpHandler: function(/* eventData, transformData, x, y */) { },\n\n    /**\n     * Returns control actionHandler\n     * @param {Event} eventData the native mouse event\n     * @param {fabric.Object} fabricObject on which the control is displayed\n     * @param {fabric.Control} control control for which the action handler is being asked\n     * @return {Function} the action handler\n     */\n    getActionHandler: function(/* eventData, fabricObject, control */) {\n      return this.actionHandler;\n    },\n\n    /**\n     * Returns control mouseDown handler\n     * @param {Event} eventData the native mouse event\n     * @param {fabric.Object} fabricObject on which the control is displayed\n     * @param {fabric.Control} control control for which the action handler is being asked\n     * @return {Function} the action handler\n     */\n    getMouseDownHandler: function(/* eventData, fabricObject, control */) {\n      return this.mouseDownHandler;\n    },\n\n    /**\n     * Returns control mouseUp handler\n     * @param {Event} eventData the native mouse event\n     * @param {fabric.Object} fabricObject on which the control is displayed\n     * @param {fabric.Control} control control for which the action handler is being asked\n     * @return {Function} the action handler\n     */\n    getMouseUpHandler: function(/* eventData, fabricObject, control */) {\n      return this.mouseUpHandler;\n    },\n\n    /**\n     * Returns control cursorStyle for css using cursorStyle. If you need a more elaborate\n     * function you can pass one in the constructor\n     * the cursorStyle property\n     * @param {Event} eventData the native mouse event\n     * @param {fabric.Control} control the current control ( likely this)\n     * @param {fabric.Object} object on which the control is displayed\n     * @return {String}\n     */\n    cursorStyleHandler: function(eventData, control /* fabricObject */) {\n      return control.cursorStyle;\n    },\n\n    /**\n     * Returns the action name. The basic implementation just return the actionName property.\n     * @param {Event} eventData the native mouse event\n     * @param {fabric.Control} control the current control ( likely this)\n     * @param {fabric.Object} object on which the control is displayed\n     * @return {String}\n     */\n    getActionName: function(eventData, control /* fabricObject */) {\n      return control.actionName;\n    },\n\n    /**\n     * Returns controls visibility\n     * @param {fabric.Object} object on which the control is displayed\n     * @param {String} controlKey key where the control is memorized on the\n     * @return {Boolean}\n     */\n    getVisibility: function(fabricObject, controlKey) {\n      var objectVisibility = fabricObject._controlsVisibility;\n      if (objectVisibility && typeof objectVisibility[controlKey] !== 'undefined') {\n        return objectVisibility[controlKey];\n      }\n      return this.visible;\n    },\n\n    /**\n     * Sets controls visibility\n     * @param {Boolean} visibility for the object\n     * @return {Void}\n     */\n    setVisibility: function(visibility /* name, fabricObject */) {\n      this.visible = visibility;\n    },\n\n\n    positionHandler: function(dim, finalMatrix /*, fabricObject, currentControl */) {\n      var point = fabric.util.transformPoint({\n        x: this.x * dim.x + this.offsetX,\n        y: this.y * dim.y + this.offsetY }, finalMatrix);\n      return point;\n    },\n\n    /**\n     * Returns the coords for this control based on object values.\n     * @param {Number} objectAngle angle from the fabric object holding the control\n     * @param {Number} objectCornerSize cornerSize from the fabric object holding the control (or touchCornerSize if\n     *   isTouch is true)\n     * @param {Number} centerX x coordinate where the control center should be\n     * @param {Number} centerY y coordinate where the control center should be\n     * @param {boolean} isTouch true if touch corner, false if normal corner\n     */\n    calcCornerCoords: function(objectAngle, objectCornerSize, centerX, centerY, isTouch) {\n      var cosHalfOffset,\n          sinHalfOffset,\n          cosHalfOffsetComp,\n          sinHalfOffsetComp,\n          xSize = (isTouch) ? this.touchSizeX : this.sizeX,\n          ySize = (isTouch) ? this.touchSizeY : this.sizeY;\n      if (xSize && ySize && xSize !== ySize) {\n        // handle rectangular corners\n        var controlTriangleAngle = Math.atan2(ySize, xSize);\n        var cornerHypotenuse = Math.sqrt(xSize * xSize + ySize * ySize) / 2;\n        var newTheta = controlTriangleAngle - fabric.util.degreesToRadians(objectAngle);\n        var newThetaComp = Math.PI / 2 - controlTriangleAngle - fabric.util.degreesToRadians(objectAngle);\n        cosHalfOffset = cornerHypotenuse * fabric.util.cos(newTheta);\n        sinHalfOffset = cornerHypotenuse * fabric.util.sin(newTheta);\n        // use complementary angle for two corners\n        cosHalfOffsetComp = cornerHypotenuse * fabric.util.cos(newThetaComp);\n        sinHalfOffsetComp = cornerHypotenuse * fabric.util.sin(newThetaComp);\n      }\n      else {\n        // handle square corners\n        // use default object corner size unless size is defined\n        var cornerSize = (xSize && ySize) ? xSize : objectCornerSize;\n        /* 0.7071067812 stands for sqrt(2)/2 */\n        cornerHypotenuse = cornerSize * 0.7071067812;\n        // complementary angles are equal since they're both 45 degrees\n        var newTheta = fabric.util.degreesToRadians(45 - objectAngle);\n        cosHalfOffset = cosHalfOffsetComp = cornerHypotenuse * fabric.util.cos(newTheta);\n        sinHalfOffset = sinHalfOffsetComp = cornerHypotenuse * fabric.util.sin(newTheta);\n      }\n\n      return {\n        tl: {\n          x: centerX - sinHalfOffsetComp,\n          y: centerY - cosHalfOffsetComp,\n        },\n        tr: {\n          x: centerX + cosHalfOffset,\n          y: centerY - sinHalfOffset,\n        },\n        bl: {\n          x: centerX - cosHalfOffset,\n          y: centerY + sinHalfOffset,\n        },\n        br: {\n          x: centerX + sinHalfOffsetComp,\n          y: centerY + cosHalfOffsetComp,\n        },\n      };\n    },\n\n    /**\n    * Render function for the control.\n    * When this function runs the context is unscaled. unrotate. Just retina scaled.\n    * all the functions will have to translate to the point left,top before starting Drawing\n    * if they want to draw a control where the position is detected.\n    * left and top are the result of the positionHandler function\n    * @param {RenderingContext2D} ctx the context where the control will be drawn\n    * @param {Number} left position of the canvas where we are about to render the control.\n    * @param {Number} top position of the canvas where we are about to render the control.\n    * @param {Object} styleOverride\n    * @param {fabric.Object} fabricObject the object where the control is about to be rendered\n    */\n    render: function(ctx, left, top, styleOverride, fabricObject) {\n      styleOverride = styleOverride || {};\n      switch (styleOverride.cornerStyle || fabricObject.cornerStyle) {\n        case 'circle':\n          fabric.controlsUtils.renderCircleControl.call(this, ctx, left, top, styleOverride, fabricObject);\n          break;\n        default:\n          fabric.controlsUtils.renderSquareControl.call(this, ctx, left, top, styleOverride, fabricObject);\n      }\n    },\n  };\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function() {\n\n  /* _FROM_SVG_START_ */\n  function getColorStop(el, multiplier) {\n    var style = el.getAttribute('style'),\n        offset = el.getAttribute('offset') || 0,\n        color, colorAlpha, opacity, i;\n\n    // convert percents to absolute values\n    offset = parseFloat(offset) / (/%$/.test(offset) ? 100 : 1);\n    offset = offset < 0 ? 0 : offset > 1 ? 1 : offset;\n    if (style) {\n      var keyValuePairs = style.split(/\\s*;\\s*/);\n\n      if (keyValuePairs[keyValuePairs.length - 1] === '') {\n        keyValuePairs.pop();\n      }\n\n      for (i = keyValuePairs.length; i--; ) {\n\n        var split = keyValuePairs[i].split(/\\s*:\\s*/),\n            key = split[0].trim(),\n            value = split[1].trim();\n\n        if (key === 'stop-color') {\n          color = value;\n        }\n        else if (key === 'stop-opacity') {\n          opacity = value;\n        }\n      }\n    }\n\n    if (!color) {\n      color = el.getAttribute('stop-color') || 'rgb(0,0,0)';\n    }\n    if (!opacity) {\n      opacity = el.getAttribute('stop-opacity');\n    }\n\n    color = new fabric.Color(color);\n    colorAlpha = color.getAlpha();\n    opacity = isNaN(parseFloat(opacity)) ? 1 : parseFloat(opacity);\n    opacity *= colorAlpha * multiplier;\n\n    return {\n      offset: offset,\n      color: color.toRgb(),\n      opacity: opacity\n    };\n  }\n\n  function getLinearCoords(el) {\n    return {\n      x1: el.getAttribute('x1') || 0,\n      y1: el.getAttribute('y1') || 0,\n      x2: el.getAttribute('x2') || '100%',\n      y2: el.getAttribute('y2') || 0\n    };\n  }\n\n  function getRadialCoords(el) {\n    return {\n      x1: el.getAttribute('fx') || el.getAttribute('cx') || '50%',\n      y1: el.getAttribute('fy') || el.getAttribute('cy') || '50%',\n      r1: 0,\n      x2: el.getAttribute('cx') || '50%',\n      y2: el.getAttribute('cy') || '50%',\n      r2: el.getAttribute('r') || '50%'\n    };\n  }\n  /* _FROM_SVG_END_ */\n\n  var clone = fabric.util.object.clone;\n\n  /**\n   * Gradient class\n   * @class fabric.Gradient\n   * @tutorial {@link http://fabricjs.com/fabric-intro-part-2#gradients}\n   * @see {@link fabric.Gradient#initialize} for constructor definition\n   */\n  fabric.Gradient = fabric.util.createClass(/** @lends fabric.Gradient.prototype */ {\n\n    /**\n     * Horizontal offset for aligning gradients coming from SVG when outside pathgroups\n     * @type Number\n     * @default 0\n     */\n    offsetX: 0,\n\n    /**\n     * Vertical offset for aligning gradients coming from SVG when outside pathgroups\n     * @type Number\n     * @default 0\n     */\n    offsetY: 0,\n\n    /**\n     * A transform matrix to apply to the gradient before painting.\n     * Imported from svg gradients, is not applied with the current transform in the center.\n     * Before this transform is applied, the origin point is at the top left corner of the object\n     * plus the addition of offsetY and offsetX.\n     * @type Number[]\n     * @default null\n     */\n    gradientTransform: null,\n\n    /**\n     * coordinates units for coords.\n     * If `pixels`, the number of coords are in the same unit of width / height.\n     * If set as `percentage` the coords are still a number, but 1 means 100% of width\n     * for the X and 100% of the height for the y. It can be bigger than 1 and negative.\n     * allowed values pixels or percentage.\n     * @type String\n     * @default 'pixels'\n     */\n    gradientUnits: 'pixels',\n\n    /**\n     * Gradient type linear or radial\n     * @type String\n     * @default 'pixels'\n     */\n    type: 'linear',\n\n    /**\n     * Constructor\n     * @param {Object} options Options object with type, coords, gradientUnits and colorStops\n     * @param {Object} [options.type] gradient type linear or radial\n     * @param {Object} [options.gradientUnits] gradient units\n     * @param {Object} [options.offsetX] SVG import compatibility\n     * @param {Object} [options.offsetY] SVG import compatibility\n     * @param {Object[]} options.colorStops contains the colorstops.\n     * @param {Object} options.coords contains the coords of the gradient\n     * @param {Number} [options.coords.x1] X coordiante of the first point for linear or of the focal point for radial\n     * @param {Number} [options.coords.y1] Y coordiante of the first point for linear or of the focal point for radial\n     * @param {Number} [options.coords.x2] X coordiante of the second point for linear or of the center point for radial\n     * @param {Number} [options.coords.y2] Y coordiante of the second point for linear or of the center point for radial\n     * @param {Number} [options.coords.r1] only for radial gradient, radius of the inner circle\n     * @param {Number} [options.coords.r2] only for radial gradient, radius of the external circle\n     * @return {fabric.Gradient} thisArg\n     */\n    initialize: function(options) {\n      options || (options = { });\n      options.coords || (options.coords = { });\n\n      var coords, _this = this;\n\n      // sets everything, then coords and colorstops get sets again\n      Object.keys(options).forEach(function(option) {\n        _this[option] = options[option];\n      });\n\n      if (this.id) {\n        this.id += '_' + fabric.Object.__uid++;\n      }\n      else {\n        this.id = fabric.Object.__uid++;\n      }\n\n      coords = {\n        x1: options.coords.x1 || 0,\n        y1: options.coords.y1 || 0,\n        x2: options.coords.x2 || 0,\n        y2: options.coords.y2 || 0\n      };\n\n      if (this.type === 'radial') {\n        coords.r1 = options.coords.r1 || 0;\n        coords.r2 = options.coords.r2 || 0;\n      }\n\n      this.coords = coords;\n      this.colorStops = options.colorStops.slice();\n    },\n\n    /**\n     * Adds another colorStop\n     * @param {Object} colorStop Object with offset and color\n     * @return {fabric.Gradient} thisArg\n     */\n    addColorStop: function(colorStops) {\n      for (var position in colorStops) {\n        var color = new fabric.Color(colorStops[position]);\n        this.colorStops.push({\n          offset: parseFloat(position),\n          color: color.toRgb(),\n          opacity: color.getAlpha()\n        });\n      }\n      return this;\n    },\n\n    /**\n     * Returns object representation of a gradient\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {Object}\n     */\n    toObject: function(propertiesToInclude) {\n      var object = {\n        type: this.type,\n        coords: this.coords,\n        colorStops: this.colorStops,\n        offsetX: this.offsetX,\n        offsetY: this.offsetY,\n        gradientUnits: this.gradientUnits,\n        gradientTransform: this.gradientTransform ? this.gradientTransform.concat() : this.gradientTransform\n      };\n      fabric.util.populateWithProperties(this, object, propertiesToInclude);\n\n      return object;\n    },\n\n    /* _TO_SVG_START_ */\n    /**\n     * Returns SVG representation of an gradient\n     * @param {Object} object Object to create a gradient for\n     * @return {String} SVG representation of an gradient (linear/radial)\n     */\n    toSVG: function(object, options) {\n      var coords = clone(this.coords, true), i, len, options = options || {},\n          markup, commonAttributes, colorStops = clone(this.colorStops, true),\n          needsSwap = coords.r1 > coords.r2,\n          transform = this.gradientTransform ? this.gradientTransform.concat() : fabric.iMatrix.concat(),\n          offsetX = -this.offsetX, offsetY = -this.offsetY,\n          withViewport = !!options.additionalTransform,\n          gradientUnits = this.gradientUnits === 'pixels' ? 'userSpaceOnUse' : 'objectBoundingBox';\n      // colorStops must be sorted ascending\n      colorStops.sort(function(a, b) {\n        return a.offset - b.offset;\n      });\n\n      if (gradientUnits === 'objectBoundingBox') {\n        offsetX /= object.width;\n        offsetY /= object.height;\n      }\n      else {\n        offsetX += object.width / 2;\n        offsetY += object.height / 2;\n      }\n      if (object.type === 'path' && this.gradientUnits !== 'percentage') {\n        offsetX -= object.pathOffset.x;\n        offsetY -= object.pathOffset.y;\n      }\n\n\n      transform[4] -= offsetX;\n      transform[5] -= offsetY;\n\n      commonAttributes = 'id=\"SVGID_' + this.id +\n                     '\" gradientUnits=\"' + gradientUnits + '\"';\n      commonAttributes += ' gradientTransform=\"' + (withViewport ?\n        options.additionalTransform + ' ' : '') + fabric.util.matrixToSVG(transform) + '\" ';\n\n      if (this.type === 'linear') {\n        markup = [\n          '<linearGradient ',\n          commonAttributes,\n          ' x1=\"', coords.x1,\n          '\" y1=\"', coords.y1,\n          '\" x2=\"', coords.x2,\n          '\" y2=\"', coords.y2,\n          '\">\\n'\n        ];\n      }\n      else if (this.type === 'radial') {\n        // svg radial gradient has just 1 radius. the biggest.\n        markup = [\n          '<radialGradient ',\n          commonAttributes,\n          ' cx=\"', needsSwap ? coords.x1 : coords.x2,\n          '\" cy=\"', needsSwap ? coords.y1 : coords.y2,\n          '\" r=\"', needsSwap ? coords.r1 : coords.r2,\n          '\" fx=\"', needsSwap ? coords.x2 : coords.x1,\n          '\" fy=\"', needsSwap ? coords.y2 : coords.y1,\n          '\">\\n'\n        ];\n      }\n\n      if (this.type === 'radial') {\n        if (needsSwap) {\n          // svg goes from internal to external radius. if radius are inverted, swap color stops.\n          colorStops = colorStops.concat();\n          colorStops.reverse();\n          for (i = 0, len = colorStops.length; i < len; i++) {\n            colorStops[i].offset = 1 - colorStops[i].offset;\n          }\n        }\n        var minRadius = Math.min(coords.r1, coords.r2);\n        if (minRadius > 0) {\n          // i have to shift all colorStops and add new one in 0.\n          var maxRadius = Math.max(coords.r1, coords.r2),\n              percentageShift = minRadius / maxRadius;\n          for (i = 0, len = colorStops.length; i < len; i++) {\n            colorStops[i].offset += percentageShift * (1 - colorStops[i].offset);\n          }\n        }\n      }\n\n      for (i = 0, len = colorStops.length; i < len; i++) {\n        var colorStop = colorStops[i];\n        markup.push(\n          '<stop ',\n          'offset=\"', (colorStop.offset * 100) + '%',\n          '\" style=\"stop-color:', colorStop.color,\n          (typeof colorStop.opacity !== 'undefined' ? ';stop-opacity: ' + colorStop.opacity : ';'),\n          '\"/>\\n'\n        );\n      }\n\n      markup.push((this.type === 'linear' ? '</linearGradient>\\n' : '</radialGradient>\\n'));\n\n      return markup.join('');\n    },\n    /* _TO_SVG_END_ */\n\n    /**\n     * Returns an instance of CanvasGradient\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     * @return {CanvasGradient}\n     */\n    toLive: function(ctx) {\n      var gradient, coords = fabric.util.object.clone(this.coords), i, len;\n\n      if (!this.type) {\n        return;\n      }\n\n      if (this.type === 'linear') {\n        gradient = ctx.createLinearGradient(\n          coords.x1, coords.y1, coords.x2, coords.y2);\n      }\n      else if (this.type === 'radial') {\n        gradient = ctx.createRadialGradient(\n          coords.x1, coords.y1, coords.r1, coords.x2, coords.y2, coords.r2);\n      }\n\n      for (i = 0, len = this.colorStops.length; i < len; i++) {\n        var color = this.colorStops[i].color,\n            opacity = this.colorStops[i].opacity,\n            offset = this.colorStops[i].offset;\n\n        if (typeof opacity !== 'undefined') {\n          color = new fabric.Color(color).setAlpha(opacity).toRgba();\n        }\n        gradient.addColorStop(offset, color);\n      }\n\n      return gradient;\n    }\n  });\n\n  fabric.util.object.extend(fabric.Gradient, {\n\n    /* _FROM_SVG_START_ */\n    /**\n     * Returns {@link fabric.Gradient} instance from an SVG element\n     * @static\n     * @memberOf fabric.Gradient\n     * @param {SVGGradientElement} el SVG gradient element\n     * @param {fabric.Object} instance\n     * @param {String} opacityAttr A fill-opacity or stroke-opacity attribute to multiply to each stop's opacity.\n     * @param {Object} svgOptions an object containing the size of the SVG in order to parse correctly gradients\n     * that uses gradientUnits as 'userSpaceOnUse' and percentages.\n     * @param {Object.number} viewBoxWidth width part of the viewBox attribute on svg\n     * @param {Object.number} viewBoxHeight height part of the viewBox attribute on svg\n     * @param {Object.number} width width part of the svg tag if viewBox is not specified\n     * @param {Object.number} height height part of the svg tag if viewBox is not specified\n     * @return {fabric.Gradient} Gradient instance\n     * @see http://www.w3.org/TR/SVG/pservers.html#LinearGradientElement\n     * @see http://www.w3.org/TR/SVG/pservers.html#RadialGradientElement\n     */\n    fromElement: function(el, instance, opacityAttr, svgOptions) {\n      /**\n       *  @example:\n       *\n       *  <linearGradient id=\"linearGrad1\">\n       *    <stop offset=\"0%\" stop-color=\"white\"/>\n       *    <stop offset=\"100%\" stop-color=\"black\"/>\n       *  </linearGradient>\n       *\n       *  OR\n       *\n       *  <linearGradient id=\"linearGrad2\">\n       *    <stop offset=\"0\" style=\"stop-color:rgb(255,255,255)\"/>\n       *    <stop offset=\"1\" style=\"stop-color:rgb(0,0,0)\"/>\n       *  </linearGradient>\n       *\n       *  OR\n       *\n       *  <radialGradient id=\"radialGrad1\">\n       *    <stop offset=\"0%\" stop-color=\"white\" stop-opacity=\"1\" />\n       *    <stop offset=\"50%\" stop-color=\"black\" stop-opacity=\"0.5\" />\n       *    <stop offset=\"100%\" stop-color=\"white\" stop-opacity=\"1\" />\n       *  </radialGradient>\n       *\n       *  OR\n       *\n       *  <radialGradient id=\"radialGrad2\">\n       *    <stop offset=\"0\" stop-color=\"rgb(255,255,255)\" />\n       *    <stop offset=\"0.5\" stop-color=\"rgb(0,0,0)\" />\n       *    <stop offset=\"1\" stop-color=\"rgb(255,255,255)\" />\n       *  </radialGradient>\n       *\n       */\n\n      var multiplier = parseFloat(opacityAttr) / (/%$/.test(opacityAttr) ? 100 : 1);\n      multiplier = multiplier < 0 ? 0 : multiplier > 1 ? 1 : multiplier;\n      if (isNaN(multiplier)) {\n        multiplier = 1;\n      }\n\n      var colorStopEls = el.getElementsByTagName('stop'),\n          type,\n          gradientUnits = el.getAttribute('gradientUnits') === 'userSpaceOnUse' ?\n            'pixels' : 'percentage',\n          gradientTransform = el.getAttribute('gradientTransform') || '',\n          colorStops = [],\n          coords, i, offsetX = 0, offsetY = 0,\n          transformMatrix;\n      if (el.nodeName === 'linearGradient' || el.nodeName === 'LINEARGRADIENT') {\n        type = 'linear';\n        coords = getLinearCoords(el);\n      }\n      else {\n        type = 'radial';\n        coords = getRadialCoords(el);\n      }\n\n      for (i = colorStopEls.length; i--; ) {\n        colorStops.push(getColorStop(colorStopEls[i], multiplier));\n      }\n\n      transformMatrix = fabric.parseTransformAttribute(gradientTransform);\n\n      __convertPercentUnitsToValues(instance, coords, svgOptions, gradientUnits);\n\n      if (gradientUnits === 'pixels') {\n        offsetX = -instance.left;\n        offsetY = -instance.top;\n      }\n\n      var gradient = new fabric.Gradient({\n        id: el.getAttribute('id'),\n        type: type,\n        coords: coords,\n        colorStops: colorStops,\n        gradientUnits: gradientUnits,\n        gradientTransform: transformMatrix,\n        offsetX: offsetX,\n        offsetY: offsetY,\n      });\n\n      return gradient;\n    }\n    /* _FROM_SVG_END_ */\n  });\n\n  /**\n   * @private\n   */\n  function __convertPercentUnitsToValues(instance, options, svgOptions, gradientUnits) {\n    var propValue, finalValue;\n    Object.keys(options).forEach(function(prop) {\n      propValue = options[prop];\n      if (propValue === 'Infinity') {\n        finalValue = 1;\n      }\n      else if (propValue === '-Infinity') {\n        finalValue = 0;\n      }\n      else {\n        finalValue = parseFloat(options[prop], 10);\n        if (typeof propValue === 'string' && /^(\\d+\\.\\d+)%|(\\d+)%$/.test(propValue)) {\n          finalValue *= 0.01;\n          if (gradientUnits === 'pixels') {\n            // then we need to fix those percentages here in svg parsing\n            if (prop === 'x1' || prop === 'x2' || prop === 'r2') {\n              finalValue *= svgOptions.viewBoxWidth || svgOptions.width;\n            }\n            if (prop === 'y1' || prop === 'y2') {\n              finalValue *= svgOptions.viewBoxHeight || svgOptions.height;\n            }\n          }\n        }\n      }\n      options[prop] = finalValue;\n    });\n  }\n})();\n\n\n(function() {\n\n  'use strict';\n\n  var toFixed = fabric.util.toFixed;\n\n  /**\n   * Pattern class\n   * @class fabric.Pattern\n   * @see {@link http://fabricjs.com/patterns|Pattern demo}\n   * @see {@link http://fabricjs.com/dynamic-patterns|DynamicPattern demo}\n   * @see {@link fabric.Pattern#initialize} for constructor definition\n   */\n\n\n  fabric.Pattern = fabric.util.createClass(/** @lends fabric.Pattern.prototype */ {\n\n    /**\n     * Repeat property of a pattern (one of repeat, repeat-x, repeat-y or no-repeat)\n     * @type String\n     * @default\n     */\n    repeat: 'repeat',\n\n    /**\n     * Pattern horizontal offset from object's left/top corner\n     * @type Number\n     * @default\n     */\n    offsetX: 0,\n\n    /**\n     * Pattern vertical offset from object's left/top corner\n     * @type Number\n     * @default\n     */\n    offsetY: 0,\n\n    /**\n     * crossOrigin value (one of \"\", \"anonymous\", \"use-credentials\")\n     * @see https://developer.mozilla.org/en-US/docs/HTML/CORS_settings_attributes\n     * @type String\n     * @default\n     */\n    crossOrigin: '',\n\n    /**\n     * transform matrix to change the pattern, imported from svgs.\n     * @type Array\n     * @default\n     */\n    patternTransform: null,\n\n    /**\n     * Constructor\n     * @param {Object} [options] Options object\n     * @param {Function} [callback] function to invoke after callback init.\n     * @return {fabric.Pattern} thisArg\n     */\n    initialize: function(options, callback) {\n      options || (options = { });\n\n      this.id = fabric.Object.__uid++;\n      this.setOptions(options);\n      if (!options.source || (options.source && typeof options.source !== 'string')) {\n        callback && callback(this);\n        return;\n      }\n      else {\n        // img src string\n        var _this = this;\n        this.source = fabric.util.createImage();\n        fabric.util.loadImage(options.source, function(img, isError) {\n          _this.source = img;\n          callback && callback(_this, isError);\n        }, null, this.crossOrigin);\n      }\n    },\n\n    /**\n     * Returns object representation of a pattern\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {Object} Object representation of a pattern instance\n     */\n    toObject: function(propertiesToInclude) {\n      var NUM_FRACTION_DIGITS = fabric.Object.NUM_FRACTION_DIGITS,\n          source, object;\n\n      // <img> element\n      if (typeof this.source.src === 'string') {\n        source = this.source.src;\n      }\n      // <canvas> element\n      else if (typeof this.source === 'object' && this.source.toDataURL) {\n        source = this.source.toDataURL();\n      }\n\n      object = {\n        type: 'pattern',\n        source: source,\n        repeat: this.repeat,\n        crossOrigin: this.crossOrigin,\n        offsetX: toFixed(this.offsetX, NUM_FRACTION_DIGITS),\n        offsetY: toFixed(this.offsetY, NUM_FRACTION_DIGITS),\n        patternTransform: this.patternTransform ? this.patternTransform.concat() : null\n      };\n      fabric.util.populateWithProperties(this, object, propertiesToInclude);\n\n      return object;\n    },\n\n    /* _TO_SVG_START_ */\n    /**\n     * Returns SVG representation of a pattern\n     * @param {fabric.Object} object\n     * @return {String} SVG representation of a pattern\n     */\n    toSVG: function(object) {\n      var patternSource = typeof this.source === 'function' ? this.source() : this.source,\n          patternWidth = patternSource.width / object.width,\n          patternHeight = patternSource.height / object.height,\n          patternOffsetX = this.offsetX / object.width,\n          patternOffsetY = this.offsetY / object.height,\n          patternImgSrc = '';\n      if (this.repeat === 'repeat-x' || this.repeat === 'no-repeat') {\n        patternHeight = 1;\n        if (patternOffsetY) {\n          patternHeight += Math.abs(patternOffsetY);\n        }\n      }\n      if (this.repeat === 'repeat-y' || this.repeat === 'no-repeat') {\n        patternWidth = 1;\n        if (patternOffsetX) {\n          patternWidth += Math.abs(patternOffsetX);\n        }\n\n      }\n      if (patternSource.src) {\n        patternImgSrc = patternSource.src;\n      }\n      else if (patternSource.toDataURL) {\n        patternImgSrc = patternSource.toDataURL();\n      }\n\n      return '<pattern id=\"SVGID_' + this.id +\n                    '\" x=\"' + patternOffsetX +\n                    '\" y=\"' + patternOffsetY +\n                    '\" width=\"' + patternWidth +\n                    '\" height=\"' + patternHeight + '\">\\n' +\n               '<image x=\"0\" y=\"0\"' +\n                      ' width=\"' + patternSource.width +\n                      '\" height=\"' + patternSource.height +\n                      '\" xlink:href=\"' + patternImgSrc +\n               '\"></image>\\n' +\n             '</pattern>\\n';\n    },\n    /* _TO_SVG_END_ */\n\n    setOptions: function(options) {\n      for (var prop in options) {\n        this[prop] = options[prop];\n      }\n    },\n\n    /**\n     * Returns an instance of CanvasPattern\n     * @param {CanvasRenderingContext2D} ctx Context to create pattern\n     * @return {CanvasPattern}\n     */\n    toLive: function(ctx) {\n      var source = this.source;\n      // if the image failed to load, return, and allow rest to continue loading\n      if (!source) {\n        return '';\n      }\n\n      // if an image\n      if (typeof source.src !== 'undefined') {\n        if (!source.complete) {\n          return '';\n        }\n        if (source.naturalWidth === 0 || source.naturalHeight === 0) {\n          return '';\n        }\n      }\n      return ctx.createPattern(source, this.repeat);\n    }\n  });\n})();\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric = global.fabric || (global.fabric = { }),\n      toFixed = fabric.util.toFixed;\n\n  if (fabric.Shadow) {\n    fabric.warn('fabric.Shadow is already defined.');\n    return;\n  }\n\n  /**\n   * Shadow class\n   * @class fabric.Shadow\n   * @see {@link http://fabricjs.com/shadows|Shadow demo}\n   * @see {@link fabric.Shadow#initialize} for constructor definition\n   */\n  fabric.Shadow = fabric.util.createClass(/** @lends fabric.Shadow.prototype */ {\n\n    /**\n     * Shadow color\n     * @type String\n     * @default\n     */\n    color: 'rgb(0,0,0)',\n\n    /**\n     * Shadow blur\n     * @type Number\n     */\n    blur: 0,\n\n    /**\n     * Shadow horizontal offset\n     * @type Number\n     * @default\n     */\n    offsetX: 0,\n\n    /**\n     * Shadow vertical offset\n     * @type Number\n     * @default\n     */\n    offsetY: 0,\n\n    /**\n     * Whether the shadow should affect stroke operations\n     * @type Boolean\n     * @default\n     */\n    affectStroke: false,\n\n    /**\n     * Indicates whether toObject should include default values\n     * @type Boolean\n     * @default\n     */\n    includeDefaultValues: true,\n\n    /**\n     * When `false`, the shadow will scale with the object.\n     * When `true`, the shadow's offsetX, offsetY, and blur will not be affected by the object's scale.\n     * default to false\n     * @type Boolean\n     * @default\n     */\n    nonScaling: false,\n\n    /**\n     * Constructor\n     * @param {Object|String} [options] Options object with any of color, blur, offsetX, offsetY properties or string (e.g. \"rgba(0,0,0,0.2) 2px 2px 10px\")\n     * @return {fabric.Shadow} thisArg\n     */\n    initialize: function(options) {\n\n      if (typeof options === 'string') {\n        options = this._parseShadow(options);\n      }\n\n      for (var prop in options) {\n        this[prop] = options[prop];\n      }\n\n      this.id = fabric.Object.__uid++;\n    },\n\n    /**\n     * @private\n     * @param {String} shadow Shadow value to parse\n     * @return {Object} Shadow object with color, offsetX, offsetY and blur\n     */\n    _parseShadow: function(shadow) {\n      var shadowStr = shadow.trim(),\n          offsetsAndBlur = fabric.Shadow.reOffsetsAndBlur.exec(shadowStr) || [],\n          color = shadowStr.replace(fabric.Shadow.reOffsetsAndBlur, '') || 'rgb(0,0,0)';\n\n      return {\n        color: color.trim(),\n        offsetX: parseFloat(offsetsAndBlur[1], 10) || 0,\n        offsetY: parseFloat(offsetsAndBlur[2], 10) || 0,\n        blur: parseFloat(offsetsAndBlur[3], 10) || 0\n      };\n    },\n\n    /**\n     * Returns a string representation of an instance\n     * @see http://www.w3.org/TR/css-text-decor-3/#text-shadow\n     * @return {String} Returns CSS3 text-shadow declaration\n     */\n    toString: function() {\n      return [this.offsetX, this.offsetY, this.blur, this.color].join('px ');\n    },\n\n    /* _TO_SVG_START_ */\n    /**\n     * Returns SVG representation of a shadow\n     * @param {fabric.Object} object\n     * @return {String} SVG representation of a shadow\n     */\n    toSVG: function(object) {\n      var fBoxX = 40, fBoxY = 40, NUM_FRACTION_DIGITS = fabric.Object.NUM_FRACTION_DIGITS,\n          offset = fabric.util.rotateVector(\n            { x: this.offsetX, y: this.offsetY },\n            fabric.util.degreesToRadians(-object.angle)),\n          BLUR_BOX = 20, color = new fabric.Color(this.color);\n\n      if (object.width && object.height) {\n        //http://www.w3.org/TR/SVG/filters.html#FilterEffectsRegion\n        // we add some extra space to filter box to contain the blur ( 20 )\n        fBoxX = toFixed((Math.abs(offset.x) + this.blur) / object.width, NUM_FRACTION_DIGITS) * 100 + BLUR_BOX;\n        fBoxY = toFixed((Math.abs(offset.y) + this.blur) / object.height, NUM_FRACTION_DIGITS) * 100 + BLUR_BOX;\n      }\n      if (object.flipX) {\n        offset.x *= -1;\n      }\n      if (object.flipY) {\n        offset.y *= -1;\n      }\n\n      return (\n        '<filter id=\"SVGID_' + this.id + '\" y=\"-' + fBoxY + '%\" height=\"' + (100 + 2 * fBoxY) + '%\" ' +\n          'x=\"-' + fBoxX + '%\" width=\"' + (100 + 2 * fBoxX) + '%\" ' + '>\\n' +\n          '\\t<feGaussianBlur in=\"SourceAlpha\" stdDeviation=\"' +\n            toFixed(this.blur ? this.blur / 2 : 0, NUM_FRACTION_DIGITS) + '\"></feGaussianBlur>\\n' +\n          '\\t<feOffset dx=\"' + toFixed(offset.x, NUM_FRACTION_DIGITS) +\n          '\" dy=\"' + toFixed(offset.y, NUM_FRACTION_DIGITS) + '\" result=\"oBlur\" ></feOffset>\\n' +\n          '\\t<feFlood flood-color=\"' + color.toRgb() + '\" flood-opacity=\"' + color.getAlpha() + '\"/>\\n' +\n          '\\t<feComposite in2=\"oBlur\" operator=\"in\" />\\n' +\n          '\\t<feMerge>\\n' +\n            '\\t\\t<feMergeNode></feMergeNode>\\n' +\n            '\\t\\t<feMergeNode in=\"SourceGraphic\"></feMergeNode>\\n' +\n          '\\t</feMerge>\\n' +\n        '</filter>\\n');\n    },\n    /* _TO_SVG_END_ */\n\n    /**\n     * Returns object representation of a shadow\n     * @return {Object} Object representation of a shadow instance\n     */\n    toObject: function() {\n      if (this.includeDefaultValues) {\n        return {\n          color: this.color,\n          blur: this.blur,\n          offsetX: this.offsetX,\n          offsetY: this.offsetY,\n          affectStroke: this.affectStroke,\n          nonScaling: this.nonScaling\n        };\n      }\n      var obj = { }, proto = fabric.Shadow.prototype;\n\n      ['color', 'blur', 'offsetX', 'offsetY', 'affectStroke', 'nonScaling'].forEach(function(prop) {\n        if (this[prop] !== proto[prop]) {\n          obj[prop] = this[prop];\n        }\n      }, this);\n\n      return obj;\n    }\n  });\n\n  /**\n   * Regex matching shadow offsetX, offsetY and blur (ex: \"2px 2px 10px rgba(0,0,0,0.2)\", \"rgb(0,255,0) 2px 2px\")\n   * @static\n   * @field\n   * @memberOf fabric.Shadow\n   */\n  // eslint-disable-next-line max-len\n  fabric.Shadow.reOffsetsAndBlur = /(?:\\s|^)(-?\\d+(?:\\.\\d*)?(?:px)?(?:\\s?|$))?(-?\\d+(?:\\.\\d*)?(?:px)?(?:\\s?|$))?(\\d+(?:\\.\\d*)?(?:px)?)?(?:\\s?|$)(?:$|\\s)/;\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function () {\n\n  'use strict';\n\n  if (fabric.StaticCanvas) {\n    fabric.warn('fabric.StaticCanvas is already defined.');\n    return;\n  }\n\n  // aliases for faster resolution\n  var extend = fabric.util.object.extend,\n      getElementOffset = fabric.util.getElementOffset,\n      removeFromArray = fabric.util.removeFromArray,\n      toFixed = fabric.util.toFixed,\n      transformPoint = fabric.util.transformPoint,\n      invertTransform = fabric.util.invertTransform,\n      getNodeCanvas = fabric.util.getNodeCanvas,\n      createCanvasElement = fabric.util.createCanvasElement,\n\n      CANVAS_INIT_ERROR = new Error('Could not initialize `canvas` element');\n\n  /**\n   * Static canvas class\n   * @class fabric.StaticCanvas\n   * @mixes fabric.Collection\n   * @mixes fabric.Observable\n   * @see {@link http://fabricjs.com/static_canvas|StaticCanvas demo}\n   * @see {@link fabric.StaticCanvas#initialize} for constructor definition\n   * @fires before:render\n   * @fires after:render\n   * @fires canvas:cleared\n   * @fires object:added\n   * @fires object:removed\n   */\n  fabric.StaticCanvas = fabric.util.createClass(fabric.CommonMethods, /** @lends fabric.StaticCanvas.prototype */ {\n\n    /**\n     * Constructor\n     * @param {HTMLElement | String} el &lt;canvas> element to initialize instance on\n     * @param {Object} [options] Options object\n     * @return {Object} thisArg\n     */\n    initialize: function(el, options) {\n      options || (options = { });\n      this.renderAndResetBound = this.renderAndReset.bind(this);\n      this.requestRenderAllBound = this.requestRenderAll.bind(this);\n      this._initStatic(el, options);\n    },\n\n    /**\n     * Background color of canvas instance.\n     * Should be set via {@link fabric.StaticCanvas#setBackgroundColor}.\n     * @type {(String|fabric.Pattern)}\n     * @default\n     */\n    backgroundColor: '',\n\n    /**\n     * Background image of canvas instance.\n     * since 2.4.0 image caching is active, please when putting an image as background, add to the\n     * canvas property a reference to the canvas it is on. Otherwise the image cannot detect the zoom\n     * vale. As an alternative you can disable image objectCaching\n     * @type fabric.Image\n     * @default\n     */\n    backgroundImage: null,\n\n    /**\n     * Overlay color of canvas instance.\n     * Should be set via {@link fabric.StaticCanvas#setOverlayColor}\n     * @since 1.3.9\n     * @type {(String|fabric.Pattern)}\n     * @default\n     */\n    overlayColor: '',\n\n    /**\n     * Overlay image of canvas instance.\n     * since 2.4.0 image caching is active, please when putting an image as overlay, add to the\n     * canvas property a reference to the canvas it is on. Otherwise the image cannot detect the zoom\n     * vale. As an alternative you can disable image objectCaching\n     * @type fabric.Image\n     * @default\n     */\n    overlayImage: null,\n\n    /**\n     * Indicates whether toObject/toDatalessObject should include default values\n     * if set to false, takes precedence over the object value.\n     * @type Boolean\n     * @default\n     */\n    includeDefaultValues: true,\n\n    /**\n     * Indicates whether objects' state should be saved\n     * @type Boolean\n     * @default\n     */\n    stateful: false,\n\n    /**\n     * Indicates whether {@link fabric.Collection.add}, {@link fabric.Collection.insertAt} and {@link fabric.Collection.remove},\n     * {@link fabric.StaticCanvas.moveTo}, {@link fabric.StaticCanvas.clear} and many more, should also re-render canvas.\n     * Disabling this option will not give a performance boost when adding/removing a lot of objects to/from canvas at once\n     * since the renders are quequed and executed one per frame.\n     * Disabling is suggested anyway and managing the renders of the app manually is not a big effort ( canvas.requestRenderAll() )\n     * Left default to true to do not break documentation and old app, fiddles.\n     * @type Boolean\n     * @default\n     */\n    renderOnAddRemove: true,\n\n    /**\n     * Indicates whether object controls (borders/controls) are rendered above overlay image\n     * @type Boolean\n     * @default\n     */\n    controlsAboveOverlay: false,\n\n    /**\n     * Indicates whether the browser can be scrolled when using a touchscreen and dragging on the canvas\n     * @type Boolean\n     * @default\n     */\n    allowTouchScrolling: false,\n\n    /**\n     * Indicates whether this canvas will use image smoothing, this is on by default in browsers\n     * @type Boolean\n     * @default\n     */\n    imageSmoothingEnabled: true,\n\n    /**\n     * The transformation (a Canvas 2D API transform matrix) which focuses the viewport\n     * @type Array\n     * @example <caption>Default transform</caption>\n     * canvas.viewportTransform = [1, 0, 0, 1, 0, 0];\n     * @example <caption>Scale by 70% and translate toward bottom-right by 50, without skewing</caption>\n     * canvas.viewportTransform = [0.7, 0, 0, 0.7, 50, 50];\n     * @default\n     */\n    viewportTransform: fabric.iMatrix.concat(),\n\n    /**\n     * if set to false background image is not affected by viewport transform\n     * @since 1.6.3\n     * @type Boolean\n     * @default\n     */\n    backgroundVpt: true,\n\n    /**\n     * if set to false overlya image is not affected by viewport transform\n     * @since 1.6.3\n     * @type Boolean\n     * @default\n     */\n    overlayVpt: true,\n\n    /**\n     * When true, canvas is scaled by devicePixelRatio for better rendering on retina screens\n     * @type Boolean\n     * @default\n     */\n    enableRetinaScaling: true,\n\n    /**\n     * Describe canvas element extension over design\n     * properties are tl,tr,bl,br.\n     * if canvas is not zoomed/panned those points are the four corner of canvas\n     * if canvas is viewportTransformed you those points indicate the extension\n     * of canvas element in plain untrasformed coordinates\n     * The coordinates get updated with @method calcViewportBoundaries.\n     * @memberOf fabric.StaticCanvas.prototype\n     */\n    vptCoords: { },\n\n    /**\n     * Based on vptCoords and object.aCoords, skip rendering of objects that\n     * are not included in current viewport.\n     * May greatly help in applications with crowded canvas and use of zoom/pan\n     * If One of the corner of the bounding box of the object is on the canvas\n     * the objects get rendered.\n     * @memberOf fabric.StaticCanvas.prototype\n     * @type Boolean\n     * @default\n     */\n    skipOffscreen: true,\n\n    /**\n     * a fabricObject that, without stroke define a clipping area with their shape. filled in black\n     * the clipPath object gets used when the canvas has rendered, and the context is placed in the\n     * top left corner of the canvas.\n     * clipPath will clip away controls, if you do not want this to happen use controlsAboveOverlay = true\n     * @type fabric.Object\n     */\n    clipPath: undefined,\n\n    /**\n     * @private\n     * @param {HTMLElement | String} el &lt;canvas> element to initialize instance on\n     * @param {Object} [options] Options object\n     */\n    _initStatic: function(el, options) {\n      var cb = this.requestRenderAllBound;\n      this._objects = [];\n      this._createLowerCanvas(el);\n      this._initOptions(options);\n      // only initialize retina scaling once\n      if (!this.interactive) {\n        this._initRetinaScaling();\n      }\n\n      if (options.overlayImage) {\n        this.setOverlayImage(options.overlayImage, cb);\n      }\n      if (options.backgroundImage) {\n        this.setBackgroundImage(options.backgroundImage, cb);\n      }\n      if (options.backgroundColor) {\n        this.setBackgroundColor(options.backgroundColor, cb);\n      }\n      if (options.overlayColor) {\n        this.setOverlayColor(options.overlayColor, cb);\n      }\n      this.calcOffset();\n    },\n\n    /**\n     * @private\n     */\n    _isRetinaScaling: function() {\n      return (fabric.devicePixelRatio > 1 && this.enableRetinaScaling);\n    },\n\n    /**\n     * @private\n     * @return {Number} retinaScaling if applied, otherwise 1;\n     */\n    getRetinaScaling: function() {\n      return this._isRetinaScaling() ? Math.max(1, fabric.devicePixelRatio) : 1;\n    },\n\n    /**\n     * @private\n     */\n    _initRetinaScaling: function() {\n      if (!this._isRetinaScaling()) {\n        return;\n      }\n      var scaleRatio = fabric.devicePixelRatio;\n      this.__initRetinaScaling(scaleRatio, this.lowerCanvasEl, this.contextContainer);\n      if (this.upperCanvasEl) {\n        this.__initRetinaScaling(scaleRatio, this.upperCanvasEl, this.contextTop);\n      }\n    },\n\n    __initRetinaScaling: function(scaleRatio, canvas, context) {\n      canvas.setAttribute('width', this.width * scaleRatio);\n      canvas.setAttribute('height', this.height * scaleRatio);\n      context.scale(scaleRatio, scaleRatio);\n    },\n\n\n    /**\n     * Calculates canvas element offset relative to the document\n     * This method is also attached as \"resize\" event handler of window\n     * @return {fabric.Canvas} instance\n     * @chainable\n     */\n    calcOffset: function () {\n      this._offset = getElementOffset(this.lowerCanvasEl);\n      return this;\n    },\n\n    /**\n     * Sets {@link fabric.StaticCanvas#overlayImage|overlay image} for this canvas\n     * @param {(fabric.Image|String)} image fabric.Image instance or URL of an image to set overlay to\n     * @param {Function} callback callback to invoke when image is loaded and set as an overlay\n     * @param {Object} [options] Optional options to set for the {@link fabric.Image|overlay image}.\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     * @see {@link http://jsfiddle.net/fabricjs/MnzHT/|jsFiddle demo}\n     * @example <caption>Normal overlayImage with left/top = 0</caption>\n     * canvas.setOverlayImage('http://fabricjs.com/assets/jail_cell_bars.png', canvas.renderAll.bind(canvas), {\n     *   // Needed to position overlayImage at 0/0\n     *   originX: 'left',\n     *   originY: 'top'\n     * });\n     * @example <caption>overlayImage with different properties</caption>\n     * canvas.setOverlayImage('http://fabricjs.com/assets/jail_cell_bars.png', canvas.renderAll.bind(canvas), {\n     *   opacity: 0.5,\n     *   angle: 45,\n     *   left: 400,\n     *   top: 400,\n     *   originX: 'left',\n     *   originY: 'top'\n     * });\n     * @example <caption>Stretched overlayImage #1 - width/height correspond to canvas width/height</caption>\n     * fabric.Image.fromURL('http://fabricjs.com/assets/jail_cell_bars.png', function(img, isError) {\n     *    img.set({width: canvas.width, height: canvas.height, originX: 'left', originY: 'top'});\n     *    canvas.setOverlayImage(img, canvas.renderAll.bind(canvas));\n     * });\n     * @example <caption>Stretched overlayImage #2 - width/height correspond to canvas width/height</caption>\n     * canvas.setOverlayImage('http://fabricjs.com/assets/jail_cell_bars.png', canvas.renderAll.bind(canvas), {\n     *   width: canvas.width,\n     *   height: canvas.height,\n     *   // Needed to position overlayImage at 0/0\n     *   originX: 'left',\n     *   originY: 'top'\n     * });\n     * @example <caption>overlayImage loaded from cross-origin</caption>\n     * canvas.setOverlayImage('http://fabricjs.com/assets/jail_cell_bars.png', canvas.renderAll.bind(canvas), {\n     *   opacity: 0.5,\n     *   angle: 45,\n     *   left: 400,\n     *   top: 400,\n     *   originX: 'left',\n     *   originY: 'top',\n     *   crossOrigin: 'anonymous'\n     * });\n     */\n    setOverlayImage: function (image, callback, options) {\n      return this.__setBgOverlayImage('overlayImage', image, callback, options);\n    },\n\n    /**\n     * Sets {@link fabric.StaticCanvas#backgroundImage|background image} for this canvas\n     * @param {(fabric.Image|String)} image fabric.Image instance or URL of an image to set background to\n     * @param {Function} callback Callback to invoke when image is loaded and set as background\n     * @param {Object} [options] Optional options to set for the {@link fabric.Image|background image}.\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     * @see {@link http://jsfiddle.net/djnr8o7a/28/|jsFiddle demo}\n     * @example <caption>Normal backgroundImage with left/top = 0</caption>\n     * canvas.setBackgroundImage('http://fabricjs.com/assets/honey_im_subtle.png', canvas.renderAll.bind(canvas), {\n     *   // Needed to position backgroundImage at 0/0\n     *   originX: 'left',\n     *   originY: 'top'\n     * });\n     * @example <caption>backgroundImage with different properties</caption>\n     * canvas.setBackgroundImage('http://fabricjs.com/assets/honey_im_subtle.png', canvas.renderAll.bind(canvas), {\n     *   opacity: 0.5,\n     *   angle: 45,\n     *   left: 400,\n     *   top: 400,\n     *   originX: 'left',\n     *   originY: 'top'\n     * });\n     * @example <caption>Stretched backgroundImage #1 - width/height correspond to canvas width/height</caption>\n     * fabric.Image.fromURL('http://fabricjs.com/assets/honey_im_subtle.png', function(img, isError) {\n     *    img.set({width: canvas.width, height: canvas.height, originX: 'left', originY: 'top'});\n     *    canvas.setBackgroundImage(img, canvas.renderAll.bind(canvas));\n     * });\n     * @example <caption>Stretched backgroundImage #2 - width/height correspond to canvas width/height</caption>\n     * canvas.setBackgroundImage('http://fabricjs.com/assets/honey_im_subtle.png', canvas.renderAll.bind(canvas), {\n     *   width: canvas.width,\n     *   height: canvas.height,\n     *   // Needed to position backgroundImage at 0/0\n     *   originX: 'left',\n     *   originY: 'top'\n     * });\n     * @example <caption>backgroundImage loaded from cross-origin</caption>\n     * canvas.setBackgroundImage('http://fabricjs.com/assets/honey_im_subtle.png', canvas.renderAll.bind(canvas), {\n     *   opacity: 0.5,\n     *   angle: 45,\n     *   left: 400,\n     *   top: 400,\n     *   originX: 'left',\n     *   originY: 'top',\n     *   crossOrigin: 'anonymous'\n     * });\n     */\n    // TODO: fix stretched examples\n    setBackgroundImage: function (image, callback, options) {\n      return this.__setBgOverlayImage('backgroundImage', image, callback, options);\n    },\n\n    /**\n     * Sets {@link fabric.StaticCanvas#overlayColor|foreground color} for this canvas\n     * @param {(String|fabric.Pattern)} overlayColor Color or pattern to set foreground color to\n     * @param {Function} callback Callback to invoke when foreground color is set\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     * @see {@link http://jsfiddle.net/fabricjs/pB55h/|jsFiddle demo}\n     * @example <caption>Normal overlayColor - color value</caption>\n     * canvas.setOverlayColor('rgba(255, 73, 64, 0.6)', canvas.renderAll.bind(canvas));\n     * @example <caption>fabric.Pattern used as overlayColor</caption>\n     * canvas.setOverlayColor({\n     *   source: 'http://fabricjs.com/assets/escheresque_ste.png'\n     * }, canvas.renderAll.bind(canvas));\n     * @example <caption>fabric.Pattern used as overlayColor with repeat and offset</caption>\n     * canvas.setOverlayColor({\n     *   source: 'http://fabricjs.com/assets/escheresque_ste.png',\n     *   repeat: 'repeat',\n     *   offsetX: 200,\n     *   offsetY: 100\n     * }, canvas.renderAll.bind(canvas));\n     */\n    setOverlayColor: function(overlayColor, callback) {\n      return this.__setBgOverlayColor('overlayColor', overlayColor, callback);\n    },\n\n    /**\n     * Sets {@link fabric.StaticCanvas#backgroundColor|background color} for this canvas\n     * @param {(String|fabric.Pattern)} backgroundColor Color or pattern to set background color to\n     * @param {Function} callback Callback to invoke when background color is set\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     * @see {@link http://jsfiddle.net/fabricjs/hXzvk/|jsFiddle demo}\n     * @example <caption>Normal backgroundColor - color value</caption>\n     * canvas.setBackgroundColor('rgba(255, 73, 64, 0.6)', canvas.renderAll.bind(canvas));\n     * @example <caption>fabric.Pattern used as backgroundColor</caption>\n     * canvas.setBackgroundColor({\n     *   source: 'http://fabricjs.com/assets/escheresque_ste.png'\n     * }, canvas.renderAll.bind(canvas));\n     * @example <caption>fabric.Pattern used as backgroundColor with repeat and offset</caption>\n     * canvas.setBackgroundColor({\n     *   source: 'http://fabricjs.com/assets/escheresque_ste.png',\n     *   repeat: 'repeat',\n     *   offsetX: 200,\n     *   offsetY: 100\n     * }, canvas.renderAll.bind(canvas));\n     */\n    setBackgroundColor: function(backgroundColor, callback) {\n      return this.__setBgOverlayColor('backgroundColor', backgroundColor, callback);\n    },\n\n    /**\n     * @private\n     * @param {String} property Property to set ({@link fabric.StaticCanvas#backgroundImage|backgroundImage}\n     * or {@link fabric.StaticCanvas#overlayImage|overlayImage})\n     * @param {(fabric.Image|String|null)} image fabric.Image instance, URL of an image or null to set background or overlay to\n     * @param {Function} callback Callback to invoke when image is loaded and set as background or overlay. The first argument is the created image, the second argument is a flag indicating whether an error occurred or not.\n     * @param {Object} [options] Optional options to set for the {@link fabric.Image|image}.\n     */\n    __setBgOverlayImage: function(property, image, callback, options) {\n      if (typeof image === 'string') {\n        fabric.util.loadImage(image, function(img, isError) {\n          if (img) {\n            var instance = new fabric.Image(img, options);\n            this[property] = instance;\n            instance.canvas = this;\n          }\n          callback && callback(img, isError);\n        }, this, options && options.crossOrigin);\n      }\n      else {\n        options && image.setOptions(options);\n        this[property] = image;\n        image && (image.canvas = this);\n        callback && callback(image, false);\n      }\n\n      return this;\n    },\n\n    /**\n     * @private\n     * @param {String} property Property to set ({@link fabric.StaticCanvas#backgroundColor|backgroundColor}\n     * or {@link fabric.StaticCanvas#overlayColor|overlayColor})\n     * @param {(Object|String|null)} color Object with pattern information, color value or null\n     * @param {Function} [callback] Callback is invoked when color is set\n     */\n    __setBgOverlayColor: function(property, color, callback) {\n      this[property] = color;\n      this._initGradient(color, property);\n      this._initPattern(color, property, callback);\n      return this;\n    },\n\n    /**\n     * @private\n     */\n    _createCanvasElement: function() {\n      var element = createCanvasElement();\n      if (!element) {\n        throw CANVAS_INIT_ERROR;\n      }\n      if (!element.style) {\n        element.style = { };\n      }\n      if (typeof element.getContext === 'undefined') {\n        throw CANVAS_INIT_ERROR;\n      }\n      return element;\n    },\n\n    /**\n     * @private\n     * @param {Object} [options] Options object\n     */\n    _initOptions: function (options) {\n      var lowerCanvasEl = this.lowerCanvasEl;\n      this._setOptions(options);\n\n      this.width = this.width || parseInt(lowerCanvasEl.width, 10) || 0;\n      this.height = this.height || parseInt(lowerCanvasEl.height, 10) || 0;\n\n      if (!this.lowerCanvasEl.style) {\n        return;\n      }\n\n      lowerCanvasEl.width = this.width;\n      lowerCanvasEl.height = this.height;\n\n      lowerCanvasEl.style.width = this.width + 'px';\n      lowerCanvasEl.style.height = this.height + 'px';\n\n      this.viewportTransform = this.viewportTransform.slice();\n    },\n\n    /**\n     * Creates a bottom canvas\n     * @private\n     * @param {HTMLElement} [canvasEl]\n     */\n    _createLowerCanvas: function (canvasEl) {\n      // canvasEl === 'HTMLCanvasElement' does not work on jsdom/node\n      if (canvasEl && canvasEl.getContext) {\n        this.lowerCanvasEl = canvasEl;\n      }\n      else {\n        this.lowerCanvasEl = fabric.util.getById(canvasEl) || this._createCanvasElement();\n      }\n\n      fabric.util.addClass(this.lowerCanvasEl, 'lower-canvas');\n      this._originalCanvasStyle = this.lowerCanvasEl.style;\n      if (this.interactive) {\n        this._applyCanvasStyle(this.lowerCanvasEl);\n      }\n\n      this.contextContainer = this.lowerCanvasEl.getContext('2d');\n    },\n\n    /**\n     * Returns canvas width (in px)\n     * @return {Number}\n     */\n    getWidth: function () {\n      return this.width;\n    },\n\n    /**\n     * Returns canvas height (in px)\n     * @return {Number}\n     */\n    getHeight: function () {\n      return this.height;\n    },\n\n    /**\n     * Sets width of this canvas instance\n     * @param {Number|String} value                         Value to set width to\n     * @param {Object}        [options]                     Options object\n     * @param {Boolean}       [options.backstoreOnly=false] Set the given dimensions only as canvas backstore dimensions\n     * @param {Boolean}       [options.cssOnly=false]       Set the given dimensions only as css dimensions\n     * @return {fabric.Canvas} instance\n     * @chainable true\n     */\n    setWidth: function (value, options) {\n      return this.setDimensions({ width: value }, options);\n    },\n\n    /**\n     * Sets height of this canvas instance\n     * @param {Number|String} value                         Value to set height to\n     * @param {Object}        [options]                     Options object\n     * @param {Boolean}       [options.backstoreOnly=false] Set the given dimensions only as canvas backstore dimensions\n     * @param {Boolean}       [options.cssOnly=false]       Set the given dimensions only as css dimensions\n     * @return {fabric.Canvas} instance\n     * @chainable true\n     */\n    setHeight: function (value, options) {\n      return this.setDimensions({ height: value }, options);\n    },\n\n    /**\n     * Sets dimensions (width, height) of this canvas instance. when options.cssOnly flag active you should also supply the unit of measure (px/%/em)\n     * @param {Object}        dimensions                    Object with width/height properties\n     * @param {Number|String} [dimensions.width]            Width of canvas element\n     * @param {Number|String} [dimensions.height]           Height of canvas element\n     * @param {Object}        [options]                     Options object\n     * @param {Boolean}       [options.backstoreOnly=false] Set the given dimensions only as canvas backstore dimensions\n     * @param {Boolean}       [options.cssOnly=false]       Set the given dimensions only as css dimensions\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     */\n    setDimensions: function (dimensions, options) {\n      var cssValue;\n\n      options = options || {};\n\n      for (var prop in dimensions) {\n        cssValue = dimensions[prop];\n\n        if (!options.cssOnly) {\n          this._setBackstoreDimension(prop, dimensions[prop]);\n          cssValue += 'px';\n          this.hasLostContext = true;\n        }\n\n        if (!options.backstoreOnly) {\n          this._setCssDimension(prop, cssValue);\n        }\n      }\n      if (this._isCurrentlyDrawing) {\n        this.freeDrawingBrush && this.freeDrawingBrush._setBrushStyles(this.contextTop);\n      }\n      this._initRetinaScaling();\n      this.calcOffset();\n\n      if (!options.cssOnly) {\n        this.requestRenderAll();\n      }\n\n      return this;\n    },\n\n    /**\n     * Helper for setting width/height\n     * @private\n     * @param {String} prop property (width|height)\n     * @param {Number} value value to set property to\n     * @return {fabric.Canvas} instance\n     * @chainable true\n     */\n    _setBackstoreDimension: function (prop, value) {\n      this.lowerCanvasEl[prop] = value;\n\n      if (this.upperCanvasEl) {\n        this.upperCanvasEl[prop] = value;\n      }\n\n      if (this.cacheCanvasEl) {\n        this.cacheCanvasEl[prop] = value;\n      }\n\n      this[prop] = value;\n\n      return this;\n    },\n\n    /**\n     * Helper for setting css width/height\n     * @private\n     * @param {String} prop property (width|height)\n     * @param {String} value value to set property to\n     * @return {fabric.Canvas} instance\n     * @chainable true\n     */\n    _setCssDimension: function (prop, value) {\n      this.lowerCanvasEl.style[prop] = value;\n\n      if (this.upperCanvasEl) {\n        this.upperCanvasEl.style[prop] = value;\n      }\n\n      if (this.wrapperEl) {\n        this.wrapperEl.style[prop] = value;\n      }\n\n      return this;\n    },\n\n    /**\n     * Returns canvas zoom level\n     * @return {Number}\n     */\n    getZoom: function () {\n      return this.viewportTransform[0];\n    },\n\n    /**\n     * Sets viewport transformation of this canvas instance\n     * @param {Array} vpt a Canvas 2D API transform matrix\n     * @return {fabric.Canvas} instance\n     * @chainable true\n     */\n    setViewportTransform: function (vpt) {\n      var activeObject = this._activeObject,\n          backgroundObject = this.backgroundImage,\n          overlayObject = this.overlayImage,\n          object, i, len;\n      this.viewportTransform = vpt;\n      for (i = 0, len = this._objects.length; i < len; i++) {\n        object = this._objects[i];\n        object.group || object.setCoords(true);\n      }\n      if (activeObject) {\n        activeObject.setCoords();\n      }\n      if (backgroundObject) {\n        backgroundObject.setCoords(true);\n      }\n      if (overlayObject) {\n        overlayObject.setCoords(true);\n      }\n      this.calcViewportBoundaries();\n      this.renderOnAddRemove && this.requestRenderAll();\n      return this;\n    },\n\n    /**\n     * Sets zoom level of this canvas instance, the zoom centered around point\n     * meaning that following zoom to point with the same point will have the visual\n     * effect of the zoom originating from that point. The point won't move.\n     * It has nothing to do with canvas center or visual center of the viewport.\n     * @param {fabric.Point} point to zoom with respect to\n     * @param {Number} value to set zoom to, less than 1 zooms out\n     * @return {fabric.Canvas} instance\n     * @chainable true\n     */\n    zoomToPoint: function (point, value) {\n      // TODO: just change the scale, preserve other transformations\n      var before = point, vpt = this.viewportTransform.slice(0);\n      point = transformPoint(point, invertTransform(this.viewportTransform));\n      vpt[0] = value;\n      vpt[3] = value;\n      var after = transformPoint(point, vpt);\n      vpt[4] += before.x - after.x;\n      vpt[5] += before.y - after.y;\n      return this.setViewportTransform(vpt);\n    },\n\n    /**\n     * Sets zoom level of this canvas instance\n     * @param {Number} value to set zoom to, less than 1 zooms out\n     * @return {fabric.Canvas} instance\n     * @chainable true\n     */\n    setZoom: function (value) {\n      this.zoomToPoint(new fabric.Point(0, 0), value);\n      return this;\n    },\n\n    /**\n     * Pan viewport so as to place point at top left corner of canvas\n     * @param {fabric.Point} point to move to\n     * @return {fabric.Canvas} instance\n     * @chainable true\n     */\n    absolutePan: function (point) {\n      var vpt = this.viewportTransform.slice(0);\n      vpt[4] = -point.x;\n      vpt[5] = -point.y;\n      return this.setViewportTransform(vpt);\n    },\n\n    /**\n     * Pans viewpoint relatively\n     * @param {fabric.Point} point (position vector) to move by\n     * @return {fabric.Canvas} instance\n     * @chainable true\n     */\n    relativePan: function (point) {\n      return this.absolutePan(new fabric.Point(\n        -point.x - this.viewportTransform[4],\n        -point.y - this.viewportTransform[5]\n      ));\n    },\n\n    /**\n     * Returns &lt;canvas> element corresponding to this instance\n     * @return {HTMLCanvasElement}\n     */\n    getElement: function () {\n      return this.lowerCanvasEl;\n    },\n\n    /**\n     * @private\n     * @param {fabric.Object} obj Object that was added\n     */\n    _onObjectAdded: function(obj) {\n      this.stateful && obj.setupState();\n      obj._set('canvas', this);\n      obj.setCoords();\n      this.fire('object:added', { target: obj });\n      obj.fire('added');\n    },\n\n    /**\n     * @private\n     * @param {fabric.Object} obj Object that was removed\n     */\n    _onObjectRemoved: function(obj) {\n      this.fire('object:removed', { target: obj });\n      obj.fire('removed');\n      delete obj.canvas;\n    },\n\n    /**\n     * Clears specified context of canvas element\n     * @param {CanvasRenderingContext2D} ctx Context to clear\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     */\n    clearContext: function(ctx) {\n      ctx.clearRect(0, 0, this.width, this.height);\n      return this;\n    },\n\n    /**\n     * Returns context of canvas where objects are drawn\n     * @return {CanvasRenderingContext2D}\n     */\n    getContext: function () {\n      return this.contextContainer;\n    },\n\n    /**\n     * Clears all contexts (background, main, top) of an instance\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     */\n    clear: function () {\n      this.remove.apply(this, this.getObjects());\n      this.backgroundImage = null;\n      this.overlayImage = null;\n      this.backgroundColor = '';\n      this.overlayColor = '';\n      if (this._hasITextHandlers) {\n        this.off('mouse:up', this._mouseUpITextHandler);\n        this._iTextInstances = null;\n        this._hasITextHandlers = false;\n      }\n      this.clearContext(this.contextContainer);\n      this.fire('canvas:cleared');\n      this.renderOnAddRemove && this.requestRenderAll();\n      return this;\n    },\n\n    /**\n     * Renders the canvas\n     * @return {fabric.Canvas} instance\n     * @chainable\n     */\n    renderAll: function () {\n      var canvasToDrawOn = this.contextContainer;\n      this.renderCanvas(canvasToDrawOn, this._objects);\n      return this;\n    },\n\n    /**\n     * Function created to be instance bound at initialization\n     * used in requestAnimationFrame rendering\n     * Let the fabricJS call it. If you call it manually you could have more\n     * animationFrame stacking on to of each other\n     * for an imperative rendering, use canvas.renderAll\n     * @private\n     * @return {fabric.Canvas} instance\n     * @chainable\n     */\n    renderAndReset: function() {\n      this.isRendering = 0;\n      this.renderAll();\n    },\n\n    /**\n     * Append a renderAll request to next animation frame.\n     * unless one is already in progress, in that case nothing is done\n     * a boolean flag will avoid appending more.\n     * @return {fabric.Canvas} instance\n     * @chainable\n     */\n    requestRenderAll: function () {\n      if (!this.isRendering) {\n        this.isRendering = fabric.util.requestAnimFrame(this.renderAndResetBound);\n      }\n      return this;\n    },\n\n    /**\n     * Calculate the position of the 4 corner of canvas with current viewportTransform.\n     * helps to determinate when an object is in the current rendering viewport using\n     * object absolute coordinates ( aCoords )\n     * @return {Object} points.tl\n     * @chainable\n     */\n    calcViewportBoundaries: function() {\n      var points = { }, width = this.width, height = this.height,\n          iVpt = invertTransform(this.viewportTransform);\n      points.tl = transformPoint({ x: 0, y: 0 }, iVpt);\n      points.br = transformPoint({ x: width, y: height }, iVpt);\n      points.tr = new fabric.Point(points.br.x, points.tl.y);\n      points.bl = new fabric.Point(points.tl.x, points.br.y);\n      this.vptCoords = points;\n      return points;\n    },\n\n    cancelRequestedRender: function() {\n      if (this.isRendering) {\n        fabric.util.cancelAnimFrame(this.isRendering);\n        this.isRendering = 0;\n      }\n    },\n\n    /**\n     * Renders background, objects, overlay and controls.\n     * @param {CanvasRenderingContext2D} ctx\n     * @param {Array} objects to render\n     * @return {fabric.Canvas} instance\n     * @chainable\n     */\n    renderCanvas: function(ctx, objects) {\n      var v = this.viewportTransform, path = this.clipPath;\n      this.cancelRequestedRender();\n      this.calcViewportBoundaries();\n      this.clearContext(ctx);\n      fabric.util.setImageSmoothing(ctx, this.imageSmoothingEnabled);\n      this.fire('before:render', { ctx: ctx, });\n      this._renderBackground(ctx);\n\n      ctx.save();\n      //apply viewport transform once for all rendering process\n      ctx.transform(v[0], v[1], v[2], v[3], v[4], v[5]);\n      this._renderObjects(ctx, objects);\n      ctx.restore();\n      if (!this.controlsAboveOverlay && this.interactive) {\n        this.drawControls(ctx);\n      }\n      if (path) {\n        path.canvas = this;\n        // needed to setup a couple of variables\n        path.shouldCache();\n        path._transformDone = true;\n        path.renderCache({ forClipping: true });\n        this.drawClipPathOnCanvas(ctx);\n      }\n      this._renderOverlay(ctx);\n      if (this.controlsAboveOverlay && this.interactive) {\n        this.drawControls(ctx);\n      }\n      this.fire('after:render', { ctx: ctx, });\n    },\n\n    /**\n     * Paint the cached clipPath on the lowerCanvasEl\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    drawClipPathOnCanvas: function(ctx) {\n      var v = this.viewportTransform, path = this.clipPath;\n      ctx.save();\n      ctx.transform(v[0], v[1], v[2], v[3], v[4], v[5]);\n      // DEBUG: uncomment this line, comment the following\n      // ctx.globalAlpha = 0.4;\n      ctx.globalCompositeOperation = 'destination-in';\n      path.transform(ctx);\n      ctx.scale(1 / path.zoomX, 1 / path.zoomY);\n      ctx.drawImage(path._cacheCanvas, -path.cacheTranslationX, -path.cacheTranslationY);\n      ctx.restore();\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     * @param {Array} objects to render\n     */\n    _renderObjects: function(ctx, objects) {\n      var i, len;\n      for (i = 0, len = objects.length; i < len; ++i) {\n        objects[i] && objects[i].render(ctx);\n      }\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     * @param {string} property 'background' or 'overlay'\n     */\n    _renderBackgroundOrOverlay: function(ctx, property) {\n      var fill = this[property + 'Color'], object = this[property + 'Image'],\n          v = this.viewportTransform, needsVpt = this[property + 'Vpt'];\n      if (!fill && !object) {\n        return;\n      }\n      if (fill) {\n        ctx.save();\n        ctx.beginPath();\n        ctx.moveTo(0, 0);\n        ctx.lineTo(this.width, 0);\n        ctx.lineTo(this.width, this.height);\n        ctx.lineTo(0, this.height);\n        ctx.closePath();\n        ctx.fillStyle = fill.toLive\n          ? fill.toLive(ctx, this)\n          : fill;\n        if (needsVpt) {\n          ctx.transform(v[0], v[1], v[2], v[3], v[4], v[5]);\n        }\n        ctx.transform(1, 0, 0, 1, fill.offsetX || 0, fill.offsetY || 0);\n        var m = fill.gradientTransform || fill.patternTransform;\n        m && ctx.transform(m[0], m[1], m[2], m[3], m[4], m[5]);\n        ctx.fill();\n        ctx.restore();\n      }\n      if (object) {\n        ctx.save();\n        if (needsVpt) {\n          ctx.transform(v[0], v[1], v[2], v[3], v[4], v[5]);\n        }\n        object.render(ctx);\n        ctx.restore();\n      }\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _renderBackground: function(ctx) {\n      this._renderBackgroundOrOverlay(ctx, 'background');\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _renderOverlay: function(ctx) {\n      this._renderBackgroundOrOverlay(ctx, 'overlay');\n    },\n\n    /**\n     * Returns coordinates of a center of canvas.\n     * Returned value is an object with top and left properties\n     * @return {Object} object with \"top\" and \"left\" number values\n     * @deprecated migrate to `getCenterPoint`\n     */\n    getCenter: function () {\n      return {\n        top: this.height / 2,\n        left: this.width / 2\n      };\n    },\n\n    /**\n     * Returns coordinates of a center of canvas.\n     * @return {fabric.Point} \n     */\n    getCenterPoint: function () {\n      return new fabric.Point(this.width / 2, this.height / 2);\n    },\n\n    /**\n     * Centers object horizontally in the canvas\n     * @param {fabric.Object} object Object to center horizontally\n     * @return {fabric.Canvas} thisArg\n     */\n    centerObjectH: function (object) {\n      return this._centerObject(object, new fabric.Point(this.getCenterPoint().x, object.getCenterPoint().y));\n    },\n\n    /**\n     * Centers object vertically in the canvas\n     * @param {fabric.Object} object Object to center vertically\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     */\n    centerObjectV: function (object) {\n      return this._centerObject(object, new fabric.Point(object.getCenterPoint().x, this.getCenterPoint().y));\n    },\n\n    /**\n     * Centers object vertically and horizontally in the canvas\n     * @param {fabric.Object} object Object to center vertically and horizontally\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     */\n    centerObject: function(object) {\n      var center = this.getCenterPoint();\n      return this._centerObject(object, center);\n    },\n\n    /**\n     * Centers object vertically and horizontally in the viewport\n     * @param {fabric.Object} object Object to center vertically and horizontally\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     */\n    viewportCenterObject: function(object) {\n      var vpCenter = this.getVpCenter();\n      return this._centerObject(object, vpCenter);\n    },\n\n    /**\n     * Centers object horizontally in the viewport, object.top is unchanged\n     * @param {fabric.Object} object Object to center vertically and horizontally\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     */\n    viewportCenterObjectH: function(object) {\n      var vpCenter = this.getVpCenter();\n      this._centerObject(object, new fabric.Point(vpCenter.x, object.getCenterPoint().y));\n      return this;\n    },\n\n    /**\n     * Centers object Vertically in the viewport, object.top is unchanged\n     * @param {fabric.Object} object Object to center vertically and horizontally\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     */\n    viewportCenterObjectV: function(object) {\n      var vpCenter = this.getVpCenter();\n\n      return this._centerObject(object, new fabric.Point(object.getCenterPoint().x, vpCenter.y));\n    },\n\n    /**\n     * Calculate the point in canvas that correspond to the center of actual viewport.\n     * @return {fabric.Point} vpCenter, viewport center\n     * @chainable\n     */\n    getVpCenter: function() {\n      var center = this.getCenterPoint(),\n          iVpt = invertTransform(this.viewportTransform);\n      return transformPoint(center, iVpt);\n    },\n\n    /**\n     * @private\n     * @param {fabric.Object} object Object to center\n     * @param {fabric.Point} center Center point\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     */\n    _centerObject: function(object, center) {\n      object.setPositionByOrigin(center, 'center', 'center');\n      object.setCoords();\n      this.renderOnAddRemove && this.requestRenderAll();\n      return this;\n    },\n\n    /**\n     * Returns dataless JSON representation of canvas\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {String} json string\n     */\n    toDatalessJSON: function (propertiesToInclude) {\n      return this.toDatalessObject(propertiesToInclude);\n    },\n\n    /**\n     * Returns object representation of canvas\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {Object} object representation of an instance\n     */\n    toObject: function (propertiesToInclude) {\n      return this._toObjectMethod('toObject', propertiesToInclude);\n    },\n\n    /**\n     * Returns dataless object representation of canvas\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {Object} object representation of an instance\n     */\n    toDatalessObject: function (propertiesToInclude) {\n      return this._toObjectMethod('toDatalessObject', propertiesToInclude);\n    },\n\n    /**\n     * @private\n     */\n    _toObjectMethod: function (methodName, propertiesToInclude) {\n\n      var clipPath = this.clipPath, data = {\n        version: fabric.version,\n        objects: this._toObjects(methodName, propertiesToInclude),\n      };\n      if (clipPath && !clipPath.excludeFromExport) {\n        data.clipPath = this._toObject(this.clipPath, methodName, propertiesToInclude);\n      }\n      extend(data, this.__serializeBgOverlay(methodName, propertiesToInclude));\n\n      fabric.util.populateWithProperties(this, data, propertiesToInclude);\n\n      return data;\n    },\n\n    /**\n     * @private\n     */\n    _toObjects: function(methodName, propertiesToInclude) {\n      return this._objects.filter(function(object) {\n        return !object.excludeFromExport;\n      }).map(function(instance) {\n        return this._toObject(instance, methodName, propertiesToInclude);\n      }, this);\n    },\n\n    /**\n     * @private\n     */\n    _toObject: function(instance, methodName, propertiesToInclude) {\n      var originalValue;\n\n      if (!this.includeDefaultValues) {\n        originalValue = instance.includeDefaultValues;\n        instance.includeDefaultValues = false;\n      }\n\n      var object = instance[methodName](propertiesToInclude);\n      if (!this.includeDefaultValues) {\n        instance.includeDefaultValues = originalValue;\n      }\n      return object;\n    },\n\n    /**\n     * @private\n     */\n    __serializeBgOverlay: function(methodName, propertiesToInclude) {\n      var data = {}, bgImage = this.backgroundImage, overlayImage = this.overlayImage,\n          bgColor = this.backgroundColor, overlayColor = this.overlayColor;\n\n      if (bgColor && bgColor.toObject) {\n        if (!bgColor.excludeFromExport) {\n          data.background = bgColor.toObject(propertiesToInclude);\n        }\n      }\n      else if (bgColor) {\n        data.background = bgColor;\n      }\n\n      if (overlayColor && overlayColor.toObject) {\n        if (!overlayColor.excludeFromExport) {\n          data.overlay = overlayColor.toObject(propertiesToInclude);\n        }\n      }\n      else if (overlayColor) {\n        data.overlay = overlayColor;\n      }\n\n      if (bgImage && !bgImage.excludeFromExport) {\n        data.backgroundImage = this._toObject(bgImage, methodName, propertiesToInclude);\n      }\n      if (overlayImage && !overlayImage.excludeFromExport) {\n        data.overlayImage = this._toObject(overlayImage, methodName, propertiesToInclude);\n      }\n\n      return data;\n    },\n\n    /* _TO_SVG_START_ */\n    /**\n     * When true, getSvgTransform() will apply the StaticCanvas.viewportTransform to the SVG transformation. When true,\n     * a zoomed canvas will then produce zoomed SVG output.\n     * @type Boolean\n     * @default\n     */\n    svgViewportTransformation: true,\n\n    /**\n     * Returns SVG representation of canvas\n     * @function\n     * @param {Object} [options] Options object for SVG output\n     * @param {Boolean} [options.suppressPreamble=false] If true xml tag is not included\n     * @param {Object} [options.viewBox] SVG viewbox object\n     * @param {Number} [options.viewBox.x] x-coordinate of viewbox\n     * @param {Number} [options.viewBox.y] y-coordinate of viewbox\n     * @param {Number} [options.viewBox.width] Width of viewbox\n     * @param {Number} [options.viewBox.height] Height of viewbox\n     * @param {String} [options.encoding=UTF-8] Encoding of SVG output\n     * @param {String} [options.width] desired width of svg with or without units\n     * @param {String} [options.height] desired height of svg with or without units\n     * @param {Function} [reviver] Method for further parsing of svg elements, called after each fabric object converted into svg representation.\n     * @return {String} SVG string\n     * @tutorial {@link http://fabricjs.com/fabric-intro-part-3#serialization}\n     * @see {@link http://jsfiddle.net/fabricjs/jQ3ZZ/|jsFiddle demo}\n     * @example <caption>Normal SVG output</caption>\n     * var svg = canvas.toSVG();\n     * @example <caption>SVG output without preamble (without &lt;?xml ../>)</caption>\n     * var svg = canvas.toSVG({suppressPreamble: true});\n     * @example <caption>SVG output with viewBox attribute</caption>\n     * var svg = canvas.toSVG({\n     *   viewBox: {\n     *     x: 100,\n     *     y: 100,\n     *     width: 200,\n     *     height: 300\n     *   }\n     * });\n     * @example <caption>SVG output with different encoding (default: UTF-8)</caption>\n     * var svg = canvas.toSVG({encoding: 'ISO-8859-1'});\n     * @example <caption>Modify SVG output with reviver function</caption>\n     * var svg = canvas.toSVG(null, function(svg) {\n     *   return svg.replace('stroke-dasharray: ; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; ', '');\n     * });\n     */\n    toSVG: function(options, reviver) {\n      options || (options = { });\n      options.reviver = reviver;\n      var markup = [];\n\n      this._setSVGPreamble(markup, options);\n      this._setSVGHeader(markup, options);\n      if (this.clipPath) {\n        markup.push('<g clip-path=\"url(#' + this.clipPath.clipPathId + ')\" >\\n');\n      }\n      this._setSVGBgOverlayColor(markup, 'background');\n      this._setSVGBgOverlayImage(markup, 'backgroundImage', reviver);\n      this._setSVGObjects(markup, reviver);\n      if (this.clipPath) {\n        markup.push('</g>\\n');\n      }\n      this._setSVGBgOverlayColor(markup, 'overlay');\n      this._setSVGBgOverlayImage(markup, 'overlayImage', reviver);\n\n      markup.push('</svg>');\n\n      return markup.join('');\n    },\n\n    /**\n     * @private\n     */\n    _setSVGPreamble: function(markup, options) {\n      if (options.suppressPreamble) {\n        return;\n      }\n      markup.push(\n        '<?xml version=\"1.0\" encoding=\"', (options.encoding || 'UTF-8'), '\" standalone=\"no\" ?>\\n',\n        '<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" ',\n        '\"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">\\n'\n      );\n    },\n\n    /**\n     * @private\n     */\n    _setSVGHeader: function(markup, options) {\n      var width = options.width || this.width,\n          height = options.height || this.height,\n          vpt, viewBox = 'viewBox=\"0 0 ' + this.width + ' ' + this.height + '\" ',\n          NUM_FRACTION_DIGITS = fabric.Object.NUM_FRACTION_DIGITS;\n\n      if (options.viewBox) {\n        viewBox = 'viewBox=\"' +\n                options.viewBox.x + ' ' +\n                options.viewBox.y + ' ' +\n                options.viewBox.width + ' ' +\n                options.viewBox.height + '\" ';\n      }\n      else {\n        if (this.svgViewportTransformation) {\n          vpt = this.viewportTransform;\n          viewBox = 'viewBox=\"' +\n                  toFixed(-vpt[4] / vpt[0], NUM_FRACTION_DIGITS) + ' ' +\n                  toFixed(-vpt[5] / vpt[3], NUM_FRACTION_DIGITS) + ' ' +\n                  toFixed(this.width / vpt[0], NUM_FRACTION_DIGITS) + ' ' +\n                  toFixed(this.height / vpt[3], NUM_FRACTION_DIGITS) + '\" ';\n        }\n      }\n\n      markup.push(\n        '<svg ',\n        'xmlns=\"http://www.w3.org/2000/svg\" ',\n        'xmlns:xlink=\"http://www.w3.org/1999/xlink\" ',\n        'version=\"1.1\" ',\n        'width=\"', width, '\" ',\n        'height=\"', height, '\" ',\n        viewBox,\n        'xml:space=\"preserve\">\\n',\n        '<desc>Created with Fabric.js ', fabric.version, '</desc>\\n',\n        '<defs>\\n',\n        this.createSVGFontFacesMarkup(),\n        this.createSVGRefElementsMarkup(),\n        this.createSVGClipPathMarkup(options),\n        '</defs>\\n'\n      );\n    },\n\n    createSVGClipPathMarkup: function(options) {\n      var clipPath = this.clipPath;\n      if (clipPath) {\n        clipPath.clipPathId = 'CLIPPATH_' + fabric.Object.__uid++;\n        return  '<clipPath id=\"' + clipPath.clipPathId + '\" >\\n' +\n          this.clipPath.toClipPathSVG(options.reviver) +\n          '</clipPath>\\n';\n      }\n      return '';\n    },\n\n    /**\n     * Creates markup containing SVG referenced elements like patterns, gradients etc.\n     * @return {String}\n     */\n    createSVGRefElementsMarkup: function() {\n      var _this = this,\n          markup = ['background', 'overlay'].map(function(prop) {\n            var fill = _this[prop + 'Color'];\n            if (fill && fill.toLive) {\n              var shouldTransform = _this[prop + 'Vpt'], vpt = _this.viewportTransform,\n                  object = {\n                    width: _this.width / (shouldTransform ? vpt[0] : 1),\n                    height: _this.height / (shouldTransform ? vpt[3] : 1)\n                  };\n              return fill.toSVG(\n                object,\n                { additionalTransform: shouldTransform ? fabric.util.matrixToSVG(vpt) : '' }\n              );\n            }\n          });\n      return markup.join('');\n    },\n\n    /**\n     * Creates markup containing SVG font faces,\n     * font URLs for font faces must be collected by developers\n     * and are not extracted from the DOM by fabricjs\n     * @param {Array} objects Array of fabric objects\n     * @return {String}\n     */\n    createSVGFontFacesMarkup: function() {\n      var markup = '', fontList = { }, obj, fontFamily,\n          style, row, rowIndex, _char, charIndex, i, len,\n          fontPaths = fabric.fontPaths, objects = [];\n\n      this._objects.forEach(function add(object) {\n        objects.push(object);\n        if (object._objects) {\n          object._objects.forEach(add);\n        }\n      });\n\n      for (i = 0, len = objects.length; i < len; i++) {\n        obj = objects[i];\n        fontFamily = obj.fontFamily;\n        if (obj.type.indexOf('text') === -1 || fontList[fontFamily] || !fontPaths[fontFamily]) {\n          continue;\n        }\n        fontList[fontFamily] = true;\n        if (!obj.styles) {\n          continue;\n        }\n        style = obj.styles;\n        for (rowIndex in style) {\n          row = style[rowIndex];\n          for (charIndex in row) {\n            _char = row[charIndex];\n            fontFamily = _char.fontFamily;\n            if (!fontList[fontFamily] && fontPaths[fontFamily]) {\n              fontList[fontFamily] = true;\n            }\n          }\n        }\n      }\n\n      for (var j in fontList) {\n        markup += [\n          '\\t\\t@font-face {\\n',\n          '\\t\\t\\tfont-family: \\'', j, '\\';\\n',\n          '\\t\\t\\tsrc: url(\\'', fontPaths[j], '\\');\\n',\n          '\\t\\t}\\n'\n        ].join('');\n      }\n\n      if (markup) {\n        markup = [\n          '\\t<style type=\"text/css\">',\n          '<![CDATA[\\n',\n          markup,\n          ']]>',\n          '</style>\\n'\n        ].join('');\n      }\n\n      return markup;\n    },\n\n    /**\n     * @private\n     */\n    _setSVGObjects: function(markup, reviver) {\n      var instance, i, len, objects = this._objects;\n      for (i = 0, len = objects.length; i < len; i++) {\n        instance = objects[i];\n        if (instance.excludeFromExport) {\n          continue;\n        }\n        this._setSVGObject(markup, instance, reviver);\n      }\n    },\n\n    /**\n     * @private\n     */\n    _setSVGObject: function(markup, instance, reviver) {\n      markup.push(instance.toSVG(reviver));\n    },\n\n    /**\n     * @private\n     */\n    _setSVGBgOverlayImage: function(markup, property, reviver) {\n      if (this[property] && !this[property].excludeFromExport && this[property].toSVG) {\n        markup.push(this[property].toSVG(reviver));\n      }\n    },\n\n    /**\n     * @private\n     */\n    _setSVGBgOverlayColor: function(markup, property) {\n      var filler = this[property + 'Color'], vpt = this.viewportTransform, finalWidth = this.width,\n          finalHeight = this.height;\n      if (!filler) {\n        return;\n      }\n      if (filler.toLive) {\n        var repeat = filler.repeat, iVpt = fabric.util.invertTransform(vpt), shouldInvert = this[property + 'Vpt'],\n            additionalTransform = shouldInvert ? fabric.util.matrixToSVG(iVpt) : '';\n        markup.push(\n          '<rect transform=\"' + additionalTransform + ' translate(', finalWidth / 2, ',', finalHeight / 2, ')\"',\n          ' x=\"', filler.offsetX - finalWidth / 2,\n          '\" y=\"', filler.offsetY - finalHeight / 2, '\" ',\n          'width=\"',\n          (repeat === 'repeat-y' || repeat === 'no-repeat'\n            ? filler.source.width\n            : finalWidth ),\n          '\" height=\"',\n          (repeat === 'repeat-x' || repeat === 'no-repeat'\n            ? filler.source.height\n            : finalHeight),\n          '\" fill=\"url(#SVGID_' + filler.id + ')\"',\n          '></rect>\\n'\n        );\n      }\n      else {\n        markup.push(\n          '<rect x=\"0\" y=\"0\" width=\"100%\" height=\"100%\" ',\n          'fill=\"', filler, '\"',\n          '></rect>\\n'\n        );\n      }\n    },\n    /* _TO_SVG_END_ */\n\n    /**\n     * Moves an object or the objects of a multiple selection\n     * to the bottom of the stack of drawn objects\n     * @param {fabric.Object} object Object to send to back\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     */\n    sendToBack: function (object) {\n      if (!object) {\n        return this;\n      }\n      var activeSelection = this._activeObject,\n          i, obj, objs;\n      if (object === activeSelection && object.type === 'activeSelection') {\n        objs = activeSelection._objects;\n        for (i = objs.length; i--;) {\n          obj = objs[i];\n          removeFromArray(this._objects, obj);\n          this._objects.unshift(obj);\n        }\n      }\n      else {\n        removeFromArray(this._objects, object);\n        this._objects.unshift(object);\n      }\n      this.renderOnAddRemove && this.requestRenderAll();\n      return this;\n    },\n\n    /**\n     * Moves an object or the objects of a multiple selection\n     * to the top of the stack of drawn objects\n     * @param {fabric.Object} object Object to send\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     */\n    bringToFront: function (object) {\n      if (!object) {\n        return this;\n      }\n      var activeSelection = this._activeObject,\n          i, obj, objs;\n      if (object === activeSelection && object.type === 'activeSelection') {\n        objs = activeSelection._objects;\n        for (i = 0; i < objs.length; i++) {\n          obj = objs[i];\n          removeFromArray(this._objects, obj);\n          this._objects.push(obj);\n        }\n      }\n      else {\n        removeFromArray(this._objects, object);\n        this._objects.push(object);\n      }\n      this.renderOnAddRemove && this.requestRenderAll();\n      return this;\n    },\n\n    /**\n     * Moves an object or a selection down in stack of drawn objects\n     * An optional parameter, intersecting allows to move the object in behind\n     * the first intersecting object. Where intersection is calculated with\n     * bounding box. If no intersection is found, there will not be change in the\n     * stack.\n     * @param {fabric.Object} object Object to send\n     * @param {Boolean} [intersecting] If `true`, send object behind next lower intersecting object\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     */\n    sendBackwards: function (object, intersecting) {\n      if (!object) {\n        return this;\n      }\n      var activeSelection = this._activeObject,\n          i, obj, idx, newIdx, objs, objsMoved = 0;\n\n      if (object === activeSelection && object.type === 'activeSelection') {\n        objs = activeSelection._objects;\n        for (i = 0; i < objs.length; i++) {\n          obj = objs[i];\n          idx = this._objects.indexOf(obj);\n          if (idx > 0 + objsMoved) {\n            newIdx = idx - 1;\n            removeFromArray(this._objects, obj);\n            this._objects.splice(newIdx, 0, obj);\n          }\n          objsMoved++;\n        }\n      }\n      else {\n        idx = this._objects.indexOf(object);\n        if (idx !== 0) {\n          // if object is not on the bottom of stack\n          newIdx = this._findNewLowerIndex(object, idx, intersecting);\n          removeFromArray(this._objects, object);\n          this._objects.splice(newIdx, 0, object);\n        }\n      }\n      this.renderOnAddRemove && this.requestRenderAll();\n      return this;\n    },\n\n    /**\n     * @private\n     */\n    _findNewLowerIndex: function(object, idx, intersecting) {\n      var newIdx, i;\n\n      if (intersecting) {\n        newIdx = idx;\n\n        // traverse down the stack looking for the nearest intersecting object\n        for (i = idx - 1; i >= 0; --i) {\n\n          var isIntersecting = object.intersectsWithObject(this._objects[i]) ||\n                               object.isContainedWithinObject(this._objects[i]) ||\n                               this._objects[i].isContainedWithinObject(object);\n\n          if (isIntersecting) {\n            newIdx = i;\n            break;\n          }\n        }\n      }\n      else {\n        newIdx = idx - 1;\n      }\n\n      return newIdx;\n    },\n\n    /**\n     * Moves an object or a selection up in stack of drawn objects\n     * An optional parameter, intersecting allows to move the object in front\n     * of the first intersecting object. Where intersection is calculated with\n     * bounding box. If no intersection is found, there will not be change in the\n     * stack.\n     * @param {fabric.Object} object Object to send\n     * @param {Boolean} [intersecting] If `true`, send object in front of next upper intersecting object\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     */\n    bringForward: function (object, intersecting) {\n      if (!object) {\n        return this;\n      }\n      var activeSelection = this._activeObject,\n          i, obj, idx, newIdx, objs, objsMoved = 0;\n\n      if (object === activeSelection && object.type === 'activeSelection') {\n        objs = activeSelection._objects;\n        for (i = objs.length; i--;) {\n          obj = objs[i];\n          idx = this._objects.indexOf(obj);\n          if (idx < this._objects.length - 1 - objsMoved) {\n            newIdx = idx + 1;\n            removeFromArray(this._objects, obj);\n            this._objects.splice(newIdx, 0, obj);\n          }\n          objsMoved++;\n        }\n      }\n      else {\n        idx = this._objects.indexOf(object);\n        if (idx !== this._objects.length - 1) {\n          // if object is not on top of stack (last item in an array)\n          newIdx = this._findNewUpperIndex(object, idx, intersecting);\n          removeFromArray(this._objects, object);\n          this._objects.splice(newIdx, 0, object);\n        }\n      }\n      this.renderOnAddRemove && this.requestRenderAll();\n      return this;\n    },\n\n    /**\n     * @private\n     */\n    _findNewUpperIndex: function(object, idx, intersecting) {\n      var newIdx, i, len;\n\n      if (intersecting) {\n        newIdx = idx;\n\n        // traverse up the stack looking for the nearest intersecting object\n        for (i = idx + 1, len = this._objects.length; i < len; ++i) {\n\n          var isIntersecting = object.intersectsWithObject(this._objects[i]) ||\n                               object.isContainedWithinObject(this._objects[i]) ||\n                               this._objects[i].isContainedWithinObject(object);\n\n          if (isIntersecting) {\n            newIdx = i;\n            break;\n          }\n        }\n      }\n      else {\n        newIdx = idx + 1;\n      }\n\n      return newIdx;\n    },\n\n    /**\n     * Moves an object to specified level in stack of drawn objects\n     * @param {fabric.Object} object Object to send\n     * @param {Number} index Position to move to\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     */\n    moveTo: function (object, index) {\n      removeFromArray(this._objects, object);\n      this._objects.splice(index, 0, object);\n      return this.renderOnAddRemove && this.requestRenderAll();\n    },\n\n    /**\n     * Clears a canvas element and dispose objects\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     */\n    dispose: function () {\n      // cancel eventually ongoing renders\n      if (this.isRendering) {\n        fabric.util.cancelAnimFrame(this.isRendering);\n        this.isRendering = 0;\n      }\n      this.forEachObject(function(object) {\n        object.dispose && object.dispose();\n      });\n      this._objects = [];\n      if (this.backgroundImage && this.backgroundImage.dispose) {\n        this.backgroundImage.dispose();\n      }\n      this.backgroundImage = null;\n      if (this.overlayImage && this.overlayImage.dispose) {\n        this.overlayImage.dispose();\n      }\n      this.overlayImage = null;\n      this._iTextInstances = null;\n      this.contextContainer = null;\n      // restore canvas style\n      this.lowerCanvasEl.classList.remove('lower-canvas');\n      fabric.util.setStyle(this.lowerCanvasEl, this._originalCanvasStyle);\n      delete this._originalCanvasStyle;\n      // restore canvas size to original size in case retina scaling was applied\n      this.lowerCanvasEl.setAttribute('width', this.width);\n      this.lowerCanvasEl.setAttribute('height', this.height);\n      fabric.util.cleanUpJsdomNode(this.lowerCanvasEl);\n      this.lowerCanvasEl = undefined;\n      return this;\n    },\n\n    /**\n     * Returns a string representation of an instance\n     * @return {String} string representation of an instance\n     */\n    toString: function () {\n      return '#<fabric.Canvas (' + this.complexity() + '): ' +\n               '{ objects: ' + this._objects.length + ' }>';\n    }\n  });\n\n  extend(fabric.StaticCanvas.prototype, fabric.Observable);\n  extend(fabric.StaticCanvas.prototype, fabric.Collection);\n  extend(fabric.StaticCanvas.prototype, fabric.DataURLExporter);\n\n  extend(fabric.StaticCanvas, /** @lends fabric.StaticCanvas */ {\n\n    /**\n     * @static\n     * @type String\n     * @default\n     */\n    EMPTY_JSON: '{\"objects\": [], \"background\": \"white\"}',\n\n    /**\n     * Provides a way to check support of some of the canvas methods\n     * (either those of HTMLCanvasElement itself, or rendering context)\n     *\n     * @param {String} methodName Method to check support for;\n     *                            Could be one of \"setLineDash\"\n     * @return {Boolean | null} `true` if method is supported (or at least exists),\n     *                          `null` if canvas element or context can not be initialized\n     */\n    supports: function (methodName) {\n      var el = createCanvasElement();\n\n      if (!el || !el.getContext) {\n        return null;\n      }\n\n      var ctx = el.getContext('2d');\n      if (!ctx) {\n        return null;\n      }\n\n      switch (methodName) {\n\n        case 'setLineDash':\n          return typeof ctx.setLineDash !== 'undefined';\n\n        default:\n          return null;\n      }\n    }\n  });\n\n  /**\n   * Returns Object representation of canvas\n   * this alias is provided because if you call JSON.stringify on an instance,\n   * the toJSON object will be invoked if it exists.\n   * Having a toJSON method means you can do JSON.stringify(myCanvas)\n   * @function\n   * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n   * @return {Object} JSON compatible object\n   * @tutorial {@link http://fabricjs.com/fabric-intro-part-3#serialization}\n   * @see {@link http://jsfiddle.net/fabricjs/pec86/|jsFiddle demo}\n   * @example <caption>JSON without additional properties</caption>\n   * var json = canvas.toJSON();\n   * @example <caption>JSON with additional properties included</caption>\n   * var json = canvas.toJSON(['lockMovementX', 'lockMovementY', 'lockRotation', 'lockScalingX', 'lockScalingY']);\n   * @example <caption>JSON without default values</caption>\n   * canvas.includeDefaultValues = false;\n   * var json = canvas.toJSON();\n   */\n  fabric.StaticCanvas.prototype.toJSON = fabric.StaticCanvas.prototype.toObject;\n\n  if (fabric.isLikelyNode) {\n    fabric.StaticCanvas.prototype.createPNGStream = function() {\n      var impl = getNodeCanvas(this.lowerCanvasEl);\n      return impl && impl.createPNGStream();\n    };\n    fabric.StaticCanvas.prototype.createJPEGStream = function(opts) {\n      var impl = getNodeCanvas(this.lowerCanvasEl);\n      return impl && impl.createJPEGStream(opts);\n    };\n  }\n})();\n\n\n/**\n * BaseBrush class\n * @class fabric.BaseBrush\n * @see {@link http://fabricjs.com/freedrawing|Freedrawing demo}\n */\nfabric.BaseBrush = fabric.util.createClass(/** @lends fabric.BaseBrush.prototype */ {\n\n  /**\n   * Color of a brush\n   * @type String\n   * @default\n   */\n  color: 'rgb(0, 0, 0)',\n\n  /**\n   * Width of a brush, has to be a Number, no string literals\n   * @type Number\n   * @default\n   */\n  width: 1,\n\n  /**\n   * Shadow object representing shadow of this shape.\n   * <b>Backwards incompatibility note:</b> This property replaces \"shadowColor\" (String), \"shadowOffsetX\" (Number),\n   * \"shadowOffsetY\" (Number) and \"shadowBlur\" (Number) since v1.2.12\n   * @type fabric.Shadow\n   * @default\n   */\n  shadow: null,\n\n  /**\n   * Line endings style of a brush (one of \"butt\", \"round\", \"square\")\n   * @type String\n   * @default\n   */\n  strokeLineCap: 'round',\n\n  /**\n   * Corner style of a brush (one of \"bevel\", \"round\", \"miter\")\n   * @type String\n   * @default\n   */\n  strokeLineJoin: 'round',\n\n  /**\n   * Maximum miter length (used for strokeLineJoin = \"miter\") of a brush's\n   * @type Number\n   * @default\n   */\n  strokeMiterLimit:         10,\n\n  /**\n   * Stroke Dash Array.\n   * @type Array\n   * @default\n   */\n  strokeDashArray: null,\n\n  /**\n   * When `true`, the free drawing is limited to the whiteboard size. Default to false.\n   * @type Boolean\n   * @default false\n  */\n\n  limitedToCanvasSize: false,\n\n\n  /**\n   * Sets brush styles\n   * @private\n   * @param {CanvasRenderingContext2D} ctx\n   */\n  _setBrushStyles: function (ctx) {\n    ctx.strokeStyle = this.color;\n    ctx.lineWidth = this.width;\n    ctx.lineCap = this.strokeLineCap;\n    ctx.miterLimit = this.strokeMiterLimit;\n    ctx.lineJoin = this.strokeLineJoin;\n    ctx.setLineDash(this.strokeDashArray || []);\n  },\n\n  /**\n   * Sets the transformation on given context\n   * @param {RenderingContext2d} ctx context to render on\n   * @private\n   */\n  _saveAndTransform: function(ctx) {\n    var v = this.canvas.viewportTransform;\n    ctx.save();\n    ctx.transform(v[0], v[1], v[2], v[3], v[4], v[5]);\n  },\n\n  /**\n   * Sets brush shadow styles\n   * @private\n   */\n  _setShadow: function() {\n    if (!this.shadow) {\n      return;\n    }\n\n    var canvas = this.canvas,\n        shadow = this.shadow,\n        ctx = canvas.contextTop,\n        zoom = canvas.getZoom();\n    if (canvas && canvas._isRetinaScaling()) {\n      zoom *= fabric.devicePixelRatio;\n    }\n\n    ctx.shadowColor = shadow.color;\n    ctx.shadowBlur = shadow.blur * zoom;\n    ctx.shadowOffsetX = shadow.offsetX * zoom;\n    ctx.shadowOffsetY = shadow.offsetY * zoom;\n  },\n\n  needsFullRender: function() {\n    var color = new fabric.Color(this.color);\n    return color.getAlpha() < 1 || !!this.shadow;\n  },\n\n  /**\n   * Removes brush shadow styles\n   * @private\n   */\n  _resetShadow: function() {\n    var ctx = this.canvas.contextTop;\n\n    ctx.shadowColor = '';\n    ctx.shadowBlur = ctx.shadowOffsetX = ctx.shadowOffsetY = 0;\n  },\n\n  /**\n   * Check is pointer is outside canvas boundaries\n   * @param {Object} pointer\n   * @private\n  */\n  _isOutSideCanvas: function(pointer) {\n    return pointer.x < 0 || pointer.x > this.canvas.getWidth() || pointer.y < 0 || pointer.y > this.canvas.getHeight();\n  }\n});\n\n\n(function() {\n  /**\n   * PencilBrush class\n   * @class fabric.PencilBrush\n   * @extends fabric.BaseBrush\n   */\n  fabric.PencilBrush = fabric.util.createClass(fabric.BaseBrush, /** @lends fabric.PencilBrush.prototype */ {\n\n    /**\n     * Discard points that are less than `decimate` pixel distant from each other\n     * @type Number\n     * @default 0.4\n     */\n    decimate: 0.4,\n\n    /**\n     * Draws a straight line between last recorded point to current pointer\n     * Used for `shift` functionality\n     *\n     * @type boolean\n     * @default false\n     */\n    drawStraightLine: false,\n\n    /**\n     * The event modifier key that makes the brush draw a straight line.\n     * If `null` or 'none' or any other string that is not a modifier key the feature is disabled.\n     * @type {'altKey' | 'shiftKey' | 'ctrlKey' | 'none' | undefined | null}\n     */\n    straightLineKey: 'shiftKey',\n\n    /**\n     * Constructor\n     * @param {fabric.Canvas} canvas\n     * @return {fabric.PencilBrush} Instance of a pencil brush\n     */\n    initialize: function(canvas) {\n      this.canvas = canvas;\n      this._points = [];\n    },\n\n    needsFullRender: function () {\n      return this.callSuper('needsFullRender') || this._hasStraightLine;\n    },\n\n    /**\n     * Invoked inside on mouse down and mouse move\n     * @param {Object} pointer\n     */\n    _drawSegment: function (ctx, p1, p2) {\n      var midPoint = p1.midPointFrom(p2);\n      ctx.quadraticCurveTo(p1.x, p1.y, midPoint.x, midPoint.y);\n      return midPoint;\n    },\n\n    /**\n     * Invoked on mouse down\n     * @param {Object} pointer\n     */\n    onMouseDown: function(pointer, options) {\n      if (!this.canvas._isMainEvent(options.e)) {\n        return;\n      }\n      this.drawStraightLine = options.e[this.straightLineKey];\n      this._prepareForDrawing(pointer);\n      // capture coordinates immediately\n      // this allows to draw dots (when movement never occurs)\n      this._captureDrawingPath(pointer);\n      this._render();\n    },\n\n    /**\n     * Invoked on mouse move\n     * @param {Object} pointer\n     */\n    onMouseMove: function(pointer, options) {\n      if (!this.canvas._isMainEvent(options.e)) {\n        return;\n      }\n      this.drawStraightLine = options.e[this.straightLineKey];\n      if (this.limitedToCanvasSize === true && this._isOutSideCanvas(pointer)) {\n        return;\n      }\n      if (this._captureDrawingPath(pointer) && this._points.length > 1) {\n        if (this.needsFullRender()) {\n          // redraw curve\n          // clear top canvas\n          this.canvas.clearContext(this.canvas.contextTop);\n          this._render();\n        }\n        else {\n          var points = this._points, length = points.length, ctx = this.canvas.contextTop;\n          // draw the curve update\n          this._saveAndTransform(ctx);\n          if (this.oldEnd) {\n            ctx.beginPath();\n            ctx.moveTo(this.oldEnd.x, this.oldEnd.y);\n          }\n          this.oldEnd = this._drawSegment(ctx, points[length - 2], points[length - 1], true);\n          ctx.stroke();\n          ctx.restore();\n        }\n      }\n    },\n\n    /**\n     * Invoked on mouse up\n     */\n    onMouseUp: function(options) {\n      if (!this.canvas._isMainEvent(options.e)) {\n        return true;\n      }\n      this.drawStraightLine = false;\n      this.oldEnd = undefined;\n      this._finalizeAndAddPath();\n      return false;\n    },\n\n    /**\n     * @private\n     * @param {Object} pointer Actual mouse position related to the canvas.\n     */\n    _prepareForDrawing: function(pointer) {\n\n      var p = new fabric.Point(pointer.x, pointer.y);\n\n      this._reset();\n      this._addPoint(p);\n      this.canvas.contextTop.moveTo(p.x, p.y);\n    },\n\n    /**\n     * @private\n     * @param {fabric.Point} point Point to be added to points array\n     */\n    _addPoint: function(point) {\n      if (this._points.length > 1 && point.eq(this._points[this._points.length - 1])) {\n        return false;\n      }\n      if (this.drawStraightLine && this._points.length > 1) {\n        this._hasStraightLine = true;\n        this._points.pop();\n      }\n      this._points.push(point);\n      return true;\n    },\n\n    /**\n     * Clear points array and set contextTop canvas style.\n     * @private\n     */\n    _reset: function() {\n      this._points = [];\n      this._setBrushStyles(this.canvas.contextTop);\n      this._setShadow();\n      this._hasStraightLine = false;\n    },\n\n    /**\n     * @private\n     * @param {Object} pointer Actual mouse position related to the canvas.\n     */\n    _captureDrawingPath: function(pointer) {\n      var pointerPoint = new fabric.Point(pointer.x, pointer.y);\n      return this._addPoint(pointerPoint);\n    },\n\n    /**\n     * Draw a smooth path on the topCanvas using quadraticCurveTo\n     * @private\n     * @param {CanvasRenderingContext2D} [ctx]\n     */\n    _render: function(ctx) {\n      var i, len,\n          p1 = this._points[0],\n          p2 = this._points[1];\n      ctx = ctx || this.canvas.contextTop;\n      this._saveAndTransform(ctx);\n      ctx.beginPath();\n      //if we only have 2 points in the path and they are the same\n      //it means that the user only clicked the canvas without moving the mouse\n      //then we should be drawing a dot. A path isn't drawn between two identical dots\n      //that's why we set them apart a bit\n      if (this._points.length === 2 && p1.x === p2.x && p1.y === p2.y) {\n        var width = this.width / 1000;\n        p1 = new fabric.Point(p1.x, p1.y);\n        p2 = new fabric.Point(p2.x, p2.y);\n        p1.x -= width;\n        p2.x += width;\n      }\n      ctx.moveTo(p1.x, p1.y);\n\n      for (i = 1, len = this._points.length; i < len; i++) {\n        // we pick the point between pi + 1 & pi + 2 as the\n        // end point and p1 as our control point.\n        this._drawSegment(ctx, p1, p2);\n        p1 = this._points[i];\n        p2 = this._points[i + 1];\n      }\n      // Draw last line as a straight line while\n      // we wait for the next point to be able to calculate\n      // the bezier control point\n      ctx.lineTo(p1.x, p1.y);\n      ctx.stroke();\n      ctx.restore();\n    },\n\n    /**\n     * Converts points to SVG path\n     * @param {Array} points Array of points\n     * @return {(string|number)[][]} SVG path commands\n     */\n    convertPointsToSVGPath: function (points) {\n      var correction = this.width / 1000;\n      return fabric.util.getSmoothPathFromPoints(points, correction);\n    },\n\n    /**\n     * @private\n     * @param {(string|number)[][]} pathData SVG path commands\n     * @returns {boolean}\n     */\n    _isEmptySVGPath: function (pathData) {\n      var pathString = fabric.util.joinPath(pathData);\n      return pathString === 'M 0 0 Q 0 0 0 0 L 0 0';\n    },\n\n    /**\n     * Creates fabric.Path object to add on canvas\n     * @param {(string|number)[][]} pathData Path data\n     * @return {fabric.Path} Path to add on canvas\n     */\n    createPath: function(pathData) {\n      var path = new fabric.Path(pathData, {\n        fill: null,\n        stroke: this.color,\n        strokeWidth: this.width,\n        strokeLineCap: this.strokeLineCap,\n        strokeMiterLimit: this.strokeMiterLimit,\n        strokeLineJoin: this.strokeLineJoin,\n        strokeDashArray: this.strokeDashArray,\n      });\n      if (this.shadow) {\n        this.shadow.affectStroke = true;\n        path.shadow = new fabric.Shadow(this.shadow);\n      }\n\n      return path;\n    },\n\n    /**\n     * Decimate points array with the decimate value\n     */\n    decimatePoints: function(points, distance) {\n      if (points.length <= 2) {\n        return points;\n      }\n      var zoom = this.canvas.getZoom(), adjustedDistance = Math.pow(distance / zoom, 2),\n          i, l = points.length - 1, lastPoint = points[0], newPoints = [lastPoint],\n          cDistance;\n      for (i = 1; i < l - 1; i++) {\n        cDistance = Math.pow(lastPoint.x - points[i].x, 2) + Math.pow(lastPoint.y - points[i].y, 2);\n        if (cDistance >= adjustedDistance) {\n          lastPoint = points[i];\n          newPoints.push(lastPoint);\n        }\n      }\n      /**\n       * Add the last point from the original line to the end of the array.\n       * This ensures decimate doesn't delete the last point on the line, and ensures the line is > 1 point.\n       */\n      newPoints.push(points[l]);\n      return newPoints;\n    },\n\n    /**\n     * On mouseup after drawing the path on contextTop canvas\n     * we use the points captured to create an new fabric path object\n     * and add it to the fabric canvas.\n     */\n    _finalizeAndAddPath: function() {\n      var ctx = this.canvas.contextTop;\n      ctx.closePath();\n      if (this.decimate) {\n        this._points = this.decimatePoints(this._points, this.decimate);\n      }\n      var pathData = this.convertPointsToSVGPath(this._points);\n      if (this._isEmptySVGPath(pathData)) {\n        // do not create 0 width/height paths, as they are\n        // rendered inconsistently across browsers\n        // Firefox 4, for example, renders a dot,\n        // whereas Chrome 10 renders nothing\n        this.canvas.requestRenderAll();\n        return;\n      }\n\n      var path = this.createPath(pathData);\n      this.canvas.clearContext(this.canvas.contextTop);\n      this.canvas.fire('before:path:created', { path: path });\n      this.canvas.add(path);\n      this.canvas.requestRenderAll();\n      path.setCoords();\n      this._resetShadow();\n\n\n      // fire event 'path' created\n      this.canvas.fire('path:created', { path: path });\n    }\n  });\n})();\n\n\n/**\n * CircleBrush class\n * @class fabric.CircleBrush\n */\nfabric.CircleBrush = fabric.util.createClass(fabric.BaseBrush, /** @lends fabric.CircleBrush.prototype */ {\n\n  /**\n   * Width of a brush\n   * @type Number\n   * @default\n   */\n  width: 10,\n\n  /**\n   * Constructor\n   * @param {fabric.Canvas} canvas\n   * @return {fabric.CircleBrush} Instance of a circle brush\n   */\n  initialize: function(canvas) {\n    this.canvas = canvas;\n    this.points = [];\n  },\n\n  /**\n   * Invoked inside on mouse down and mouse move\n   * @param {Object} pointer\n   */\n  drawDot: function(pointer) {\n    var point = this.addPoint(pointer),\n        ctx = this.canvas.contextTop;\n    this._saveAndTransform(ctx);\n    this.dot(ctx, point);\n    ctx.restore();\n  },\n\n  dot: function(ctx, point) {\n    ctx.fillStyle = point.fill;\n    ctx.beginPath();\n    ctx.arc(point.x, point.y, point.radius, 0, Math.PI * 2, false);\n    ctx.closePath();\n    ctx.fill();\n  },\n\n  /**\n   * Invoked on mouse down\n   */\n  onMouseDown: function(pointer) {\n    this.points.length = 0;\n    this.canvas.clearContext(this.canvas.contextTop);\n    this._setShadow();\n    this.drawDot(pointer);\n  },\n\n  /**\n   * Render the full state of the brush\n   * @private\n   */\n  _render: function() {\n    var ctx  = this.canvas.contextTop, i, len,\n        points = this.points;\n    this._saveAndTransform(ctx);\n    for (i = 0, len = points.length; i < len; i++) {\n      this.dot(ctx, points[i]);\n    }\n    ctx.restore();\n  },\n\n  /**\n   * Invoked on mouse move\n   * @param {Object} pointer\n   */\n  onMouseMove: function(pointer) {\n    if (this.limitedToCanvasSize === true && this._isOutSideCanvas(pointer)) {\n      return;\n    }\n    if (this.needsFullRender()) {\n      this.canvas.clearContext(this.canvas.contextTop);\n      this.addPoint(pointer);\n      this._render();\n    }\n    else {\n      this.drawDot(pointer);\n    }\n  },\n\n  /**\n   * Invoked on mouse up\n   */\n  onMouseUp: function() {\n    var originalRenderOnAddRemove = this.canvas.renderOnAddRemove, i, len;\n    this.canvas.renderOnAddRemove = false;\n\n    var circles = [];\n\n    for (i = 0, len = this.points.length; i < len; i++) {\n      var point = this.points[i],\n          circle = new fabric.Circle({\n            radius: point.radius,\n            left: point.x,\n            top: point.y,\n            originX: 'center',\n            originY: 'center',\n            fill: point.fill\n          });\n\n      this.shadow && (circle.shadow = new fabric.Shadow(this.shadow));\n\n      circles.push(circle);\n    }\n    var group = new fabric.Group(circles);\n    group.canvas = this.canvas;\n\n    this.canvas.fire('before:path:created', { path: group });\n    this.canvas.add(group);\n    this.canvas.fire('path:created', { path: group });\n\n    this.canvas.clearContext(this.canvas.contextTop);\n    this._resetShadow();\n    this.canvas.renderOnAddRemove = originalRenderOnAddRemove;\n    this.canvas.requestRenderAll();\n  },\n\n  /**\n   * @param {Object} pointer\n   * @return {fabric.Point} Just added pointer point\n   */\n  addPoint: function(pointer) {\n    var pointerPoint = new fabric.Point(pointer.x, pointer.y),\n\n        circleRadius = fabric.util.getRandomInt(\n          Math.max(0, this.width - 20), this.width + 20) / 2,\n\n        circleColor = new fabric.Color(this.color)\n          .setAlpha(fabric.util.getRandomInt(0, 100) / 100)\n          .toRgba();\n\n    pointerPoint.radius = circleRadius;\n    pointerPoint.fill = circleColor;\n\n    this.points.push(pointerPoint);\n\n    return pointerPoint;\n  }\n});\n\n\n/**\n * SprayBrush class\n * @class fabric.SprayBrush\n */\nfabric.SprayBrush = fabric.util.createClass( fabric.BaseBrush, /** @lends fabric.SprayBrush.prototype */ {\n\n  /**\n   * Width of a spray\n   * @type Number\n   * @default\n   */\n  width:              10,\n\n  /**\n   * Density of a spray (number of dots per chunk)\n   * @type Number\n   * @default\n   */\n  density:            20,\n\n  /**\n   * Width of spray dots\n   * @type Number\n   * @default\n   */\n  dotWidth:           1,\n\n  /**\n   * Width variance of spray dots\n   * @type Number\n   * @default\n   */\n  dotWidthVariance:   1,\n\n  /**\n   * Whether opacity of a dot should be random\n   * @type Boolean\n   * @default\n   */\n  randomOpacity:        false,\n\n  /**\n   * Whether overlapping dots (rectangles) should be removed (for performance reasons)\n   * @type Boolean\n   * @default\n   */\n  optimizeOverlapping:  true,\n\n  /**\n   * Constructor\n   * @param {fabric.Canvas} canvas\n   * @return {fabric.SprayBrush} Instance of a spray brush\n   */\n  initialize: function(canvas) {\n    this.canvas = canvas;\n    this.sprayChunks = [];\n  },\n\n  /**\n   * Invoked on mouse down\n   * @param {Object} pointer\n   */\n  onMouseDown: function(pointer) {\n    this.sprayChunks.length = 0;\n    this.canvas.clearContext(this.canvas.contextTop);\n    this._setShadow();\n\n    this.addSprayChunk(pointer);\n    this.render(this.sprayChunkPoints);\n  },\n\n  /**\n   * Invoked on mouse move\n   * @param {Object} pointer\n   */\n  onMouseMove: function(pointer) {\n    if (this.limitedToCanvasSize === true && this._isOutSideCanvas(pointer)) {\n      return;\n    }\n    this.addSprayChunk(pointer);\n    this.render(this.sprayChunkPoints);\n  },\n\n  /**\n   * Invoked on mouse up\n   */\n  onMouseUp: function() {\n    var originalRenderOnAddRemove = this.canvas.renderOnAddRemove;\n    this.canvas.renderOnAddRemove = false;\n\n    var rects = [];\n\n    for (var i = 0, ilen = this.sprayChunks.length; i < ilen; i++) {\n      var sprayChunk = this.sprayChunks[i];\n\n      for (var j = 0, jlen = sprayChunk.length; j < jlen; j++) {\n\n        var rect = new fabric.Rect({\n          width: sprayChunk[j].width,\n          height: sprayChunk[j].width,\n          left: sprayChunk[j].x + 1,\n          top: sprayChunk[j].y + 1,\n          originX: 'center',\n          originY: 'center',\n          fill: this.color\n        });\n        rects.push(rect);\n      }\n    }\n\n    if (this.optimizeOverlapping) {\n      rects = this._getOptimizedRects(rects);\n    }\n\n    var group = new fabric.Group(rects);\n    this.shadow && group.set('shadow', new fabric.Shadow(this.shadow));\n    this.canvas.fire('before:path:created', { path: group });\n    this.canvas.add(group);\n    this.canvas.fire('path:created', { path: group });\n\n    this.canvas.clearContext(this.canvas.contextTop);\n    this._resetShadow();\n    this.canvas.renderOnAddRemove = originalRenderOnAddRemove;\n    this.canvas.requestRenderAll();\n  },\n\n  /**\n   * @private\n   * @param {Array} rects\n   */\n  _getOptimizedRects: function(rects) {\n\n    // avoid creating duplicate rects at the same coordinates\n    var uniqueRects = { }, key, i, len;\n\n    for (i = 0, len = rects.length; i < len; i++) {\n      key = rects[i].left + '' + rects[i].top;\n      if (!uniqueRects[key]) {\n        uniqueRects[key] = rects[i];\n      }\n    }\n    var uniqueRectsArray = [];\n    for (key in uniqueRects) {\n      uniqueRectsArray.push(uniqueRects[key]);\n    }\n\n    return uniqueRectsArray;\n  },\n\n  /**\n   * Render new chunk of spray brush\n   */\n  render: function(sprayChunk) {\n    var ctx = this.canvas.contextTop, i, len;\n    ctx.fillStyle = this.color;\n\n    this._saveAndTransform(ctx);\n\n    for (i = 0, len = sprayChunk.length; i < len; i++) {\n      var point = sprayChunk[i];\n      if (typeof point.opacity !== 'undefined') {\n        ctx.globalAlpha = point.opacity;\n      }\n      ctx.fillRect(point.x, point.y, point.width, point.width);\n    }\n    ctx.restore();\n  },\n\n  /**\n   * Render all spray chunks\n   */\n  _render: function() {\n    var ctx = this.canvas.contextTop, i, ilen;\n    ctx.fillStyle = this.color;\n\n    this._saveAndTransform(ctx);\n\n    for (i = 0, ilen = this.sprayChunks.length; i < ilen; i++) {\n      this.render(this.sprayChunks[i]);\n    }\n    ctx.restore();\n  },\n\n  /**\n   * @param {Object} pointer\n   */\n  addSprayChunk: function(pointer) {\n    this.sprayChunkPoints = [];\n\n    var x, y, width, radius = this.width / 2, i;\n\n    for (i = 0; i < this.density; i++) {\n\n      x = fabric.util.getRandomInt(pointer.x - radius, pointer.x + radius);\n      y = fabric.util.getRandomInt(pointer.y - radius, pointer.y + radius);\n\n      if (this.dotWidthVariance) {\n        width = fabric.util.getRandomInt(\n          // bottom clamp width to 1\n          Math.max(1, this.dotWidth - this.dotWidthVariance),\n          this.dotWidth + this.dotWidthVariance);\n      }\n      else {\n        width = this.dotWidth;\n      }\n\n      var point = new fabric.Point(x, y);\n      point.width = width;\n\n      if (this.randomOpacity) {\n        point.opacity = fabric.util.getRandomInt(0, 100) / 100;\n      }\n\n      this.sprayChunkPoints.push(point);\n    }\n\n    this.sprayChunks.push(this.sprayChunkPoints);\n  }\n});\n\n\n/**\n * PatternBrush class\n * @class fabric.PatternBrush\n * @extends fabric.BaseBrush\n */\nfabric.PatternBrush = fabric.util.createClass(fabric.PencilBrush, /** @lends fabric.PatternBrush.prototype */ {\n\n  getPatternSrc: function() {\n\n    var dotWidth = 20,\n        dotDistance = 5,\n        patternCanvas = fabric.util.createCanvasElement(),\n        patternCtx = patternCanvas.getContext('2d');\n\n    patternCanvas.width = patternCanvas.height = dotWidth + dotDistance;\n\n    patternCtx.fillStyle = this.color;\n    patternCtx.beginPath();\n    patternCtx.arc(dotWidth / 2, dotWidth / 2, dotWidth / 2, 0, Math.PI * 2, false);\n    patternCtx.closePath();\n    patternCtx.fill();\n\n    return patternCanvas;\n  },\n\n  getPatternSrcFunction: function() {\n    return String(this.getPatternSrc).replace('this.color', '\"' + this.color + '\"');\n  },\n\n  /**\n   * Creates \"pattern\" instance property\n   * @param {CanvasRenderingContext2D} ctx\n   */\n  getPattern: function(ctx) {\n    return ctx.createPattern(this.source || this.getPatternSrc(), 'repeat');\n  },\n\n  /**\n   * Sets brush styles\n   * @param {CanvasRenderingContext2D} ctx\n   */\n  _setBrushStyles: function(ctx) {\n    this.callSuper('_setBrushStyles', ctx);\n    ctx.strokeStyle = this.getPattern(ctx);\n  },\n\n  /**\n   * Creates path\n   */\n  createPath: function(pathData) {\n    var path = this.callSuper('createPath', pathData),\n        topLeft = path._getLeftTopCoords().scalarAdd(path.strokeWidth / 2);\n\n    path.stroke = new fabric.Pattern({\n      source: this.source || this.getPatternSrcFunction(),\n      offsetX: -topLeft.x,\n      offsetY: -topLeft.y\n    });\n    return path;\n  }\n});\n\n\n(function() {\n\n  var getPointer = fabric.util.getPointer,\n      degreesToRadians = fabric.util.degreesToRadians,\n      isTouchEvent = fabric.util.isTouchEvent;\n\n  /**\n   * Canvas class\n   * @class fabric.Canvas\n   * @extends fabric.StaticCanvas\n   * @tutorial {@link http://fabricjs.com/fabric-intro-part-1#canvas}\n   * @see {@link fabric.Canvas#initialize} for constructor definition\n   *\n   * @fires object:modified at the end of a transform or any change when statefull is true\n   * @fires object:rotating while an object is being rotated from the control\n   * @fires object:scaling while an object is being scaled by controls\n   * @fires object:moving while an object is being dragged\n   * @fires object:skewing while an object is being skewed from the controls\n   *\n   * @fires before:transform before a transform is is started\n   * @fires before:selection:cleared\n   * @fires selection:cleared\n   * @fires selection:updated\n   * @fires selection:created\n   *\n   * @fires path:created after a drawing operation ends and the path is added\n   * @fires mouse:down\n   * @fires mouse:move\n   * @fires mouse:up\n   * @fires mouse:down:before  on mouse down, before the inner fabric logic runs\n   * @fires mouse:move:before on mouse move, before the inner fabric logic runs\n   * @fires mouse:up:before on mouse up, before the inner fabric logic runs\n   * @fires mouse:over\n   * @fires mouse:out\n   * @fires mouse:dblclick whenever a native dbl click event fires on the canvas.\n   *\n   * @fires dragover\n   * @fires dragenter\n   * @fires dragleave\n   * @fires drop:before before drop event. same native event. This is added to handle edge cases\n   * @fires drop\n   * @fires after:render at the end of the render process, receives the context in the callback\n   * @fires before:render at start the render process, receives the context in the callback\n   *\n   */\n  fabric.Canvas = fabric.util.createClass(fabric.StaticCanvas, /** @lends fabric.Canvas.prototype */ {\n\n    /**\n     * Constructor\n     * @param {HTMLElement | String} el &lt;canvas> element to initialize instance on\n     * @param {Object} [options] Options object\n     * @return {Object} thisArg\n     */\n    initialize: function(el, options) {\n      options || (options = { });\n      this.renderAndResetBound = this.renderAndReset.bind(this);\n      this.requestRenderAllBound = this.requestRenderAll.bind(this);\n      this._initStatic(el, options);\n      this._initInteractive();\n      this._createCacheCanvas();\n    },\n\n    /**\n     * When true, objects can be transformed by one side (unproportionally)\n     * when dragged on the corners that normally would not do that.\n     * @type Boolean\n     * @default\n     * @since fabric 4.0 // changed name and default value\n     */\n    uniformScaling:      true,\n\n    /**\n     * Indicates which key switches uniform scaling.\n     * values: 'altKey', 'shiftKey', 'ctrlKey'.\n     * If `null` or 'none' or any other string that is not a modifier key\n     * feature is disabled.\n     * totally wrong named. this sounds like `uniform scaling`\n     * if Canvas.uniformScaling is true, pressing this will set it to false\n     * and viceversa.\n     * @since 1.6.2\n     * @type String\n     * @default\n     */\n    uniScaleKey:           'shiftKey',\n\n    /**\n     * When true, objects use center point as the origin of scale transformation.\n     * <b>Backwards incompatibility note:</b> This property replaces \"centerTransform\" (Boolean).\n     * @since 1.3.4\n     * @type Boolean\n     * @default\n     */\n    centeredScaling:        false,\n\n    /**\n     * When true, objects use center point as the origin of rotate transformation.\n     * <b>Backwards incompatibility note:</b> This property replaces \"centerTransform\" (Boolean).\n     * @since 1.3.4\n     * @type Boolean\n     * @default\n     */\n    centeredRotation:       false,\n\n    /**\n     * Indicates which key enable centered Transform\n     * values: 'altKey', 'shiftKey', 'ctrlKey'.\n     * If `null` or 'none' or any other string that is not a modifier key\n     * feature is disabled feature disabled.\n     * @since 1.6.2\n     * @type String\n     * @default\n     */\n    centeredKey:           'altKey',\n\n    /**\n     * Indicates which key enable alternate action on corner\n     * values: 'altKey', 'shiftKey', 'ctrlKey'.\n     * If `null` or 'none' or any other string that is not a modifier key\n     * feature is disabled feature disabled.\n     * @since 1.6.2\n     * @type String\n     * @default\n     */\n    altActionKey:           'shiftKey',\n\n    /**\n     * Indicates that canvas is interactive. This property should not be changed.\n     * @type Boolean\n     * @default\n     */\n    interactive:            true,\n\n    /**\n     * Indicates whether group selection should be enabled\n     * @type Boolean\n     * @default\n     */\n    selection:              true,\n\n    /**\n     * Indicates which key or keys enable multiple click selection\n     * Pass value as a string or array of strings\n     * values: 'altKey', 'shiftKey', 'ctrlKey'.\n     * If `null` or empty or containing any other string that is not a modifier key\n     * feature is disabled.\n     * @since 1.6.2\n     * @type String|Array\n     * @default\n     */\n    selectionKey:           'shiftKey',\n\n    /**\n     * Indicates which key enable alternative selection\n     * in case of target overlapping with active object\n     * values: 'altKey', 'shiftKey', 'ctrlKey'.\n     * For a series of reason that come from the general expectations on how\n     * things should work, this feature works only for preserveObjectStacking true.\n     * If `null` or 'none' or any other string that is not a modifier key\n     * feature is disabled.\n     * @since 1.6.5\n     * @type null|String\n     * @default\n     */\n    altSelectionKey:           null,\n\n    /**\n     * Color of selection\n     * @type String\n     * @default\n     */\n    selectionColor:         'rgba(100, 100, 255, 0.3)', // blue\n\n    /**\n     * Default dash array pattern\n     * If not empty the selection border is dashed\n     * @type Array\n     */\n    selectionDashArray:     [],\n\n    /**\n     * Color of the border of selection (usually slightly darker than color of selection itself)\n     * @type String\n     * @default\n     */\n    selectionBorderColor:   'rgba(255, 255, 255, 0.3)',\n\n    /**\n     * Width of a line used in object/group selection\n     * @type Number\n     * @default\n     */\n    selectionLineWidth:     1,\n\n    /**\n     * Select only shapes that are fully contained in the dragged selection rectangle.\n     * @type Boolean\n     * @default\n     */\n    selectionFullyContained: false,\n\n    /**\n     * Default cursor value used when hovering over an object on canvas\n     * @type String\n     * @default\n     */\n    hoverCursor:            'move',\n\n    /**\n     * Default cursor value used when moving an object on canvas\n     * @type String\n     * @default\n     */\n    moveCursor:             'move',\n\n    /**\n     * Default cursor value used for the entire canvas\n     * @type String\n     * @default\n     */\n    defaultCursor:          'default',\n\n    /**\n     * Cursor value used during free drawing\n     * @type String\n     * @default\n     */\n    freeDrawingCursor:      'crosshair',\n\n    /**\n     * Cursor value used for disabled elements ( corners with disabled action )\n     * @type String\n     * @since 2.0.0\n     * @default\n     */\n    notAllowedCursor:         'not-allowed',\n\n    /**\n     * Default element class that's given to wrapper (div) element of canvas\n     * @type String\n     * @default\n     */\n    containerClass:         'canvas-container',\n\n    /**\n     * When true, object detection happens on per-pixel basis rather than on per-bounding-box\n     * @type Boolean\n     * @default\n     */\n    perPixelTargetFind:     false,\n\n    /**\n     * Number of pixels around target pixel to tolerate (consider active) during object detection\n     * @type Number\n     * @default\n     */\n    targetFindTolerance:    0,\n\n    /**\n     * When true, target detection is skipped. Target detection will return always undefined.\n     * click selection won't work anymore, events will fire with no targets.\n     * if something is selected before setting it to true, it will be deselected at the first click.\n     * area selection will still work. check the `selection` property too.\n     * if you deactivate both, you should look into staticCanvas.\n     * @type Boolean\n     * @default\n     */\n    skipTargetFind:         false,\n\n    /**\n     * When true, mouse events on canvas (mousedown/mousemove/mouseup) result in free drawing.\n     * After mousedown, mousemove creates a shape,\n     * and then mouseup finalizes it and adds an instance of `fabric.Path` onto canvas.\n     * @tutorial {@link http://fabricjs.com/fabric-intro-part-4#free_drawing}\n     * @type Boolean\n     * @default\n     */\n    isDrawingMode:          false,\n\n    /**\n     * Indicates whether objects should remain in current stack position when selected.\n     * When false objects are brought to top and rendered as part of the selection group\n     * @type Boolean\n     * @default\n     */\n    preserveObjectStacking: false,\n\n    /**\n     * Indicates the angle that an object will lock to while rotating.\n     * @type Number\n     * @since 1.6.7\n     * @default\n     */\n    snapAngle: 0,\n\n    /**\n     * Indicates the distance from the snapAngle the rotation will lock to the snapAngle.\n     * When `null`, the snapThreshold will default to the snapAngle.\n     * @type null|Number\n     * @since 1.6.7\n     * @default\n     */\n    snapThreshold: null,\n\n    /**\n     * Indicates if the right click on canvas can output the context menu or not\n     * @type Boolean\n     * @since 1.6.5\n     * @default\n     */\n    stopContextMenu: false,\n\n    /**\n     * Indicates if the canvas can fire right click events\n     * @type Boolean\n     * @since 1.6.5\n     * @default\n     */\n    fireRightClick: false,\n\n    /**\n     * Indicates if the canvas can fire middle click events\n     * @type Boolean\n     * @since 1.7.8\n     * @default\n     */\n    fireMiddleClick: false,\n\n    /**\n     * Keep track of the subTargets for Mouse Events\n     * @type fabric.Object[]\n     */\n    targets: [],\n\n    /**\n     * When the option is enabled, PointerEvent is used instead of MouseEvent.\n     * @type Boolean\n     * @default\n     */\n    enablePointerEvents: false,\n\n    /**\n     * Keep track of the hovered target\n     * @type fabric.Object\n     * @private\n     */\n    _hoveredTarget: null,\n\n    /**\n     * hold the list of nested targets hovered\n     * @type fabric.Object[]\n     * @private\n     */\n    _hoveredTargets: [],\n\n    /**\n     * @private\n     */\n    _initInteractive: function() {\n      this._currentTransform = null;\n      this._groupSelector = null;\n      this._initWrapperElement();\n      this._createUpperCanvas();\n      this._initEventListeners();\n\n      this._initRetinaScaling();\n\n      this.freeDrawingBrush = fabric.PencilBrush && new fabric.PencilBrush(this);\n\n      this.calcOffset();\n    },\n\n    /**\n     * Divides objects in two groups, one to render immediately\n     * and one to render as activeGroup.\n     * @return {Array} objects to render immediately and pushes the other in the activeGroup.\n     */\n    _chooseObjectsToRender: function() {\n      var activeObjects = this.getActiveObjects(),\n          object, objsToRender, activeGroupObjects;\n\n      if (activeObjects.length > 0 && !this.preserveObjectStacking) {\n        objsToRender = [];\n        activeGroupObjects = [];\n        for (var i = 0, length = this._objects.length; i < length; i++) {\n          object = this._objects[i];\n          if (activeObjects.indexOf(object) === -1 ) {\n            objsToRender.push(object);\n          }\n          else {\n            activeGroupObjects.push(object);\n          }\n        }\n        if (activeObjects.length > 1) {\n          this._activeObject._objects = activeGroupObjects;\n        }\n        objsToRender.push.apply(objsToRender, activeGroupObjects);\n      }\n      else {\n        objsToRender = this._objects;\n      }\n      return objsToRender;\n    },\n\n    /**\n     * Renders both the top canvas and the secondary container canvas.\n     * @return {fabric.Canvas} instance\n     * @chainable\n     */\n    renderAll: function () {\n      if (this.contextTopDirty && !this._groupSelector && !this.isDrawingMode) {\n        this.clearContext(this.contextTop);\n        this.contextTopDirty = false;\n      }\n      if (this.hasLostContext) {\n        this.renderTopLayer(this.contextTop);\n        this.hasLostContext = false;\n      }\n      var canvasToDrawOn = this.contextContainer;\n      this.renderCanvas(canvasToDrawOn, this._chooseObjectsToRender());\n      return this;\n    },\n\n    renderTopLayer: function(ctx) {\n      ctx.save();\n      if (this.isDrawingMode && this._isCurrentlyDrawing) {\n        this.freeDrawingBrush && this.freeDrawingBrush._render();\n        this.contextTopDirty = true;\n      }\n      // we render the top context - last object\n      if (this.selection && this._groupSelector) {\n        this._drawSelection(ctx);\n        this.contextTopDirty = true;\n      }\n      ctx.restore();\n    },\n\n    /**\n     * Method to render only the top canvas.\n     * Also used to render the group selection box.\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     */\n    renderTop: function () {\n      var ctx = this.contextTop;\n      this.clearContext(ctx);\n      this.renderTopLayer(ctx);\n      this.fire('after:render');\n      return this;\n    },\n\n    /**\n     * @private\n     */\n    _normalizePointer: function (object, pointer) {\n      var m = object.calcTransformMatrix(),\n          invertedM = fabric.util.invertTransform(m),\n          vptPointer = this.restorePointerVpt(pointer);\n      return fabric.util.transformPoint(vptPointer, invertedM);\n    },\n\n    /**\n     * Returns true if object is transparent at a certain location\n     * @param {fabric.Object} target Object to check\n     * @param {Number} x Left coordinate\n     * @param {Number} y Top coordinate\n     * @return {Boolean}\n     */\n    isTargetTransparent: function (target, x, y) {\n      // in case the target is the activeObject, we cannot execute this optimization\n      // because we need to draw controls too.\n      if (target.shouldCache() && target._cacheCanvas && target !== this._activeObject) {\n        var normalizedPointer = this._normalizePointer(target, {x: x, y: y}),\n            targetRelativeX = Math.max(target.cacheTranslationX + (normalizedPointer.x * target.zoomX), 0),\n            targetRelativeY = Math.max(target.cacheTranslationY + (normalizedPointer.y * target.zoomY), 0);\n\n        var isTransparent = fabric.util.isTransparent(\n          target._cacheContext, Math.round(targetRelativeX), Math.round(targetRelativeY), this.targetFindTolerance);\n\n        return isTransparent;\n      }\n\n      var ctx = this.contextCache,\n          originalColor = target.selectionBackgroundColor, v = this.viewportTransform;\n\n      target.selectionBackgroundColor = '';\n\n      this.clearContext(ctx);\n\n      ctx.save();\n      ctx.transform(v[0], v[1], v[2], v[3], v[4], v[5]);\n      target.render(ctx);\n      ctx.restore();\n\n      target.selectionBackgroundColor = originalColor;\n\n      var isTransparent = fabric.util.isTransparent(\n        ctx, x, y, this.targetFindTolerance);\n\n      return isTransparent;\n    },\n\n    /**\n     * takes an event and determines if selection key has been pressed\n     * @private\n     * @param {Event} e Event object\n     */\n    _isSelectionKeyPressed: function(e) {\n      var selectionKeyPressed = false;\n\n      if (Array.isArray(this.selectionKey)) {\n        selectionKeyPressed = !!this.selectionKey.find(function(key) { return e[key] === true; });\n      }\n      else {\n        selectionKeyPressed = e[this.selectionKey];\n      }\n\n      return selectionKeyPressed;\n    },\n\n    /**\n     * @private\n     * @param {Event} e Event object\n     * @param {fabric.Object} target\n     */\n    _shouldClearSelection: function (e, target) {\n      var activeObjects = this.getActiveObjects(),\n          activeObject = this._activeObject;\n\n      return (\n        !target\n        ||\n        (target &&\n          activeObject &&\n          activeObjects.length > 1 &&\n          activeObjects.indexOf(target) === -1 &&\n          activeObject !== target &&\n          !this._isSelectionKeyPressed(e))\n        ||\n        (target && !target.evented)\n        ||\n        (target &&\n          !target.selectable &&\n          activeObject &&\n          activeObject !== target)\n      );\n    },\n\n    /**\n     * centeredScaling from object can't override centeredScaling from canvas.\n     * this should be fixed, since object setting should take precedence over canvas.\n     * also this should be something that will be migrated in the control properties.\n     * as ability to define the origin of the transformation that the control provide.\n     * @private\n     * @param {fabric.Object} target\n     * @param {String} action\n     * @param {Boolean} altKey\n     */\n    _shouldCenterTransform: function (target, action, altKey) {\n      if (!target) {\n        return;\n      }\n\n      var centerTransform;\n\n      if (action === 'scale' || action === 'scaleX' || action === 'scaleY' || action === 'resizing') {\n        centerTransform = this.centeredScaling || target.centeredScaling;\n      }\n      else if (action === 'rotate') {\n        centerTransform = this.centeredRotation || target.centeredRotation;\n      }\n\n      return centerTransform ? !altKey : altKey;\n    },\n\n    /**\n     * should disappear before release 4.0\n     * @private\n     */\n    _getOriginFromCorner: function(target, corner) {\n      var origin = {\n        x: target.originX,\n        y: target.originY\n      };\n\n      if (corner === 'ml' || corner === 'tl' || corner === 'bl') {\n        origin.x = 'right';\n      }\n      else if (corner === 'mr' || corner === 'tr' || corner === 'br') {\n        origin.x = 'left';\n      }\n\n      if (corner === 'tl' || corner === 'mt' || corner === 'tr') {\n        origin.y = 'bottom';\n      }\n      else if (corner === 'bl' || corner === 'mb' || corner === 'br') {\n        origin.y = 'top';\n      }\n      return origin;\n    },\n\n    /**\n     * @private\n     * @param {Boolean} alreadySelected true if target is already selected\n     * @param {String} corner a string representing the corner ml, mr, tl ...\n     * @param {Event} e Event object\n     * @param {fabric.Object} [target] inserted back to help overriding. Unused\n     */\n    _getActionFromCorner: function(alreadySelected, corner, e, target) {\n      if (!corner || !alreadySelected) {\n        return 'drag';\n      }\n      var control = target.controls[corner];\n      return control.getActionName(e, control, target);\n    },\n\n    /**\n     * @private\n     * @param {Event} e Event object\n     * @param {fabric.Object} target\n     */\n    _setupCurrentTransform: function (e, target, alreadySelected) {\n      if (!target) {\n        return;\n      }\n\n      var pointer = this.getPointer(e), corner = target.__corner,\n          control = target.controls[corner],\n          actionHandler = (alreadySelected && corner) ?\n            control.getActionHandler(e, target, control) : fabric.controlsUtils.dragHandler,\n          action = this._getActionFromCorner(alreadySelected, corner, e, target),\n          origin = this._getOriginFromCorner(target, corner),\n          altKey = e[this.centeredKey],\n          transform = {\n            target: target,\n            action: action,\n            actionHandler: actionHandler,\n            corner: corner,\n            scaleX: target.scaleX,\n            scaleY: target.scaleY,\n            skewX: target.skewX,\n            skewY: target.skewY,\n            // used by transation\n            offsetX: pointer.x - target.left,\n            offsetY: pointer.y - target.top,\n            originX: origin.x,\n            originY: origin.y,\n            ex: pointer.x,\n            ey: pointer.y,\n            lastX: pointer.x,\n            lastY: pointer.y,\n            // unsure they are useful anymore.\n            // left: target.left,\n            // top: target.top,\n            theta: degreesToRadians(target.angle),\n            // end of unsure\n            width: target.width * target.scaleX,\n            shiftKey: e.shiftKey,\n            altKey: altKey,\n            original: fabric.util.saveObjectTransform(target),\n          };\n\n      if (this._shouldCenterTransform(target, action, altKey)) {\n        transform.originX = 'center';\n        transform.originY = 'center';\n      }\n      transform.original.originX = origin.x;\n      transform.original.originY = origin.y;\n      this._currentTransform = transform;\n      this._beforeTransform(e);\n    },\n\n    /**\n     * Set the cursor type of the canvas element\n     * @param {String} value Cursor type of the canvas element.\n     * @see http://www.w3.org/TR/css3-ui/#cursor\n     */\n    setCursor: function (value) {\n      this.upperCanvasEl.style.cursor = value;\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx to draw the selection on\n     */\n    _drawSelection: function (ctx) {\n      var selector = this._groupSelector,\n          viewportStart = new fabric.Point(selector.ex, selector.ey),\n          start = fabric.util.transformPoint(viewportStart, this.viewportTransform),\n          viewportExtent = new fabric.Point(selector.ex + selector.left, selector.ey + selector.top),\n          extent = fabric.util.transformPoint(viewportExtent, this.viewportTransform),\n          minX = Math.min(start.x, extent.x),\n          minY = Math.min(start.y, extent.y),\n          maxX = Math.max(start.x, extent.x),\n          maxY = Math.max(start.y, extent.y),\n          strokeOffset = this.selectionLineWidth / 2;\n\n      if (this.selectionColor) {\n        ctx.fillStyle = this.selectionColor;\n        ctx.fillRect(minX, minY, maxX - minX, maxY - minY);\n      }\n\n      if (!this.selectionLineWidth || !this.selectionBorderColor) {\n        return;\n      }\n      ctx.lineWidth = this.selectionLineWidth;\n      ctx.strokeStyle = this.selectionBorderColor;\n\n      minX += strokeOffset;\n      minY += strokeOffset;\n      maxX -= strokeOffset;\n      maxY -= strokeOffset;\n      // selection border\n      fabric.Object.prototype._setLineDash.call(this, ctx, this.selectionDashArray);\n      ctx.strokeRect(minX, minY, maxX - minX, maxY - minY);\n    },\n\n    /**\n     * Method that determines what object we are clicking on\n     * the skipGroup parameter is for internal use, is needed for shift+click action\n     * 11/09/2018 TODO: would be cool if findTarget could discern between being a full target\n     * or the outside part of the corner.\n     * @param {Event} e mouse event\n     * @param {Boolean} skipGroup when true, activeGroup is skipped and only objects are traversed through\n     * @return {fabric.Object} the target found\n     */\n    findTarget: function (e, skipGroup) {\n      if (this.skipTargetFind) {\n        return;\n      }\n\n      var ignoreZoom = true,\n          pointer = this.getPointer(e, ignoreZoom),\n          activeObject = this._activeObject,\n          aObjects = this.getActiveObjects(),\n          activeTarget, activeTargetSubs,\n          isTouch = isTouchEvent(e),\n          shouldLookForActive = (aObjects.length > 1 && !skipGroup) || aObjects.length === 1;\n\n      // first check current group (if one exists)\n      // active group does not check sub targets like normal groups.\n      // if active group just exits.\n      this.targets = [];\n\n      // if we hit the corner of an activeObject, let's return that.\n      if (shouldLookForActive && activeObject._findTargetCorner(pointer, isTouch)) {\n        return activeObject;\n      }\n      if (aObjects.length > 1 && !skipGroup && activeObject === this._searchPossibleTargets([activeObject], pointer)) {\n        return activeObject;\n      }\n      if (aObjects.length === 1 &&\n        activeObject === this._searchPossibleTargets([activeObject], pointer)) {\n        if (!this.preserveObjectStacking) {\n          return activeObject;\n        }\n        else {\n          activeTarget = activeObject;\n          activeTargetSubs = this.targets;\n          this.targets = [];\n        }\n      }\n      var target = this._searchPossibleTargets(this._objects, pointer);\n      if (e[this.altSelectionKey] && target && activeTarget && target !== activeTarget) {\n        target = activeTarget;\n        this.targets = activeTargetSubs;\n      }\n      return target;\n    },\n\n    /**\n     * Checks point is inside the object.\n     * @param {Object} [pointer] x,y object of point coordinates we want to check.\n     * @param {fabric.Object} obj Object to test against\n     * @param {Object} [globalPointer] x,y object of point coordinates relative to canvas used to search per pixel target.\n     * @return {Boolean} true if point is contained within an area of given object\n     * @private\n     */\n    _checkTarget: function(pointer, obj, globalPointer) {\n      if (obj &&\n          obj.visible &&\n          obj.evented &&\n          // http://www.geog.ubc.ca/courses/klink/gis.notes/ncgia/u32.html\n          // http://idav.ucdavis.edu/~okreylos/TAship/Spring2000/PointInPolygon.html\n          obj.containsPoint(pointer)\n      ) {\n        if ((this.perPixelTargetFind || obj.perPixelTargetFind) && !obj.isEditing) {\n          var isTransparent = this.isTargetTransparent(obj, globalPointer.x, globalPointer.y);\n          if (!isTransparent) {\n            return true;\n          }\n        }\n        else {\n          return true;\n        }\n      }\n    },\n\n    /**\n     * Function used to search inside objects an object that contains pointer in bounding box or that contains pointerOnCanvas when painted\n     * @param {Array} [objects] objects array to look into\n     * @param {Object} [pointer] x,y object of point coordinates we want to check.\n     * @return {fabric.Object} object that contains pointer\n     * @private\n     */\n    _searchPossibleTargets: function(objects, pointer) {\n      // Cache all targets where their bounding box contains point.\n      var target, i = objects.length, subTarget;\n      // Do not check for currently grouped objects, since we check the parent group itself.\n      // until we call this function specifically to search inside the activeGroup\n      while (i--) {\n        var objToCheck = objects[i];\n        var pointerToUse = objToCheck.group ?\n          this._normalizePointer(objToCheck.group, pointer) : pointer;\n        if (this._checkTarget(pointerToUse, objToCheck, pointer)) {\n          target = objects[i];\n          if (target.subTargetCheck && target instanceof fabric.Group) {\n            subTarget = this._searchPossibleTargets(target._objects, pointer);\n            subTarget && this.targets.push(subTarget);\n          }\n          break;\n        }\n      }\n      return target;\n    },\n\n    /**\n     * Returns pointer coordinates without the effect of the viewport\n     * @param {Object} pointer with \"x\" and \"y\" number values\n     * @return {Object} object with \"x\" and \"y\" number values\n     */\n    restorePointerVpt: function(pointer) {\n      return fabric.util.transformPoint(\n        pointer,\n        fabric.util.invertTransform(this.viewportTransform)\n      );\n    },\n\n    /**\n     * Returns pointer coordinates relative to canvas.\n     * Can return coordinates with or without viewportTransform.\n     * ignoreZoom false gives back coordinates that represent\n     * the point clicked on canvas element.\n     * ignoreZoom true gives back coordinates after being processed\n     * by the viewportTransform ( sort of coordinates of what is displayed\n     * on the canvas where you are clicking.\n     * ignoreZoom true = HTMLElement coordinates relative to top,left\n     * ignoreZoom false, default = fabric space coordinates, the same used for shape position\n     * To interact with your shapes top and left you want to use ignoreZoom true\n     * most of the time, while ignoreZoom false will give you coordinates\n     * compatible with the object.oCoords system.\n     * of the time.\n     * @param {Event} e\n     * @param {Boolean} ignoreZoom\n     * @return {Object} object with \"x\" and \"y\" number values\n     */\n    getPointer: function (e, ignoreZoom) {\n      // return cached values if we are in the event processing chain\n      if (this._absolutePointer && !ignoreZoom) {\n        return this._absolutePointer;\n      }\n      if (this._pointer && ignoreZoom) {\n        return this._pointer;\n      }\n\n      var pointer = getPointer(e),\n          upperCanvasEl = this.upperCanvasEl,\n          bounds = upperCanvasEl.getBoundingClientRect(),\n          boundsWidth = bounds.width || 0,\n          boundsHeight = bounds.height || 0,\n          cssScale;\n\n      if (!boundsWidth || !boundsHeight ) {\n        if ('top' in bounds && 'bottom' in bounds) {\n          boundsHeight = Math.abs( bounds.top - bounds.bottom );\n        }\n        if ('right' in bounds && 'left' in bounds) {\n          boundsWidth = Math.abs( bounds.right - bounds.left );\n        }\n      }\n\n      this.calcOffset();\n      pointer.x = pointer.x - this._offset.left;\n      pointer.y = pointer.y - this._offset.top;\n      if (!ignoreZoom) {\n        pointer = this.restorePointerVpt(pointer);\n      }\n\n      var retinaScaling = this.getRetinaScaling();\n      if (retinaScaling !== 1) {\n        pointer.x /= retinaScaling;\n        pointer.y /= retinaScaling;\n      }\n\n      if (boundsWidth === 0 || boundsHeight === 0) {\n        // If bounds are not available (i.e. not visible), do not apply scale.\n        cssScale = { width: 1, height: 1 };\n      }\n      else {\n        cssScale = {\n          width: upperCanvasEl.width / boundsWidth,\n          height: upperCanvasEl.height / boundsHeight\n        };\n      }\n\n      return {\n        x: pointer.x * cssScale.width,\n        y: pointer.y * cssScale.height\n      };\n    },\n\n    /**\n     * @private\n     * @throws {CANVAS_INIT_ERROR} If canvas can not be initialized\n     */\n    _createUpperCanvas: function () {\n      var lowerCanvasClass = this.lowerCanvasEl.className.replace(/\\s*lower-canvas\\s*/, ''),\n          lowerCanvasEl = this.lowerCanvasEl, upperCanvasEl = this.upperCanvasEl;\n\n      // there is no need to create a new upperCanvas element if we have already one.\n      if (upperCanvasEl) {\n        upperCanvasEl.className = '';\n      }\n      else {\n        upperCanvasEl = this._createCanvasElement();\n        this.upperCanvasEl = upperCanvasEl;\n      }\n      fabric.util.addClass(upperCanvasEl, 'upper-canvas ' + lowerCanvasClass);\n\n      this.wrapperEl.appendChild(upperCanvasEl);\n\n      this._copyCanvasStyle(lowerCanvasEl, upperCanvasEl);\n      this._applyCanvasStyle(upperCanvasEl);\n      this.contextTop = upperCanvasEl.getContext('2d');\n    },\n\n    /**\n     * Returns context of top canvas where interactions are drawn\n     * @returns {CanvasRenderingContext2D}\n     */\n    getTopContext: function () {\n      return this.contextTop;\n    },\n\n    /**\n     * @private\n     */\n    _createCacheCanvas: function () {\n      this.cacheCanvasEl = this._createCanvasElement();\n      this.cacheCanvasEl.setAttribute('width', this.width);\n      this.cacheCanvasEl.setAttribute('height', this.height);\n      this.contextCache = this.cacheCanvasEl.getContext('2d');\n    },\n\n    /**\n     * @private\n     */\n    _initWrapperElement: function () {\n      this.wrapperEl = fabric.util.wrapElement(this.lowerCanvasEl, 'div', {\n        'class': this.containerClass\n      });\n      fabric.util.setStyle(this.wrapperEl, {\n        width: this.width + 'px',\n        height: this.height + 'px',\n        position: 'relative'\n      });\n      fabric.util.makeElementUnselectable(this.wrapperEl);\n    },\n\n    /**\n     * @private\n     * @param {HTMLElement} element canvas element to apply styles on\n     */\n    _applyCanvasStyle: function (element) {\n      var width = this.width || element.width,\n          height = this.height || element.height;\n\n      fabric.util.setStyle(element, {\n        position: 'absolute',\n        width: width + 'px',\n        height: height + 'px',\n        left: 0,\n        top: 0,\n        'touch-action': this.allowTouchScrolling ? 'manipulation' : 'none',\n        '-ms-touch-action': this.allowTouchScrolling ? 'manipulation' : 'none'\n      });\n      element.width = width;\n      element.height = height;\n      fabric.util.makeElementUnselectable(element);\n    },\n\n    /**\n     * Copy the entire inline style from one element (fromEl) to another (toEl)\n     * @private\n     * @param {Element} fromEl Element style is copied from\n     * @param {Element} toEl Element copied style is applied to\n     */\n    _copyCanvasStyle: function (fromEl, toEl) {\n      toEl.style.cssText = fromEl.style.cssText;\n    },\n\n    /**\n     * Returns context of canvas where object selection is drawn\n     * @return {CanvasRenderingContext2D}\n     */\n    getSelectionContext: function() {\n      return this.contextTop;\n    },\n\n    /**\n     * Returns &lt;canvas> element on which object selection is drawn\n     * @return {HTMLCanvasElement}\n     */\n    getSelectionElement: function () {\n      return this.upperCanvasEl;\n    },\n\n    /**\n     * Returns currently active object\n     * @return {fabric.Object} active object\n     */\n    getActiveObject: function () {\n      return this._activeObject;\n    },\n\n    /**\n     * Returns an array with the current selected objects\n     * @return {fabric.Object} active object\n     */\n    getActiveObjects: function () {\n      var active = this._activeObject;\n      if (active) {\n        if (active.type === 'activeSelection' && active._objects) {\n          return active._objects.slice(0);\n        }\n        else {\n          return [active];\n        }\n      }\n      return [];\n    },\n\n    /**\n     * @private\n     * @param {fabric.Object} obj Object that was removed\n     */\n    _onObjectRemoved: function(obj) {\n      // removing active object should fire \"selection:cleared\" events\n      if (obj === this._activeObject) {\n        this.fire('before:selection:cleared', { target: obj });\n        this._discardActiveObject();\n        this.fire('selection:cleared', { target: obj });\n        obj.fire('deselected');\n      }\n      if (obj === this._hoveredTarget){\n        this._hoveredTarget = null;\n        this._hoveredTargets = [];\n      }\n      this.callSuper('_onObjectRemoved', obj);\n    },\n\n    /**\n     * @private\n     * Compares the old activeObject with the current one and fires correct events\n     * @param {fabric.Object} obj old activeObject\n     */\n    _fireSelectionEvents: function(oldObjects, e) {\n      var somethingChanged = false, objects = this.getActiveObjects(),\n          added = [], removed = [];\n      oldObjects.forEach(function(oldObject) {\n        if (objects.indexOf(oldObject) === -1) {\n          somethingChanged = true;\n          oldObject.fire('deselected', {\n            e: e,\n            target: oldObject\n          });\n          removed.push(oldObject);\n        }\n      });\n      objects.forEach(function(object) {\n        if (oldObjects.indexOf(object) === -1) {\n          somethingChanged = true;\n          object.fire('selected', {\n            e: e,\n            target: object\n          });\n          added.push(object);\n        }\n      });\n      if (oldObjects.length > 0 && objects.length > 0) {\n        somethingChanged && this.fire('selection:updated', {\n          e: e,\n          selected: added,\n          deselected: removed,\n        });\n      }\n      else if (objects.length > 0) {\n        this.fire('selection:created', {\n          e: e,\n          selected: added,\n        });\n      }\n      else if (oldObjects.length > 0) {\n        this.fire('selection:cleared', {\n          e: e,\n          deselected: removed,\n        });\n      }\n    },\n\n    /**\n     * Sets given object as the only active object on canvas\n     * @param {fabric.Object} object Object to set as an active one\n     * @param {Event} [e] Event (passed along when firing \"object:selected\")\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     */\n    setActiveObject: function (object, e) {\n      var currentActives = this.getActiveObjects();\n      this._setActiveObject(object, e);\n      this._fireSelectionEvents(currentActives, e);\n      return this;\n    },\n\n    /**\n     * This is a private method for now.\n     * This is supposed to be equivalent to setActiveObject but without firing\n     * any event. There is commitment to have this stay this way.\n     * This is the functional part of setActiveObject.\n     * @private\n     * @param {Object} object to set as active\n     * @param {Event} [e] Event (passed along when firing \"object:selected\")\n     * @return {Boolean} true if the selection happened\n     */\n    _setActiveObject: function(object, e) {\n      if (this._activeObject === object) {\n        return false;\n      }\n      if (!this._discardActiveObject(e, object)) {\n        return false;\n      }\n      if (object.onSelect({ e: e })) {\n        return false;\n      }\n      this._activeObject = object;\n      return true;\n    },\n\n    /**\n     * This is a private method for now.\n     * This is supposed to be equivalent to discardActiveObject but without firing\n     * any events. There is commitment to have this stay this way.\n     * This is the functional part of discardActiveObject.\n     * @param {Event} [e] Event (passed along when firing \"object:deselected\")\n     * @param {Object} object to set as active\n     * @return {Boolean} true if the selection happened\n     * @private\n     */\n    _discardActiveObject: function(e, object) {\n      var obj = this._activeObject;\n      if (obj) {\n        // onDeselect return TRUE to cancel selection;\n        if (obj.onDeselect({ e: e, object: object })) {\n          return false;\n        }\n        this._activeObject = null;\n      }\n      return true;\n    },\n\n    /**\n     * Discards currently active object and fire events. If the function is called by fabric\n     * as a consequence of a mouse event, the event is passed as a parameter and\n     * sent to the fire function for the custom events. When used as a method the\n     * e param does not have any application.\n     * @param {event} e\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     */\n    discardActiveObject: function (e) {\n      var currentActives = this.getActiveObjects(), activeObject = this.getActiveObject();\n      if (currentActives.length) {\n        this.fire('before:selection:cleared', { target: activeObject, e: e });\n      }\n      this._discardActiveObject(e);\n      this._fireSelectionEvents(currentActives, e);\n      return this;\n    },\n\n    /**\n     * Clears a canvas element and removes all event listeners\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     */\n    dispose: function () {\n      var wrapper = this.wrapperEl;\n      this.removeListeners();\n      wrapper.removeChild(this.upperCanvasEl);\n      wrapper.removeChild(this.lowerCanvasEl);\n      this.contextCache = null;\n      this.contextTop = null;\n      ['upperCanvasEl', 'cacheCanvasEl'].forEach((function(element) {\n        fabric.util.cleanUpJsdomNode(this[element]);\n        this[element] = undefined;\n      }).bind(this));\n      if (wrapper.parentNode) {\n        wrapper.parentNode.replaceChild(this.lowerCanvasEl, this.wrapperEl);\n      }\n      delete this.wrapperEl;\n      fabric.StaticCanvas.prototype.dispose.call(this);\n      return this;\n    },\n\n    /**\n     * Clears all contexts (background, main, top) of an instance\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     */\n    clear: function () {\n      // this.discardActiveGroup();\n      this.discardActiveObject();\n      this.clearContext(this.contextTop);\n      return this.callSuper('clear');\n    },\n\n    /**\n     * Draws objects' controls (borders/controls)\n     * @param {CanvasRenderingContext2D} ctx Context to render controls on\n     */\n    drawControls: function(ctx) {\n      var activeObject = this._activeObject;\n\n      if (activeObject) {\n        activeObject._renderControls(ctx);\n      }\n    },\n\n    /**\n     * @private\n     */\n    _toObject: function(instance, methodName, propertiesToInclude) {\n      //If the object is part of the current selection group, it should\n      //be transformed appropriately\n      //i.e. it should be serialised as it would appear if the selection group\n      //were to be destroyed.\n      var originalProperties = this._realizeGroupTransformOnObject(instance),\n          object = this.callSuper('_toObject', instance, methodName, propertiesToInclude);\n      //Undo the damage we did by changing all of its properties\n      this._unwindGroupTransformOnObject(instance, originalProperties);\n      return object;\n    },\n\n    /**\n     * Realises an object's group transformation on it\n     * @private\n     * @param {fabric.Object} [instance] the object to transform (gets mutated)\n     * @returns the original values of instance which were changed\n     */\n    _realizeGroupTransformOnObject: function(instance) {\n      if (instance.group && instance.group.type === 'activeSelection' && this._activeObject === instance.group) {\n        var layoutProps = ['angle', 'flipX', 'flipY', 'left', 'scaleX', 'scaleY', 'skewX', 'skewY', 'top'];\n        //Copy all the positionally relevant properties across now\n        var originalValues = {};\n        layoutProps.forEach(function(prop) {\n          originalValues[prop] = instance[prop];\n        });\n        fabric.util.addTransformToObject(instance, this._activeObject.calcOwnMatrix());\n        return originalValues;\n      }\n      else {\n        return null;\n      }\n    },\n\n    /**\n     * Restores the changed properties of instance\n     * @private\n     * @param {fabric.Object} [instance] the object to un-transform (gets mutated)\n     * @param {Object} [originalValues] the original values of instance, as returned by _realizeGroupTransformOnObject\n     */\n    _unwindGroupTransformOnObject: function(instance, originalValues) {\n      if (originalValues) {\n        instance.set(originalValues);\n      }\n    },\n\n    /**\n     * @private\n     */\n    _setSVGObject: function(markup, instance, reviver) {\n      //If the object is in a selection group, simulate what would happen to that\n      //object when the group is deselected\n      var originalProperties = this._realizeGroupTransformOnObject(instance);\n      this.callSuper('_setSVGObject', markup, instance, reviver);\n      this._unwindGroupTransformOnObject(instance, originalProperties);\n    },\n\n    setViewportTransform: function (vpt) {\n      if (this.renderOnAddRemove && this._activeObject && this._activeObject.isEditing) {\n        this._activeObject.clearContextTop();\n      }\n      fabric.StaticCanvas.prototype.setViewportTransform.call(this, vpt);\n    }\n  });\n\n  // copying static properties manually to work around Opera's bug,\n  // where \"prototype\" property is enumerable and overrides existing prototype\n  for (var prop in fabric.StaticCanvas) {\n    if (prop !== 'prototype') {\n      fabric.Canvas[prop] = fabric.StaticCanvas[prop];\n    }\n  }\n})();\n\n\n(function() {\n\n  var addListener = fabric.util.addListener,\n      removeListener = fabric.util.removeListener,\n      RIGHT_CLICK = 3, MIDDLE_CLICK = 2, LEFT_CLICK = 1,\n      addEventOptions = { passive: false };\n\n  function checkClick(e, value) {\n    return e.button && (e.button === value - 1);\n  }\n\n  fabric.util.object.extend(fabric.Canvas.prototype, /** @lends fabric.Canvas.prototype */ {\n\n    /**\n     * Contains the id of the touch event that owns the fabric transform\n     * @type Number\n     * @private\n     */\n    mainTouchId: null,\n\n    /**\n     * Adds mouse listeners to canvas\n     * @private\n     */\n    _initEventListeners: function () {\n      // in case we initialized the class twice. This should not happen normally\n      // but in some kind of applications where the canvas element may be changed\n      // this is a workaround to having double listeners.\n      this.removeListeners();\n      this._bindEvents();\n      this.addOrRemove(addListener, 'add');\n    },\n\n    /**\n     * return an event prefix pointer or mouse.\n     * @private\n     */\n    _getEventPrefix: function () {\n      return this.enablePointerEvents ? 'pointer' : 'mouse';\n    },\n\n    addOrRemove: function(functor, eventjsFunctor) {\n      var canvasElement = this.upperCanvasEl,\n          eventTypePrefix = this._getEventPrefix();\n      functor(fabric.window, 'resize', this._onResize);\n      functor(canvasElement, eventTypePrefix + 'down', this._onMouseDown);\n      functor(canvasElement, eventTypePrefix + 'move', this._onMouseMove, addEventOptions);\n      functor(canvasElement, eventTypePrefix + 'out', this._onMouseOut);\n      functor(canvasElement, eventTypePrefix + 'enter', this._onMouseEnter);\n      functor(canvasElement, 'wheel', this._onMouseWheel);\n      functor(canvasElement, 'contextmenu', this._onContextMenu);\n      functor(canvasElement, 'dblclick', this._onDoubleClick);\n      functor(canvasElement, 'dragover', this._onDragOver);\n      functor(canvasElement, 'dragenter', this._onDragEnter);\n      functor(canvasElement, 'dragleave', this._onDragLeave);\n      functor(canvasElement, 'drop', this._onDrop);\n      if (!this.enablePointerEvents) {\n        functor(canvasElement, 'touchstart', this._onTouchStart, addEventOptions);\n      }\n      if (typeof eventjs !== 'undefined' && eventjsFunctor in eventjs) {\n        eventjs[eventjsFunctor](canvasElement, 'gesture', this._onGesture);\n        eventjs[eventjsFunctor](canvasElement, 'drag', this._onDrag);\n        eventjs[eventjsFunctor](canvasElement, 'orientation', this._onOrientationChange);\n        eventjs[eventjsFunctor](canvasElement, 'shake', this._onShake);\n        eventjs[eventjsFunctor](canvasElement, 'longpress', this._onLongPress);\n      }\n    },\n\n    /**\n     * Removes all event listeners\n     */\n    removeListeners: function() {\n      this.addOrRemove(removeListener, 'remove');\n      // if you dispose on a mouseDown, before mouse up, you need to clean document to...\n      var eventTypePrefix = this._getEventPrefix();\n      removeListener(fabric.document, eventTypePrefix + 'up', this._onMouseUp);\n      removeListener(fabric.document, 'touchend', this._onTouchEnd, addEventOptions);\n      removeListener(fabric.document, eventTypePrefix + 'move', this._onMouseMove, addEventOptions);\n      removeListener(fabric.document, 'touchmove', this._onMouseMove, addEventOptions);\n    },\n\n    /**\n     * @private\n     */\n    _bindEvents: function() {\n      if (this.eventsBound) {\n        // for any reason we pass here twice we do not want to bind events twice.\n        return;\n      }\n      this._onMouseDown = this._onMouseDown.bind(this);\n      this._onTouchStart = this._onTouchStart.bind(this);\n      this._onMouseMove = this._onMouseMove.bind(this);\n      this._onMouseUp = this._onMouseUp.bind(this);\n      this._onTouchEnd = this._onTouchEnd.bind(this);\n      this._onResize = this._onResize.bind(this);\n      this._onGesture = this._onGesture.bind(this);\n      this._onDrag = this._onDrag.bind(this);\n      this._onShake = this._onShake.bind(this);\n      this._onLongPress = this._onLongPress.bind(this);\n      this._onOrientationChange = this._onOrientationChange.bind(this);\n      this._onMouseWheel = this._onMouseWheel.bind(this);\n      this._onMouseOut = this._onMouseOut.bind(this);\n      this._onMouseEnter = this._onMouseEnter.bind(this);\n      this._onContextMenu = this._onContextMenu.bind(this);\n      this._onDoubleClick = this._onDoubleClick.bind(this);\n      this._onDragOver = this._onDragOver.bind(this);\n      this._onDragEnter = this._simpleEventHandler.bind(this, 'dragenter');\n      this._onDragLeave = this._simpleEventHandler.bind(this, 'dragleave');\n      this._onDrop = this._onDrop.bind(this);\n      this.eventsBound = true;\n    },\n\n    /**\n     * @private\n     * @param {Event} [e] Event object fired on Event.js gesture\n     * @param {Event} [self] Inner Event object\n     */\n    _onGesture: function(e, self) {\n      this.__onTransformGesture && this.__onTransformGesture(e, self);\n    },\n\n    /**\n     * @private\n     * @param {Event} [e] Event object fired on Event.js drag\n     * @param {Event} [self] Inner Event object\n     */\n    _onDrag: function(e, self) {\n      this.__onDrag && this.__onDrag(e, self);\n    },\n\n    /**\n     * @private\n     * @param {Event} [e] Event object fired on wheel event\n     */\n    _onMouseWheel: function(e) {\n      this.__onMouseWheel(e);\n    },\n\n    /**\n     * @private\n     * @param {Event} e Event object fired on mousedown\n     */\n    _onMouseOut: function(e) {\n      var target = this._hoveredTarget;\n      this.fire('mouse:out', { target: target, e: e });\n      this._hoveredTarget = null;\n      target && target.fire('mouseout', { e: e });\n\n      var _this = this;\n      this._hoveredTargets.forEach(function(_target){\n        _this.fire('mouse:out', { target: target, e: e });\n        _target && target.fire('mouseout', { e: e });\n      });\n      this._hoveredTargets = [];\n\n      if (this._iTextInstances) {\n        this._iTextInstances.forEach(function(obj) {\n          if (obj.isEditing) {\n            obj.hiddenTextarea.focus();\n          }\n        });\n      }\n    },\n\n    /**\n     * @private\n     * @param {Event} e Event object fired on mouseenter\n     */\n    _onMouseEnter: function(e) {\n      // This find target and consequent 'mouse:over' is used to\n      // clear old instances on hovered target.\n      // calling findTarget has the side effect of killing target.__corner.\n      // as a short term fix we are not firing this if we are currently transforming.\n      // as a long term fix we need to separate the action of finding a target with the\n      // side effects we added to it.\n      if (!this._currentTransform && !this.findTarget(e)) {\n        this.fire('mouse:over', { target: null, e: e });\n        this._hoveredTarget = null;\n        this._hoveredTargets = [];\n      }\n    },\n\n    /**\n     * @private\n     * @param {Event} [e] Event object fired on Event.js orientation change\n     * @param {Event} [self] Inner Event object\n     */\n    _onOrientationChange: function(e, self) {\n      this.__onOrientationChange && this.__onOrientationChange(e, self);\n    },\n\n    /**\n     * @private\n     * @param {Event} [e] Event object fired on Event.js shake\n     * @param {Event} [self] Inner Event object\n     */\n    _onShake: function(e, self) {\n      this.__onShake && this.__onShake(e, self);\n    },\n\n    /**\n     * @private\n     * @param {Event} [e] Event object fired on Event.js shake\n     * @param {Event} [self] Inner Event object\n     */\n    _onLongPress: function(e, self) {\n      this.__onLongPress && this.__onLongPress(e, self);\n    },\n\n    /**\n     * prevent default to allow drop event to be fired\n     * @private\n     * @param {Event} [e] Event object fired on Event.js shake\n     */\n    _onDragOver: function(e) {\n      e.preventDefault();\n      var target = this._simpleEventHandler('dragover', e);\n      this._fireEnterLeaveEvents(target, e);\n    },\n\n    /**\n     * `drop:before` is a an event that allow you to schedule logic\n     * before the `drop` event. Prefer `drop` event always, but if you need\n     * to run some drop-disabling logic on an event, since there is no way\n     * to handle event handlers ordering, use `drop:before`\n     * @param {Event} e\n     */\n    _onDrop: function (e) {\n      this._simpleEventHandler('drop:before', e);\n      return this._simpleEventHandler('drop', e);\n    },\n\n    /**\n     * @private\n     * @param {Event} e Event object fired on mousedown\n     */\n    _onContextMenu: function (e) {\n      if (this.stopContextMenu) {\n        e.stopPropagation();\n        e.preventDefault();\n      }\n      return false;\n    },\n\n    /**\n     * @private\n     * @param {Event} e Event object fired on mousedown\n     */\n    _onDoubleClick: function (e) {\n      this._cacheTransformEventData(e);\n      this._handleEvent(e, 'dblclick');\n      this._resetTransformEventData(e);\n    },\n\n    /**\n     * Return a the id of an event.\n     * returns either the pointerId or the identifier or 0 for the mouse event\n     * @private\n     * @param {Event} evt Event object\n     */\n    getPointerId: function(evt) {\n      var changedTouches = evt.changedTouches;\n\n      if (changedTouches) {\n        return changedTouches[0] && changedTouches[0].identifier;\n      }\n\n      if (this.enablePointerEvents) {\n        return evt.pointerId;\n      }\n\n      return -1;\n    },\n\n    /**\n     * Determines if an event has the id of the event that is considered main\n     * @private\n     * @param {evt} event Event object\n     */\n    _isMainEvent: function(evt) {\n      if (evt.isPrimary === true) {\n        return true;\n      }\n      if (evt.isPrimary === false) {\n        return false;\n      }\n      if (evt.type === 'touchend' && evt.touches.length === 0) {\n        return true;\n      }\n      if (evt.changedTouches) {\n        return evt.changedTouches[0].identifier === this.mainTouchId;\n      }\n      return true;\n    },\n\n    /**\n     * @private\n     * @param {Event} e Event object fired on mousedown\n     */\n    _onTouchStart: function(e) {\n      e.preventDefault();\n      if (this.mainTouchId === null) {\n        this.mainTouchId = this.getPointerId(e);\n      }\n      this.__onMouseDown(e);\n      this._resetTransformEventData();\n      var canvasElement = this.upperCanvasEl,\n          eventTypePrefix = this._getEventPrefix();\n      addListener(fabric.document, 'touchend', this._onTouchEnd, addEventOptions);\n      addListener(fabric.document, 'touchmove', this._onMouseMove, addEventOptions);\n      // Unbind mousedown to prevent double triggers from touch devices\n      removeListener(canvasElement, eventTypePrefix + 'down', this._onMouseDown);\n    },\n\n    /**\n     * @private\n     * @param {Event} e Event object fired on mousedown\n     */\n    _onMouseDown: function (e) {\n      this.__onMouseDown(e);\n      this._resetTransformEventData();\n      var canvasElement = this.upperCanvasEl,\n          eventTypePrefix = this._getEventPrefix();\n      removeListener(canvasElement, eventTypePrefix + 'move', this._onMouseMove, addEventOptions);\n      addListener(fabric.document, eventTypePrefix + 'up', this._onMouseUp);\n      addListener(fabric.document, eventTypePrefix + 'move', this._onMouseMove, addEventOptions);\n    },\n\n    /**\n     * @private\n     * @param {Event} e Event object fired on mousedown\n     */\n    _onTouchEnd: function(e) {\n      if (e.touches.length > 0) {\n        // if there are still touches stop here\n        return;\n      }\n      this.__onMouseUp(e);\n      this._resetTransformEventData();\n      this.mainTouchId = null;\n      var eventTypePrefix = this._getEventPrefix();\n      removeListener(fabric.document, 'touchend', this._onTouchEnd, addEventOptions);\n      removeListener(fabric.document, 'touchmove', this._onMouseMove, addEventOptions);\n      var _this = this;\n      if (this._willAddMouseDown) {\n        clearTimeout(this._willAddMouseDown);\n      }\n      this._willAddMouseDown = setTimeout(function() {\n        // Wait 400ms before rebinding mousedown to prevent double triggers\n        // from touch devices\n        addListener(_this.upperCanvasEl, eventTypePrefix + 'down', _this._onMouseDown);\n        _this._willAddMouseDown = 0;\n      }, 400);\n    },\n\n    /**\n     * @private\n     * @param {Event} e Event object fired on mouseup\n     */\n    _onMouseUp: function (e) {\n      this.__onMouseUp(e);\n      this._resetTransformEventData();\n      var canvasElement = this.upperCanvasEl,\n          eventTypePrefix = this._getEventPrefix();\n      if (this._isMainEvent(e)) {\n        removeListener(fabric.document, eventTypePrefix + 'up', this._onMouseUp);\n        removeListener(fabric.document, eventTypePrefix + 'move', this._onMouseMove, addEventOptions);\n        addListener(canvasElement, eventTypePrefix + 'move', this._onMouseMove, addEventOptions);\n      }\n    },\n\n    /**\n     * @private\n     * @param {Event} e Event object fired on mousemove\n     */\n    _onMouseMove: function (e) {\n      !this.allowTouchScrolling && e.preventDefault && e.preventDefault();\n      this.__onMouseMove(e);\n    },\n\n    /**\n     * @private\n     */\n    _onResize: function () {\n      this.calcOffset();\n    },\n\n    /**\n     * Decides whether the canvas should be redrawn in mouseup and mousedown events.\n     * @private\n     * @param {Object} target\n     */\n    _shouldRender: function(target) {\n      var activeObject = this._activeObject;\n\n      if (\n        !!activeObject !== !!target ||\n        (activeObject && target && (activeObject !== target))\n      ) {\n        // this covers: switch of target, from target to no target, selection of target\n        // multiSelection with key and mouse\n        return true;\n      }\n      else if (activeObject && activeObject.isEditing) {\n        // if we mouse up/down over a editing textbox a cursor change,\n        // there is no need to re render\n        return false;\n      }\n      return false;\n    },\n\n    /**\n     * Method that defines the actions when mouse is released on canvas.\n     * The method resets the currentTransform parameters, store the image corner\n     * position in the image object and render the canvas on top.\n     * @private\n     * @param {Event} e Event object fired on mouseup\n     */\n    __onMouseUp: function (e) {\n      var target, transform = this._currentTransform,\n          groupSelector = this._groupSelector, shouldRender = false,\n          isClick = (!groupSelector || (groupSelector.left === 0 && groupSelector.top === 0));\n      this._cacheTransformEventData(e);\n      target = this._target;\n      this._handleEvent(e, 'up:before');\n      // if right/middle click just fire events and return\n      // target undefined will make the _handleEvent search the target\n      if (checkClick(e, RIGHT_CLICK)) {\n        if (this.fireRightClick) {\n          this._handleEvent(e, 'up', RIGHT_CLICK, isClick);\n        }\n        return;\n      }\n\n      if (checkClick(e, MIDDLE_CLICK)) {\n        if (this.fireMiddleClick) {\n          this._handleEvent(e, 'up', MIDDLE_CLICK, isClick);\n        }\n        this._resetTransformEventData();\n        return;\n      }\n\n      if (this.isDrawingMode && this._isCurrentlyDrawing) {\n        this._onMouseUpInDrawingMode(e);\n        return;\n      }\n\n      if (!this._isMainEvent(e)) {\n        return;\n      }\n      if (transform) {\n        this._finalizeCurrentTransform(e);\n        shouldRender = transform.actionPerformed;\n      }\n      if (!isClick) {\n        var targetWasActive = target === this._activeObject;\n        this._maybeGroupObjects(e);\n        if (!shouldRender) {\n          shouldRender = (\n            this._shouldRender(target) ||\n            (!targetWasActive && target === this._activeObject)\n          );\n        }\n      }\n      var corner, pointer;\n      if (target) {\n        corner = target._findTargetCorner(\n          this.getPointer(e, true),\n          fabric.util.isTouchEvent(e)\n        );\n        if (target.selectable && target !== this._activeObject && target.activeOn === 'up') {\n          this.setActiveObject(target, e);\n          shouldRender = true;\n        }\n        else {\n          var control = target.controls[corner],\n              mouseUpHandler = control && control.getMouseUpHandler(e, target, control);\n          if (mouseUpHandler) {\n            pointer = this.getPointer(e);\n            mouseUpHandler(e, transform, pointer.x, pointer.y);\n          }\n        }\n        target.isMoving = false;\n      }\n      // if we are ending up a transform on a different control or a new object\n      // fire the original mouse up from the corner that started the transform\n      if (transform && (transform.target !== target || transform.corner !== corner)) {\n        var originalControl = transform.target && transform.target.controls[transform.corner],\n            originalMouseUpHandler = originalControl && originalControl.getMouseUpHandler(e, target, control);\n        pointer = pointer || this.getPointer(e);\n        originalMouseUpHandler && originalMouseUpHandler(e, transform, pointer.x, pointer.y);\n      }\n      this._setCursorFromEvent(e, target);\n      this._handleEvent(e, 'up', LEFT_CLICK, isClick);\n      this._groupSelector = null;\n      this._currentTransform = null;\n      // reset the target information about which corner is selected\n      target && (target.__corner = 0);\n      if (shouldRender) {\n        this.requestRenderAll();\n      }\n      else if (!isClick) {\n        this.renderTop();\n      }\n    },\n\n    /**\n     * @private\n     * Handle event firing for target and subtargets\n     * @param {Event} e event from mouse\n     * @param {String} eventType event to fire (up, down or move)\n     * @return {Fabric.Object} target return the the target found, for internal reasons.\n     */\n    _simpleEventHandler: function(eventType, e) {\n      var target = this.findTarget(e),\n          targets = this.targets,\n          options = {\n            e: e,\n            target: target,\n            subTargets: targets,\n          };\n      this.fire(eventType, options);\n      target && target.fire(eventType, options);\n      if (!targets) {\n        return target;\n      }\n      for (var i = 0; i < targets.length; i++) {\n        targets[i].fire(eventType, options);\n      }\n      return target;\n    },\n\n    /**\n     * @private\n     * Handle event firing for target and subtargets\n     * @param {Event} e event from mouse\n     * @param {String} eventType event to fire (up, down or move)\n     * @param {fabric.Object} targetObj receiving event\n     * @param {Number} [button] button used in the event 1 = left, 2 = middle, 3 = right\n     * @param {Boolean} isClick for left button only, indicates that the mouse up happened without move.\n     */\n    _handleEvent: function(e, eventType, button, isClick) {\n      var target = this._target,\n          targets = this.targets || [],\n          options = {\n            e: e,\n            target: target,\n            subTargets: targets,\n            button: button || LEFT_CLICK,\n            isClick: isClick || false,\n            pointer: this._pointer,\n            absolutePointer: this._absolutePointer,\n            transform: this._currentTransform\n          };\n      if (eventType === 'up') {\n        options.currentTarget = this.findTarget(e);\n        options.currentSubTargets = this.targets;\n      }\n      this.fire('mouse:' + eventType, options);\n      target && target.fire('mouse' + eventType, options);\n      for (var i = 0; i < targets.length; i++) {\n        targets[i].fire('mouse' + eventType, options);\n      }\n    },\n\n    /**\n     * @private\n     * @param {Event} e send the mouse event that generate the finalize down, so it can be used in the event\n     */\n    _finalizeCurrentTransform: function(e) {\n\n      var transform = this._currentTransform,\n          target = transform.target,\n          options = {\n            e: e,\n            target: target,\n            transform: transform,\n            action: transform.action,\n          };\n\n      if (target._scaling) {\n        target._scaling = false;\n      }\n\n      target.setCoords();\n\n      if (transform.actionPerformed || (this.stateful && target.hasStateChanged())) {\n        this._fire('modified', options);\n      }\n    },\n\n    /**\n     * @private\n     * @param {Event} e Event object fired on mousedown\n     */\n    _onMouseDownInDrawingMode: function(e) {\n      this._isCurrentlyDrawing = true;\n      if (this.getActiveObject()) {\n        this.discardActiveObject(e).requestRenderAll();\n      }\n      var pointer = this.getPointer(e);\n      this.freeDrawingBrush.onMouseDown(pointer, { e: e, pointer: pointer });\n      this._handleEvent(e, 'down');\n    },\n\n    /**\n     * @private\n     * @param {Event} e Event object fired on mousemove\n     */\n    _onMouseMoveInDrawingMode: function(e) {\n      if (this._isCurrentlyDrawing) {\n        var pointer = this.getPointer(e);\n        this.freeDrawingBrush.onMouseMove(pointer, { e: e, pointer: pointer });\n      }\n      this.setCursor(this.freeDrawingCursor);\n      this._handleEvent(e, 'move');\n    },\n\n    /**\n     * @private\n     * @param {Event} e Event object fired on mouseup\n     */\n    _onMouseUpInDrawingMode: function(e) {\n      var pointer = this.getPointer(e);\n      this._isCurrentlyDrawing = this.freeDrawingBrush.onMouseUp({ e: e, pointer: pointer });\n      this._handleEvent(e, 'up');\n    },\n\n    /**\n     * Method that defines the actions when mouse is clicked on canvas.\n     * The method inits the currentTransform parameters and renders all the\n     * canvas so the current image can be placed on the top canvas and the rest\n     * in on the container one.\n     * @private\n     * @param {Event} e Event object fired on mousedown\n     */\n    __onMouseDown: function (e) {\n      this._cacheTransformEventData(e);\n      this._handleEvent(e, 'down:before');\n      var target = this._target;\n      // if right click just fire events\n      if (checkClick(e, RIGHT_CLICK)) {\n        if (this.fireRightClick) {\n          this._handleEvent(e, 'down', RIGHT_CLICK);\n        }\n        return;\n      }\n\n      if (checkClick(e, MIDDLE_CLICK)) {\n        if (this.fireMiddleClick) {\n          this._handleEvent(e, 'down', MIDDLE_CLICK);\n        }\n        return;\n      }\n\n      if (this.isDrawingMode) {\n        this._onMouseDownInDrawingMode(e);\n        return;\n      }\n\n      if (!this._isMainEvent(e)) {\n        return;\n      }\n\n      // ignore if some object is being transformed at this moment\n      if (this._currentTransform) {\n        return;\n      }\n\n      var pointer = this._pointer;\n      // save pointer for check in __onMouseUp event\n      this._previousPointer = pointer;\n      var shouldRender = this._shouldRender(target),\n          shouldGroup = this._shouldGroup(e, target);\n      if (this._shouldClearSelection(e, target)) {\n        this.discardActiveObject(e);\n      }\n      else if (shouldGroup) {\n        this._handleGrouping(e, target);\n        target = this._activeObject;\n      }\n\n      if (this.selection && (!target ||\n        (!target.selectable && !target.isEditing && target !== this._activeObject))) {\n        this._groupSelector = {\n          ex: this._absolutePointer.x,\n          ey: this._absolutePointer.y,\n          top: 0,\n          left: 0\n        };\n      }\n\n      if (target) {\n        var alreadySelected = target === this._activeObject;\n        if (target.selectable && target.activeOn === 'down') {\n          this.setActiveObject(target, e);\n        }\n        var corner = target._findTargetCorner(\n          this.getPointer(e, true),\n          fabric.util.isTouchEvent(e)\n        );\n        target.__corner = corner;\n        if (target === this._activeObject && (corner || !shouldGroup)) {\n          this._setupCurrentTransform(e, target, alreadySelected);\n          var control = target.controls[corner],\n              pointer = this.getPointer(e),\n              mouseDownHandler = control && control.getMouseDownHandler(e, target, control);\n          if (mouseDownHandler) {\n            mouseDownHandler(e, this._currentTransform, pointer.x, pointer.y);\n          }\n        }\n      }\n      this._handleEvent(e, 'down');\n      // we must renderAll so that we update the visuals\n      (shouldRender || shouldGroup) && this.requestRenderAll();\n    },\n\n    /**\n     * reset cache form common information needed during event processing\n     * @private\n     */\n    _resetTransformEventData: function() {\n      this._target = null;\n      this._pointer = null;\n      this._absolutePointer = null;\n    },\n\n    /**\n     * Cache common information needed during event processing\n     * @private\n     * @param {Event} e Event object fired on event\n     */\n    _cacheTransformEventData: function(e) {\n      // reset in order to avoid stale caching\n      this._resetTransformEventData();\n      this._pointer = this.getPointer(e, true);\n      this._absolutePointer = this.restorePointerVpt(this._pointer);\n      this._target = this._currentTransform ? this._currentTransform.target : this.findTarget(e) || null;\n    },\n\n    /**\n     * @private\n     */\n    _beforeTransform: function(e) {\n      var t = this._currentTransform;\n      this.stateful && t.target.saveState();\n      this.fire('before:transform', {\n        e: e,\n        transform: t,\n      });\n    },\n\n    /**\n     * Method that defines the actions when mouse is hovering the canvas.\n     * The currentTransform parameter will define whether the user is rotating/scaling/translating\n     * an image or neither of them (only hovering). A group selection is also possible and would cancel\n     * all any other type of action.\n     * In case of an image transformation only the top canvas will be rendered.\n     * @private\n     * @param {Event} e Event object fired on mousemove\n     */\n    __onMouseMove: function (e) {\n      this._handleEvent(e, 'move:before');\n      this._cacheTransformEventData(e);\n      var target, pointer;\n\n      if (this.isDrawingMode) {\n        this._onMouseMoveInDrawingMode(e);\n        return;\n      }\n\n      if (!this._isMainEvent(e)) {\n        return;\n      }\n\n      var groupSelector = this._groupSelector;\n\n      // We initially clicked in an empty area, so we draw a box for multiple selection\n      if (groupSelector) {\n        pointer = this._absolutePointer;\n\n        groupSelector.left = pointer.x - groupSelector.ex;\n        groupSelector.top = pointer.y - groupSelector.ey;\n\n        this.renderTop();\n      }\n      else if (!this._currentTransform) {\n        target = this.findTarget(e) || null;\n        this._setCursorFromEvent(e, target);\n        this._fireOverOutEvents(target, e);\n      }\n      else {\n        this._transformObject(e);\n      }\n      this._handleEvent(e, 'move');\n      this._resetTransformEventData();\n    },\n\n    /**\n     * Manage the mouseout, mouseover events for the fabric object on the canvas\n     * @param {Fabric.Object} target the target where the target from the mousemove event\n     * @param {Event} e Event object fired on mousemove\n     * @private\n     */\n    _fireOverOutEvents: function(target, e) {\n      var _hoveredTarget = this._hoveredTarget,\n          _hoveredTargets = this._hoveredTargets, targets = this.targets,\n          length = Math.max(_hoveredTargets.length, targets.length);\n\n      this.fireSyntheticInOutEvents(target, e, {\n        oldTarget: _hoveredTarget,\n        evtOut: 'mouseout',\n        canvasEvtOut: 'mouse:out',\n        evtIn: 'mouseover',\n        canvasEvtIn: 'mouse:over',\n      });\n      for (var i = 0; i < length; i++){\n        this.fireSyntheticInOutEvents(targets[i], e, {\n          oldTarget: _hoveredTargets[i],\n          evtOut: 'mouseout',\n          evtIn: 'mouseover',\n        });\n      }\n      this._hoveredTarget = target;\n      this._hoveredTargets = this.targets.concat();\n    },\n\n    /**\n     * Manage the dragEnter, dragLeave events for the fabric objects on the canvas\n     * @param {Fabric.Object} target the target where the target from the onDrag event\n     * @param {Event} e Event object fired on ondrag\n     * @private\n     */\n    _fireEnterLeaveEvents: function(target, e) {\n      var _draggedoverTarget = this._draggedoverTarget,\n          _hoveredTargets = this._hoveredTargets, targets = this.targets,\n          length = Math.max(_hoveredTargets.length, targets.length);\n\n      this.fireSyntheticInOutEvents(target, e, {\n        oldTarget: _draggedoverTarget,\n        evtOut: 'dragleave',\n        evtIn: 'dragenter',\n      });\n      for (var i = 0; i < length; i++) {\n        this.fireSyntheticInOutEvents(targets[i], e, {\n          oldTarget: _hoveredTargets[i],\n          evtOut: 'dragleave',\n          evtIn: 'dragenter',\n        });\n      }\n      this._draggedoverTarget = target;\n    },\n\n    /**\n     * Manage the synthetic in/out events for the fabric objects on the canvas\n     * @param {Fabric.Object} target the target where the target from the supported events\n     * @param {Event} e Event object fired\n     * @param {Object} config configuration for the function to work\n     * @param {String} config.targetName property on the canvas where the old target is stored\n     * @param {String} [config.canvasEvtOut] name of the event to fire at canvas level for out\n     * @param {String} config.evtOut name of the event to fire for out\n     * @param {String} [config.canvasEvtIn] name of the event to fire at canvas level for in\n     * @param {String} config.evtIn name of the event to fire for in\n     * @private\n     */\n    fireSyntheticInOutEvents: function(target, e, config) {\n      var inOpt, outOpt, oldTarget = config.oldTarget, outFires, inFires,\n          targetChanged = oldTarget !== target, canvasEvtIn = config.canvasEvtIn, canvasEvtOut = config.canvasEvtOut;\n      if (targetChanged) {\n        inOpt = { e: e, target: target, previousTarget: oldTarget };\n        outOpt = { e: e, target: oldTarget, nextTarget: target };\n      }\n      inFires = target && targetChanged;\n      outFires = oldTarget && targetChanged;\n      if (outFires) {\n        canvasEvtOut && this.fire(canvasEvtOut, outOpt);\n        oldTarget.fire(config.evtOut, outOpt);\n      }\n      if (inFires) {\n        canvasEvtIn && this.fire(canvasEvtIn, inOpt);\n        target.fire(config.evtIn, inOpt);\n      }\n    },\n\n    /**\n     * Method that defines actions when an Event Mouse Wheel\n     * @param {Event} e Event object fired on mouseup\n     */\n    __onMouseWheel: function(e) {\n      this._cacheTransformEventData(e);\n      this._handleEvent(e, 'wheel');\n      this._resetTransformEventData();\n    },\n\n    /**\n     * @private\n     * @param {Event} e Event fired on mousemove\n     */\n    _transformObject: function(e) {\n      var pointer = this.getPointer(e),\n          transform = this._currentTransform;\n\n      transform.reset = false;\n      transform.shiftKey = e.shiftKey;\n      transform.altKey = e[this.centeredKey];\n\n      this._performTransformAction(e, transform, pointer);\n      transform.actionPerformed && this.requestRenderAll();\n    },\n\n    /**\n     * @private\n     */\n    _performTransformAction: function(e, transform, pointer) {\n      var x = pointer.x,\n          y = pointer.y,\n          action = transform.action,\n          actionPerformed = false,\n          actionHandler = transform.actionHandler;\n          // this object could be created from the function in the control handlers\n\n\n      if (actionHandler) {\n        actionPerformed = actionHandler(e, transform, x, y);\n      }\n      if (action === 'drag' && actionPerformed) {\n        transform.target.isMoving = true;\n        this.setCursor(transform.target.moveCursor || this.moveCursor);\n      }\n      transform.actionPerformed = transform.actionPerformed || actionPerformed;\n    },\n\n    /**\n     * @private\n     */\n    _fire: fabric.controlsUtils.fireEvent,\n\n    /**\n     * Sets the cursor depending on where the canvas is being hovered.\n     * Note: very buggy in Opera\n     * @param {Event} e Event object\n     * @param {Object} target Object that the mouse is hovering, if so.\n     */\n    _setCursorFromEvent: function (e, target) {\n      if (!target) {\n        this.setCursor(this.defaultCursor);\n        return false;\n      }\n      var hoverCursor = target.hoverCursor || this.hoverCursor,\n          activeSelection = this._activeObject && this._activeObject.type === 'activeSelection' ?\n            this._activeObject : null,\n          // only show proper corner when group selection is not active\n          corner = (!activeSelection || !activeSelection.contains(target))\n          // here we call findTargetCorner always with undefined for the touch parameter.\n          // we assume that if you are using a cursor you do not need to interact with\n          // the bigger touch area.\n                    && target._findTargetCorner(this.getPointer(e, true));\n\n      if (!corner) {\n        if (target.subTargetCheck){\n          // hoverCursor should come from top-most subTarget,\n          // so we walk the array backwards\n          this.targets.concat().reverse().map(function(_target){\n            hoverCursor = _target.hoverCursor || hoverCursor;\n          });\n        }\n        this.setCursor(hoverCursor);\n      }\n      else {\n        this.setCursor(this.getCornerCursor(corner, target, e));\n      }\n    },\n\n    /**\n     * @private\n     */\n    getCornerCursor: function(corner, target, e) {\n      var control = target.controls[corner];\n      return control.cursorStyleHandler(e, control, target);\n    }\n  });\n})();\n\n\n(function() {\n\n  var min = Math.min,\n      max = Math.max;\n\n  fabric.util.object.extend(fabric.Canvas.prototype, /** @lends fabric.Canvas.prototype */ {\n\n    /**\n     * @private\n     * @param {Event} e Event object\n     * @param {fabric.Object} target\n     * @return {Boolean}\n     */\n    _shouldGroup: function(e, target) {\n      var activeObject = this._activeObject;\n      return activeObject && this._isSelectionKeyPressed(e) && target && target.selectable && this.selection &&\n            (activeObject !== target || activeObject.type === 'activeSelection') && !target.onSelect({ e: e });\n    },\n\n    /**\n     * @private\n     * @param {Event} e Event object\n     * @param {fabric.Object} target\n     */\n    _handleGrouping: function (e, target) {\n      var activeObject = this._activeObject;\n      // avoid multi select when shift click on a corner\n      if (activeObject.__corner) {\n        return;\n      }\n      if (target === activeObject) {\n        // if it's a group, find target again, using activeGroup objects\n        target = this.findTarget(e, true);\n        // if even object is not found or we are on activeObjectCorner, bail out\n        if (!target || !target.selectable) {\n          return;\n        }\n      }\n      if (activeObject && activeObject.type === 'activeSelection') {\n        this._updateActiveSelection(target, e);\n      }\n      else {\n        this._createActiveSelection(target, e);\n      }\n    },\n\n    /**\n     * @private\n     */\n    _updateActiveSelection: function(target, e) {\n      var activeSelection = this._activeObject,\n          currentActiveObjects = activeSelection._objects.slice(0);\n      if (activeSelection.contains(target)) {\n        activeSelection.removeWithUpdate(target);\n        this._hoveredTarget = target;\n        this._hoveredTargets = this.targets.concat();\n        if (activeSelection.size() === 1) {\n          // activate last remaining object\n          this._setActiveObject(activeSelection.item(0), e);\n        }\n      }\n      else {\n        activeSelection.addWithUpdate(target);\n        this._hoveredTarget = activeSelection;\n        this._hoveredTargets = this.targets.concat();\n      }\n      this._fireSelectionEvents(currentActiveObjects, e);\n    },\n\n    /**\n     * @private\n     */\n    _createActiveSelection: function(target, e) {\n      var currentActives = this.getActiveObjects(), group = this._createGroup(target);\n      this._hoveredTarget = group;\n      // ISSUE 4115: should we consider subTargets here?\n      // this._hoveredTargets = [];\n      // this._hoveredTargets = this.targets.concat();\n      this._setActiveObject(group, e);\n      this._fireSelectionEvents(currentActives, e);\n    },\n\n    /**\n     * @private\n     * @param {Object} target\n     */\n    _createGroup: function(target) {\n      var objects = this._objects,\n          isActiveLower = objects.indexOf(this._activeObject) < objects.indexOf(target),\n          groupObjects = isActiveLower\n            ? [this._activeObject, target]\n            : [target, this._activeObject];\n      this._activeObject.isEditing && this._activeObject.exitEditing();\n      return new fabric.ActiveSelection(groupObjects, {\n        canvas: this\n      });\n    },\n\n    /**\n     * @private\n     * @param {Event} e mouse event\n     */\n    _groupSelectedObjects: function (e) {\n\n      var group = this._collectObjects(e),\n          aGroup;\n\n      // do not create group for 1 element only\n      if (group.length === 1) {\n        this.setActiveObject(group[0], e);\n      }\n      else if (group.length > 1) {\n        aGroup = new fabric.ActiveSelection(group.reverse(), {\n          canvas: this\n        });\n        this.setActiveObject(aGroup, e);\n      }\n    },\n\n    /**\n     * @private\n     */\n    _collectObjects: function(e) {\n      var group = [],\n          currentObject,\n          x1 = this._groupSelector.ex,\n          y1 = this._groupSelector.ey,\n          x2 = x1 + this._groupSelector.left,\n          y2 = y1 + this._groupSelector.top,\n          selectionX1Y1 = new fabric.Point(min(x1, x2), min(y1, y2)),\n          selectionX2Y2 = new fabric.Point(max(x1, x2), max(y1, y2)),\n          allowIntersect = !this.selectionFullyContained,\n          isClick = x1 === x2 && y1 === y2;\n      // we iterate reverse order to collect top first in case of click.\n      for (var i = this._objects.length; i--; ) {\n        currentObject = this._objects[i];\n\n        if (!currentObject || !currentObject.selectable || !currentObject.visible) {\n          continue;\n        }\n\n        if ((allowIntersect && currentObject.intersectsWithRect(selectionX1Y1, selectionX2Y2, true)) ||\n            currentObject.isContainedWithinRect(selectionX1Y1, selectionX2Y2, true) ||\n            (allowIntersect && currentObject.containsPoint(selectionX1Y1, null, true)) ||\n            (allowIntersect && currentObject.containsPoint(selectionX2Y2, null, true))\n        ) {\n          group.push(currentObject);\n          // only add one object if it's a click\n          if (isClick) {\n            break;\n          }\n        }\n      }\n\n      if (group.length > 1) {\n        group = group.filter(function(object) {\n          return !object.onSelect({ e: e });\n        });\n      }\n\n      return group;\n    },\n\n    /**\n     * @private\n     */\n    _maybeGroupObjects: function(e) {\n      if (this.selection && this._groupSelector) {\n        this._groupSelectedObjects(e);\n      }\n      this.setCursor(this.defaultCursor);\n      // clear selection and current transformation\n      this._groupSelector = null;\n    }\n  });\n\n})();\n\n\n(function () {\n  fabric.util.object.extend(fabric.StaticCanvas.prototype, /** @lends fabric.StaticCanvas.prototype */ {\n\n    /**\n     * Exports canvas element to a dataurl image. Note that when multiplier is used, cropping is scaled appropriately\n     * @param {Object} [options] Options object\n     * @param {String} [options.format=png] The format of the output image. Either \"jpeg\" or \"png\"\n     * @param {Number} [options.quality=1] Quality level (0..1). Only used for jpeg.\n     * @param {Number} [options.multiplier=1] Multiplier to scale by, to have consistent\n     * @param {Number} [options.left] Cropping left offset. Introduced in v1.2.14\n     * @param {Number} [options.top] Cropping top offset. Introduced in v1.2.14\n     * @param {Number} [options.width] Cropping width. Introduced in v1.2.14\n     * @param {Number} [options.height] Cropping height. Introduced in v1.2.14\n     * @param {Boolean} [options.enableRetinaScaling] Enable retina scaling for clone image. Introduce in 2.0.0\n     * @return {String} Returns a data: URL containing a representation of the object in the format specified by options.format\n     * @see {@link http://jsfiddle.net/fabricjs/NfZVb/|jsFiddle demo}\n     * @example <caption>Generate jpeg dataURL with lower quality</caption>\n     * var dataURL = canvas.toDataURL({\n     *   format: 'jpeg',\n     *   quality: 0.8\n     * });\n     * @example <caption>Generate cropped png dataURL (clipping of canvas)</caption>\n     * var dataURL = canvas.toDataURL({\n     *   format: 'png',\n     *   left: 100,\n     *   top: 100,\n     *   width: 200,\n     *   height: 200\n     * });\n     * @example <caption>Generate double scaled png dataURL</caption>\n     * var dataURL = canvas.toDataURL({\n     *   format: 'png',\n     *   multiplier: 2\n     * });\n     */\n    toDataURL: function (options) {\n      options || (options = { });\n\n      var format = options.format || 'png',\n          quality = options.quality || 1,\n          multiplier = (options.multiplier || 1) * (options.enableRetinaScaling ? this.getRetinaScaling() : 1),\n          canvasEl = this.toCanvasElement(multiplier, options);\n      return fabric.util.toDataURL(canvasEl, format, quality);\n    },\n\n    /**\n     * Create a new HTMLCanvas element painted with the current canvas content.\n     * No need to resize the actual one or repaint it.\n     * Will transfer object ownership to a new canvas, paint it, and set everything back.\n     * This is an intermediary step used to get to a dataUrl but also it is useful to\n     * create quick image copies of a canvas without passing for the dataUrl string\n     * @param {Number} [multiplier] a zoom factor.\n     * @param {Object} [cropping] Cropping informations\n     * @param {Number} [cropping.left] Cropping left offset.\n     * @param {Number} [cropping.top] Cropping top offset.\n     * @param {Number} [cropping.width] Cropping width.\n     * @param {Number} [cropping.height] Cropping height.\n     */\n    toCanvasElement: function(multiplier, cropping) {\n      multiplier = multiplier || 1;\n      cropping = cropping || { };\n      var scaledWidth = (cropping.width || this.width) * multiplier,\n          scaledHeight = (cropping.height || this.height) * multiplier,\n          zoom = this.getZoom(),\n          originalWidth = this.width,\n          originalHeight = this.height,\n          newZoom = zoom * multiplier,\n          vp = this.viewportTransform,\n          translateX = (vp[4] - (cropping.left || 0)) * multiplier,\n          translateY = (vp[5] - (cropping.top || 0)) * multiplier,\n          originalInteractive = this.interactive,\n          newVp = [newZoom, 0, 0, newZoom, translateX, translateY],\n          originalRetina = this.enableRetinaScaling,\n          canvasEl = fabric.util.createCanvasElement(),\n          originalContextTop = this.contextTop;\n      canvasEl.width = scaledWidth;\n      canvasEl.height = scaledHeight;\n      this.contextTop = null;\n      this.enableRetinaScaling = false;\n      this.interactive = false;\n      this.viewportTransform = newVp;\n      this.width = scaledWidth;\n      this.height = scaledHeight;\n      this.calcViewportBoundaries();\n      this.renderCanvas(canvasEl.getContext('2d'), this._objects);\n      this.viewportTransform = vp;\n      this.width = originalWidth;\n      this.height = originalHeight;\n      this.calcViewportBoundaries();\n      this.interactive = originalInteractive;\n      this.enableRetinaScaling = originalRetina;\n      this.contextTop = originalContextTop;\n      return canvasEl;\n    },\n  });\n\n})();\n\n\nfabric.util.object.extend(fabric.StaticCanvas.prototype, /** @lends fabric.StaticCanvas.prototype */ {\n  /**\n   * Populates canvas with data from the specified JSON.\n   * JSON format must conform to the one of {@link fabric.Canvas#toJSON}\n   * @param {String|Object} json JSON string or object\n   * @param {Function} callback Callback, invoked when json is parsed\n   *                            and corresponding objects (e.g: {@link fabric.Image})\n   *                            are initialized\n   * @param {Function} [reviver] Method for further parsing of JSON elements, called after each fabric object created.\n   * @return {fabric.Canvas} instance\n   * @chainable\n   * @tutorial {@link http://fabricjs.com/fabric-intro-part-3#deserialization}\n   * @see {@link http://jsfiddle.net/fabricjs/fmgXt/|jsFiddle demo}\n   * @example <caption>loadFromJSON</caption>\n   * canvas.loadFromJSON(json, canvas.renderAll.bind(canvas));\n   * @example <caption>loadFromJSON with reviver</caption>\n   * canvas.loadFromJSON(json, canvas.renderAll.bind(canvas), function(o, object) {\n   *   // `o` = json object\n   *   // `object` = fabric.Object instance\n   *   // ... do some stuff ...\n   * });\n   */\n  loadFromJSON: function (json, callback, reviver) {\n    if (!json) {\n      return;\n    }\n\n    // serialize if it wasn't already\n    var serialized = (typeof json === 'string')\n      ? JSON.parse(json)\n      : fabric.util.object.clone(json);\n\n    var _this = this,\n        clipPath = serialized.clipPath,\n        renderOnAddRemove = this.renderOnAddRemove;\n\n    this.renderOnAddRemove = false;\n\n    delete serialized.clipPath;\n\n    this._enlivenObjects(serialized.objects, function (enlivenedObjects) {\n      _this.clear();\n      _this._setBgOverlay(serialized, function () {\n        if (clipPath) {\n          _this._enlivenObjects([clipPath], function (enlivenedCanvasClip) {\n            _this.clipPath = enlivenedCanvasClip[0];\n            _this.__setupCanvas.call(_this, serialized, enlivenedObjects, renderOnAddRemove, callback);\n          });\n        }\n        else {\n          _this.__setupCanvas.call(_this, serialized, enlivenedObjects, renderOnAddRemove, callback);\n        }\n      });\n    }, reviver);\n    return this;\n  },\n\n  /**\n   * @private\n   * @param {Object} serialized Object with background and overlay information\n   * @param {Array} restored canvas objects\n   * @param {Function} cached renderOnAddRemove callback\n   * @param {Function} callback Invoked after all background and overlay images/patterns loaded\n   */\n  __setupCanvas: function(serialized, enlivenedObjects, renderOnAddRemove, callback) {\n    var _this = this;\n    enlivenedObjects.forEach(function(obj, index) {\n      // we splice the array just in case some custom classes restored from JSON\n      // will add more object to canvas at canvas init.\n      _this.insertAt(obj, index);\n    });\n    this.renderOnAddRemove = renderOnAddRemove;\n    // remove parts i cannot set as options\n    delete serialized.objects;\n    delete serialized.backgroundImage;\n    delete serialized.overlayImage;\n    delete serialized.background;\n    delete serialized.overlay;\n    // this._initOptions does too many things to just\n    // call it. Normally loading an Object from JSON\n    // create the Object instance. Here the Canvas is\n    // already an instance and we are just loading things over it\n    this._setOptions(serialized);\n    this.renderAll();\n    callback && callback();\n  },\n\n  /**\n   * @private\n   * @param {Object} serialized Object with background and overlay information\n   * @param {Function} callback Invoked after all background and overlay images/patterns loaded\n   */\n  _setBgOverlay: function(serialized, callback) {\n    var loaded = {\n      backgroundColor: false,\n      overlayColor: false,\n      backgroundImage: false,\n      overlayImage: false\n    };\n\n    if (!serialized.backgroundImage && !serialized.overlayImage && !serialized.background && !serialized.overlay) {\n      callback && callback();\n      return;\n    }\n\n    var cbIfLoaded = function () {\n      if (loaded.backgroundImage && loaded.overlayImage && loaded.backgroundColor && loaded.overlayColor) {\n        callback && callback();\n      }\n    };\n\n    this.__setBgOverlay('backgroundImage', serialized.backgroundImage, loaded, cbIfLoaded);\n    this.__setBgOverlay('overlayImage', serialized.overlayImage, loaded, cbIfLoaded);\n    this.__setBgOverlay('backgroundColor', serialized.background, loaded, cbIfLoaded);\n    this.__setBgOverlay('overlayColor', serialized.overlay, loaded, cbIfLoaded);\n  },\n\n  /**\n   * @private\n   * @param {String} property Property to set (backgroundImage, overlayImage, backgroundColor, overlayColor)\n   * @param {(Object|String)} value Value to set\n   * @param {Object} loaded Set loaded property to true if property is set\n   * @param {Object} callback Callback function to invoke after property is set\n   */\n  __setBgOverlay: function(property, value, loaded, callback) {\n    var _this = this;\n\n    if (!value) {\n      loaded[property] = true;\n      callback && callback();\n      return;\n    }\n\n    if (property === 'backgroundImage' || property === 'overlayImage') {\n      fabric.util.enlivenObjects([value], function(enlivedObject){\n        _this[property] = enlivedObject[0];\n        loaded[property] = true;\n        callback && callback();\n      });\n    }\n    else {\n      this['set' + fabric.util.string.capitalize(property, true)](value, function() {\n        loaded[property] = true;\n        callback && callback();\n      });\n    }\n  },\n\n  /**\n   * @private\n   * @param {Array} objects\n   * @param {Function} callback\n   * @param {Function} [reviver]\n   */\n  _enlivenObjects: function (objects, callback, reviver) {\n    if (!objects || objects.length === 0) {\n      callback && callback([]);\n      return;\n    }\n\n    fabric.util.enlivenObjects(objects, function(enlivenedObjects) {\n      callback && callback(enlivenedObjects);\n    }, null, reviver);\n  },\n\n  /**\n   * @private\n   * @param {String} format\n   * @param {Function} callback\n   */\n  _toDataURL: function (format, callback) {\n    this.clone(function (clone) {\n      callback(clone.toDataURL(format));\n    });\n  },\n\n  /**\n   * @private\n   * @param {String} format\n   * @param {Number} multiplier\n   * @param {Function} callback\n   */\n  _toDataURLWithMultiplier: function (format, multiplier, callback) {\n    this.clone(function (clone) {\n      callback(clone.toDataURLWithMultiplier(format, multiplier));\n    });\n  },\n\n  /**\n   * Clones canvas instance\n   * @param {Object} [callback] Receives cloned instance as a first argument\n   * @param {Array} [properties] Array of properties to include in the cloned canvas and children\n   */\n  clone: function (callback, properties) {\n    var data = JSON.stringify(this.toJSON(properties));\n    this.cloneWithoutData(function(clone) {\n      clone.loadFromJSON(data, function() {\n        callback && callback(clone);\n      });\n    });\n  },\n\n  /**\n   * Clones canvas instance without cloning existing data.\n   * This essentially copies canvas dimensions, clipping properties, etc.\n   * but leaves data empty (so that you can populate it with your own)\n   * @param {Object} [callback] Receives cloned instance as a first argument\n   */\n  cloneWithoutData: function(callback) {\n    var el = fabric.util.createCanvasElement();\n\n    el.width = this.width;\n    el.height = this.height;\n\n    var clone = new fabric.Canvas(el);\n    if (this.backgroundImage) {\n      clone.setBackgroundImage(this.backgroundImage.src, function() {\n        clone.renderAll();\n        callback && callback(clone);\n      });\n      clone.backgroundImageOpacity = this.backgroundImageOpacity;\n      clone.backgroundImageStretch = this.backgroundImageStretch;\n    }\n    else {\n      callback && callback(clone);\n    }\n  }\n});\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric = global.fabric || (global.fabric = { }),\n      extend = fabric.util.object.extend,\n      clone = fabric.util.object.clone,\n      toFixed = fabric.util.toFixed,\n      capitalize = fabric.util.string.capitalize,\n      degreesToRadians = fabric.util.degreesToRadians,\n      objectCaching = !fabric.isLikelyNode,\n      ALIASING_LIMIT = 2;\n\n  if (fabric.Object) {\n    return;\n  }\n\n  /**\n   * Root object class from which all 2d shape classes inherit from\n   * @class fabric.Object\n   * @tutorial {@link http://fabricjs.com/fabric-intro-part-1#objects}\n   * @see {@link fabric.Object#initialize} for constructor definition\n   *\n   * @fires added\n   * @fires removed\n   *\n   * @fires selected\n   * @fires deselected\n   * @fires modified\n   * @fires modified\n   * @fires moved\n   * @fires scaled\n   * @fires rotated\n   * @fires skewed\n   *\n   * @fires rotating\n   * @fires scaling\n   * @fires moving\n   * @fires skewing\n   *\n   * @fires mousedown\n   * @fires mouseup\n   * @fires mouseover\n   * @fires mouseout\n   * @fires mousewheel\n   * @fires mousedblclick\n   *\n   * @fires dragover\n   * @fires dragenter\n   * @fires dragleave\n   * @fires drop\n   */\n  fabric.Object = fabric.util.createClass(fabric.CommonMethods, /** @lends fabric.Object.prototype */ {\n\n    /**\n     * Type of an object (rect, circle, path, etc.).\n     * Note that this property is meant to be read-only and not meant to be modified.\n     * If you modify, certain parts of Fabric (such as JSON loading) won't work correctly.\n     * @type String\n     * @default\n     */\n    type:                     'object',\n\n    /**\n     * Horizontal origin of transformation of an object (one of \"left\", \"right\", \"center\")\n     * See http://jsfiddle.net/1ow02gea/244/ on how originX/originY affect objects in groups\n     * @type String\n     * @default\n     */\n    originX:                  'left',\n\n    /**\n     * Vertical origin of transformation of an object (one of \"top\", \"bottom\", \"center\")\n     * See http://jsfiddle.net/1ow02gea/244/ on how originX/originY affect objects in groups\n     * @type String\n     * @default\n     */\n    originY:                  'top',\n\n    /**\n     * Top position of an object. Note that by default it's relative to object top. You can change this by setting originY={top/center/bottom}\n     * @type Number\n     * @default\n     */\n    top:                      0,\n\n    /**\n     * Left position of an object. Note that by default it's relative to object left. You can change this by setting originX={left/center/right}\n     * @type Number\n     * @default\n     */\n    left:                     0,\n\n    /**\n     * Object width\n     * @type Number\n     * @default\n     */\n    width:                    0,\n\n    /**\n     * Object height\n     * @type Number\n     * @default\n     */\n    height:                   0,\n\n    /**\n     * Object scale factor (horizontal)\n     * @type Number\n     * @default\n     */\n    scaleX:                   1,\n\n    /**\n     * Object scale factor (vertical)\n     * @type Number\n     * @default\n     */\n    scaleY:                   1,\n\n    /**\n     * When true, an object is rendered as flipped horizontally\n     * @type Boolean\n     * @default\n     */\n    flipX:                    false,\n\n    /**\n     * When true, an object is rendered as flipped vertically\n     * @type Boolean\n     * @default\n     */\n    flipY:                    false,\n\n    /**\n     * Opacity of an object\n     * @type Number\n     * @default\n     */\n    opacity:                  1,\n\n    /**\n     * Angle of rotation of an object (in degrees)\n     * @type Number\n     * @default\n     */\n    angle:                    0,\n\n    /**\n     * Angle of skew on x axes of an object (in degrees)\n     * @type Number\n     * @default\n     */\n    skewX:                    0,\n\n    /**\n     * Angle of skew on y axes of an object (in degrees)\n     * @type Number\n     * @default\n     */\n    skewY:                    0,\n\n    /**\n     * Size of object's controlling corners (in pixels)\n     * @type Number\n     * @default\n     */\n    cornerSize:               13,\n\n    /**\n     * Size of object's controlling corners when touch interaction is detected\n     * @type Number\n     * @default\n     */\n    touchCornerSize:               24,\n\n    /**\n     * When true, object's controlling corners are rendered as transparent inside (i.e. stroke instead of fill)\n     * @type Boolean\n     * @default\n     */\n    transparentCorners:       true,\n\n    /**\n     * Default cursor value used when hovering over this object on canvas\n     * @type String\n     * @default\n     */\n    hoverCursor:              null,\n\n    /**\n     * Default cursor value used when moving this object on canvas\n     * @type String\n     * @default\n     */\n    moveCursor:               null,\n\n    /**\n     * Padding between object and its controlling borders (in pixels)\n     * @type Number\n     * @default\n     */\n    padding:                  0,\n\n    /**\n     * Color of controlling borders of an object (when it's active)\n     * @type String\n     * @default\n     */\n    borderColor:              'rgb(178,204,255)',\n\n    /**\n     * Array specifying dash pattern of an object's borders (hasBorder must be true)\n     * @since 1.6.2\n     * @type Array\n     */\n    borderDashArray:          null,\n\n    /**\n     * Color of controlling corners of an object (when it's active)\n     * @type String\n     * @default\n     */\n    cornerColor:              'rgb(178,204,255)',\n\n    /**\n     * Color of controlling corners of an object (when it's active and transparentCorners false)\n     * @since 1.6.2\n     * @type String\n     * @default\n     */\n    cornerStrokeColor:        null,\n\n    /**\n     * Specify style of control, 'rect' or 'circle'\n     * @since 1.6.2\n     * @type String\n     */\n    cornerStyle:          'rect',\n\n    /**\n     * Array specifying dash pattern of an object's control (hasBorder must be true)\n     * @since 1.6.2\n     * @type Array\n     */\n    cornerDashArray:          null,\n\n    /**\n     * When true, this object will use center point as the origin of transformation\n     * when being scaled via the controls.\n     * <b>Backwards incompatibility note:</b> This property replaces \"centerTransform\" (Boolean).\n     * @since 1.3.4\n     * @type Boolean\n     * @default\n     */\n    centeredScaling:          false,\n\n    /**\n     * When true, this object will use center point as the origin of transformation\n     * when being rotated via the controls.\n     * <b>Backwards incompatibility note:</b> This property replaces \"centerTransform\" (Boolean).\n     * @since 1.3.4\n     * @type Boolean\n     * @default\n     */\n    centeredRotation:         true,\n\n    /**\n     * Color of object's fill\n     * takes css colors https://www.w3.org/TR/css-color-3/\n     * @type String\n     * @default\n     */\n    fill:                     'rgb(0,0,0)',\n\n    /**\n     * Fill rule used to fill an object\n     * accepted values are nonzero, evenodd\n     * <b>Backwards incompatibility note:</b> This property was used for setting globalCompositeOperation until v1.4.12 (use `fabric.Object#globalCompositeOperation` instead)\n     * @type String\n     * @default\n     */\n    fillRule:                 'nonzero',\n\n    /**\n     * Composite rule used for canvas globalCompositeOperation\n     * @type String\n     * @default\n     */\n    globalCompositeOperation: 'source-over',\n\n    /**\n     * Background color of an object.\n     * takes css colors https://www.w3.org/TR/css-color-3/\n     * @type String\n     * @default\n     */\n    backgroundColor:          '',\n\n    /**\n     * Selection Background color of an object. colored layer behind the object when it is active.\n     * does not mix good with globalCompositeOperation methods.\n     * @type String\n     * @default\n     */\n    selectionBackgroundColor:          '',\n\n    /**\n     * When defined, an object is rendered via stroke and this property specifies its color\n     * takes css colors https://www.w3.org/TR/css-color-3/\n     * @type String\n     * @default\n     */\n    stroke:                   null,\n\n    /**\n     * Width of a stroke used to render this object\n     * @type Number\n     * @default\n     */\n    strokeWidth:              1,\n\n    /**\n     * Array specifying dash pattern of an object's stroke (stroke must be defined)\n     * @type Array\n     */\n    strokeDashArray:          null,\n\n    /**\n     * Line offset of an object's stroke\n     * @type Number\n     * @default\n     */\n    strokeDashOffset: 0,\n\n    /**\n     * Line endings style of an object's stroke (one of \"butt\", \"round\", \"square\")\n     * @type String\n     * @default\n     */\n    strokeLineCap:            'butt',\n\n    /**\n     * Corner style of an object's stroke (one of \"bevel\", \"round\", \"miter\")\n     * @type String\n     * @default\n     */\n    strokeLineJoin:           'miter',\n\n    /**\n     * Maximum miter length (used for strokeLineJoin = \"miter\") of an object's stroke\n     * @type Number\n     * @default\n     */\n    strokeMiterLimit:         4,\n\n    /**\n     * Shadow object representing shadow of this shape\n     * @type fabric.Shadow\n     * @default\n     */\n    shadow:                   null,\n\n    /**\n     * Opacity of object's controlling borders when object is active and moving\n     * @type Number\n     * @default\n     */\n    borderOpacityWhenMoving:  0.4,\n\n    /**\n     * Scale factor of object's controlling borders\n     * bigger number will make a thicker border\n     * border is 1, so this is basically a border thickness\n     * since there is no way to change the border itself.\n     * @type Number\n     * @default\n     */\n    borderScaleFactor:        1,\n\n    /**\n     * Minimum allowed scale value of an object\n     * @type Number\n     * @default\n     */\n    minScaleLimit:            0,\n\n    /**\n     * When set to `false`, an object can not be selected for modification (using either point-click-based or group-based selection).\n     * But events still fire on it.\n     * @type Boolean\n     * @default\n     */\n    selectable:               true,\n\n    /**\n     * When set to `false`, an object can not be a target of events. All events propagate through it. Introduced in v1.3.4\n     * @type Boolean\n     * @default\n     */\n    evented:                  true,\n\n    /**\n     * When set to `false`, an object is not rendered on canvas\n     * @type Boolean\n     * @default\n     */\n    visible:                  true,\n\n    /**\n     * When set to `false`, object's controls are not displayed and can not be used to manipulate object\n     * @type Boolean\n     * @default\n     */\n    hasControls:              true,\n\n    /**\n     * When set to `false`, object's controlling borders are not rendered\n     * @type Boolean\n     * @default\n     */\n    hasBorders:               true,\n\n    /**\n     * When set to `true`, objects are \"found\" on canvas on per-pixel basis rather than according to bounding box\n     * @type Boolean\n     * @default\n     */\n    perPixelTargetFind:       false,\n\n    /**\n     * When `false`, default object's values are not included in its serialization\n     * @type Boolean\n     * @default\n     */\n    includeDefaultValues:     true,\n\n    /**\n     * When `true`, object horizontal movement is locked\n     * @type Boolean\n     * @default\n     */\n    lockMovementX:            false,\n\n    /**\n     * When `true`, object vertical movement is locked\n     * @type Boolean\n     * @default\n     */\n    lockMovementY:            false,\n\n    /**\n     * When `true`, object rotation is locked\n     * @type Boolean\n     * @default\n     */\n    lockRotation:             false,\n\n    /**\n     * When `true`, object horizontal scaling is locked\n     * @type Boolean\n     * @default\n     */\n    lockScalingX:             false,\n\n    /**\n     * When `true`, object vertical scaling is locked\n     * @type Boolean\n     * @default\n     */\n    lockScalingY:             false,\n\n    /**\n     * When `true`, object horizontal skewing is locked\n     * @type Boolean\n     * @default\n     */\n    lockSkewingX:             false,\n\n    /**\n     * When `true`, object vertical skewing is locked\n     * @type Boolean\n     * @default\n     */\n    lockSkewingY:             false,\n\n    /**\n     * When `true`, object cannot be flipped by scaling into negative values\n     * @type Boolean\n     * @default\n     */\n    lockScalingFlip:          false,\n\n    /**\n     * When `true`, object is not exported in OBJECT/JSON\n     * @since 1.6.3\n     * @type Boolean\n     * @default\n     */\n    excludeFromExport:        false,\n\n    /**\n     * When `true`, object is cached on an additional canvas.\n     * When `false`, object is not cached unless necessary ( clipPath )\n     * default to true\n     * @since 1.7.0\n     * @type Boolean\n     * @default true\n     */\n    objectCaching:            objectCaching,\n\n    /**\n     * When `true`, object properties are checked for cache invalidation. In some particular\n     * situation you may want this to be disabled ( spray brush, very big, groups)\n     * or if your application does not allow you to modify properties for groups child you want\n     * to disable it for groups.\n     * default to false\n     * since 1.7.0\n     * @type Boolean\n     * @default false\n     */\n    statefullCache:            false,\n\n    /**\n     * When `true`, cache does not get updated during scaling. The picture will get blocky if scaled\n     * too much and will be redrawn with correct details at the end of scaling.\n     * this setting is performance and application dependant.\n     * default to true\n     * since 1.7.0\n     * @type Boolean\n     * @default true\n     */\n    noScaleCache:              true,\n\n    /**\n     * When `false`, the stoke width will scale with the object.\n     * When `true`, the stroke will always match the exact pixel size entered for stroke width.\n     * this Property does not work on Text classes or drawing call that uses strokeText,fillText methods\n     * default to false\n     * @since 2.6.0\n     * @type Boolean\n     * @default false\n     * @type Boolean\n     * @default false\n     */\n    strokeUniform:              false,\n\n    /**\n     * When set to `true`, object's cache will be rerendered next render call.\n     * since 1.7.0\n     * @type Boolean\n     * @default true\n     */\n    dirty:                true,\n\n    /**\n     * keeps the value of the last hovered corner during mouse move.\n     * 0 is no corner, or 'mt', 'ml', 'mtr' etc..\n     * It should be private, but there is no harm in using it as\n     * a read-only property.\n     * @type number|string|any\n     * @default 0\n     */\n    __corner: 0,\n\n    /**\n     * Determines if the fill or the stroke is drawn first (one of \"fill\" or \"stroke\")\n     * @type String\n     * @default\n     */\n    paintFirst:           'fill',\n\n    /**\n     * When 'down', object is set to active on mousedown/touchstart\n     * When 'up', object is set to active on mouseup/touchend\n     * Experimental. Let's see if this breaks anything before supporting officially\n     * @private\n     * since 4.4.0\n     * @type String\n     * @default 'down'\n     */\n    activeOn:           'down',\n\n    /**\n     * List of properties to consider when checking if state\n     * of an object is changed (fabric.Object#hasStateChanged)\n     * as well as for history (undo/redo) purposes\n     * @type Array\n     */\n    stateProperties: (\n      'top left width height scaleX scaleY flipX flipY originX originY transformMatrix ' +\n      'stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit ' +\n      'angle opacity fill globalCompositeOperation shadow visible backgroundColor ' +\n      'skewX skewY fillRule paintFirst clipPath strokeUniform'\n    ).split(' '),\n\n    /**\n     * List of properties to consider when checking if cache needs refresh\n     * Those properties are checked by statefullCache ON ( or lazy mode if we want ) or from single\n     * calls to Object.set(key, value). If the key is in this list, the object is marked as dirty\n     * and refreshed at the next render\n     * @type Array\n     */\n    cacheProperties: (\n      'fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform' +\n      ' strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath'\n    ).split(' '),\n\n    /**\n     * List of properties to consider for animating colors.\n     * @type Array\n     */\n    colorProperties: (\n      'fill stroke backgroundColor'\n    ).split(' '),\n\n    /**\n     * a fabricObject that, without stroke define a clipping area with their shape. filled in black\n     * the clipPath object gets used when the object has rendered, and the context is placed in the center\n     * of the object cacheCanvas.\n     * If you want 0,0 of a clipPath to align with an object center, use clipPath.originX/Y to 'center'\n     * @type fabric.Object\n     */\n    clipPath: undefined,\n\n    /**\n     * Meaningful ONLY when the object is used as clipPath.\n     * if true, the clipPath will make the object clip to the outside of the clipPath\n     * since 2.4.0\n     * @type boolean\n     * @default false\n     */\n    inverted: false,\n\n    /**\n     * Meaningful ONLY when the object is used as clipPath.\n     * if true, the clipPath will have its top and left relative to canvas, and will\n     * not be influenced by the object transform. This will make the clipPath relative\n     * to the canvas, but clipping just a particular object.\n     * WARNING this is beta, this feature may change or be renamed.\n     * since 2.4.0\n     * @type boolean\n     * @default false\n     */\n    absolutePositioned: false,\n\n    /**\n     * Constructor\n     * @param {Object} [options] Options object\n     */\n    initialize: function(options) {\n      if (options) {\n        this.setOptions(options);\n      }\n    },\n\n    /**\n     * Create a the canvas used to keep the cached copy of the object\n     * @private\n     */\n    _createCacheCanvas: function() {\n      this._cacheProperties = {};\n      this._cacheCanvas = fabric.util.createCanvasElement();\n      this._cacheContext = this._cacheCanvas.getContext('2d');\n      this._updateCacheCanvas();\n      // if canvas gets created, is empty, so dirty.\n      this.dirty = true;\n    },\n\n    /**\n     * Limit the cache dimensions so that X * Y do not cross fabric.perfLimitSizeTotal\n     * and each side do not cross fabric.cacheSideLimit\n     * those numbers are configurable so that you can get as much detail as you want\n     * making bargain with performances.\n     * @param {Object} dims\n     * @param {Object} dims.width width of canvas\n     * @param {Object} dims.height height of canvas\n     * @param {Object} dims.zoomX zoomX zoom value to unscale the canvas before drawing cache\n     * @param {Object} dims.zoomY zoomY zoom value to unscale the canvas before drawing cache\n     * @return {Object}.width width of canvas\n     * @return {Object}.height height of canvas\n     * @return {Object}.zoomX zoomX zoom value to unscale the canvas before drawing cache\n     * @return {Object}.zoomY zoomY zoom value to unscale the canvas before drawing cache\n     */\n    _limitCacheSize: function(dims) {\n      var perfLimitSizeTotal = fabric.perfLimitSizeTotal,\n          width = dims.width, height = dims.height,\n          max = fabric.maxCacheSideLimit, min = fabric.minCacheSideLimit;\n      if (width <= max && height <= max && width * height <= perfLimitSizeTotal) {\n        if (width < min) {\n          dims.width = min;\n        }\n        if (height < min) {\n          dims.height = min;\n        }\n        return dims;\n      }\n      var ar = width / height, limitedDims = fabric.util.limitDimsByArea(ar, perfLimitSizeTotal),\n          capValue = fabric.util.capValue,\n          x = capValue(min, limitedDims.x, max),\n          y = capValue(min, limitedDims.y, max);\n      if (width > x) {\n        dims.zoomX /= width / x;\n        dims.width = x;\n        dims.capped = true;\n      }\n      if (height > y) {\n        dims.zoomY /= height / y;\n        dims.height = y;\n        dims.capped = true;\n      }\n      return dims;\n    },\n\n    /**\n     * Return the dimension and the zoom level needed to create a cache canvas\n     * big enough to host the object to be cached.\n     * @private\n     * @return {Object}.x width of object to be cached\n     * @return {Object}.y height of object to be cached\n     * @return {Object}.width width of canvas\n     * @return {Object}.height height of canvas\n     * @return {Object}.zoomX zoomX zoom value to unscale the canvas before drawing cache\n     * @return {Object}.zoomY zoomY zoom value to unscale the canvas before drawing cache\n     */\n    _getCacheCanvasDimensions: function() {\n      var objectScale = this.getTotalObjectScaling(),\n          // caculate dimensions without skewing\n          dim = this._getTransformedDimensions(0, 0),\n          neededX = dim.x * objectScale.scaleX / this.scaleX,\n          neededY = dim.y * objectScale.scaleY / this.scaleY;\n      return {\n        // for sure this ALIASING_LIMIT is slightly creating problem\n        // in situation in which the cache canvas gets an upper limit\n        // also objectScale contains already scaleX and scaleY\n        width: neededX + ALIASING_LIMIT,\n        height: neededY + ALIASING_LIMIT,\n        zoomX: objectScale.scaleX,\n        zoomY: objectScale.scaleY,\n        x: neededX,\n        y: neededY\n      };\n    },\n\n    /**\n     * Update width and height of the canvas for cache\n     * returns true or false if canvas needed resize.\n     * @private\n     * @return {Boolean} true if the canvas has been resized\n     */\n    _updateCacheCanvas: function() {\n      var targetCanvas = this.canvas;\n      if (this.noScaleCache && targetCanvas && targetCanvas._currentTransform) {\n        var target = targetCanvas._currentTransform.target,\n            action = targetCanvas._currentTransform.action;\n        if (this === target && action.slice && action.slice(0, 5) === 'scale') {\n          return false;\n        }\n      }\n      var canvas = this._cacheCanvas,\n          dims = this._limitCacheSize(this._getCacheCanvasDimensions()),\n          minCacheSize = fabric.minCacheSideLimit,\n          width = dims.width, height = dims.height, drawingWidth, drawingHeight,\n          zoomX = dims.zoomX, zoomY = dims.zoomY,\n          dimensionsChanged = width !== this.cacheWidth || height !== this.cacheHeight,\n          zoomChanged = this.zoomX !== zoomX || this.zoomY !== zoomY,\n          shouldRedraw = dimensionsChanged || zoomChanged,\n          additionalWidth = 0, additionalHeight = 0, shouldResizeCanvas = false;\n      if (dimensionsChanged) {\n        var canvasWidth = this._cacheCanvas.width,\n            canvasHeight = this._cacheCanvas.height,\n            sizeGrowing = width > canvasWidth || height > canvasHeight,\n            sizeShrinking = (width < canvasWidth * 0.9 || height < canvasHeight * 0.9) &&\n              canvasWidth > minCacheSize && canvasHeight > minCacheSize;\n        shouldResizeCanvas = sizeGrowing || sizeShrinking;\n        if (sizeGrowing && !dims.capped && (width > minCacheSize || height > minCacheSize)) {\n          additionalWidth = width * 0.1;\n          additionalHeight = height * 0.1;\n        }\n      }\n      if (this instanceof fabric.Text && this.path) {\n        shouldRedraw = true;\n        shouldResizeCanvas = true;\n        additionalWidth += this.getHeightOfLine(0) * this.zoomX;\n        additionalHeight += this.getHeightOfLine(0) * this.zoomY;\n      }\n      if (shouldRedraw) {\n        if (shouldResizeCanvas) {\n          canvas.width = Math.ceil(width + additionalWidth);\n          canvas.height = Math.ceil(height + additionalHeight);\n        }\n        else {\n          this._cacheContext.setTransform(1, 0, 0, 1, 0, 0);\n          this._cacheContext.clearRect(0, 0, canvas.width, canvas.height);\n        }\n        drawingWidth = dims.x / 2;\n        drawingHeight = dims.y / 2;\n        this.cacheTranslationX = Math.round(canvas.width / 2 - drawingWidth) + drawingWidth;\n        this.cacheTranslationY = Math.round(canvas.height / 2 - drawingHeight) + drawingHeight;\n        this.cacheWidth = width;\n        this.cacheHeight = height;\n        this._cacheContext.translate(this.cacheTranslationX, this.cacheTranslationY);\n        this._cacheContext.scale(zoomX, zoomY);\n        this.zoomX = zoomX;\n        this.zoomY = zoomY;\n        return true;\n      }\n      return false;\n    },\n\n    /**\n     * Sets object's properties from options\n     * @param {Object} [options] Options object\n     */\n    setOptions: function(options) {\n      this._setOptions(options);\n      this._initGradient(options.fill, 'fill');\n      this._initGradient(options.stroke, 'stroke');\n      this._initPattern(options.fill, 'fill');\n      this._initPattern(options.stroke, 'stroke');\n    },\n\n    /**\n     * Transforms context when rendering an object\n     * @param {CanvasRenderingContext2D} ctx Context\n     */\n    transform: function(ctx) {\n      var needFullTransform = (this.group && !this.group._transformDone) ||\n         (this.group && this.canvas && ctx === this.canvas.contextTop);\n      var m = this.calcTransformMatrix(!needFullTransform);\n      ctx.transform(m[0], m[1], m[2], m[3], m[4], m[5]);\n    },\n\n    /**\n     * Returns an object representation of an instance\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {Object} Object representation of an instance\n     */\n    toObject: function(propertiesToInclude) {\n      var NUM_FRACTION_DIGITS = fabric.Object.NUM_FRACTION_DIGITS,\n\n          object = {\n            type:                     this.type,\n            version:                  fabric.version,\n            originX:                  this.originX,\n            originY:                  this.originY,\n            left:                     toFixed(this.left, NUM_FRACTION_DIGITS),\n            top:                      toFixed(this.top, NUM_FRACTION_DIGITS),\n            width:                    toFixed(this.width, NUM_FRACTION_DIGITS),\n            height:                   toFixed(this.height, NUM_FRACTION_DIGITS),\n            fill:                     (this.fill && this.fill.toObject) ? this.fill.toObject() : this.fill,\n            stroke:                   (this.stroke && this.stroke.toObject) ? this.stroke.toObject() : this.stroke,\n            strokeWidth:              toFixed(this.strokeWidth, NUM_FRACTION_DIGITS),\n            strokeDashArray:          this.strokeDashArray ? this.strokeDashArray.concat() : this.strokeDashArray,\n            strokeLineCap:            this.strokeLineCap,\n            strokeDashOffset:         this.strokeDashOffset,\n            strokeLineJoin:           this.strokeLineJoin,\n            strokeUniform:            this.strokeUniform,\n            strokeMiterLimit:         toFixed(this.strokeMiterLimit, NUM_FRACTION_DIGITS),\n            scaleX:                   toFixed(this.scaleX, NUM_FRACTION_DIGITS),\n            scaleY:                   toFixed(this.scaleY, NUM_FRACTION_DIGITS),\n            angle:                    toFixed(this.angle, NUM_FRACTION_DIGITS),\n            flipX:                    this.flipX,\n            flipY:                    this.flipY,\n            opacity:                  toFixed(this.opacity, NUM_FRACTION_DIGITS),\n            shadow:                   (this.shadow && this.shadow.toObject) ? this.shadow.toObject() : this.shadow,\n            visible:                  this.visible,\n            backgroundColor:          this.backgroundColor,\n            fillRule:                 this.fillRule,\n            paintFirst:               this.paintFirst,\n            globalCompositeOperation: this.globalCompositeOperation,\n            skewX:                    toFixed(this.skewX, NUM_FRACTION_DIGITS),\n            skewY:                    toFixed(this.skewY, NUM_FRACTION_DIGITS),\n          };\n\n      if (this.clipPath && !this.clipPath.excludeFromExport) {\n        object.clipPath = this.clipPath.toObject(propertiesToInclude);\n        object.clipPath.inverted = this.clipPath.inverted;\n        object.clipPath.absolutePositioned = this.clipPath.absolutePositioned;\n      }\n\n      fabric.util.populateWithProperties(this, object, propertiesToInclude);\n      if (!this.includeDefaultValues) {\n        object = this._removeDefaultValues(object);\n      }\n\n      return object;\n    },\n\n    /**\n     * Returns (dataless) object representation of an instance\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {Object} Object representation of an instance\n     */\n    toDatalessObject: function(propertiesToInclude) {\n      // will be overwritten by subclasses\n      return this.toObject(propertiesToInclude);\n    },\n\n    /**\n     * @private\n     * @param {Object} object\n     */\n    _removeDefaultValues: function(object) {\n      var prototype = fabric.util.getKlass(object.type).prototype,\n          stateProperties = prototype.stateProperties;\n      stateProperties.forEach(function(prop) {\n        if (prop === 'left' || prop === 'top') {\n          return;\n        }\n        if (object[prop] === prototype[prop]) {\n          delete object[prop];\n        }\n        // basically a check for [] === []\n        if (Array.isArray(object[prop]) && Array.isArray(prototype[prop])\n          && object[prop].length === 0 && prototype[prop].length === 0) {\n          delete object[prop];\n        }\n      });\n\n      return object;\n    },\n\n    /**\n     * Returns a string representation of an instance\n     * @return {String}\n     */\n    toString: function() {\n      return '#<fabric.' + capitalize(this.type) + '>';\n    },\n\n    /**\n     * Return the object scale factor counting also the group scaling\n     * @return {Object} object with scaleX and scaleY properties\n     */\n    getObjectScaling: function() {\n      // if the object is a top level one, on the canvas, we go for simple aritmetic\n      // otherwise the complex method with angles will return approximations and decimals\n      // and will likely kill the cache when not needed\n      // https://github.com/fabricjs/fabric.js/issues/7157\n      if (!this.group) {\n        return {\n          scaleX: this.scaleX,\n          scaleY: this.scaleY,\n        };\n      }\n      // if we are inside a group total zoom calculation is complex, we defer to generic matrices\n      var options = fabric.util.qrDecompose(this.calcTransformMatrix());\n      return { scaleX: Math.abs(options.scaleX), scaleY: Math.abs(options.scaleY) };\n    },\n\n    /**\n     * Return the object scale factor counting also the group scaling, zoom and retina\n     * @return {Object} object with scaleX and scaleY properties\n     */\n    getTotalObjectScaling: function() {\n      var scale = this.getObjectScaling(), scaleX = scale.scaleX, scaleY = scale.scaleY;\n      if (this.canvas) {\n        var zoom = this.canvas.getZoom();\n        var retina = this.canvas.getRetinaScaling();\n        scaleX *= zoom * retina;\n        scaleY *= zoom * retina;\n      }\n      return { scaleX: scaleX, scaleY: scaleY };\n    },\n\n    /**\n     * Return the object opacity counting also the group property\n     * @return {Number}\n     */\n    getObjectOpacity: function() {\n      var opacity = this.opacity;\n      if (this.group) {\n        opacity *= this.group.getObjectOpacity();\n      }\n      return opacity;\n    },\n\n    /**\n     * @private\n     * @param {String} key\n     * @param {*} value\n     * @return {fabric.Object} thisArg\n     */\n    _set: function(key, value) {\n      var shouldConstrainValue = (key === 'scaleX' || key === 'scaleY'),\n          isChanged = this[key] !== value, groupNeedsUpdate = false;\n\n      if (shouldConstrainValue) {\n        value = this._constrainScale(value);\n      }\n      if (key === 'scaleX' && value < 0) {\n        this.flipX = !this.flipX;\n        value *= -1;\n      }\n      else if (key === 'scaleY' && value < 0) {\n        this.flipY = !this.flipY;\n        value *= -1;\n      }\n      else if (key === 'shadow' && value && !(value instanceof fabric.Shadow)) {\n        value = new fabric.Shadow(value);\n      }\n      else if (key === 'dirty' && this.group) {\n        this.group.set('dirty', value);\n      }\n\n      this[key] = value;\n\n      if (isChanged) {\n        groupNeedsUpdate = this.group && this.group.isOnACache();\n        if (this.cacheProperties.indexOf(key) > -1) {\n          this.dirty = true;\n          groupNeedsUpdate && this.group.set('dirty', true);\n        }\n        else if (groupNeedsUpdate && this.stateProperties.indexOf(key) > -1) {\n          this.group.set('dirty', true);\n        }\n      }\n      return this;\n    },\n\n    /**\n     * This callback function is called by the parent group of an object every\n     * time a non-delegated property changes on the group. It is passed the key\n     * and value as parameters. Not adding in this function's signature to avoid\n     * Travis build error about unused variables.\n     */\n    setOnGroup: function() {\n      // implemented by sub-classes, as needed.\n    },\n\n    /**\n     * Retrieves viewportTransform from Object's canvas if possible\n     * @method getViewportTransform\n     * @memberOf fabric.Object.prototype\n     * @return {Array}\n     */\n    getViewportTransform: function() {\n      if (this.canvas && this.canvas.viewportTransform) {\n        return this.canvas.viewportTransform;\n      }\n      return fabric.iMatrix.concat();\n    },\n\n    /*\n     * @private\n     * return if the object would be visible in rendering\n     * @memberOf fabric.Object.prototype\n     * @return {Boolean}\n     */\n    isNotVisible: function() {\n      return this.opacity === 0 ||\n        (!this.width && !this.height && this.strokeWidth === 0) ||\n        !this.visible;\n    },\n\n    /**\n     * Renders an object on a specified context\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    render: function(ctx) {\n      // do not render if width/height are zeros or object is not visible\n      if (this.isNotVisible()) {\n        return;\n      }\n      if (this.canvas && this.canvas.skipOffscreen && !this.group && !this.isOnScreen()) {\n        return;\n      }\n      ctx.save();\n      this._setupCompositeOperation(ctx);\n      this.drawSelectionBackground(ctx);\n      this.transform(ctx);\n      this._setOpacity(ctx);\n      this._setShadow(ctx, this);\n      if (this.shouldCache()) {\n        this.renderCache();\n        this.drawCacheOnCanvas(ctx);\n      }\n      else {\n        this._removeCacheCanvas();\n        this.dirty = false;\n        this.drawObject(ctx);\n        if (this.objectCaching && this.statefullCache) {\n          this.saveState({ propertySet: 'cacheProperties' });\n        }\n      }\n      ctx.restore();\n    },\n\n    renderCache: function(options) {\n      options = options || {};\n      if (!this._cacheCanvas || !this._cacheContext) {\n        this._createCacheCanvas();\n      }\n      if (this.isCacheDirty()) {\n        this.statefullCache && this.saveState({ propertySet: 'cacheProperties' });\n        this.drawObject(this._cacheContext, options.forClipping);\n        this.dirty = false;\n      }\n    },\n\n    /**\n     * Remove cacheCanvas and its dimensions from the objects\n     */\n    _removeCacheCanvas: function() {\n      this._cacheCanvas = null;\n      this._cacheContext = null;\n      this.cacheWidth = 0;\n      this.cacheHeight = 0;\n    },\n\n    /**\n     * return true if the object will draw a stroke\n     * Does not consider text styles. This is just a shortcut used at rendering time\n     * We want it to be an approximation and be fast.\n     * wrote to avoid extra caching, it has to return true when stroke happens,\n     * can guess when it will not happen at 100% chance, does not matter if it misses\n     * some use case where the stroke is invisible.\n     * @since 3.0.0\n     * @returns Boolean\n     */\n    hasStroke: function() {\n      return this.stroke && this.stroke !== 'transparent' && this.strokeWidth !== 0;\n    },\n\n    /**\n     * return true if the object will draw a fill\n     * Does not consider text styles. This is just a shortcut used at rendering time\n     * We want it to be an approximation and be fast.\n     * wrote to avoid extra caching, it has to return true when fill happens,\n     * can guess when it will not happen at 100% chance, does not matter if it misses\n     * some use case where the fill is invisible.\n     * @since 3.0.0\n     * @returns Boolean\n     */\n    hasFill: function() {\n      return this.fill && this.fill !== 'transparent';\n    },\n\n    /**\n     * When set to `true`, force the object to have its own cache, even if it is inside a group\n     * it may be needed when your object behave in a particular way on the cache and always needs\n     * its own isolated canvas to render correctly.\n     * Created to be overridden\n     * since 1.7.12\n     * @returns Boolean\n     */\n    needsItsOwnCache: function() {\n      if (this.paintFirst === 'stroke' &&\n        this.hasFill() && this.hasStroke() && typeof this.shadow === 'object') {\n        return true;\n      }\n      if (this.clipPath) {\n        return true;\n      }\n      return false;\n    },\n\n    /**\n     * Decide if the object should cache or not. Create its own cache level\n     * objectCaching is a global flag, wins over everything\n     * needsItsOwnCache should be used when the object drawing method requires\n     * a cache step. None of the fabric classes requires it.\n     * Generally you do not cache objects in groups because the group outside is cached.\n     * Read as: cache if is needed, or if the feature is enabled but we are not already caching.\n     * @return {Boolean}\n     */\n    shouldCache: function() {\n      this.ownCaching = this.needsItsOwnCache() || (\n        this.objectCaching &&\n        (!this.group || !this.group.isOnACache())\n      );\n      return this.ownCaching;\n    },\n\n    /**\n     * Check if this object or a child object will cast a shadow\n     * used by Group.shouldCache to know if child has a shadow recursively\n     * @return {Boolean}\n     */\n    willDrawShadow: function() {\n      return !!this.shadow && (this.shadow.offsetX !== 0 || this.shadow.offsetY !== 0);\n    },\n\n    /**\n     * Execute the drawing operation for an object clipPath\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     * @param {fabric.Object} clipPath\n     */\n    drawClipPathOnCache: function(ctx, clipPath) {\n      ctx.save();\n      // DEBUG: uncomment this line, comment the following\n      // ctx.globalAlpha = 0.4\n      if (clipPath.inverted) {\n        ctx.globalCompositeOperation = 'destination-out';\n      }\n      else {\n        ctx.globalCompositeOperation = 'destination-in';\n      }\n      //ctx.scale(1 / 2, 1 / 2);\n      if (clipPath.absolutePositioned) {\n        var m = fabric.util.invertTransform(this.calcTransformMatrix());\n        ctx.transform(m[0], m[1], m[2], m[3], m[4], m[5]);\n      }\n      clipPath.transform(ctx);\n      ctx.scale(1 / clipPath.zoomX, 1 / clipPath.zoomY);\n      ctx.drawImage(clipPath._cacheCanvas, -clipPath.cacheTranslationX, -clipPath.cacheTranslationY);\n      ctx.restore();\n    },\n\n    /**\n     * Execute the drawing operation for an object on a specified context\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    drawObject: function(ctx, forClipping) {\n      var originalFill = this.fill, originalStroke = this.stroke;\n      if (forClipping) {\n        this.fill = 'black';\n        this.stroke = '';\n        this._setClippingProperties(ctx);\n      }\n      else {\n        this._renderBackground(ctx);\n      }\n      this._render(ctx);\n      this._drawClipPath(ctx, this.clipPath);\n      this.fill = originalFill;\n      this.stroke = originalStroke;\n    },\n\n    /**\n     * Prepare clipPath state and cache and draw it on instance's cache\n     * @param {CanvasRenderingContext2D} ctx\n     * @param {fabric.Object} clipPath\n     */\n    _drawClipPath: function (ctx, clipPath) {\n      if (!clipPath) { return; }\n      // needed to setup a couple of variables\n      // path canvas gets overridden with this one.\n      // TODO find a better solution?\n      clipPath.canvas = this.canvas;\n      clipPath.shouldCache();\n      clipPath._transformDone = true;\n      clipPath.renderCache({ forClipping: true });\n      this.drawClipPathOnCache(ctx, clipPath);\n    },\n\n    /**\n     * Paint the cached copy of the object on the target context.\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    drawCacheOnCanvas: function(ctx) {\n      ctx.scale(1 / this.zoomX, 1 / this.zoomY);\n      ctx.drawImage(this._cacheCanvas, -this.cacheTranslationX, -this.cacheTranslationY);\n    },\n\n    /**\n     * Check if cache is dirty\n     * @param {Boolean} skipCanvas skip canvas checks because this object is painted\n     * on parent canvas.\n     */\n    isCacheDirty: function(skipCanvas) {\n      if (this.isNotVisible()) {\n        return false;\n      }\n      if (this._cacheCanvas && this._cacheContext && !skipCanvas && this._updateCacheCanvas()) {\n        // in this case the context is already cleared.\n        return true;\n      }\n      else {\n        if (this.dirty ||\n          (this.clipPath && this.clipPath.absolutePositioned) ||\n          (this.statefullCache && this.hasStateChanged('cacheProperties'))\n        ) {\n          if (this._cacheCanvas && this._cacheContext && !skipCanvas) {\n            var width = this.cacheWidth / this.zoomX;\n            var height = this.cacheHeight / this.zoomY;\n            this._cacheContext.clearRect(-width / 2, -height / 2, width, height);\n          }\n          return true;\n        }\n      }\n      return false;\n    },\n\n    /**\n     * Draws a background for the object big as its untransformed dimensions\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _renderBackground: function(ctx) {\n      if (!this.backgroundColor) {\n        return;\n      }\n      var dim = this._getNonTransformedDimensions();\n      ctx.fillStyle = this.backgroundColor;\n\n      ctx.fillRect(\n        -dim.x / 2,\n        -dim.y / 2,\n        dim.x,\n        dim.y\n      );\n      // if there is background color no other shadows\n      // should be casted\n      this._removeShadow(ctx);\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _setOpacity: function(ctx) {\n      if (this.group && !this.group._transformDone) {\n        ctx.globalAlpha = this.getObjectOpacity();\n      }\n      else {\n        ctx.globalAlpha *= this.opacity;\n      }\n    },\n\n    _setStrokeStyles: function(ctx, decl) {\n      var stroke = decl.stroke;\n      if (stroke) {\n        ctx.lineWidth = decl.strokeWidth;\n        ctx.lineCap = decl.strokeLineCap;\n        ctx.lineDashOffset = decl.strokeDashOffset;\n        ctx.lineJoin = decl.strokeLineJoin;\n        ctx.miterLimit = decl.strokeMiterLimit;\n        if (stroke.toLive) {\n          if (stroke.gradientUnits === 'percentage' || stroke.gradientTransform || stroke.patternTransform) {\n            // need to transform gradient in a pattern.\n            // this is a slow process. If you are hitting this codepath, and the object\n            // is not using caching, you should consider switching it on.\n            // we need a canvas as big as the current object caching canvas.\n            this._applyPatternForTransformedGradient(ctx, stroke);\n          }\n          else {\n            // is a simple gradient or pattern\n            ctx.strokeStyle = stroke.toLive(ctx, this);\n            this._applyPatternGradientTransform(ctx, stroke);\n          }\n        }\n        else {\n          // is a color\n          ctx.strokeStyle = decl.stroke;\n        }\n      }\n    },\n\n    _setFillStyles: function(ctx, decl) {\n      var fill = decl.fill;\n      if (fill) {\n        if (fill.toLive) {\n          ctx.fillStyle = fill.toLive(ctx, this);\n          this._applyPatternGradientTransform(ctx, decl.fill);\n        }\n        else {\n          ctx.fillStyle = fill;\n        }\n      }\n    },\n\n    _setClippingProperties: function(ctx) {\n      ctx.globalAlpha = 1;\n      ctx.strokeStyle = 'transparent';\n      ctx.fillStyle = '#000000';\n    },\n\n    /**\n     * @private\n     * Sets line dash\n     * @param {CanvasRenderingContext2D} ctx Context to set the dash line on\n     * @param {Array} dashArray array representing dashes\n     */\n    _setLineDash: function(ctx, dashArray) {\n      if (!dashArray || dashArray.length === 0) {\n        return;\n      }\n      // Spec requires the concatenation of two copies the dash list when the number of elements is odd\n      if (1 & dashArray.length) {\n        dashArray.push.apply(dashArray, dashArray);\n      }\n      ctx.setLineDash(dashArray);\n    },\n\n    /**\n     * Renders controls and borders for the object\n     * the context here is not transformed\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     * @param {Object} [styleOverride] properties to override the object style\n     */\n    _renderControls: function(ctx, styleOverride) {\n      var vpt = this.getViewportTransform(),\n          matrix = this.calcTransformMatrix(),\n          options, drawBorders, drawControls;\n      styleOverride = styleOverride || { };\n      drawBorders = typeof styleOverride.hasBorders !== 'undefined' ? styleOverride.hasBorders : this.hasBorders;\n      drawControls = typeof styleOverride.hasControls !== 'undefined' ? styleOverride.hasControls : this.hasControls;\n      matrix = fabric.util.multiplyTransformMatrices(vpt, matrix);\n      options = fabric.util.qrDecompose(matrix);\n      ctx.save();\n      ctx.translate(options.translateX, options.translateY);\n      ctx.lineWidth = 1 * this.borderScaleFactor;\n      if (!this.group) {\n        ctx.globalAlpha = this.isMoving ? this.borderOpacityWhenMoving : 1;\n      }\n      if (this.flipX) {\n        options.angle -= 180;\n      }\n      ctx.rotate(degreesToRadians(this.group ? options.angle : this.angle));\n      if (styleOverride.forActiveSelection || this.group) {\n        drawBorders && this.drawBordersInGroup(ctx, options, styleOverride);\n      }\n      else {\n        drawBorders && this.drawBorders(ctx, styleOverride);\n      }\n      drawControls && this.drawControls(ctx, styleOverride);\n      ctx.restore();\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _setShadow: function(ctx) {\n      if (!this.shadow) {\n        return;\n      }\n\n      var shadow = this.shadow, canvas = this.canvas, scaling,\n          multX = (canvas && canvas.viewportTransform[0]) || 1,\n          multY = (canvas && canvas.viewportTransform[3]) || 1;\n      if (shadow.nonScaling) {\n        scaling = { scaleX: 1, scaleY: 1 };\n      }\n      else {\n        scaling = this.getObjectScaling();\n      }\n      if (canvas && canvas._isRetinaScaling()) {\n        multX *= fabric.devicePixelRatio;\n        multY *= fabric.devicePixelRatio;\n      }\n      ctx.shadowColor = shadow.color;\n      ctx.shadowBlur = shadow.blur * fabric.browserShadowBlurConstant *\n        (multX + multY) * (scaling.scaleX + scaling.scaleY) / 4;\n      ctx.shadowOffsetX = shadow.offsetX * multX * scaling.scaleX;\n      ctx.shadowOffsetY = shadow.offsetY * multY * scaling.scaleY;\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _removeShadow: function(ctx) {\n      if (!this.shadow) {\n        return;\n      }\n\n      ctx.shadowColor = '';\n      ctx.shadowBlur = ctx.shadowOffsetX = ctx.shadowOffsetY = 0;\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     * @param {Object} filler fabric.Pattern or fabric.Gradient\n     * @return {Object} offset.offsetX offset for text rendering\n     * @return {Object} offset.offsetY offset for text rendering\n     */\n    _applyPatternGradientTransform: function(ctx, filler) {\n      if (!filler || !filler.toLive) {\n        return { offsetX: 0, offsetY: 0 };\n      }\n      var t = filler.gradientTransform || filler.patternTransform;\n      var offsetX = -this.width / 2 + filler.offsetX || 0,\n          offsetY = -this.height / 2 + filler.offsetY || 0;\n\n      if (filler.gradientUnits === 'percentage') {\n        ctx.transform(this.width, 0, 0, this.height, offsetX, offsetY);\n      }\n      else {\n        ctx.transform(1, 0, 0, 1, offsetX, offsetY);\n      }\n      if (t) {\n        ctx.transform(t[0], t[1], t[2], t[3], t[4], t[5]);\n      }\n      return { offsetX: offsetX, offsetY: offsetY };\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _renderPaintInOrder: function(ctx) {\n      if (this.paintFirst === 'stroke') {\n        this._renderStroke(ctx);\n        this._renderFill(ctx);\n      }\n      else {\n        this._renderFill(ctx);\n        this._renderStroke(ctx);\n      }\n    },\n\n    /**\n     * @private\n     * function that actually render something on the context.\n     * empty here to allow Obects to work on tests to benchmark fabric functionalites\n     * not related to rendering\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _render: function(/* ctx */) {\n\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _renderFill: function(ctx) {\n      if (!this.fill) {\n        return;\n      }\n\n      ctx.save();\n      this._setFillStyles(ctx, this);\n      if (this.fillRule === 'evenodd') {\n        ctx.fill('evenodd');\n      }\n      else {\n        ctx.fill();\n      }\n      ctx.restore();\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _renderStroke: function(ctx) {\n      if (!this.stroke || this.strokeWidth === 0) {\n        return;\n      }\n\n      if (this.shadow && !this.shadow.affectStroke) {\n        this._removeShadow(ctx);\n      }\n\n      ctx.save();\n      if (this.strokeUniform && this.group) {\n        var scaling = this.getObjectScaling();\n        ctx.scale(1 / scaling.scaleX, 1 / scaling.scaleY);\n      }\n      else if (this.strokeUniform) {\n        ctx.scale(1 / this.scaleX, 1 / this.scaleY);\n      }\n      this._setLineDash(ctx, this.strokeDashArray);\n      this._setStrokeStyles(ctx, this);\n      ctx.stroke();\n      ctx.restore();\n    },\n\n    /**\n     * This function try to patch the missing gradientTransform on canvas gradients.\n     * transforming a context to transform the gradient, is going to transform the stroke too.\n     * we want to transform the gradient but not the stroke operation, so we create\n     * a transformed gradient on a pattern and then we use the pattern instead of the gradient.\n     * this method has drwabacks: is slow, is in low resolution, needs a patch for when the size\n     * is limited.\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     * @param {fabric.Gradient} filler a fabric gradient instance\n     */\n    _applyPatternForTransformedGradient: function(ctx, filler) {\n      var dims = this._limitCacheSize(this._getCacheCanvasDimensions()),\n          pCanvas = fabric.util.createCanvasElement(), pCtx, retinaScaling = this.canvas.getRetinaScaling(),\n          width = dims.x / this.scaleX / retinaScaling, height = dims.y / this.scaleY / retinaScaling;\n      pCanvas.width = width;\n      pCanvas.height = height;\n      pCtx = pCanvas.getContext('2d');\n      pCtx.beginPath(); pCtx.moveTo(0, 0); pCtx.lineTo(width, 0); pCtx.lineTo(width, height);\n      pCtx.lineTo(0, height); pCtx.closePath();\n      pCtx.translate(width / 2, height / 2);\n      pCtx.scale(\n        dims.zoomX / this.scaleX / retinaScaling,\n        dims.zoomY / this.scaleY / retinaScaling\n      );\n      this._applyPatternGradientTransform(pCtx, filler);\n      pCtx.fillStyle = filler.toLive(ctx);\n      pCtx.fill();\n      ctx.translate(-this.width / 2 - this.strokeWidth / 2, -this.height / 2 - this.strokeWidth / 2);\n      ctx.scale(\n        retinaScaling * this.scaleX / dims.zoomX,\n        retinaScaling * this.scaleY / dims.zoomY\n      );\n      ctx.strokeStyle = pCtx.createPattern(pCanvas, 'no-repeat');\n    },\n\n    /**\n     * This function is an helper for svg import. it returns the center of the object in the svg\n     * untransformed coordinates\n     * @private\n     * @return {Object} center point from element coordinates\n     */\n    _findCenterFromElement: function() {\n      return { x: this.left + this.width / 2, y: this.top + this.height / 2 };\n    },\n\n    /**\n     * This function is an helper for svg import. it decompose the transformMatrix\n     * and assign properties to object.\n     * untransformed coordinates\n     * @private\n     * @chainable\n     */\n    _assignTransformMatrixProps: function() {\n      if (this.transformMatrix) {\n        var options = fabric.util.qrDecompose(this.transformMatrix);\n        this.flipX = false;\n        this.flipY = false;\n        this.set('scaleX', options.scaleX);\n        this.set('scaleY', options.scaleY);\n        this.angle = options.angle;\n        this.skewX = options.skewX;\n        this.skewY = 0;\n      }\n    },\n\n    /**\n     * This function is an helper for svg import. it removes the transform matrix\n     * and set to object properties that fabricjs can handle\n     * @private\n     * @param {Object} preserveAspectRatioOptions\n     * @return {thisArg}\n     */\n    _removeTransformMatrix: function(preserveAspectRatioOptions) {\n      var center = this._findCenterFromElement();\n      if (this.transformMatrix) {\n        this._assignTransformMatrixProps();\n        center = fabric.util.transformPoint(center, this.transformMatrix);\n      }\n      this.transformMatrix = null;\n      if (preserveAspectRatioOptions) {\n        this.scaleX *= preserveAspectRatioOptions.scaleX;\n        this.scaleY *= preserveAspectRatioOptions.scaleY;\n        this.cropX = preserveAspectRatioOptions.cropX;\n        this.cropY = preserveAspectRatioOptions.cropY;\n        center.x += preserveAspectRatioOptions.offsetLeft;\n        center.y += preserveAspectRatioOptions.offsetTop;\n        this.width = preserveAspectRatioOptions.width;\n        this.height = preserveAspectRatioOptions.height;\n      }\n      this.setPositionByOrigin(center, 'center', 'center');\n    },\n\n    /**\n     * Clones an instance, using a callback method will work for every object.\n     * @param {Function} callback Callback is invoked with a clone as a first argument\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     */\n    clone: function(callback, propertiesToInclude) {\n      var objectForm = this.toObject(propertiesToInclude);\n      if (this.constructor.fromObject) {\n        this.constructor.fromObject(objectForm, callback);\n      }\n      else {\n        fabric.Object._fromObject('Object', objectForm, callback);\n      }\n    },\n\n    /**\n     * Creates an instance of fabric.Image out of an object\n     * makes use of toCanvasElement.\n     * Once this method was based on toDataUrl and loadImage, so it also had a quality\n     * and format option. toCanvasElement is faster and produce no loss of quality.\n     * If you need to get a real Jpeg or Png from an object, using toDataURL is the right way to do it.\n     * toCanvasElement and then toBlob from the obtained canvas is also a good option.\n     * This method is sync now, but still support the callback because we did not want to break.\n     * When fabricJS 5.0 will be planned, this will probably be changed to not have a callback.\n     * @param {Function} callback callback, invoked with an instance as a first argument\n     * @param {Object} [options] for clone as image, passed to toDataURL\n     * @param {Number} [options.multiplier=1] Multiplier to scale by\n     * @param {Number} [options.left] Cropping left offset. Introduced in v1.2.14\n     * @param {Number} [options.top] Cropping top offset. Introduced in v1.2.14\n     * @param {Number} [options.width] Cropping width. Introduced in v1.2.14\n     * @param {Number} [options.height] Cropping height. Introduced in v1.2.14\n     * @param {Boolean} [options.enableRetinaScaling] Enable retina scaling for clone image. Introduce in 1.6.4\n     * @param {Boolean} [options.withoutTransform] Remove current object transform ( no scale , no angle, no flip, no skew ). Introduced in 2.3.4\n     * @param {Boolean} [options.withoutShadow] Remove current object shadow. Introduced in 2.4.2\n     * @return {fabric.Object} thisArg\n     */\n    cloneAsImage: function(callback, options) {\n      var canvasEl = this.toCanvasElement(options);\n      if (callback) {\n        callback(new fabric.Image(canvasEl));\n      }\n      return this;\n    },\n\n    /**\n     * Converts an object into a HTMLCanvas element\n     * @param {Object} options Options object\n     * @param {Number} [options.multiplier=1] Multiplier to scale by\n     * @param {Number} [options.left] Cropping left offset. Introduced in v1.2.14\n     * @param {Number} [options.top] Cropping top offset. Introduced in v1.2.14\n     * @param {Number} [options.width] Cropping width. Introduced in v1.2.14\n     * @param {Number} [options.height] Cropping height. Introduced in v1.2.14\n     * @param {Boolean} [options.enableRetinaScaling] Enable retina scaling for clone image. Introduce in 1.6.4\n     * @param {Boolean} [options.withoutTransform] Remove current object transform ( no scale , no angle, no flip, no skew ). Introduced in 2.3.4\n     * @param {Boolean} [options.withoutShadow] Remove current object shadow. Introduced in 2.4.2\n     * @return {HTMLCanvasElement} Returns DOM element <canvas> with the fabric.Object\n     */\n    toCanvasElement: function(options) {\n      options || (options = { });\n\n      var utils = fabric.util, origParams = utils.saveObjectTransform(this),\n          originalGroup = this.group,\n          originalShadow = this.shadow, abs = Math.abs,\n          multiplier = (options.multiplier || 1) * (options.enableRetinaScaling ? fabric.devicePixelRatio : 1);\n      delete this.group;\n      if (options.withoutTransform) {\n        utils.resetObjectTransform(this);\n      }\n      if (options.withoutShadow) {\n        this.shadow = null;\n      }\n\n      var el = fabric.util.createCanvasElement(),\n          // skip canvas zoom and calculate with setCoords now.\n          boundingRect = this.getBoundingRect(true, true),\n          shadow = this.shadow, scaling,\n          shadowOffset = { x: 0, y: 0 }, shadowBlur,\n          width, height;\n\n      if (shadow) {\n        shadowBlur = shadow.blur;\n        if (shadow.nonScaling) {\n          scaling = { scaleX: 1, scaleY: 1 };\n        }\n        else {\n          scaling = this.getObjectScaling();\n        }\n        // consider non scaling shadow.\n        shadowOffset.x = 2 * Math.round(abs(shadow.offsetX) + shadowBlur) * (abs(scaling.scaleX));\n        shadowOffset.y = 2 * Math.round(abs(shadow.offsetY) + shadowBlur) * (abs(scaling.scaleY));\n      }\n      width = boundingRect.width + shadowOffset.x;\n      height = boundingRect.height + shadowOffset.y;\n      // if the current width/height is not an integer\n      // we need to make it so.\n      el.width = Math.ceil(width);\n      el.height = Math.ceil(height);\n      var canvas = new fabric.StaticCanvas(el, {\n        enableRetinaScaling: false,\n        renderOnAddRemove: false,\n        skipOffscreen: false,\n      });\n      if (options.format === 'jpeg') {\n        canvas.backgroundColor = '#fff';\n      }\n      this.setPositionByOrigin(new fabric.Point(canvas.width / 2, canvas.height / 2), 'center', 'center');\n\n      var originalCanvas = this.canvas;\n      canvas.add(this);\n      var canvasEl = canvas.toCanvasElement(multiplier || 1, options);\n      this.shadow = originalShadow;\n      this.set('canvas', originalCanvas);\n      if (originalGroup) {\n        this.group = originalGroup;\n      }\n      this.set(origParams).setCoords();\n      // canvas.dispose will call image.dispose that will nullify the elements\n      // since this canvas is a simple element for the process, we remove references\n      // to objects in this way in order to avoid object trashing.\n      canvas._objects = [];\n      canvas.dispose();\n      canvas = null;\n\n      return canvasEl;\n    },\n\n    /**\n     * Converts an object into a data-url-like string\n     * @param {Object} options Options object\n     * @param {String} [options.format=png] The format of the output image. Either \"jpeg\" or \"png\"\n     * @param {Number} [options.quality=1] Quality level (0..1). Only used for jpeg.\n     * @param {Number} [options.multiplier=1] Multiplier to scale by\n     * @param {Number} [options.left] Cropping left offset. Introduced in v1.2.14\n     * @param {Number} [options.top] Cropping top offset. Introduced in v1.2.14\n     * @param {Number} [options.width] Cropping width. Introduced in v1.2.14\n     * @param {Number} [options.height] Cropping height. Introduced in v1.2.14\n     * @param {Boolean} [options.enableRetinaScaling] Enable retina scaling for clone image. Introduce in 1.6.4\n     * @param {Boolean} [options.withoutTransform] Remove current object transform ( no scale , no angle, no flip, no skew ). Introduced in 2.3.4\n     * @param {Boolean} [options.withoutShadow] Remove current object shadow. Introduced in 2.4.2\n     * @return {String} Returns a data: URL containing a representation of the object in the format specified by options.format\n     */\n    toDataURL: function(options) {\n      options || (options = { });\n      return fabric.util.toDataURL(this.toCanvasElement(options), options.format || 'png', options.quality || 1);\n    },\n\n    /**\n     * Returns true if specified type is identical to the type of an instance\n     * @param {String} type Type to check against\n     * @return {Boolean}\n     */\n    isType: function(type) {\n      return arguments.length > 1 ? Array.from(arguments).includes(this.type) : this.type === type;\n    },\n\n    /**\n     * Returns complexity of an instance\n     * @return {Number} complexity of this instance (is 1 unless subclassed)\n     */\n    complexity: function() {\n      return 1;\n    },\n\n    /**\n     * Returns a JSON representation of an instance\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {Object} JSON\n     */\n    toJSON: function(propertiesToInclude) {\n      // delegate, not alias\n      return this.toObject(propertiesToInclude);\n    },\n\n    /**\n     * Sets \"angle\" of an instance with centered rotation\n     * @param {Number} angle Angle value (in degrees)\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n    rotate: function(angle) {\n      var shouldCenterOrigin = (this.originX !== 'center' || this.originY !== 'center') && this.centeredRotation;\n\n      if (shouldCenterOrigin) {\n        this._setOriginToCenter();\n      }\n\n      this.set('angle', angle);\n\n      if (shouldCenterOrigin) {\n        this._resetOrigin();\n      }\n\n      return this;\n    },\n\n    /**\n     * Centers object horizontally on canvas to which it was added last.\n     * You might need to call `setCoords` on an object after centering, to update controls area.\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n    centerH: function () {\n      this.canvas && this.canvas.centerObjectH(this);\n      return this;\n    },\n\n    /**\n     * Centers object horizontally on current viewport of canvas to which it was added last.\n     * You might need to call `setCoords` on an object after centering, to update controls area.\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n    viewportCenterH: function () {\n      this.canvas && this.canvas.viewportCenterObjectH(this);\n      return this;\n    },\n\n    /**\n     * Centers object vertically on canvas to which it was added last.\n     * You might need to call `setCoords` on an object after centering, to update controls area.\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n    centerV: function () {\n      this.canvas && this.canvas.centerObjectV(this);\n      return this;\n    },\n\n    /**\n     * Centers object vertically on current viewport of canvas to which it was added last.\n     * You might need to call `setCoords` on an object after centering, to update controls area.\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n    viewportCenterV: function () {\n      this.canvas && this.canvas.viewportCenterObjectV(this);\n      return this;\n    },\n\n    /**\n     * Centers object vertically and horizontally on canvas to which is was added last\n     * You might need to call `setCoords` on an object after centering, to update controls area.\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n    center: function () {\n      this.canvas && this.canvas.centerObject(this);\n      return this;\n    },\n\n    /**\n     * Centers object on current viewport of canvas to which it was added last.\n     * You might need to call `setCoords` on an object after centering, to update controls area.\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n    viewportCenter: function () {\n      this.canvas && this.canvas.viewportCenterObject(this);\n      return this;\n    },\n\n    /**\n     * Returns coordinates of a pointer relative to an object\n     * @param {Event} e Event to operate upon\n     * @param {Object} [pointer] Pointer to operate upon (instead of event)\n     * @return {Object} Coordinates of a pointer (x, y)\n     */\n    getLocalPointer: function(e, pointer) {\n      pointer = pointer || this.canvas.getPointer(e);\n      var pClicked = new fabric.Point(pointer.x, pointer.y),\n          objectLeftTop = this._getLeftTopCoords();\n      if (this.angle) {\n        pClicked = fabric.util.rotatePoint(\n          pClicked, objectLeftTop, degreesToRadians(-this.angle));\n      }\n      return {\n        x: pClicked.x - objectLeftTop.x,\n        y: pClicked.y - objectLeftTop.y\n      };\n    },\n\n    /**\n     * Sets canvas globalCompositeOperation for specific object\n     * custom composition operation for the particular object can be specified using globalCompositeOperation property\n     * @param {CanvasRenderingContext2D} ctx Rendering canvas context\n     */\n    _setupCompositeOperation: function (ctx) {\n      if (this.globalCompositeOperation) {\n        ctx.globalCompositeOperation = this.globalCompositeOperation;\n      }\n    },\n\n    /**\n     * cancel instance's running animations\n     * override if necessary to dispose artifacts such as `clipPath`\n     */\n    dispose: function () {\n      if (fabric.runningAnimations) {\n        fabric.runningAnimations.cancelByTarget(this);\n      }\n    }\n  });\n\n  fabric.util.createAccessors && fabric.util.createAccessors(fabric.Object);\n\n  extend(fabric.Object.prototype, fabric.Observable);\n\n  /**\n   * Defines the number of fraction digits to use when serializing object values.\n   * You can use it to increase/decrease precision of such values like left, top, scaleX, scaleY, etc.\n   * @static\n   * @memberOf fabric.Object\n   * @constant\n   * @type Number\n   */\n  fabric.Object.NUM_FRACTION_DIGITS = 2;\n\n  /**\n   * Defines which properties should be enlivened from the object passed to {@link fabric.Object._fromObject}\n   * @static\n   * @memberOf fabric.Object\n   * @constant\n   * @type string[]\n   */\n  fabric.Object.ENLIVEN_PROPS = ['clipPath'];\n\n  fabric.Object._fromObject = function(className, object, callback, extraParam) {\n    var klass = fabric[className];\n    object = clone(object, true);\n    fabric.util.enlivenPatterns([object.fill, object.stroke], function(patterns) {\n      if (typeof patterns[0] !== 'undefined') {\n        object.fill = patterns[0];\n      }\n      if (typeof patterns[1] !== 'undefined') {\n        object.stroke = patterns[1];\n      }\n      fabric.util.enlivenObjectEnlivables(object, object, function () {\n        var instance = extraParam ? new klass(object[extraParam], object) : new klass(object);\n        callback && callback(instance);\n      });\n    });\n  };\n\n  /**\n   * Unique id used internally when creating SVG elements\n   * @static\n   * @memberOf fabric.Object\n   * @type Number\n   */\n  fabric.Object.__uid = 0;\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function() {\n\n  var degreesToRadians = fabric.util.degreesToRadians,\n      originXOffset = {\n        left: -0.5,\n        center: 0,\n        right: 0.5\n      },\n      originYOffset = {\n        top: -0.5,\n        center: 0,\n        bottom: 0.5\n      };\n\n  fabric.util.object.extend(fabric.Object.prototype, /** @lends fabric.Object.prototype */ {\n\n    /**\n     * Translates the coordinates from a set of origin to another (based on the object's dimensions)\n     * @param {fabric.Point} point The point which corresponds to the originX and originY params\n     * @param {String} fromOriginX Horizontal origin: 'left', 'center' or 'right'\n     * @param {String} fromOriginY Vertical origin: 'top', 'center' or 'bottom'\n     * @param {String} toOriginX Horizontal origin: 'left', 'center' or 'right'\n     * @param {String} toOriginY Vertical origin: 'top', 'center' or 'bottom'\n     * @return {fabric.Point}\n     */\n    translateToGivenOrigin: function(point, fromOriginX, fromOriginY, toOriginX, toOriginY) {\n      var x = point.x,\n          y = point.y,\n          offsetX, offsetY, dim;\n\n      if (typeof fromOriginX === 'string') {\n        fromOriginX = originXOffset[fromOriginX];\n      }\n      else {\n        fromOriginX -= 0.5;\n      }\n\n      if (typeof toOriginX === 'string') {\n        toOriginX = originXOffset[toOriginX];\n      }\n      else {\n        toOriginX -= 0.5;\n      }\n\n      offsetX = toOriginX - fromOriginX;\n\n      if (typeof fromOriginY === 'string') {\n        fromOriginY = originYOffset[fromOriginY];\n      }\n      else {\n        fromOriginY -= 0.5;\n      }\n\n      if (typeof toOriginY === 'string') {\n        toOriginY = originYOffset[toOriginY];\n      }\n      else {\n        toOriginY -= 0.5;\n      }\n\n      offsetY = toOriginY - fromOriginY;\n\n      if (offsetX || offsetY) {\n        dim = this._getTransformedDimensions();\n        x = point.x + offsetX * dim.x;\n        y = point.y + offsetY * dim.y;\n      }\n\n      return new fabric.Point(x, y);\n    },\n\n    /**\n     * Translates the coordinates from origin to center coordinates (based on the object's dimensions)\n     * @param {fabric.Point} point The point which corresponds to the originX and originY params\n     * @param {String} originX Horizontal origin: 'left', 'center' or 'right'\n     * @param {String} originY Vertical origin: 'top', 'center' or 'bottom'\n     * @return {fabric.Point}\n     */\n    translateToCenterPoint: function(point, originX, originY) {\n      var p = this.translateToGivenOrigin(point, originX, originY, 'center', 'center');\n      if (this.angle) {\n        return fabric.util.rotatePoint(p, point, degreesToRadians(this.angle));\n      }\n      return p;\n    },\n\n    /**\n     * Translates the coordinates from center to origin coordinates (based on the object's dimensions)\n     * @param {fabric.Point} center The point which corresponds to center of the object\n     * @param {String} originX Horizontal origin: 'left', 'center' or 'right'\n     * @param {String} originY Vertical origin: 'top', 'center' or 'bottom'\n     * @return {fabric.Point}\n     */\n    translateToOriginPoint: function(center, originX, originY) {\n      var p = this.translateToGivenOrigin(center, 'center', 'center', originX, originY);\n      if (this.angle) {\n        return fabric.util.rotatePoint(p, center, degreesToRadians(this.angle));\n      }\n      return p;\n    },\n\n    /**\n     * Returns the real center coordinates of the object\n     * @return {fabric.Point}\n     */\n    getCenterPoint: function() {\n      var leftTop = new fabric.Point(this.left, this.top);\n      return this.translateToCenterPoint(leftTop, this.originX, this.originY);\n    },\n\n    /**\n     * Returns the coordinates of the object based on center coordinates\n     * @param {fabric.Point} point The point which corresponds to the originX and originY params\n     * @return {fabric.Point}\n     */\n    // getOriginPoint: function(center) {\n    //   return this.translateToOriginPoint(center, this.originX, this.originY);\n    // },\n\n    /**\n     * Returns the coordinates of the object as if it has a different origin\n     * @param {String} originX Horizontal origin: 'left', 'center' or 'right'\n     * @param {String} originY Vertical origin: 'top', 'center' or 'bottom'\n     * @return {fabric.Point}\n     */\n    getPointByOrigin: function(originX, originY) {\n      var center = this.getCenterPoint();\n      return this.translateToOriginPoint(center, originX, originY);\n    },\n\n    /**\n     * Returns the point in local coordinates\n     * @param {fabric.Point} point The point relative to the global coordinate system\n     * @param {String} originX Horizontal origin: 'left', 'center' or 'right'\n     * @param {String} originY Vertical origin: 'top', 'center' or 'bottom'\n     * @return {fabric.Point}\n     */\n    toLocalPoint: function(point, originX, originY) {\n      var center = this.getCenterPoint(),\n          p, p2;\n\n      if (typeof originX !== 'undefined' && typeof originY !== 'undefined' ) {\n        p = this.translateToGivenOrigin(center, 'center', 'center', originX, originY);\n      }\n      else {\n        p = new fabric.Point(this.left, this.top);\n      }\n\n      p2 = new fabric.Point(point.x, point.y);\n      if (this.angle) {\n        p2 = fabric.util.rotatePoint(p2, center, -degreesToRadians(this.angle));\n      }\n      return p2.subtractEquals(p);\n    },\n\n    /**\n     * Returns the point in global coordinates\n     * @param {fabric.Point} The point relative to the local coordinate system\n     * @return {fabric.Point}\n     */\n    // toGlobalPoint: function(point) {\n    //   return fabric.util.rotatePoint(point, this.getCenterPoint(), degreesToRadians(this.angle)).addEquals(new fabric.Point(this.left, this.top));\n    // },\n\n    /**\n     * Sets the position of the object taking into consideration the object's origin\n     * @param {fabric.Point} pos The new position of the object\n     * @param {String} originX Horizontal origin: 'left', 'center' or 'right'\n     * @param {String} originY Vertical origin: 'top', 'center' or 'bottom'\n     * @return {void}\n     */\n    setPositionByOrigin: function(pos, originX, originY) {\n      var center = this.translateToCenterPoint(pos, originX, originY),\n          position = this.translateToOriginPoint(center, this.originX, this.originY);\n      this.set('left', position.x);\n      this.set('top', position.y);\n    },\n\n    /**\n     * @param {String} to One of 'left', 'center', 'right'\n     */\n    adjustPosition: function(to) {\n      var angle = degreesToRadians(this.angle),\n          hypotFull = this.getScaledWidth(),\n          xFull = fabric.util.cos(angle) * hypotFull,\n          yFull = fabric.util.sin(angle) * hypotFull,\n          offsetFrom, offsetTo;\n\n      //TODO: this function does not consider mixed situation like top, center.\n      if (typeof this.originX === 'string') {\n        offsetFrom = originXOffset[this.originX];\n      }\n      else {\n        offsetFrom = this.originX - 0.5;\n      }\n      if (typeof to === 'string') {\n        offsetTo = originXOffset[to];\n      }\n      else {\n        offsetTo = to - 0.5;\n      }\n      this.left += xFull * (offsetTo - offsetFrom);\n      this.top += yFull * (offsetTo - offsetFrom);\n      this.setCoords();\n      this.originX = to;\n    },\n\n    /**\n     * Sets the origin/position of the object to it's center point\n     * @private\n     * @return {void}\n     */\n    _setOriginToCenter: function() {\n      this._originalOriginX = this.originX;\n      this._originalOriginY = this.originY;\n\n      var center = this.getCenterPoint();\n\n      this.originX = 'center';\n      this.originY = 'center';\n\n      this.left = center.x;\n      this.top = center.y;\n    },\n\n    /**\n     * Resets the origin/position of the object to it's original origin\n     * @private\n     * @return {void}\n     */\n    _resetOrigin: function() {\n      var originPoint = this.translateToOriginPoint(\n        this.getCenterPoint(),\n        this._originalOriginX,\n        this._originalOriginY);\n\n      this.originX = this._originalOriginX;\n      this.originY = this._originalOriginY;\n\n      this.left = originPoint.x;\n      this.top = originPoint.y;\n\n      this._originalOriginX = null;\n      this._originalOriginY = null;\n    },\n\n    /**\n     * @private\n     */\n    _getLeftTopCoords: function() {\n      return this.translateToOriginPoint(this.getCenterPoint(), 'left', 'top');\n    },\n  });\n\n})();\n\n\n(function() {\n\n  function arrayFromCoords(coords) {\n    return [\n      new fabric.Point(coords.tl.x, coords.tl.y),\n      new fabric.Point(coords.tr.x, coords.tr.y),\n      new fabric.Point(coords.br.x, coords.br.y),\n      new fabric.Point(coords.bl.x, coords.bl.y)\n    ];\n  }\n\n  var util = fabric.util,\n      degreesToRadians = util.degreesToRadians,\n      multiplyMatrices = util.multiplyTransformMatrices,\n      transformPoint = util.transformPoint;\n\n  util.object.extend(fabric.Object.prototype, /** @lends fabric.Object.prototype */ {\n\n    /**\n     * Describe object's corner position in canvas element coordinates.\n     * properties are depending on control keys and padding the main controls.\n     * each property is an object with x, y and corner.\n     * The `corner` property contains in a similar manner the 4 points of the\n     * interactive area of the corner.\n     * The coordinates depends from the controls positionHandler and are used\n     * to draw and locate controls\n     * @memberOf fabric.Object.prototype\n     */\n    oCoords: null,\n\n    /**\n     * Describe object's corner position in canvas object absolute coordinates\n     * properties are tl,tr,bl,br and describe the four main corner.\n     * each property is an object with x, y, instance of Fabric.Point.\n     * The coordinates depends from this properties: width, height, scaleX, scaleY\n     * skewX, skewY, angle, strokeWidth, top, left.\n     * Those coordinates are useful to understand where an object is. They get updated\n     * with oCoords but they do not need to be updated when zoom or panning change.\n     * The coordinates get updated with @method setCoords.\n     * You can calculate them without updating with @method calcACoords();\n     * @memberOf fabric.Object.prototype\n     */\n    aCoords: null,\n\n    /**\n     * Describe object's corner position in canvas element coordinates.\n     * includes padding. Used of object detection.\n     * set and refreshed with setCoords.\n     * @memberOf fabric.Object.prototype\n     */\n    lineCoords: null,\n\n    /**\n     * storage for object transform matrix\n     */\n    ownMatrixCache: null,\n\n    /**\n     * storage for object full transform matrix\n     */\n    matrixCache: null,\n\n    /**\n     * custom controls interface\n     * controls are added by default_controls.js\n     */\n    controls: { },\n\n    /**\n     * return correct set of coordinates for intersection\n     * this will return either aCoords or lineCoords.\n     * @param {Boolean} absolute will return aCoords if true or lineCoords\n     * @return {Object} {tl, tr, br, bl} points\n     */\n    _getCoords: function(absolute, calculate) {\n      if (calculate) {\n        return (absolute ? this.calcACoords() : this.calcLineCoords());\n      }\n      if (!this.aCoords || !this.lineCoords) {\n        this.setCoords(true);\n      }\n      return (absolute ? this.aCoords : this.lineCoords);\n    },\n\n    /**\n     * return correct set of coordinates for intersection\n     * this will return either aCoords or lineCoords.\n     * The coords are returned in an array.\n     * @return {Array} [tl, tr, br, bl] of points\n     */\n    getCoords: function(absolute, calculate) {\n      return arrayFromCoords(this._getCoords(absolute, calculate));\n    },\n\n    /**\n     * Checks if object intersects with an area formed by 2 points\n     * @param {Object} pointTL top-left point of area\n     * @param {Object} pointBR bottom-right point of area\n     * @param {Boolean} [absolute] use coordinates without viewportTransform\n     * @param {Boolean} [calculate] use coordinates of current position instead of .oCoords\n     * @return {Boolean} true if object intersects with an area formed by 2 points\n     */\n    intersectsWithRect: function(pointTL, pointBR, absolute, calculate) {\n      var coords = this.getCoords(absolute, calculate),\n          intersection = fabric.Intersection.intersectPolygonRectangle(\n            coords,\n            pointTL,\n            pointBR\n          );\n      return intersection.status === 'Intersection';\n    },\n\n    /**\n     * Checks if object intersects with another object\n     * @param {Object} other Object to test\n     * @param {Boolean} [absolute] use coordinates without viewportTransform\n     * @param {Boolean} [calculate] use coordinates of current position instead of .oCoords\n     * @return {Boolean} true if object intersects with another object\n     */\n    intersectsWithObject: function(other, absolute, calculate) {\n      var intersection = fabric.Intersection.intersectPolygonPolygon(\n        this.getCoords(absolute, calculate),\n        other.getCoords(absolute, calculate)\n      );\n\n      return intersection.status === 'Intersection'\n        || other.isContainedWithinObject(this, absolute, calculate)\n        || this.isContainedWithinObject(other, absolute, calculate);\n    },\n\n    /**\n     * Checks if object is fully contained within area of another object\n     * @param {Object} other Object to test\n     * @param {Boolean} [absolute] use coordinates without viewportTransform\n     * @param {Boolean} [calculate] use coordinates of current position instead of .oCoords\n     * @return {Boolean} true if object is fully contained within area of another object\n     */\n    isContainedWithinObject: function(other, absolute, calculate) {\n      var points = this.getCoords(absolute, calculate),\n          otherCoords = absolute ? other.aCoords : other.lineCoords,\n          i = 0, lines = other._getImageLines(otherCoords);\n      for (; i < 4; i++) {\n        if (!other.containsPoint(points[i], lines)) {\n          return false;\n        }\n      }\n      return true;\n    },\n\n    /**\n     * Checks if object is fully contained within area formed by 2 points\n     * @param {Object} pointTL top-left point of area\n     * @param {Object} pointBR bottom-right point of area\n     * @param {Boolean} [absolute] use coordinates without viewportTransform\n     * @param {Boolean} [calculate] use coordinates of current position instead of .oCoords\n     * @return {Boolean} true if object is fully contained within area formed by 2 points\n     */\n    isContainedWithinRect: function(pointTL, pointBR, absolute, calculate) {\n      var boundingRect = this.getBoundingRect(absolute, calculate);\n\n      return (\n        boundingRect.left >= pointTL.x &&\n        boundingRect.left + boundingRect.width <= pointBR.x &&\n        boundingRect.top >= pointTL.y &&\n        boundingRect.top + boundingRect.height <= pointBR.y\n      );\n    },\n\n    /**\n     * Checks if point is inside the object\n     * @param {fabric.Point} point Point to check against\n     * @param {Object} [lines] object returned from @method _getImageLines\n     * @param {Boolean} [absolute] use coordinates without viewportTransform\n     * @param {Boolean} [calculate] use coordinates of current position instead of .oCoords\n     * @return {Boolean} true if point is inside the object\n     */\n    containsPoint: function(point, lines, absolute, calculate) {\n      var coords = this._getCoords(absolute, calculate),\n          lines = lines || this._getImageLines(coords),\n          xPoints = this._findCrossPoints(point, lines);\n      // if xPoints is odd then point is inside the object\n      return (xPoints !== 0 && xPoints % 2 === 1);\n    },\n\n    /**\n     * Checks if object is contained within the canvas with current viewportTransform\n     * the check is done stopping at first point that appears on screen\n     * @param {Boolean} [calculate] use coordinates of current position instead of .aCoords\n     * @return {Boolean} true if object is fully or partially contained within canvas\n     */\n    isOnScreen: function(calculate) {\n      if (!this.canvas) {\n        return false;\n      }\n      var pointTL = this.canvas.vptCoords.tl, pointBR = this.canvas.vptCoords.br;\n      var points = this.getCoords(true, calculate);\n      // if some point is on screen, the object is on screen.\n      if (points.some(function(point) {\n        return point.x <= pointBR.x && point.x >= pointTL.x &&\n        point.y <= pointBR.y && point.y >= pointTL.y;\n      })) {\n        return true;\n      }\n      // no points on screen, check intersection with absolute coordinates\n      if (this.intersectsWithRect(pointTL, pointBR, true, calculate)) {\n        return true;\n      }\n      return this._containsCenterOfCanvas(pointTL, pointBR, calculate);\n    },\n\n    /**\n     * Checks if the object contains the midpoint between canvas extremities\n     * Does not make sense outside the context of isOnScreen and isPartiallyOnScreen\n     * @private\n     * @param {Fabric.Point} pointTL Top Left point\n     * @param {Fabric.Point} pointBR Top Right point\n     * @param {Boolean} calculate use coordinates of current position instead of .oCoords\n     * @return {Boolean} true if the object contains the point\n     */\n    _containsCenterOfCanvas: function(pointTL, pointBR, calculate) {\n      // worst case scenario the object is so big that contains the screen\n      var centerPoint = { x: (pointTL.x + pointBR.x) / 2, y: (pointTL.y + pointBR.y) / 2 };\n      if (this.containsPoint(centerPoint, null, true, calculate)) {\n        return true;\n      }\n      return false;\n    },\n\n    /**\n     * Checks if object is partially contained within the canvas with current viewportTransform\n     * @param {Boolean} [calculate] use coordinates of current position instead of .oCoords\n     * @return {Boolean} true if object is partially contained within canvas\n     */\n    isPartiallyOnScreen: function(calculate) {\n      if (!this.canvas) {\n        return false;\n      }\n      var pointTL = this.canvas.vptCoords.tl, pointBR = this.canvas.vptCoords.br;\n      if (this.intersectsWithRect(pointTL, pointBR, true, calculate)) {\n        return true;\n      }\n      var allPointsAreOutside = this.getCoords(true, calculate).every(function(point) {\n        return (point.x >= pointBR.x || point.x <= pointTL.x) &&\n        (point.y >= pointBR.y || point.y <= pointTL.y);\n      });\n      return allPointsAreOutside && this._containsCenterOfCanvas(pointTL, pointBR, calculate);\n    },\n\n    /**\n     * Method that returns an object with the object edges in it, given the coordinates of the corners\n     * @private\n     * @param {Object} oCoords Coordinates of the object corners\n     */\n    _getImageLines: function(oCoords) {\n\n      var lines = {\n        topline: {\n          o: oCoords.tl,\n          d: oCoords.tr\n        },\n        rightline: {\n          o: oCoords.tr,\n          d: oCoords.br\n        },\n        bottomline: {\n          o: oCoords.br,\n          d: oCoords.bl\n        },\n        leftline: {\n          o: oCoords.bl,\n          d: oCoords.tl\n        }\n      };\n\n      // // debugging\n      // if (this.canvas.contextTop) {\n      //   this.canvas.contextTop.fillRect(lines.bottomline.d.x, lines.bottomline.d.y, 2, 2);\n      //   this.canvas.contextTop.fillRect(lines.bottomline.o.x, lines.bottomline.o.y, 2, 2);\n      //\n      //   this.canvas.contextTop.fillRect(lines.leftline.d.x, lines.leftline.d.y, 2, 2);\n      //   this.canvas.contextTop.fillRect(lines.leftline.o.x, lines.leftline.o.y, 2, 2);\n      //\n      //   this.canvas.contextTop.fillRect(lines.topline.d.x, lines.topline.d.y, 2, 2);\n      //   this.canvas.contextTop.fillRect(lines.topline.o.x, lines.topline.o.y, 2, 2);\n      //\n      //   this.canvas.contextTop.fillRect(lines.rightline.d.x, lines.rightline.d.y, 2, 2);\n      //   this.canvas.contextTop.fillRect(lines.rightline.o.x, lines.rightline.o.y, 2, 2);\n      // }\n\n      return lines;\n    },\n\n    /**\n     * Helper method to determine how many cross points are between the 4 object edges\n     * and the horizontal line determined by a point on canvas\n     * @private\n     * @param {fabric.Point} point Point to check\n     * @param {Object} lines Coordinates of the object being evaluated\n     */\n    // remove yi, not used but left code here just in case.\n    _findCrossPoints: function(point, lines) {\n      var b1, b2, a1, a2, xi, // yi,\n          xcount = 0,\n          iLine;\n\n      for (var lineKey in lines) {\n        iLine = lines[lineKey];\n        // optimisation 1: line below point. no cross\n        if ((iLine.o.y < point.y) && (iLine.d.y < point.y)) {\n          continue;\n        }\n        // optimisation 2: line above point. no cross\n        if ((iLine.o.y >= point.y) && (iLine.d.y >= point.y)) {\n          continue;\n        }\n        // optimisation 3: vertical line case\n        if ((iLine.o.x === iLine.d.x) && (iLine.o.x >= point.x)) {\n          xi = iLine.o.x;\n          // yi = point.y;\n        }\n        // calculate the intersection point\n        else {\n          b1 = 0;\n          b2 = (iLine.d.y - iLine.o.y) / (iLine.d.x - iLine.o.x);\n          a1 = point.y - b1 * point.x;\n          a2 = iLine.o.y - b2 * iLine.o.x;\n\n          xi = -(a1 - a2) / (b1 - b2);\n          // yi = a1 + b1 * xi;\n        }\n        // dont count xi < point.x cases\n        if (xi >= point.x) {\n          xcount += 1;\n        }\n        // optimisation 4: specific for square images\n        if (xcount === 2) {\n          break;\n        }\n      }\n      return xcount;\n    },\n\n    /**\n     * Returns coordinates of object's bounding rectangle (left, top, width, height)\n     * the box is intended as aligned to axis of canvas.\n     * @param {Boolean} [absolute] use coordinates without viewportTransform\n     * @param {Boolean} [calculate] use coordinates of current position instead of .oCoords / .aCoords\n     * @return {Object} Object with left, top, width, height properties\n     */\n    getBoundingRect: function(absolute, calculate) {\n      var coords = this.getCoords(absolute, calculate);\n      return util.makeBoundingBoxFromPoints(coords);\n    },\n\n    /**\n     * Returns width of an object's bounding box counting transformations\n     * before 2.0 it was named getWidth();\n     * @return {Number} width value\n     */\n    getScaledWidth: function() {\n      return this._getTransformedDimensions().x;\n    },\n\n    /**\n     * Returns height of an object bounding box counting transformations\n     * before 2.0 it was named getHeight();\n     * @return {Number} height value\n     */\n    getScaledHeight: function() {\n      return this._getTransformedDimensions().y;\n    },\n\n    /**\n     * Makes sure the scale is valid and modifies it if necessary\n     * @private\n     * @param {Number} value\n     * @return {Number}\n     */\n    _constrainScale: function(value) {\n      if (Math.abs(value) < this.minScaleLimit) {\n        if (value < 0) {\n          return -this.minScaleLimit;\n        }\n        else {\n          return this.minScaleLimit;\n        }\n      }\n      else if (value === 0) {\n        return 0.0001;\n      }\n      return value;\n    },\n\n    /**\n     * Scales an object (equally by x and y)\n     * @param {Number} value Scale factor\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n    scale: function(value) {\n      this._set('scaleX', value);\n      this._set('scaleY', value);\n      return this.setCoords();\n    },\n\n    /**\n     * Scales an object to a given width, with respect to bounding box (scaling by x/y equally)\n     * @param {Number} value New width value\n     * @param {Boolean} absolute ignore viewport\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n    scaleToWidth: function(value, absolute) {\n      // adjust to bounding rect factor so that rotated shapes would fit as well\n      var boundingRectFactor = this.getBoundingRect(absolute).width / this.getScaledWidth();\n      return this.scale(value / this.width / boundingRectFactor);\n    },\n\n    /**\n     * Scales an object to a given height, with respect to bounding box (scaling by x/y equally)\n     * @param {Number} value New height value\n     * @param {Boolean} absolute ignore viewport\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n    scaleToHeight: function(value, absolute) {\n      // adjust to bounding rect factor so that rotated shapes would fit as well\n      var boundingRectFactor = this.getBoundingRect(absolute).height / this.getScaledHeight();\n      return this.scale(value / this.height / boundingRectFactor);\n    },\n\n    calcLineCoords: function() {\n      var vpt = this.getViewportTransform(),\n          padding = this.padding, angle = degreesToRadians(this.angle),\n          cos = util.cos(angle), sin = util.sin(angle),\n          cosP = cos * padding, sinP = sin * padding, cosPSinP = cosP + sinP,\n          cosPMinusSinP = cosP - sinP, aCoords = this.calcACoords();\n\n      var lineCoords = {\n        tl: transformPoint(aCoords.tl, vpt),\n        tr: transformPoint(aCoords.tr, vpt),\n        bl: transformPoint(aCoords.bl, vpt),\n        br: transformPoint(aCoords.br, vpt),\n      };\n\n      if (padding) {\n        lineCoords.tl.x -= cosPMinusSinP;\n        lineCoords.tl.y -= cosPSinP;\n        lineCoords.tr.x += cosPSinP;\n        lineCoords.tr.y -= cosPMinusSinP;\n        lineCoords.bl.x -= cosPSinP;\n        lineCoords.bl.y += cosPMinusSinP;\n        lineCoords.br.x += cosPMinusSinP;\n        lineCoords.br.y += cosPSinP;\n      }\n\n      return lineCoords;\n    },\n\n    calcOCoords: function() {\n      var rotateMatrix = this._calcRotateMatrix(),\n          translateMatrix = this._calcTranslateMatrix(),\n          vpt = this.getViewportTransform(),\n          startMatrix = multiplyMatrices(vpt, translateMatrix),\n          finalMatrix = multiplyMatrices(startMatrix, rotateMatrix),\n          finalMatrix = multiplyMatrices(finalMatrix, [1 / vpt[0], 0, 0, 1 / vpt[3], 0, 0]),\n          dim = this._calculateCurrentDimensions(),\n          coords = {};\n      this.forEachControl(function(control, key, fabricObject) {\n        coords[key] = control.positionHandler(dim, finalMatrix, fabricObject);\n      });\n\n      // debug code\n      // var canvas = this.canvas;\n      // setTimeout(function() {\n      //   canvas.contextTop.clearRect(0, 0, 700, 700);\n      //   canvas.contextTop.fillStyle = 'green';\n      //   Object.keys(coords).forEach(function(key) {\n      //     var control = coords[key];\n      //     canvas.contextTop.fillRect(control.x, control.y, 3, 3);\n      //   });\n      // }, 50);\n      return coords;\n    },\n\n    calcACoords: function() {\n      var rotateMatrix = this._calcRotateMatrix(),\n          translateMatrix = this._calcTranslateMatrix(),\n          finalMatrix = multiplyMatrices(translateMatrix, rotateMatrix),\n          dim = this._getTransformedDimensions(),\n          w = dim.x / 2, h = dim.y / 2;\n      return {\n        // corners\n        tl: transformPoint({ x: -w, y: -h }, finalMatrix),\n        tr: transformPoint({ x: w, y: -h }, finalMatrix),\n        bl: transformPoint({ x: -w, y: h }, finalMatrix),\n        br: transformPoint({ x: w, y: h }, finalMatrix)\n      };\n    },\n\n    /**\n     * Sets corner and controls position coordinates based on current angle, width and height, left and top.\n     * oCoords are used to find the corners\n     * aCoords are used to quickly find an object on the canvas\n     * lineCoords are used to quickly find object during pointer events.\n     * See {@link https://github.com/fabricjs/fabric.js/wiki/When-to-call-setCoords} and {@link http://fabricjs.com/fabric-gotchas}\n     *\n     * @param {Boolean} [skipCorners] skip calculation of oCoords.\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n    setCoords: function(skipCorners) {\n      this.aCoords = this.calcACoords();\n      // in case we are in a group, for how the inner group target check works,\n      // lineCoords are exactly aCoords. Since the vpt gets absorbed by the normalized pointer.\n      this.lineCoords = this.group ? this.aCoords : this.calcLineCoords();\n      if (skipCorners) {\n        return this;\n      }\n      // set coordinates of the draggable boxes in the corners used to scale/rotate the image\n      this.oCoords = this.calcOCoords();\n      this._setCornerCoords && this._setCornerCoords();\n      return this;\n    },\n\n    /**\n     * calculate rotation matrix of an object\n     * @return {Array} rotation matrix for the object\n     */\n    _calcRotateMatrix: function() {\n      return util.calcRotateMatrix(this);\n    },\n\n    /**\n     * calculate the translation matrix for an object transform\n     * @return {Array} rotation matrix for the object\n     */\n    _calcTranslateMatrix: function() {\n      var center = this.getCenterPoint();\n      return [1, 0, 0, 1, center.x, center.y];\n    },\n\n    transformMatrixKey: function(skipGroup) {\n      var sep = '_', prefix = '';\n      if (!skipGroup && this.group) {\n        prefix = this.group.transformMatrixKey(skipGroup) + sep;\n      };\n      return prefix + this.top + sep + this.left + sep + this.scaleX + sep + this.scaleY +\n        sep + this.skewX + sep + this.skewY + sep + this.angle + sep + this.originX + sep + this.originY +\n        sep + this.width + sep + this.height + sep + this.strokeWidth + this.flipX + this.flipY;\n    },\n\n    /**\n     * calculate transform matrix that represents the current transformations from the\n     * object's properties.\n     * @param {Boolean} [skipGroup] return transform matrix for object not counting parent transformations\n     * There are some situation in which this is useful to avoid the fake rotation.\n     * @return {Array} transform matrix for the object\n     */\n    calcTransformMatrix: function(skipGroup) {\n      var matrix = this.calcOwnMatrix();\n      if (skipGroup || !this.group) {\n        return matrix;\n      }\n      var key = this.transformMatrixKey(skipGroup), cache = this.matrixCache || (this.matrixCache = {});\n      if (cache.key === key) {\n        return cache.value;\n      }\n      if (this.group) {\n        matrix = multiplyMatrices(this.group.calcTransformMatrix(false), matrix);\n      }\n      cache.key = key;\n      cache.value = matrix;\n      return matrix;\n    },\n\n    /**\n     * calculate transform matrix that represents the current transformations from the\n     * object's properties, this matrix does not include the group transformation\n     * @return {Array} transform matrix for the object\n     */\n    calcOwnMatrix: function() {\n      var key = this.transformMatrixKey(true), cache = this.ownMatrixCache || (this.ownMatrixCache = {});\n      if (cache.key === key) {\n        return cache.value;\n      }\n      var tMatrix = this._calcTranslateMatrix(),\n          options = {\n            angle: this.angle,\n            translateX: tMatrix[4],\n            translateY: tMatrix[5],\n            scaleX: this.scaleX,\n            scaleY: this.scaleY,\n            skewX: this.skewX,\n            skewY: this.skewY,\n            flipX: this.flipX,\n            flipY: this.flipY,\n          };\n      cache.key = key;\n      cache.value = util.composeMatrix(options);\n      return cache.value;\n    },\n\n    /*\n     * Calculate object dimensions from its properties\n     * @private\n     * @return {Object} .x width dimension\n     * @return {Object} .y height dimension\n     */\n    _getNonTransformedDimensions: function() {\n      var strokeWidth = this.strokeWidth,\n          w = this.width + strokeWidth,\n          h = this.height + strokeWidth;\n      return { x: w, y: h };\n    },\n\n    /*\n     * Calculate object bounding box dimensions from its properties scale, skew.\n     * @param {Number} skewX, a value to override current skewX\n     * @param {Number} skewY, a value to override current skewY\n     * @private\n     * @return {Object} .x width dimension\n     * @return {Object} .y height dimension\n     */\n    _getTransformedDimensions: function(skewX, skewY) {\n      if (typeof skewX === 'undefined') {\n        skewX = this.skewX;\n      }\n      if (typeof skewY === 'undefined') {\n        skewY = this.skewY;\n      }\n      var dimensions, dimX, dimY,\n          noSkew = skewX === 0 && skewY === 0;\n\n      if (this.strokeUniform) {\n        dimX = this.width;\n        dimY = this.height;\n      }\n      else {\n        dimensions = this._getNonTransformedDimensions();\n        dimX = dimensions.x;\n        dimY = dimensions.y;\n      }\n      if (noSkew) {\n        return this._finalizeDimensions(dimX * this.scaleX, dimY * this.scaleY);\n      }\n      var bbox = util.sizeAfterTransform(dimX, dimY, {\n        scaleX: this.scaleX,\n        scaleY: this.scaleY,\n        skewX: skewX,\n        skewY: skewY,\n      });\n      return this._finalizeDimensions(bbox.x, bbox.y);\n    },\n\n    /*\n     * Calculate object bounding box dimensions from its properties scale, skew.\n     * @param Number width width of the bbox\n     * @param Number height height of the bbox\n     * @private\n     * @return {Object} .x finalized width dimension\n     * @return {Object} .y finalized height dimension\n     */\n    _finalizeDimensions: function(width, height) {\n      return this.strokeUniform ?\n        { x: width + this.strokeWidth, y: height + this.strokeWidth }\n        :\n        { x: width, y: height };\n    },\n\n    /*\n     * Calculate object dimensions for controls box, including padding and canvas zoom.\n     * and active selection\n     * private\n     */\n    _calculateCurrentDimensions: function()  {\n      var vpt = this.getViewportTransform(),\n          dim = this._getTransformedDimensions(),\n          p = transformPoint(dim, vpt, true);\n      return p.scalarAdd(2 * this.padding);\n    },\n  });\n})();\n\n\nfabric.util.object.extend(fabric.Object.prototype, /** @lends fabric.Object.prototype */ {\n\n  /**\n   * Moves an object to the bottom of the stack of drawn objects\n   * @return {fabric.Object} thisArg\n   * @chainable\n   */\n  sendToBack: function() {\n    if (this.group) {\n      fabric.StaticCanvas.prototype.sendToBack.call(this.group, this);\n    }\n    else if (this.canvas) {\n      this.canvas.sendToBack(this);\n    }\n    return this;\n  },\n\n  /**\n   * Moves an object to the top of the stack of drawn objects\n   * @return {fabric.Object} thisArg\n   * @chainable\n   */\n  bringToFront: function() {\n    if (this.group) {\n      fabric.StaticCanvas.prototype.bringToFront.call(this.group, this);\n    }\n    else if (this.canvas) {\n      this.canvas.bringToFront(this);\n    }\n    return this;\n  },\n\n  /**\n   * Moves an object down in stack of drawn objects\n   * @param {Boolean} [intersecting] If `true`, send object behind next lower intersecting object\n   * @return {fabric.Object} thisArg\n   * @chainable\n   */\n  sendBackwards: function(intersecting) {\n    if (this.group) {\n      fabric.StaticCanvas.prototype.sendBackwards.call(this.group, this, intersecting);\n    }\n    else if (this.canvas) {\n      this.canvas.sendBackwards(this, intersecting);\n    }\n    return this;\n  },\n\n  /**\n   * Moves an object up in stack of drawn objects\n   * @param {Boolean} [intersecting] If `true`, send object in front of next upper intersecting object\n   * @return {fabric.Object} thisArg\n   * @chainable\n   */\n  bringForward: function(intersecting) {\n    if (this.group) {\n      fabric.StaticCanvas.prototype.bringForward.call(this.group, this, intersecting);\n    }\n    else if (this.canvas) {\n      this.canvas.bringForward(this, intersecting);\n    }\n    return this;\n  },\n\n  /**\n   * Moves an object to specified level in stack of drawn objects\n   * @param {Number} index New position of object\n   * @return {fabric.Object} thisArg\n   * @chainable\n   */\n  moveTo: function(index) {\n    if (this.group && this.group.type !== 'activeSelection') {\n      fabric.StaticCanvas.prototype.moveTo.call(this.group, this, index);\n    }\n    else if (this.canvas) {\n      this.canvas.moveTo(this, index);\n    }\n    return this;\n  }\n});\n\n\n/* _TO_SVG_START_ */\n(function() {\n  function getSvgColorString(prop, value) {\n    if (!value) {\n      return prop + ': none; ';\n    }\n    else if (value.toLive) {\n      return prop + ': url(#SVGID_' + value.id + '); ';\n    }\n    else {\n      var color = new fabric.Color(value),\n          str = prop + ': ' + color.toRgb() + '; ',\n          opacity = color.getAlpha();\n      if (opacity !== 1) {\n        //change the color in rgb + opacity\n        str += prop + '-opacity: ' + opacity.toString() + '; ';\n      }\n      return str;\n    }\n  }\n\n  var toFixed = fabric.util.toFixed;\n\n  fabric.util.object.extend(fabric.Object.prototype, /** @lends fabric.Object.prototype */ {\n    /**\n     * Returns styles-string for svg-export\n     * @param {Boolean} skipShadow a boolean to skip shadow filter output\n     * @return {String}\n     */\n    getSvgStyles: function(skipShadow) {\n\n      var fillRule = this.fillRule ? this.fillRule : 'nonzero',\n          strokeWidth = this.strokeWidth ? this.strokeWidth : '0',\n          strokeDashArray = this.strokeDashArray ? this.strokeDashArray.join(' ') : 'none',\n          strokeDashOffset = this.strokeDashOffset ? this.strokeDashOffset : '0',\n          strokeLineCap = this.strokeLineCap ? this.strokeLineCap : 'butt',\n          strokeLineJoin = this.strokeLineJoin ? this.strokeLineJoin : 'miter',\n          strokeMiterLimit = this.strokeMiterLimit ? this.strokeMiterLimit : '4',\n          opacity = typeof this.opacity !== 'undefined' ? this.opacity : '1',\n          visibility = this.visible ? '' : ' visibility: hidden;',\n          filter = skipShadow ? '' : this.getSvgFilter(),\n          fill = getSvgColorString('fill', this.fill),\n          stroke = getSvgColorString('stroke', this.stroke);\n\n      return [\n        stroke,\n        'stroke-width: ', strokeWidth, '; ',\n        'stroke-dasharray: ', strokeDashArray, '; ',\n        'stroke-linecap: ', strokeLineCap, '; ',\n        'stroke-dashoffset: ', strokeDashOffset, '; ',\n        'stroke-linejoin: ', strokeLineJoin, '; ',\n        'stroke-miterlimit: ', strokeMiterLimit, '; ',\n        fill,\n        'fill-rule: ', fillRule, '; ',\n        'opacity: ', opacity, ';',\n        filter,\n        visibility\n      ].join('');\n    },\n\n    /**\n     * Returns styles-string for svg-export\n     * @param {Object} style the object from which to retrieve style properties\n     * @param {Boolean} useWhiteSpace a boolean to include an additional attribute in the style.\n     * @return {String}\n     */\n    getSvgSpanStyles: function(style, useWhiteSpace) {\n      var term = '; ';\n      var fontFamily = style.fontFamily ?\n        'font-family: ' + (((style.fontFamily.indexOf('\\'') === -1 && style.fontFamily.indexOf('\"') === -1) ?\n          '\\'' + style.fontFamily  + '\\'' : style.fontFamily)) + term : '';\n      var strokeWidth = style.strokeWidth ? 'stroke-width: ' + style.strokeWidth + term : '',\n          fontFamily = fontFamily,\n          fontSize = style.fontSize ? 'font-size: ' + style.fontSize + 'px' + term : '',\n          fontStyle = style.fontStyle ? 'font-style: ' + style.fontStyle + term : '',\n          fontWeight = style.fontWeight ? 'font-weight: ' + style.fontWeight + term : '',\n          fill = style.fill ? getSvgColorString('fill', style.fill) : '',\n          stroke = style.stroke ? getSvgColorString('stroke', style.stroke) : '',\n          textDecoration = this.getSvgTextDecoration(style),\n          deltaY = style.deltaY ? 'baseline-shift: ' + (-style.deltaY) + '; ' : '';\n      if (textDecoration) {\n        textDecoration = 'text-decoration: ' + textDecoration + term;\n      }\n\n      return [\n        stroke,\n        strokeWidth,\n        fontFamily,\n        fontSize,\n        fontStyle,\n        fontWeight,\n        textDecoration,\n        fill,\n        deltaY,\n        useWhiteSpace ? 'white-space: pre; ' : ''\n      ].join('');\n    },\n\n    /**\n     * Returns text-decoration property for svg-export\n     * @param {Object} style the object from which to retrieve style properties\n     * @return {String}\n     */\n    getSvgTextDecoration: function(style) {\n      return ['overline', 'underline', 'line-through'].filter(function(decoration) {\n        return style[decoration.replace('-', '')];\n      }).join(' ');\n    },\n\n    /**\n     * Returns filter for svg shadow\n     * @return {String}\n     */\n    getSvgFilter: function() {\n      return this.shadow ? 'filter: url(#SVGID_' + this.shadow.id + ');' : '';\n    },\n\n    /**\n     * Returns id attribute for svg output\n     * @return {String}\n     */\n    getSvgCommons: function() {\n      return [\n        this.id ? 'id=\"' + this.id + '\" ' : '',\n        this.clipPath ? 'clip-path=\"url(#' + this.clipPath.clipPathId + ')\" ' : '',\n      ].join('');\n    },\n\n    /**\n     * Returns transform-string for svg-export\n     * @param {Boolean} use the full transform or the single object one.\n     * @return {String}\n     */\n    getSvgTransform: function(full, additionalTransform) {\n      var transform = full ? this.calcTransformMatrix() : this.calcOwnMatrix(),\n          svgTransform = 'transform=\"' + fabric.util.matrixToSVG(transform);\n      return svgTransform +\n        (additionalTransform || '') + '\" ';\n    },\n\n    _setSVGBg: function(textBgRects) {\n      if (this.backgroundColor) {\n        var NUM_FRACTION_DIGITS = fabric.Object.NUM_FRACTION_DIGITS;\n        textBgRects.push(\n          '\\t\\t<rect ',\n          this._getFillAttributes(this.backgroundColor),\n          ' x=\"',\n          toFixed(-this.width / 2, NUM_FRACTION_DIGITS),\n          '\" y=\"',\n          toFixed(-this.height / 2, NUM_FRACTION_DIGITS),\n          '\" width=\"',\n          toFixed(this.width, NUM_FRACTION_DIGITS),\n          '\" height=\"',\n          toFixed(this.height, NUM_FRACTION_DIGITS),\n          '\"></rect>\\n');\n      }\n    },\n\n    /**\n     * Returns svg representation of an instance\n     * @param {Function} [reviver] Method for further parsing of svg representation.\n     * @return {String} svg representation of an instance\n     */\n    toSVG: function(reviver) {\n      return this._createBaseSVGMarkup(this._toSVG(reviver), { reviver: reviver });\n    },\n\n    /**\n     * Returns svg clipPath representation of an instance\n     * @param {Function} [reviver] Method for further parsing of svg representation.\n     * @return {String} svg representation of an instance\n     */\n    toClipPathSVG: function(reviver) {\n      return '\\t' + this._createBaseClipPathSVGMarkup(this._toSVG(reviver), { reviver: reviver });\n    },\n\n    /**\n     * @private\n     */\n    _createBaseClipPathSVGMarkup: function(objectMarkup, options) {\n      options = options || {};\n      var reviver = options.reviver,\n          additionalTransform = options.additionalTransform || '',\n          commonPieces = [\n            this.getSvgTransform(true, additionalTransform),\n            this.getSvgCommons(),\n          ].join(''),\n          // insert commons in the markup, style and svgCommons\n          index = objectMarkup.indexOf('COMMON_PARTS');\n      objectMarkup[index] = commonPieces;\n      return reviver ? reviver(objectMarkup.join('')) : objectMarkup.join('');\n    },\n\n    /**\n     * @private\n     */\n    _createBaseSVGMarkup: function(objectMarkup, options) {\n      options = options || {};\n      var noStyle = options.noStyle,\n          reviver = options.reviver,\n          styleInfo = noStyle ? '' : 'style=\"' + this.getSvgStyles() + '\" ',\n          shadowInfo = options.withShadow ? 'style=\"' + this.getSvgFilter() + '\" ' : '',\n          clipPath = this.clipPath,\n          vectorEffect = this.strokeUniform ? 'vector-effect=\"non-scaling-stroke\" ' : '',\n          absoluteClipPath = clipPath && clipPath.absolutePositioned,\n          stroke = this.stroke, fill = this.fill, shadow = this.shadow,\n          commonPieces, markup = [], clipPathMarkup,\n          // insert commons in the markup, style and svgCommons\n          index = objectMarkup.indexOf('COMMON_PARTS'),\n          additionalTransform = options.additionalTransform;\n      if (clipPath) {\n        clipPath.clipPathId = 'CLIPPATH_' + fabric.Object.__uid++;\n        clipPathMarkup = '<clipPath id=\"' + clipPath.clipPathId + '\" >\\n' +\n          clipPath.toClipPathSVG(reviver) +\n          '</clipPath>\\n';\n      }\n      if (absoluteClipPath) {\n        markup.push(\n          '<g ', shadowInfo, this.getSvgCommons(), ' >\\n'\n        );\n      }\n      markup.push(\n        '<g ',\n        this.getSvgTransform(false),\n        !absoluteClipPath ? shadowInfo + this.getSvgCommons() : '',\n        ' >\\n'\n      );\n      commonPieces = [\n        styleInfo,\n        vectorEffect,\n        noStyle ? '' : this.addPaintOrder(), ' ',\n        additionalTransform ? 'transform=\"' + additionalTransform + '\" ' : '',\n      ].join('');\n      objectMarkup[index] = commonPieces;\n      if (fill && fill.toLive) {\n        markup.push(fill.toSVG(this));\n      }\n      if (stroke && stroke.toLive) {\n        markup.push(stroke.toSVG(this));\n      }\n      if (shadow) {\n        markup.push(shadow.toSVG(this));\n      }\n      if (clipPath) {\n        markup.push(clipPathMarkup);\n      }\n      markup.push(objectMarkup.join(''));\n      markup.push('</g>\\n');\n      absoluteClipPath && markup.push('</g>\\n');\n      return reviver ? reviver(markup.join('')) : markup.join('');\n    },\n\n    addPaintOrder: function() {\n      return this.paintFirst !== 'fill' ? ' paint-order=\"' + this.paintFirst + '\" ' : '';\n    }\n  });\n})();\n/* _TO_SVG_END_ */\n\n\n(function() {\n\n  var extend = fabric.util.object.extend,\n      originalSet = 'stateProperties';\n\n  /*\n    Depends on `stateProperties`\n  */\n  function saveProps(origin, destination, props) {\n    var tmpObj = { }, deep = true;\n    props.forEach(function(prop) {\n      tmpObj[prop] = origin[prop];\n    });\n\n    extend(origin[destination], tmpObj, deep);\n  }\n\n  function _isEqual(origValue, currentValue, firstPass) {\n    if (origValue === currentValue) {\n      // if the objects are identical, return\n      return true;\n    }\n    else if (Array.isArray(origValue)) {\n      if (!Array.isArray(currentValue) || origValue.length !== currentValue.length) {\n        return false;\n      }\n      for (var i = 0, len = origValue.length; i < len; i++) {\n        if (!_isEqual(origValue[i], currentValue[i])) {\n          return false;\n        }\n      }\n      return true;\n    }\n    else if (origValue && typeof origValue === 'object') {\n      var keys = Object.keys(origValue), key;\n      if (!currentValue ||\n          typeof currentValue !== 'object' ||\n          (!firstPass && keys.length !== Object.keys(currentValue).length)\n      ) {\n        return false;\n      }\n      for (var i = 0, len = keys.length; i < len; i++) {\n        key = keys[i];\n        // since clipPath is in the statefull cache list and the clipPath objects\n        // would be iterated as an object, this would lead to possible infinite recursion\n        // we do not want to compare those.\n        if (key === 'canvas' || key === 'group') {\n          continue;\n        }\n        if (!_isEqual(origValue[key], currentValue[key])) {\n          return false;\n        }\n      }\n      return true;\n    }\n  }\n\n\n  fabric.util.object.extend(fabric.Object.prototype, /** @lends fabric.Object.prototype */ {\n\n    /**\n     * Returns true if object state (one of its state properties) was changed\n     * @param {String} [propertySet] optional name for the set of property we want to save\n     * @return {Boolean} true if instance' state has changed since `{@link fabric.Object#saveState}` was called\n     */\n    hasStateChanged: function(propertySet) {\n      propertySet = propertySet || originalSet;\n      var dashedPropertySet = '_' + propertySet;\n      if (Object.keys(this[dashedPropertySet]).length < this[propertySet].length) {\n        return true;\n      }\n      return !_isEqual(this[dashedPropertySet], this, true);\n    },\n\n    /**\n     * Saves state of an object\n     * @param {Object} [options] Object with additional `stateProperties` array to include when saving state\n     * @return {fabric.Object} thisArg\n     */\n    saveState: function(options) {\n      var propertySet = options && options.propertySet || originalSet,\n          destination = '_' + propertySet;\n      if (!this[destination]) {\n        return this.setupState(options);\n      }\n      saveProps(this, destination, this[propertySet]);\n      if (options && options.stateProperties) {\n        saveProps(this, destination, options.stateProperties);\n      }\n      return this;\n    },\n\n    /**\n     * Setups state of an object\n     * @param {Object} [options] Object with additional `stateProperties` array to include when saving state\n     * @return {fabric.Object} thisArg\n     */\n    setupState: function(options) {\n      options = options || { };\n      var propertySet = options.propertySet || originalSet;\n      options.propertySet = propertySet;\n      this['_' + propertySet] = { };\n      this.saveState(options);\n      return this;\n    }\n  });\n})();\n\n\n(function() {\n\n  var degreesToRadians = fabric.util.degreesToRadians;\n\n  fabric.util.object.extend(fabric.Object.prototype, /** @lends fabric.Object.prototype */ {\n    /**\n     * Determines which corner has been clicked\n     * @private\n     * @param {Object} pointer The pointer indicating the mouse position\n     * @return {String|Boolean} corner code (tl, tr, bl, br, etc.), or false if nothing is found\n     */\n    _findTargetCorner: function(pointer, forTouch) {\n      // objects in group, anykind, are not self modificable,\n      // must not return an hovered corner.\n      if (!this.hasControls || this.group || (!this.canvas || this.canvas._activeObject !== this)) {\n        return false;\n      }\n\n      var ex = pointer.x,\n          ey = pointer.y,\n          xPoints,\n          lines, keys = Object.keys(this.oCoords),\n          j = keys.length - 1, i;\n      this.__corner = 0;\n\n      // cycle in reverse order so we pick first the one on top\n      for (; j >= 0; j--) {\n        i = keys[j];\n        if (!this.isControlVisible(i)) {\n          continue;\n        }\n\n        lines = this._getImageLines(forTouch ? this.oCoords[i].touchCorner : this.oCoords[i].corner);\n        // // debugging\n        //\n        // this.canvas.contextTop.fillRect(lines.bottomline.d.x, lines.bottomline.d.y, 2, 2);\n        // this.canvas.contextTop.fillRect(lines.bottomline.o.x, lines.bottomline.o.y, 2, 2);\n        //\n        // this.canvas.contextTop.fillRect(lines.leftline.d.x, lines.leftline.d.y, 2, 2);\n        // this.canvas.contextTop.fillRect(lines.leftline.o.x, lines.leftline.o.y, 2, 2);\n        //\n        // this.canvas.contextTop.fillRect(lines.topline.d.x, lines.topline.d.y, 2, 2);\n        // this.canvas.contextTop.fillRect(lines.topline.o.x, lines.topline.o.y, 2, 2);\n        //\n        // this.canvas.contextTop.fillRect(lines.rightline.d.x, lines.rightline.d.y, 2, 2);\n        // this.canvas.contextTop.fillRect(lines.rightline.o.x, lines.rightline.o.y, 2, 2);\n\n        xPoints = this._findCrossPoints({ x: ex, y: ey }, lines);\n        if (xPoints !== 0 && xPoints % 2 === 1) {\n          this.__corner = i;\n          return i;\n        }\n      }\n      return false;\n    },\n\n    /**\n     * Calls a function for each control. The function gets called,\n     * with the control, the object that is calling the iterator and the control's key\n     * @param {Function} fn function to iterate over the controls over\n     */\n    forEachControl: function(fn) {\n      for (var i in this.controls) {\n        fn(this.controls[i], i, this);\n      };\n    },\n\n    /**\n     * Sets the coordinates of the draggable boxes in the corners of\n     * the image used to scale/rotate it.\n     * note: if we would switch to ROUND corner area, all of this would disappear.\n     * everything would resolve to a single point and a pythagorean theorem for the distance\n     * @private\n     */\n    _setCornerCoords: function() {\n      var coords = this.oCoords;\n\n      for (var control in coords) {\n        var controlObject = this.controls[control];\n        coords[control].corner = controlObject.calcCornerCoords(\n          this.angle, this.cornerSize, coords[control].x, coords[control].y, false);\n        coords[control].touchCorner = controlObject.calcCornerCoords(\n          this.angle, this.touchCornerSize, coords[control].x, coords[control].y, true);\n      }\n    },\n\n    /**\n     * Draws a colored layer behind the object, inside its selection borders.\n     * Requires public options: padding, selectionBackgroundColor\n     * this function is called when the context is transformed\n     * has checks to be skipped when the object is on a staticCanvas\n     * @param {CanvasRenderingContext2D} ctx Context to draw on\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n    drawSelectionBackground: function(ctx) {\n      if (!this.selectionBackgroundColor ||\n        (this.canvas && !this.canvas.interactive) ||\n        (this.canvas && this.canvas._activeObject !== this)\n      ) {\n        return this;\n      }\n      ctx.save();\n      var center = this.getCenterPoint(), wh = this._calculateCurrentDimensions(),\n          vpt = this.canvas.viewportTransform;\n      ctx.translate(center.x, center.y);\n      ctx.scale(1 / vpt[0], 1 / vpt[3]);\n      ctx.rotate(degreesToRadians(this.angle));\n      ctx.fillStyle = this.selectionBackgroundColor;\n      ctx.fillRect(-wh.x / 2, -wh.y / 2, wh.x, wh.y);\n      ctx.restore();\n      return this;\n    },\n\n    /**\n     * Draws borders of an object's bounding box.\n     * Requires public properties: width, height\n     * Requires public options: padding, borderColor\n     * @param {CanvasRenderingContext2D} ctx Context to draw on\n     * @param {Object} styleOverride object to override the object style\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n    drawBorders: function(ctx, styleOverride) {\n      styleOverride = styleOverride || {};\n      var wh = this._calculateCurrentDimensions(),\n          strokeWidth = this.borderScaleFactor,\n          width = wh.x + strokeWidth,\n          height = wh.y + strokeWidth,\n          hasControls = typeof styleOverride.hasControls !== 'undefined' ?\n            styleOverride.hasControls : this.hasControls,\n          shouldStroke = false;\n\n      ctx.save();\n      ctx.strokeStyle = styleOverride.borderColor || this.borderColor;\n      this._setLineDash(ctx, styleOverride.borderDashArray || this.borderDashArray);\n\n      ctx.strokeRect(\n        -width / 2,\n        -height / 2,\n        width,\n        height\n      );\n\n      if (hasControls) {\n        ctx.beginPath();\n        this.forEachControl(function(control, key, fabricObject) {\n          // in this moment, the ctx is centered on the object.\n          // width and height of the above function are the size of the bbox.\n          if (control.withConnection && control.getVisibility(fabricObject, key)) {\n            // reset movement for each control\n            shouldStroke = true;\n            ctx.moveTo(control.x * width, control.y * height);\n            ctx.lineTo(\n              control.x * width + control.offsetX,\n              control.y * height + control.offsetY\n            );\n          }\n        });\n        if (shouldStroke) {\n          ctx.stroke();\n        }\n      }\n      ctx.restore();\n      return this;\n    },\n\n    /**\n     * Draws borders of an object's bounding box when it is inside a group.\n     * Requires public properties: width, height\n     * Requires public options: padding, borderColor\n     * @param {CanvasRenderingContext2D} ctx Context to draw on\n     * @param {object} options object representing current object parameters\n     * @param {Object} styleOverride object to override the object style\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n    drawBordersInGroup: function(ctx, options, styleOverride) {\n      styleOverride = styleOverride || {};\n      var bbox = fabric.util.sizeAfterTransform(this.width, this.height, options),\n          strokeWidth = this.strokeWidth,\n          strokeUniform = this.strokeUniform,\n          borderScaleFactor = this.borderScaleFactor,\n          width =\n            bbox.x + strokeWidth * (strokeUniform ? this.canvas.getZoom() : options.scaleX) + borderScaleFactor,\n          height =\n            bbox.y + strokeWidth * (strokeUniform ? this.canvas.getZoom() : options.scaleY) + borderScaleFactor;\n      ctx.save();\n      this._setLineDash(ctx, styleOverride.borderDashArray || this.borderDashArray);\n      ctx.strokeStyle = styleOverride.borderColor || this.borderColor;\n      ctx.strokeRect(\n        -width / 2,\n        -height / 2,\n        width,\n        height\n      );\n\n      ctx.restore();\n      return this;\n    },\n\n    /**\n     * Draws corners of an object's bounding box.\n     * Requires public properties: width, height\n     * Requires public options: cornerSize, padding\n     * @param {CanvasRenderingContext2D} ctx Context to draw on\n     * @param {Object} styleOverride object to override the object style\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n    drawControls: function(ctx, styleOverride) {\n      styleOverride = styleOverride || {};\n      ctx.save();\n      var retinaScaling = this.canvas.getRetinaScaling(), matrix, p;\n      ctx.setTransform(retinaScaling, 0, 0, retinaScaling, 0, 0);\n      ctx.strokeStyle = ctx.fillStyle = styleOverride.cornerColor || this.cornerColor;\n      if (!this.transparentCorners) {\n        ctx.strokeStyle = styleOverride.cornerStrokeColor || this.cornerStrokeColor;\n      }\n      this._setLineDash(ctx, styleOverride.cornerDashArray || this.cornerDashArray);\n      this.setCoords();\n      if (this.group) {\n        // fabricJS does not really support drawing controls inside groups,\n        // this piece of code here helps having at least the control in places.\n        // If an application needs to show some objects as selected because of some UI state\n        // can still call Object._renderControls() on any object they desire, independently of groups.\n        // using no padding, circular controls and hiding the rotating cursor is higly suggested,\n        matrix = this.group.calcTransformMatrix();\n      }\n      this.forEachControl(function(control, key, fabricObject) {\n        p = fabricObject.oCoords[key];\n        if (control.getVisibility(fabricObject, key)) {\n          if (matrix) {\n            p = fabric.util.transformPoint(p, matrix);\n          }\n          control.render(ctx, p.x, p.y, styleOverride, fabricObject);\n        }\n      });\n      ctx.restore();\n\n      return this;\n    },\n\n    /**\n     * Returns true if the specified control is visible, false otherwise.\n     * @param {String} controlKey The key of the control. Possible values are 'tl', 'tr', 'br', 'bl', 'ml', 'mt', 'mr', 'mb', 'mtr'.\n     * @returns {Boolean} true if the specified control is visible, false otherwise\n     */\n    isControlVisible: function(controlKey) {\n      return this.controls[controlKey] && this.controls[controlKey].getVisibility(this, controlKey);\n    },\n\n    /**\n     * Sets the visibility of the specified control.\n     * @param {String} controlKey The key of the control. Possible values are 'tl', 'tr', 'br', 'bl', 'ml', 'mt', 'mr', 'mb', 'mtr'.\n     * @param {Boolean} visible true to set the specified control visible, false otherwise\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n    setControlVisible: function(controlKey, visible) {\n      if (!this._controlsVisibility) {\n        this._controlsVisibility = {};\n      }\n      this._controlsVisibility[controlKey] = visible;\n      return this;\n    },\n\n    /**\n     * Sets the visibility state of object controls.\n     * @param {Object} [options] Options object\n     * @param {Boolean} [options.bl] true to enable the bottom-left control, false to disable it\n     * @param {Boolean} [options.br] true to enable the bottom-right control, false to disable it\n     * @param {Boolean} [options.mb] true to enable the middle-bottom control, false to disable it\n     * @param {Boolean} [options.ml] true to enable the middle-left control, false to disable it\n     * @param {Boolean} [options.mr] true to enable the middle-right control, false to disable it\n     * @param {Boolean} [options.mt] true to enable the middle-top control, false to disable it\n     * @param {Boolean} [options.tl] true to enable the top-left control, false to disable it\n     * @param {Boolean} [options.tr] true to enable the top-right control, false to disable it\n     * @param {Boolean} [options.mtr] true to enable the middle-top-rotate control, false to disable it\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n    setControlsVisibility: function(options) {\n      options || (options = { });\n\n      for (var p in options) {\n        this.setControlVisible(p, options[p]);\n      }\n      return this;\n    },\n\n\n    /**\n     * This callback function is called every time _discardActiveObject or _setActiveObject\n     * try to to deselect this object. If the function returns true, the process is cancelled\n     * @param {Object} [options] options sent from the upper functions\n     * @param {Event} [options.e] event if the process is generated by an event\n     */\n    onDeselect: function() {\n      // implemented by sub-classes, as needed.\n    },\n\n\n    /**\n     * This callback function is called every time _discardActiveObject or _setActiveObject\n     * try to to select this object. If the function returns true, the process is cancelled\n     * @param {Object} [options] options sent from the upper functions\n     * @param {Event} [options.e] event if the process is generated by an event\n     */\n    onSelect: function() {\n      // implemented by sub-classes, as needed.\n    }\n  });\n})();\n\n\nfabric.util.object.extend(fabric.StaticCanvas.prototype, /** @lends fabric.StaticCanvas.prototype */ {\n\n  /**\n   * Animation duration (in ms) for fx* methods\n   * @type Number\n   * @default\n   */\n  FX_DURATION: 500,\n\n  /**\n   * Centers object horizontally with animation.\n   * @param {fabric.Object} object Object to center\n   * @param {Object} [callbacks] Callbacks object with optional \"onComplete\" and/or \"onChange\" properties\n   * @param {Function} [callbacks.onComplete] Invoked on completion\n   * @param {Function} [callbacks.onChange] Invoked on every step of animation\n   * @return {fabric.AnimationContext} context\n   */\n  fxCenterObjectH: function (object, callbacks) {\n    callbacks = callbacks || { };\n\n    var empty = function() { },\n        onComplete = callbacks.onComplete || empty,\n        onChange = callbacks.onChange || empty,\n        _this = this;\n\n    return fabric.util.animate({\n      target: this,\n      startValue: object.left,\n      endValue: this.getCenterPoint().x,\n      duration: this.FX_DURATION,\n      onChange: function(value) {\n        object.set('left', value);\n        _this.requestRenderAll();\n        onChange();\n      },\n      onComplete: function() {\n        object.setCoords();\n        onComplete();\n      }\n    });\n  },\n\n  /**\n   * Centers object vertically with animation.\n   * @param {fabric.Object} object Object to center\n   * @param {Object} [callbacks] Callbacks object with optional \"onComplete\" and/or \"onChange\" properties\n   * @param {Function} [callbacks.onComplete] Invoked on completion\n   * @param {Function} [callbacks.onChange] Invoked on every step of animation\n   * @return {fabric.AnimationContext} context\n   */\n  fxCenterObjectV: function (object, callbacks) {\n    callbacks = callbacks || { };\n\n    var empty = function() { },\n        onComplete = callbacks.onComplete || empty,\n        onChange = callbacks.onChange || empty,\n        _this = this;\n\n    return fabric.util.animate({\n      target: this,\n      startValue: object.top,\n      endValue: this.getCenterPoint().y,\n      duration: this.FX_DURATION,\n      onChange: function(value) {\n        object.set('top', value);\n        _this.requestRenderAll();\n        onChange();\n      },\n      onComplete: function() {\n        object.setCoords();\n        onComplete();\n      }\n    });\n  },\n\n  /**\n   * Same as `fabric.Canvas#remove` but animated\n   * @param {fabric.Object} object Object to remove\n   * @param {Object} [callbacks] Callbacks object with optional \"onComplete\" and/or \"onChange\" properties\n   * @param {Function} [callbacks.onComplete] Invoked on completion\n   * @param {Function} [callbacks.onChange] Invoked on every step of animation\n   * @return {fabric.AnimationContext} context\n   */\n  fxRemove: function (object, callbacks) {\n    callbacks = callbacks || { };\n\n    var empty = function() { },\n        onComplete = callbacks.onComplete || empty,\n        onChange = callbacks.onChange || empty,\n        _this = this;\n\n    return fabric.util.animate({\n      target: this,\n      startValue: object.opacity,\n      endValue: 0,\n      duration: this.FX_DURATION,\n      onChange: function(value) {\n        object.set('opacity', value);\n        _this.requestRenderAll();\n        onChange();\n      },\n      onComplete: function () {\n        _this.remove(object);\n        onComplete();\n      }\n    });\n  }\n});\n\nfabric.util.object.extend(fabric.Object.prototype, /** @lends fabric.Object.prototype */ {\n  /**\n   * Animates object's properties\n   * @param {String|Object} property Property to animate (if string) or properties to animate (if object)\n   * @param {Number|Object} value Value to animate property to (if string was given first) or options object\n   * @return {fabric.Object} thisArg\n   * @tutorial {@link http://fabricjs.com/fabric-intro-part-2#animation}\n   * @return {fabric.AnimationContext | fabric.AnimationContext[]} animation context (or an array if passed multiple properties)\n   *\n   * As object — multiple properties\n   *\n   * object.animate({ left: ..., top: ... });\n   * object.animate({ left: ..., top: ... }, { duration: ... });\n   *\n   * As string — one property\n   *\n   * object.animate('left', ...);\n   * object.animate('left', { duration: ... });\n   *\n   */\n  animate: function () {\n    if (arguments[0] && typeof arguments[0] === 'object') {\n      var propsToAnimate = [], prop, skipCallbacks, out = [];\n      for (prop in arguments[0]) {\n        propsToAnimate.push(prop);\n      }\n      for (var i = 0, len = propsToAnimate.length; i < len; i++) {\n        prop = propsToAnimate[i];\n        skipCallbacks = i !== len - 1;\n        out.push(this._animate(prop, arguments[0][prop], arguments[1], skipCallbacks));\n      }\n      return out;\n    }\n    else {\n      return this._animate.apply(this, arguments);\n    }\n  },\n\n  /**\n   * @private\n   * @param {String} property Property to animate\n   * @param {String} to Value to animate to\n   * @param {Object} [options] Options object\n   * @param {Boolean} [skipCallbacks] When true, callbacks like onchange and oncomplete are not invoked\n   */\n  _animate: function(property, to, options, skipCallbacks) {\n    var _this = this, propPair;\n\n    to = to.toString();\n\n    if (!options) {\n      options = { };\n    }\n    else {\n      options = fabric.util.object.clone(options);\n    }\n\n    if (~property.indexOf('.')) {\n      propPair = property.split('.');\n    }\n\n    var propIsColor =\n      _this.colorProperties.indexOf(property) > -1 ||\n      (propPair && _this.colorProperties.indexOf(propPair[1]) > -1);\n\n    var currentValue = propPair\n      ? this.get(propPair[0])[propPair[1]]\n      : this.get(property);\n\n    if (!('from' in options)) {\n      options.from = currentValue;\n    }\n\n    if (!propIsColor) {\n      if (~to.indexOf('=')) {\n        to = currentValue + parseFloat(to.replace('=', ''));\n      }\n      else {\n        to = parseFloat(to);\n      }\n    }\n\n    var _options = {\n      target: this,\n      startValue: options.from,\n      endValue: to,\n      byValue: options.by,\n      easing: options.easing,\n      duration: options.duration,\n      abort: options.abort && function(value, valueProgress, timeProgress) {\n        return options.abort.call(_this, value, valueProgress, timeProgress);\n      },\n      onChange: function (value, valueProgress, timeProgress) {\n        if (propPair) {\n          _this[propPair[0]][propPair[1]] = value;\n        }\n        else {\n          _this.set(property, value);\n        }\n        if (skipCallbacks) {\n          return;\n        }\n        options.onChange && options.onChange(value, valueProgress, timeProgress);\n      },\n      onComplete: function (value, valueProgress, timeProgress) {\n        if (skipCallbacks) {\n          return;\n        }\n\n        _this.setCoords();\n        options.onComplete && options.onComplete(value, valueProgress, timeProgress);\n      }\n    };\n\n    if (propIsColor) {\n      return fabric.util.animateColor(_options.startValue, _options.endValue, _options.duration, _options);\n    }\n    else {\n      return fabric.util.animate(_options);\n    }\n  }\n});\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric = global.fabric || (global.fabric = { }),\n      extend = fabric.util.object.extend,\n      clone = fabric.util.object.clone,\n      coordProps = { x1: 1, x2: 1, y1: 1, y2: 1 };\n\n  if (fabric.Line) {\n    fabric.warn('fabric.Line is already defined');\n    return;\n  }\n\n  /**\n   * Line class\n   * @class fabric.Line\n   * @extends fabric.Object\n   * @see {@link fabric.Line#initialize} for constructor definition\n   */\n  fabric.Line = fabric.util.createClass(fabric.Object, /** @lends fabric.Line.prototype */ {\n\n    /**\n     * Type of an object\n     * @type String\n     * @default\n     */\n    type: 'line',\n\n    /**\n     * x value or first line edge\n     * @type Number\n     * @default\n     */\n    x1: 0,\n\n    /**\n     * y value or first line edge\n     * @type Number\n     * @default\n     */\n    y1: 0,\n\n    /**\n     * x value or second line edge\n     * @type Number\n     * @default\n     */\n    x2: 0,\n\n    /**\n     * y value or second line edge\n     * @type Number\n     * @default\n     */\n    y2: 0,\n\n    cacheProperties: fabric.Object.prototype.cacheProperties.concat('x1', 'x2', 'y1', 'y2'),\n\n    /**\n     * Constructor\n     * @param {Array} [points] Array of points\n     * @param {Object} [options] Options object\n     * @return {fabric.Line} thisArg\n     */\n    initialize: function(points, options) {\n      if (!points) {\n        points = [0, 0, 0, 0];\n      }\n\n      this.callSuper('initialize', options);\n\n      this.set('x1', points[0]);\n      this.set('y1', points[1]);\n      this.set('x2', points[2]);\n      this.set('y2', points[3]);\n\n      this._setWidthHeight(options);\n    },\n\n    /**\n     * @private\n     * @param {Object} [options] Options\n     */\n    _setWidthHeight: function(options) {\n      options || (options = { });\n\n      this.width = Math.abs(this.x2 - this.x1);\n      this.height = Math.abs(this.y2 - this.y1);\n\n      this.left = 'left' in options\n        ? options.left\n        : this._getLeftToOriginX();\n\n      this.top = 'top' in options\n        ? options.top\n        : this._getTopToOriginY();\n    },\n\n    /**\n     * @private\n     * @param {String} key\n     * @param {*} value\n     */\n    _set: function(key, value) {\n      this.callSuper('_set', key, value);\n      if (typeof coordProps[key] !== 'undefined') {\n        this._setWidthHeight();\n      }\n      return this;\n    },\n\n    /**\n     * @private\n     * @return {Number} leftToOriginX Distance from left edge of canvas to originX of Line.\n     */\n    _getLeftToOriginX: makeEdgeToOriginGetter(\n      { // property names\n        origin: 'originX',\n        axis1: 'x1',\n        axis2: 'x2',\n        dimension: 'width'\n      },\n      { // possible values of origin\n        nearest: 'left',\n        center: 'center',\n        farthest: 'right'\n      }\n    ),\n\n    /**\n     * @private\n     * @return {Number} topToOriginY Distance from top edge of canvas to originY of Line.\n     */\n    _getTopToOriginY: makeEdgeToOriginGetter(\n      { // property names\n        origin: 'originY',\n        axis1: 'y1',\n        axis2: 'y2',\n        dimension: 'height'\n      },\n      { // possible values of origin\n        nearest: 'top',\n        center: 'center',\n        farthest: 'bottom'\n      }\n    ),\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _render: function(ctx) {\n      ctx.beginPath();\n\n\n      var p = this.calcLinePoints();\n      ctx.moveTo(p.x1, p.y1);\n      ctx.lineTo(p.x2, p.y2);\n\n      ctx.lineWidth = this.strokeWidth;\n\n      // TODO: test this\n      // make sure setting \"fill\" changes color of a line\n      // (by copying fillStyle to strokeStyle, since line is stroked, not filled)\n      var origStrokeStyle = ctx.strokeStyle;\n      ctx.strokeStyle = this.stroke || ctx.fillStyle;\n      this.stroke && this._renderStroke(ctx);\n      ctx.strokeStyle = origStrokeStyle;\n    },\n\n    /**\n     * This function is an helper for svg import. it returns the center of the object in the svg\n     * untransformed coordinates\n     * @private\n     * @return {Object} center point from element coordinates\n     */\n    _findCenterFromElement: function() {\n      return {\n        x: (this.x1 + this.x2) / 2,\n        y: (this.y1 + this.y2) / 2,\n      };\n    },\n\n    /**\n     * Returns object representation of an instance\n     * @method toObject\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {Object} object representation of an instance\n     */\n    toObject: function(propertiesToInclude) {\n      return extend(this.callSuper('toObject', propertiesToInclude), this.calcLinePoints());\n    },\n\n    /*\n     * Calculate object dimensions from its properties\n     * @private\n     */\n    _getNonTransformedDimensions: function() {\n      var dim = this.callSuper('_getNonTransformedDimensions');\n      if (this.strokeLineCap === 'butt') {\n        if (this.width === 0) {\n          dim.y -= this.strokeWidth;\n        }\n        if (this.height === 0) {\n          dim.x -= this.strokeWidth;\n        }\n      }\n      return dim;\n    },\n\n    /**\n     * Recalculates line points given width and height\n     * @private\n     */\n    calcLinePoints: function() {\n      var xMult = this.x1 <= this.x2 ? -1 : 1,\n          yMult = this.y1 <= this.y2 ? -1 : 1,\n          x1 = (xMult * this.width * 0.5),\n          y1 = (yMult * this.height * 0.5),\n          x2 = (xMult * this.width * -0.5),\n          y2 = (yMult * this.height * -0.5);\n\n      return {\n        x1: x1,\n        x2: x2,\n        y1: y1,\n        y2: y2\n      };\n    },\n\n    /* _TO_SVG_START_ */\n    /**\n     * Returns svg representation of an instance\n     * @return {Array} an array of strings with the specific svg representation\n     * of the instance\n     */\n    _toSVG: function() {\n      var p = this.calcLinePoints();\n      return [\n        '<line ', 'COMMON_PARTS',\n        'x1=\"', p.x1,\n        '\" y1=\"', p.y1,\n        '\" x2=\"', p.x2,\n        '\" y2=\"', p.y2,\n        '\" />\\n'\n      ];\n    },\n    /* _TO_SVG_END_ */\n  });\n\n  /* _FROM_SVG_START_ */\n  /**\n   * List of attribute names to account for when parsing SVG element (used by {@link fabric.Line.fromElement})\n   * @static\n   * @memberOf fabric.Line\n   * @see http://www.w3.org/TR/SVG/shapes.html#LineElement\n   */\n  fabric.Line.ATTRIBUTE_NAMES = fabric.SHARED_ATTRIBUTES.concat('x1 y1 x2 y2'.split(' '));\n\n  /**\n   * Returns fabric.Line instance from an SVG element\n   * @static\n   * @memberOf fabric.Line\n   * @param {SVGElement} element Element to parse\n   * @param {Object} [options] Options object\n   * @param {Function} [callback] callback function invoked after parsing\n   */\n  fabric.Line.fromElement = function(element, callback, options) {\n    options = options || { };\n    var parsedAttributes = fabric.parseAttributes(element, fabric.Line.ATTRIBUTE_NAMES),\n        points = [\n          parsedAttributes.x1 || 0,\n          parsedAttributes.y1 || 0,\n          parsedAttributes.x2 || 0,\n          parsedAttributes.y2 || 0\n        ];\n    callback(new fabric.Line(points, extend(parsedAttributes, options)));\n  };\n  /* _FROM_SVG_END_ */\n\n  /**\n   * Returns fabric.Line instance from an object representation\n   * @static\n   * @memberOf fabric.Line\n   * @param {Object} object Object to create an instance from\n   * @param {function} [callback] invoked with new instance as first argument\n   */\n  fabric.Line.fromObject = function(object, callback) {\n    function _callback(instance) {\n      delete instance.points;\n      callback && callback(instance);\n    };\n    var options = clone(object, true);\n    options.points = [object.x1, object.y1, object.x2, object.y2];\n    fabric.Object._fromObject('Line', options, _callback, 'points');\n  };\n\n  /**\n   * Produces a function that calculates distance from canvas edge to Line origin.\n   */\n  function makeEdgeToOriginGetter(propertyNames, originValues) {\n    var origin = propertyNames.origin,\n        axis1 = propertyNames.axis1,\n        axis2 = propertyNames.axis2,\n        dimension = propertyNames.dimension,\n        nearest = originValues.nearest,\n        center = originValues.center,\n        farthest = originValues.farthest;\n\n    return function() {\n      switch (this.get(origin)) {\n        case nearest:\n          return Math.min(this.get(axis1), this.get(axis2));\n        case center:\n          return Math.min(this.get(axis1), this.get(axis2)) + (0.5 * this.get(dimension));\n        case farthest:\n          return Math.max(this.get(axis1), this.get(axis2));\n      }\n    };\n\n  }\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric = global.fabric || (global.fabric = { }),\n      degreesToRadians = fabric.util.degreesToRadians;\n\n  if (fabric.Circle) {\n    fabric.warn('fabric.Circle is already defined.');\n    return;\n  }\n\n  /**\n   * Circle class\n   * @class fabric.Circle\n   * @extends fabric.Object\n   * @see {@link fabric.Circle#initialize} for constructor definition\n   */\n  fabric.Circle = fabric.util.createClass(fabric.Object, /** @lends fabric.Circle.prototype */ {\n\n    /**\n     * Type of an object\n     * @type String\n     * @default\n     */\n    type: 'circle',\n\n    /**\n     * Radius of this circle\n     * @type Number\n     * @default\n     */\n    radius: 0,\n\n    /**\n     * degrees of start of the circle.\n     * probably will change to degrees in next major version\n     * @type Number 0 - 359\n     * @default 0\n     */\n    startAngle: 0,\n\n    /**\n     * End angle of the circle\n     * probably will change to degrees in next major version\n     * @type Number 1 - 360\n     * @default 360\n     */\n    endAngle: 360,\n\n    cacheProperties: fabric.Object.prototype.cacheProperties.concat('radius', 'startAngle', 'endAngle'),\n\n    /**\n     * @private\n     * @param {String} key\n     * @param {*} value\n     * @return {fabric.Circle} thisArg\n     */\n    _set: function(key, value) {\n      this.callSuper('_set', key, value);\n\n      if (key === 'radius') {\n        this.setRadius(value);\n      }\n\n      return this;\n    },\n\n    /**\n     * Returns object representation of an instance\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {Object} object representation of an instance\n     */\n    toObject: function(propertiesToInclude) {\n      return this.callSuper('toObject', ['radius', 'startAngle', 'endAngle'].concat(propertiesToInclude));\n    },\n\n    /* _TO_SVG_START_ */\n\n    /**\n     * Returns svg representation of an instance\n     * @return {Array} an array of strings with the specific svg representation\n     * of the instance\n     */\n    _toSVG: function() {\n      var svgString, x = 0, y = 0,\n          angle = (this.endAngle - this.startAngle) % 360;\n\n      if (angle === 0) {\n        svgString = [\n          '<circle ', 'COMMON_PARTS',\n          'cx=\"' + x + '\" cy=\"' + y + '\" ',\n          'r=\"', this.radius,\n          '\" />\\n'\n        ];\n      }\n      else {\n        var start = degreesToRadians(this.startAngle),\n            end = degreesToRadians(this.endAngle),\n            radius = this.radius,\n            startX = fabric.util.cos(start) * radius,\n            startY = fabric.util.sin(start) * radius,\n            endX = fabric.util.cos(end) * radius,\n            endY = fabric.util.sin(end) * radius,\n            largeFlag = angle > 180 ? '1' : '0';\n        svgString = [\n          '<path d=\"M ' + startX + ' ' + startY,\n          ' A ' + radius + ' ' + radius,\n          ' 0 ', +largeFlag + ' 1', ' ' + endX + ' ' + endY,\n          '\" ', 'COMMON_PARTS', ' />\\n'\n        ];\n      }\n      return svgString;\n    },\n    /* _TO_SVG_END_ */\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx context to render on\n     */\n    _render: function(ctx) {\n      ctx.beginPath();\n      ctx.arc(\n        0,\n        0,\n        this.radius,\n        degreesToRadians(this.startAngle),\n        degreesToRadians(this.endAngle),\n        false\n      );\n      this._renderPaintInOrder(ctx);\n    },\n\n    /**\n     * Returns horizontal radius of an object (according to how an object is scaled)\n     * @return {Number}\n     */\n    getRadiusX: function() {\n      return this.get('radius') * this.get('scaleX');\n    },\n\n    /**\n     * Returns vertical radius of an object (according to how an object is scaled)\n     * @return {Number}\n     */\n    getRadiusY: function() {\n      return this.get('radius') * this.get('scaleY');\n    },\n\n    /**\n     * Sets radius of an object (and updates width accordingly)\n     * @return {fabric.Circle} thisArg\n     */\n    setRadius: function(value) {\n      this.radius = value;\n      return this.set('width', value * 2).set('height', value * 2);\n    },\n  });\n\n  /* _FROM_SVG_START_ */\n  /**\n   * List of attribute names to account for when parsing SVG element (used by {@link fabric.Circle.fromElement})\n   * @static\n   * @memberOf fabric.Circle\n   * @see: http://www.w3.org/TR/SVG/shapes.html#CircleElement\n   */\n  fabric.Circle.ATTRIBUTE_NAMES = fabric.SHARED_ATTRIBUTES.concat('cx cy r'.split(' '));\n\n  /**\n   * Returns {@link fabric.Circle} instance from an SVG element\n   * @static\n   * @memberOf fabric.Circle\n   * @param {SVGElement} element Element to parse\n   * @param {Function} [callback] Options callback invoked after parsing is finished\n   * @param {Object} [options] Options object\n   * @throws {Error} If value of `r` attribute is missing or invalid\n   */\n  fabric.Circle.fromElement = function(element, callback) {\n    var parsedAttributes = fabric.parseAttributes(element, fabric.Circle.ATTRIBUTE_NAMES);\n\n    if (!isValidRadius(parsedAttributes)) {\n      throw new Error('value of `r` attribute is required and can not be negative');\n    }\n\n    parsedAttributes.left = (parsedAttributes.left || 0) - parsedAttributes.radius;\n    parsedAttributes.top = (parsedAttributes.top || 0) - parsedAttributes.radius;\n    callback(new fabric.Circle(parsedAttributes));\n  };\n\n  /**\n   * @private\n   */\n  function isValidRadius(attributes) {\n    return (('radius' in attributes) && (attributes.radius >= 0));\n  }\n  /* _FROM_SVG_END_ */\n\n  /**\n   * Returns {@link fabric.Circle} instance from an object representation\n   * @static\n   * @memberOf fabric.Circle\n   * @param {Object} object Object to create an instance from\n   * @param {function} [callback] invoked with new instance as first argument\n   * @return {void}\n   */\n  fabric.Circle.fromObject = function(object, callback) {\n    fabric.Object._fromObject('Circle', object, callback);\n  };\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric = global.fabric || (global.fabric = { });\n\n  if (fabric.Triangle) {\n    fabric.warn('fabric.Triangle is already defined');\n    return;\n  }\n\n  /**\n   * Triangle class\n   * @class fabric.Triangle\n   * @extends fabric.Object\n   * @return {fabric.Triangle} thisArg\n   * @see {@link fabric.Triangle#initialize} for constructor definition\n   */\n  fabric.Triangle = fabric.util.createClass(fabric.Object, /** @lends fabric.Triangle.prototype */ {\n\n    /**\n     * Type of an object\n     * @type String\n     * @default\n     */\n    type: 'triangle',\n\n    /**\n     * Width is set to 100 to compensate the old initialize code that was setting it to 100\n     * @type Number\n     * @default\n     */\n    width: 100,\n\n    /**\n     * Height is set to 100 to compensate the old initialize code that was setting it to 100\n     * @type Number\n     * @default\n     */\n    height: 100,\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _render: function(ctx) {\n      var widthBy2 = this.width / 2,\n          heightBy2 = this.height / 2;\n\n      ctx.beginPath();\n      ctx.moveTo(-widthBy2, heightBy2);\n      ctx.lineTo(0, -heightBy2);\n      ctx.lineTo(widthBy2, heightBy2);\n      ctx.closePath();\n\n      this._renderPaintInOrder(ctx);\n    },\n\n    /* _TO_SVG_START_ */\n    /**\n     * Returns svg representation of an instance\n     * @return {Array} an array of strings with the specific svg representation\n     * of the instance\n     */\n    _toSVG: function() {\n      var widthBy2 = this.width / 2,\n          heightBy2 = this.height / 2,\n          points = [\n            -widthBy2 + ' ' + heightBy2,\n            '0 ' + -heightBy2,\n            widthBy2 + ' ' + heightBy2\n          ].join(',');\n      return [\n        '<polygon ', 'COMMON_PARTS',\n        'points=\"', points,\n        '\" />'\n      ];\n    },\n    /* _TO_SVG_END_ */\n  });\n\n  /**\n   * Returns {@link fabric.Triangle} instance from an object representation\n   * @static\n   * @memberOf fabric.Triangle\n   * @param {Object} object Object to create an instance from\n   * @param {function} [callback] invoked with new instance as first argument\n   */\n  fabric.Triangle.fromObject = function(object, callback) {\n    return fabric.Object._fromObject('Triangle', object, callback);\n  };\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric = global.fabric || (global.fabric = { }),\n      piBy2   = Math.PI * 2;\n\n  if (fabric.Ellipse) {\n    fabric.warn('fabric.Ellipse is already defined.');\n    return;\n  }\n\n  /**\n   * Ellipse class\n   * @class fabric.Ellipse\n   * @extends fabric.Object\n   * @return {fabric.Ellipse} thisArg\n   * @see {@link fabric.Ellipse#initialize} for constructor definition\n   */\n  fabric.Ellipse = fabric.util.createClass(fabric.Object, /** @lends fabric.Ellipse.prototype */ {\n\n    /**\n     * Type of an object\n     * @type String\n     * @default\n     */\n    type: 'ellipse',\n\n    /**\n     * Horizontal radius\n     * @type Number\n     * @default\n     */\n    rx:   0,\n\n    /**\n     * Vertical radius\n     * @type Number\n     * @default\n     */\n    ry:   0,\n\n    cacheProperties: fabric.Object.prototype.cacheProperties.concat('rx', 'ry'),\n\n    /**\n     * Constructor\n     * @param {Object} [options] Options object\n     * @return {fabric.Ellipse} thisArg\n     */\n    initialize: function(options) {\n      this.callSuper('initialize', options);\n      this.set('rx', options && options.rx || 0);\n      this.set('ry', options && options.ry || 0);\n    },\n\n    /**\n     * @private\n     * @param {String} key\n     * @param {*} value\n     * @return {fabric.Ellipse} thisArg\n     */\n    _set: function(key, value) {\n      this.callSuper('_set', key, value);\n      switch (key) {\n\n        case 'rx':\n          this.rx = value;\n          this.set('width', value * 2);\n          break;\n\n        case 'ry':\n          this.ry = value;\n          this.set('height', value * 2);\n          break;\n\n      }\n      return this;\n    },\n\n    /**\n     * Returns horizontal radius of an object (according to how an object is scaled)\n     * @return {Number}\n     */\n    getRx: function() {\n      return this.get('rx') * this.get('scaleX');\n    },\n\n    /**\n     * Returns Vertical radius of an object (according to how an object is scaled)\n     * @return {Number}\n     */\n    getRy: function() {\n      return this.get('ry') * this.get('scaleY');\n    },\n\n    /**\n     * Returns object representation of an instance\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {Object} object representation of an instance\n     */\n    toObject: function(propertiesToInclude) {\n      return this.callSuper('toObject', ['rx', 'ry'].concat(propertiesToInclude));\n    },\n\n    /* _TO_SVG_START_ */\n    /**\n     * Returns svg representation of an instance\n     * @return {Array} an array of strings with the specific svg representation\n     * of the instance\n     */\n    _toSVG: function() {\n      return [\n        '<ellipse ', 'COMMON_PARTS',\n        'cx=\"0\" cy=\"0\" ',\n        'rx=\"', this.rx,\n        '\" ry=\"', this.ry,\n        '\" />\\n'\n      ];\n    },\n    /* _TO_SVG_END_ */\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx context to render on\n     */\n    _render: function(ctx) {\n      ctx.beginPath();\n      ctx.save();\n      ctx.transform(1, 0, 0, this.ry / this.rx, 0, 0);\n      ctx.arc(\n        0,\n        0,\n        this.rx,\n        0,\n        piBy2,\n        false);\n      ctx.restore();\n      this._renderPaintInOrder(ctx);\n    },\n  });\n\n  /* _FROM_SVG_START_ */\n  /**\n   * List of attribute names to account for when parsing SVG element (used by {@link fabric.Ellipse.fromElement})\n   * @static\n   * @memberOf fabric.Ellipse\n   * @see http://www.w3.org/TR/SVG/shapes.html#EllipseElement\n   */\n  fabric.Ellipse.ATTRIBUTE_NAMES = fabric.SHARED_ATTRIBUTES.concat('cx cy rx ry'.split(' '));\n\n  /**\n   * Returns {@link fabric.Ellipse} instance from an SVG element\n   * @static\n   * @memberOf fabric.Ellipse\n   * @param {SVGElement} element Element to parse\n   * @param {Function} [callback] Options callback invoked after parsing is finished\n   * @return {fabric.Ellipse}\n   */\n  fabric.Ellipse.fromElement = function(element, callback) {\n\n    var parsedAttributes = fabric.parseAttributes(element, fabric.Ellipse.ATTRIBUTE_NAMES);\n\n    parsedAttributes.left = (parsedAttributes.left || 0) - parsedAttributes.rx;\n    parsedAttributes.top = (parsedAttributes.top || 0) - parsedAttributes.ry;\n    callback(new fabric.Ellipse(parsedAttributes));\n  };\n  /* _FROM_SVG_END_ */\n\n  /**\n   * Returns {@link fabric.Ellipse} instance from an object representation\n   * @static\n   * @memberOf fabric.Ellipse\n   * @param {Object} object Object to create an instance from\n   * @param {function} [callback] invoked with new instance as first argument\n   * @return {void}\n   */\n  fabric.Ellipse.fromObject = function(object, callback) {\n    fabric.Object._fromObject('Ellipse', object, callback);\n  };\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric = global.fabric || (global.fabric = { }),\n      extend = fabric.util.object.extend;\n\n  if (fabric.Rect) {\n    fabric.warn('fabric.Rect is already defined');\n    return;\n  }\n\n  /**\n   * Rectangle class\n   * @class fabric.Rect\n   * @extends fabric.Object\n   * @return {fabric.Rect} thisArg\n   * @see {@link fabric.Rect#initialize} for constructor definition\n   */\n  fabric.Rect = fabric.util.createClass(fabric.Object, /** @lends fabric.Rect.prototype */ {\n\n    /**\n     * List of properties to consider when checking if state of an object is changed ({@link fabric.Object#hasStateChanged})\n     * as well as for history (undo/redo) purposes\n     * @type Array\n     */\n    stateProperties: fabric.Object.prototype.stateProperties.concat('rx', 'ry'),\n\n    /**\n     * Type of an object\n     * @type String\n     * @default\n     */\n    type: 'rect',\n\n    /**\n     * Horizontal border radius\n     * @type Number\n     * @default\n     */\n    rx:   0,\n\n    /**\n     * Vertical border radius\n     * @type Number\n     * @default\n     */\n    ry:   0,\n\n    cacheProperties: fabric.Object.prototype.cacheProperties.concat('rx', 'ry'),\n\n    /**\n     * Constructor\n     * @param {Object} [options] Options object\n     * @return {Object} thisArg\n     */\n    initialize: function(options) {\n      this.callSuper('initialize', options);\n      this._initRxRy();\n    },\n\n    /**\n     * Initializes rx/ry attributes\n     * @private\n     */\n    _initRxRy: function() {\n      if (this.rx && !this.ry) {\n        this.ry = this.rx;\n      }\n      else if (this.ry && !this.rx) {\n        this.rx = this.ry;\n      }\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _render: function(ctx) {\n\n      // 1x1 case (used in spray brush) optimization was removed because\n      // with caching and higher zoom level this makes more damage than help\n\n      var rx = this.rx ? Math.min(this.rx, this.width / 2) : 0,\n          ry = this.ry ? Math.min(this.ry, this.height / 2) : 0,\n          w = this.width,\n          h = this.height,\n          x = -this.width / 2,\n          y = -this.height / 2,\n          isRounded = rx !== 0 || ry !== 0,\n          /* \"magic number\" for bezier approximations of arcs (http://itc.ktu.lt/itc354/Riskus354.pdf) */\n          k = 1 - 0.5522847498;\n      ctx.beginPath();\n\n      ctx.moveTo(x + rx, y);\n\n      ctx.lineTo(x + w - rx, y);\n      isRounded && ctx.bezierCurveTo(x + w - k * rx, y, x + w, y + k * ry, x + w, y + ry);\n\n      ctx.lineTo(x + w, y + h - ry);\n      isRounded && ctx.bezierCurveTo(x + w, y + h - k * ry, x + w - k * rx, y + h, x + w - rx, y + h);\n\n      ctx.lineTo(x + rx, y + h);\n      isRounded && ctx.bezierCurveTo(x + k * rx, y + h, x, y + h - k * ry, x, y + h - ry);\n\n      ctx.lineTo(x, y + ry);\n      isRounded && ctx.bezierCurveTo(x, y + k * ry, x + k * rx, y, x + rx, y);\n\n      ctx.closePath();\n\n      this._renderPaintInOrder(ctx);\n    },\n\n    /**\n     * Returns object representation of an instance\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {Object} object representation of an instance\n     */\n    toObject: function(propertiesToInclude) {\n      return this.callSuper('toObject', ['rx', 'ry'].concat(propertiesToInclude));\n    },\n\n    /* _TO_SVG_START_ */\n    /**\n     * Returns svg representation of an instance\n     * @return {Array} an array of strings with the specific svg representation\n     * of the instance\n     */\n    _toSVG: function() {\n      var x = -this.width / 2, y = -this.height / 2;\n      return [\n        '<rect ', 'COMMON_PARTS',\n        'x=\"', x, '\" y=\"', y,\n        '\" rx=\"', this.rx, '\" ry=\"', this.ry,\n        '\" width=\"', this.width, '\" height=\"', this.height,\n        '\" />\\n'\n      ];\n    },\n    /* _TO_SVG_END_ */\n  });\n\n  /* _FROM_SVG_START_ */\n  /**\n   * List of attribute names to account for when parsing SVG element (used by `fabric.Rect.fromElement`)\n   * @static\n   * @memberOf fabric.Rect\n   * @see: http://www.w3.org/TR/SVG/shapes.html#RectElement\n   */\n  fabric.Rect.ATTRIBUTE_NAMES = fabric.SHARED_ATTRIBUTES.concat('x y rx ry width height'.split(' '));\n\n  /**\n   * Returns {@link fabric.Rect} instance from an SVG element\n   * @static\n   * @memberOf fabric.Rect\n   * @param {SVGElement} element Element to parse\n   * @param {Function} callback callback function invoked after parsing\n   * @param {Object} [options] Options object\n   */\n  fabric.Rect.fromElement = function(element, callback, options) {\n    if (!element) {\n      return callback(null);\n    }\n    options = options || { };\n\n    var parsedAttributes = fabric.parseAttributes(element, fabric.Rect.ATTRIBUTE_NAMES);\n    parsedAttributes.left = parsedAttributes.left || 0;\n    parsedAttributes.top  = parsedAttributes.top  || 0;\n    parsedAttributes.height  = parsedAttributes.height || 0;\n    parsedAttributes.width  = parsedAttributes.width || 0;\n    var rect = new fabric.Rect(extend((options ? fabric.util.object.clone(options) : { }), parsedAttributes));\n    rect.visible = rect.visible && rect.width > 0 && rect.height > 0;\n    callback(rect);\n  };\n  /* _FROM_SVG_END_ */\n\n  /**\n   * Returns {@link fabric.Rect} instance from an object representation\n   * @static\n   * @memberOf fabric.Rect\n   * @param {Object} object Object to create an instance from\n   * @param {Function} [callback] Callback to invoke when an fabric.Rect instance is created\n   */\n  fabric.Rect.fromObject = function(object, callback) {\n    return fabric.Object._fromObject('Rect', object, callback);\n  };\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric = global.fabric || (global.fabric = { }),\n      extend = fabric.util.object.extend,\n      min = fabric.util.array.min,\n      max = fabric.util.array.max,\n      toFixed = fabric.util.toFixed,\n      projectStrokeOnPoints = fabric.util.projectStrokeOnPoints;\n\n  if (fabric.Polyline) {\n    fabric.warn('fabric.Polyline is already defined');\n    return;\n  }\n\n  /**\n   * Polyline class\n   * @class fabric.Polyline\n   * @extends fabric.Object\n   * @see {@link fabric.Polyline#initialize} for constructor definition\n   */\n  fabric.Polyline = fabric.util.createClass(fabric.Object, /** @lends fabric.Polyline.prototype */ {\n\n    /**\n     * Type of an object\n     * @type String\n     * @default\n     */\n    type: 'polyline',\n\n    /**\n     * Points array\n     * @type Array\n     * @default\n     */\n    points: null,\n\n    /**\n     * WARNING: Feature in progress\n     * Calculate the exact bounding box taking in account strokeWidth on acute angles\n     * this will be turned to true by default on fabric 6.0\n     * maybe will be left in as an optimization since calculations may be slow\n     * @deprecated\n     * @type Boolean\n     * @default false\n     */\n    exactBoundingBox: false,\n\n    cacheProperties: fabric.Object.prototype.cacheProperties.concat('points'),\n\n    /**\n     * Constructor\n     * @param {Array} points Array of points (where each point is an object with x and y)\n     * @param {Object} [options] Options object\n     * @return {fabric.Polyline} thisArg\n     * @example\n     * var poly = new fabric.Polyline([\n     *     { x: 10, y: 10 },\n     *     { x: 50, y: 30 },\n     *     { x: 40, y: 70 },\n     *     { x: 60, y: 50 },\n     *     { x: 100, y: 150 },\n     *     { x: 40, y: 100 }\n     *   ], {\n     *   stroke: 'red',\n     *   left: 100,\n     *   top: 100\n     * });\n     */\n    initialize: function(points, options) {\n      options = options || {};\n      this.points = points || [];\n      this.callSuper('initialize', options);\n      this._setPositionDimensions(options);\n    },\n\n    /**\n     * @private\n     */\n    _projectStrokeOnPoints: function () {\n      return projectStrokeOnPoints(this.points, this, true);\n    },\n\n    _setPositionDimensions: function(options) {\n      var calcDim = this._calcDimensions(options), correctLeftTop,\n          correctSize = this.exactBoundingBox ? this.strokeWidth : 0;\n      this.width = calcDim.width - correctSize;\n      this.height = calcDim.height - correctSize;\n      if (!options.fromSVG) {\n        correctLeftTop = this.translateToGivenOrigin(\n          {\n            // this looks bad, but is one way to keep it optional for now.\n            x: calcDim.left - this.strokeWidth / 2 + correctSize / 2,\n            y: calcDim.top - this.strokeWidth / 2 + correctSize / 2\n          },\n          'left',\n          'top',\n          this.originX,\n          this.originY\n        );\n      }\n      if (typeof options.left === 'undefined') {\n        this.left = options.fromSVG ? calcDim.left : correctLeftTop.x;\n      }\n      if (typeof options.top === 'undefined') {\n        this.top = options.fromSVG ? calcDim.top : correctLeftTop.y;\n      }\n      this.pathOffset = {\n        x: calcDim.left + this.width / 2 + correctSize / 2,\n        y: calcDim.top + this.height / 2 + correctSize / 2\n      };\n    },\n\n    /**\n     * Calculate the polygon min and max point from points array,\n     * returning an object with left, top, width, height to measure the\n     * polygon size\n     * @return {Object} object.left X coordinate of the polygon leftmost point\n     * @return {Object} object.top Y coordinate of the polygon topmost point\n     * @return {Object} object.width distance between X coordinates of the polygon leftmost and rightmost point\n     * @return {Object} object.height distance between Y coordinates of the polygon topmost and bottommost point\n     * @private\n     */\n    _calcDimensions: function() {\n\n      var points = this.exactBoundingBox ? this._projectStrokeOnPoints() : this.points,\n          minX = min(points, 'x') || 0,\n          minY = min(points, 'y') || 0,\n          maxX = max(points, 'x') || 0,\n          maxY = max(points, 'y') || 0,\n          width = (maxX - minX),\n          height = (maxY - minY);\n\n      return {\n        left: minX,\n        top: minY,\n        width: width,\n        height: height,\n      };\n    },\n\n    /**\n     * Returns object representation of an instance\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {Object} Object representation of an instance\n     */\n    toObject: function(propertiesToInclude) {\n      return extend(this.callSuper('toObject', propertiesToInclude), {\n        points: this.points.concat()\n      });\n    },\n\n    /* _TO_SVG_START_ */\n    /**\n     * Returns svg representation of an instance\n     * @return {Array} an array of strings with the specific svg representation\n     * of the instance\n     */\n    _toSVG: function() {\n      var points = [], diffX = this.pathOffset.x, diffY = this.pathOffset.y,\n          NUM_FRACTION_DIGITS = fabric.Object.NUM_FRACTION_DIGITS;\n\n      for (var i = 0, len = this.points.length; i < len; i++) {\n        points.push(\n          toFixed(this.points[i].x - diffX, NUM_FRACTION_DIGITS), ',',\n          toFixed(this.points[i].y - diffY, NUM_FRACTION_DIGITS), ' '\n        );\n      }\n      return [\n        '<' + this.type + ' ', 'COMMON_PARTS',\n        'points=\"', points.join(''),\n        '\" />\\n'\n      ];\n    },\n    /* _TO_SVG_END_ */\n\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    commonRender: function(ctx) {\n      var point, len = this.points.length,\n          x = this.pathOffset.x,\n          y = this.pathOffset.y;\n\n      if (!len || isNaN(this.points[len - 1].y)) {\n        // do not draw if no points or odd points\n        // NaN comes from parseFloat of a empty string in parser\n        return false;\n      }\n      ctx.beginPath();\n      ctx.moveTo(this.points[0].x - x, this.points[0].y - y);\n      for (var i = 0; i < len; i++) {\n        point = this.points[i];\n        ctx.lineTo(point.x - x, point.y - y);\n      }\n      return true;\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _render: function(ctx) {\n      if (!this.commonRender(ctx)) {\n        return;\n      }\n      this._renderPaintInOrder(ctx);\n    },\n\n    /**\n     * Returns complexity of an instance\n     * @return {Number} complexity of this instance\n     */\n    complexity: function() {\n      return this.get('points').length;\n    }\n  });\n\n  /* _FROM_SVG_START_ */\n  /**\n   * List of attribute names to account for when parsing SVG element (used by {@link fabric.Polyline.fromElement})\n   * @static\n   * @memberOf fabric.Polyline\n   * @see: http://www.w3.org/TR/SVG/shapes.html#PolylineElement\n   */\n  fabric.Polyline.ATTRIBUTE_NAMES = fabric.SHARED_ATTRIBUTES.concat();\n\n  /**\n   * Returns fabric.Polyline instance from an SVG element\n   * @static\n   * @memberOf fabric.Polyline\n   * @param {SVGElement} element Element to parser\n   * @param {Function} callback callback function invoked after parsing\n   * @param {Object} [options] Options object\n   */\n  fabric.Polyline.fromElementGenerator = function(_class) {\n    return function(element, callback, options) {\n      if (!element) {\n        return callback(null);\n      }\n      options || (options = { });\n\n      var points = fabric.parsePointsAttribute(element.getAttribute('points')),\n          parsedAttributes = fabric.parseAttributes(element, fabric[_class].ATTRIBUTE_NAMES);\n      parsedAttributes.fromSVG = true;\n      callback(new fabric[_class](points, extend(parsedAttributes, options)));\n    };\n  };\n\n  fabric.Polyline.fromElement = fabric.Polyline.fromElementGenerator('Polyline');\n\n  /* _FROM_SVG_END_ */\n\n  /**\n   * Returns fabric.Polyline instance from an object representation\n   * @static\n   * @memberOf fabric.Polyline\n   * @param {Object} object Object to create an instance from\n   * @param {Function} [callback] Callback to invoke when an fabric.Path instance is created\n   */\n  fabric.Polyline.fromObject = function(object, callback) {\n    return fabric.Object._fromObject('Polyline', object, callback, 'points');\n  };\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric = global.fabric || (global.fabric = {}),\n      projectStrokeOnPoints = fabric.util.projectStrokeOnPoints;\n\n  if (fabric.Polygon) {\n    fabric.warn('fabric.Polygon is already defined');\n    return;\n  }\n\n  /**\n   * Polygon class\n   * @class fabric.Polygon\n   * @extends fabric.Polyline\n   * @see {@link fabric.Polygon#initialize} for constructor definition\n   */\n  fabric.Polygon = fabric.util.createClass(fabric.Polyline, /** @lends fabric.Polygon.prototype */ {\n\n    /**\n     * Type of an object\n     * @type String\n     * @default\n     */\n    type: 'polygon',\n\n    /**\n     * @private\n     */\n    _projectStrokeOnPoints: function () {\n      return projectStrokeOnPoints(this.points, this);\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _render: function(ctx) {\n      if (!this.commonRender(ctx)) {\n        return;\n      }\n      ctx.closePath();\n      this._renderPaintInOrder(ctx);\n    },\n\n  });\n\n  /* _FROM_SVG_START_ */\n  /**\n   * List of attribute names to account for when parsing SVG element (used by `fabric.Polygon.fromElement`)\n   * @static\n   * @memberOf fabric.Polygon\n   * @see: http://www.w3.org/TR/SVG/shapes.html#PolygonElement\n   */\n  fabric.Polygon.ATTRIBUTE_NAMES = fabric.SHARED_ATTRIBUTES.concat();\n\n  /**\n   * Returns {@link fabric.Polygon} instance from an SVG element\n   * @static\n   * @memberOf fabric.Polygon\n   * @param {SVGElement} element Element to parse\n   * @param {Function} callback callback function invoked after parsing\n   * @param {Object} [options] Options object\n   */\n  fabric.Polygon.fromElement = fabric.Polyline.fromElementGenerator('Polygon');\n  /* _FROM_SVG_END_ */\n\n  /**\n   * Returns fabric.Polygon instance from an object representation\n   * @static\n   * @memberOf fabric.Polygon\n   * @param {Object} object Object to create an instance from\n   * @param {Function} [callback] Callback to invoke when an fabric.Path instance is created\n   * @return {void}\n   */\n  fabric.Polygon.fromObject = function(object, callback) {\n    fabric.Object._fromObject('Polygon', object, callback, 'points');\n  };\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric = global.fabric || (global.fabric = { }),\n      min = fabric.util.array.min,\n      max = fabric.util.array.max,\n      extend = fabric.util.object.extend,\n      clone = fabric.util.object.clone,\n      toFixed = fabric.util.toFixed;\n\n  if (fabric.Path) {\n    fabric.warn('fabric.Path is already defined');\n    return;\n  }\n\n  /**\n   * Path class\n   * @class fabric.Path\n   * @extends fabric.Object\n   * @tutorial {@link http://fabricjs.com/fabric-intro-part-1#path_and_pathgroup}\n   * @see {@link fabric.Path#initialize} for constructor definition\n   */\n  fabric.Path = fabric.util.createClass(fabric.Object, /** @lends fabric.Path.prototype */ {\n\n    /**\n     * Type of an object\n     * @type String\n     * @default\n     */\n    type: 'path',\n\n    /**\n     * Array of path points\n     * @type Array\n     * @default\n     */\n    path: null,\n\n    cacheProperties: fabric.Object.prototype.cacheProperties.concat('path', 'fillRule'),\n\n    stateProperties: fabric.Object.prototype.stateProperties.concat('path'),\n\n    /**\n     * Constructor\n     * @param {Array|String} path Path data (sequence of coordinates and corresponding \"command\" tokens)\n     * @param {Object} [options] Options object\n     * @return {fabric.Path} thisArg\n     */\n    initialize: function (path, options) {\n      options = clone(options || {});\n      delete options.path;\n      this.callSuper('initialize', options);\n      this._setPath(path || [], options);\n    },\n\n    /**\n    * @private\n    * @param {Array|String} path Path data (sequence of coordinates and corresponding \"command\" tokens)\n    * @param {Object} [options] Options object\n    */\n    _setPath: function (path, options) {\n      this.path = fabric.util.makePathSimpler(\n        Array.isArray(path) ? path : fabric.util.parsePath(path)\n      );\n\n      fabric.Polyline.prototype._setPositionDimensions.call(this, options || {});\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx context to render path on\n     */\n    _renderPathCommands: function(ctx) {\n      var current, // current instruction\n          subpathStartX = 0,\n          subpathStartY = 0,\n          x = 0, // current x\n          y = 0, // current y\n          controlX = 0, // current control point x\n          controlY = 0, // current control point y\n          l = -this.pathOffset.x,\n          t = -this.pathOffset.y;\n\n      ctx.beginPath();\n\n      for (var i = 0, len = this.path.length; i < len; ++i) {\n\n        current = this.path[i];\n\n        switch (current[0]) { // first letter\n\n          case 'L': // lineto, absolute\n            x = current[1];\n            y = current[2];\n            ctx.lineTo(x + l, y + t);\n            break;\n\n          case 'M': // moveTo, absolute\n            x = current[1];\n            y = current[2];\n            subpathStartX = x;\n            subpathStartY = y;\n            ctx.moveTo(x + l, y + t);\n            break;\n\n          case 'C': // bezierCurveTo, absolute\n            x = current[5];\n            y = current[6];\n            controlX = current[3];\n            controlY = current[4];\n            ctx.bezierCurveTo(\n              current[1] + l,\n              current[2] + t,\n              controlX + l,\n              controlY + t,\n              x + l,\n              y + t\n            );\n            break;\n\n          case 'Q': // quadraticCurveTo, absolute\n            ctx.quadraticCurveTo(\n              current[1] + l,\n              current[2] + t,\n              current[3] + l,\n              current[4] + t\n            );\n            x = current[3];\n            y = current[4];\n            controlX = current[1];\n            controlY = current[2];\n            break;\n\n          case 'z':\n          case 'Z':\n            x = subpathStartX;\n            y = subpathStartY;\n            ctx.closePath();\n            break;\n        }\n      }\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx context to render path on\n     */\n    _render: function(ctx) {\n      this._renderPathCommands(ctx);\n      this._renderPaintInOrder(ctx);\n    },\n\n    /**\n     * Returns string representation of an instance\n     * @return {String} string representation of an instance\n     */\n    toString: function() {\n      return '#<fabric.Path (' + this.complexity() +\n        '): { \"top\": ' + this.top + ', \"left\": ' + this.left + ' }>';\n    },\n\n    /**\n     * Returns object representation of an instance\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {Object} object representation of an instance\n     */\n    toObject: function(propertiesToInclude) {\n      return extend(this.callSuper('toObject', propertiesToInclude), {\n        path: this.path.map(function(item) { return item.slice(); }),\n      });\n    },\n\n    /**\n     * Returns dataless object representation of an instance\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {Object} object representation of an instance\n     */\n    toDatalessObject: function(propertiesToInclude) {\n      var o = this.toObject(['sourcePath'].concat(propertiesToInclude));\n      if (o.sourcePath) {\n        delete o.path;\n      }\n      return o;\n    },\n\n    /* _TO_SVG_START_ */\n    /**\n     * Returns svg representation of an instance\n     * @return {Array} an array of strings with the specific svg representation\n     * of the instance\n     */\n    _toSVG: function() {\n      var path = fabric.util.joinPath(this.path);\n      return [\n        '<path ', 'COMMON_PARTS',\n        'd=\"', path,\n        '\" stroke-linecap=\"round\" ',\n        '/>\\n'\n      ];\n    },\n\n    _getOffsetTransform: function() {\n      var digits = fabric.Object.NUM_FRACTION_DIGITS;\n      return ' translate(' + toFixed(-this.pathOffset.x, digits) + ', ' +\n          toFixed(-this.pathOffset.y, digits) + ')';\n    },\n\n    /**\n     * Returns svg clipPath representation of an instance\n     * @param {Function} [reviver] Method for further parsing of svg representation.\n     * @return {String} svg representation of an instance\n     */\n    toClipPathSVG: function(reviver) {\n      var additionalTransform = this._getOffsetTransform();\n      return '\\t' + this._createBaseClipPathSVGMarkup(\n        this._toSVG(), { reviver: reviver, additionalTransform: additionalTransform }\n      );\n    },\n\n    /**\n     * Returns svg representation of an instance\n     * @param {Function} [reviver] Method for further parsing of svg representation.\n     * @return {String} svg representation of an instance\n     */\n    toSVG: function(reviver) {\n      var additionalTransform = this._getOffsetTransform();\n      return this._createBaseSVGMarkup(this._toSVG(), { reviver: reviver, additionalTransform: additionalTransform  });\n    },\n    /* _TO_SVG_END_ */\n\n    /**\n     * Returns number representation of an instance complexity\n     * @return {Number} complexity of this instance\n     */\n    complexity: function() {\n      return this.path.length;\n    },\n\n    /**\n     * @private\n     */\n    _calcDimensions: function() {\n\n      var aX = [],\n          aY = [],\n          current, // current instruction\n          subpathStartX = 0,\n          subpathStartY = 0,\n          x = 0, // current x\n          y = 0, // current y\n          bounds;\n\n      for (var i = 0, len = this.path.length; i < len; ++i) {\n\n        current = this.path[i];\n\n        switch (current[0]) { // first letter\n\n          case 'L': // lineto, absolute\n            x = current[1];\n            y = current[2];\n            bounds = [];\n            break;\n\n          case 'M': // moveTo, absolute\n            x = current[1];\n            y = current[2];\n            subpathStartX = x;\n            subpathStartY = y;\n            bounds = [];\n            break;\n\n          case 'C': // bezierCurveTo, absolute\n            bounds = fabric.util.getBoundsOfCurve(x, y,\n              current[1],\n              current[2],\n              current[3],\n              current[4],\n              current[5],\n              current[6]\n            );\n            x = current[5];\n            y = current[6];\n            break;\n\n          case 'Q': // quadraticCurveTo, absolute\n            bounds = fabric.util.getBoundsOfCurve(x, y,\n              current[1],\n              current[2],\n              current[1],\n              current[2],\n              current[3],\n              current[4]\n            );\n            x = current[3];\n            y = current[4];\n            break;\n\n          case 'z':\n          case 'Z':\n            x = subpathStartX;\n            y = subpathStartY;\n            break;\n        }\n        bounds.forEach(function (point) {\n          aX.push(point.x);\n          aY.push(point.y);\n        });\n        aX.push(x);\n        aY.push(y);\n      }\n\n      var minX = min(aX) || 0,\n          minY = min(aY) || 0,\n          maxX = max(aX) || 0,\n          maxY = max(aY) || 0,\n          deltaX = maxX - minX,\n          deltaY = maxY - minY;\n\n      return {\n        left: minX,\n        top: minY,\n        width: deltaX,\n        height: deltaY\n      };\n    }\n  });\n\n  /**\n   * Creates an instance of fabric.Path from an object\n   * @static\n   * @memberOf fabric.Path\n   * @param {Object} object\n   * @param {Function} [callback] Callback to invoke when an fabric.Path instance is created\n   */\n  fabric.Path.fromObject = function(object, callback) {\n    if (typeof object.sourcePath === 'string') {\n      var pathUrl = object.sourcePath;\n      fabric.loadSVGFromURL(pathUrl, function (elements) {\n        var path = elements[0];\n        path.setOptions(object);\n        callback && callback(path);\n      });\n    }\n    else {\n      fabric.Object._fromObject('Path', object, callback, 'path');\n    }\n  };\n\n  /* _FROM_SVG_START_ */\n  /**\n   * List of attribute names to account for when parsing SVG element (used by `fabric.Path.fromElement`)\n   * @static\n   * @memberOf fabric.Path\n   * @see http://www.w3.org/TR/SVG/paths.html#PathElement\n   */\n  fabric.Path.ATTRIBUTE_NAMES = fabric.SHARED_ATTRIBUTES.concat(['d']);\n\n  /**\n   * Creates an instance of fabric.Path from an SVG <path> element\n   * @static\n   * @memberOf fabric.Path\n   * @param {SVGElement} element to parse\n   * @param {Function} callback Callback to invoke when an fabric.Path instance is created\n   * @param {Object} [options] Options object\n   * @param {Function} [callback] Options callback invoked after parsing is finished\n   */\n  fabric.Path.fromElement = function(element, callback, options) {\n    var parsedAttributes = fabric.parseAttributes(element, fabric.Path.ATTRIBUTE_NAMES);\n    parsedAttributes.fromSVG = true;\n    callback(new fabric.Path(parsedAttributes.d, extend(parsedAttributes, options)));\n  };\n  /* _FROM_SVG_END_ */\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric = global.fabric || (global.fabric = { }),\n      min = fabric.util.array.min,\n      max = fabric.util.array.max;\n\n  if (fabric.Group) {\n    return;\n  }\n\n  /**\n   * Group class\n   * @class fabric.Group\n   * @extends fabric.Object\n   * @mixes fabric.Collection\n   * @tutorial {@link http://fabricjs.com/fabric-intro-part-3#groups}\n   * @see {@link fabric.Group#initialize} for constructor definition\n   */\n  fabric.Group = fabric.util.createClass(fabric.Object, fabric.Collection, /** @lends fabric.Group.prototype */ {\n\n    /**\n     * Type of an object\n     * @type String\n     * @default\n     */\n    type: 'group',\n\n    /**\n     * Width of stroke\n     * @type Number\n     * @default\n     */\n    strokeWidth: 0,\n\n    /**\n     * Indicates if click, mouseover, mouseout events & hoverCursor should also check for subtargets\n     * @type Boolean\n     * @default\n     */\n    subTargetCheck: false,\n\n    /**\n     * Groups are container, do not render anything on theyr own, ence no cache properties\n     * @type Array\n     * @default\n     */\n    cacheProperties: [],\n\n    /**\n     * setOnGroup is a method used for TextBox that is no more used since 2.0.0 The behavior is still\n     * available setting this boolean to true.\n     * @type Boolean\n     * @since 2.0.0\n     * @default\n     */\n    useSetOnGroup: false,\n\n    /**\n     * Constructor\n     * @param {Object} objects Group objects\n     * @param {Object} [options] Options object\n     * @param {Boolean} [isAlreadyGrouped] if true, objects have been grouped already.\n     * @return {Object} thisArg\n     */\n    initialize: function(objects, options, isAlreadyGrouped) {\n      options = options || {};\n      this._objects = [];\n      // if objects enclosed in a group have been grouped already,\n      // we cannot change properties of objects.\n      // Thus we need to set options to group without objects,\n      isAlreadyGrouped && this.callSuper('initialize', options);\n      this._objects = objects || [];\n      for (var i = this._objects.length; i--; ) {\n        this._objects[i].group = this;\n      }\n\n      if (!isAlreadyGrouped) {\n        var center = options && options.centerPoint;\n        // we want to set origins before calculating the bounding box.\n        // so that the topleft can be set with that in mind.\n        // if specific top and left are passed, are overwritten later\n        // with the callSuper('initialize', options)\n        if (options.originX !== undefined) {\n          this.originX = options.originX;\n        }\n        if (options.originY !== undefined) {\n          this.originY = options.originY;\n        }\n        // if coming from svg i do not want to calc bounds.\n        // i assume width and height are passed along options\n        center || this._calcBounds();\n        this._updateObjectsCoords(center);\n        delete options.centerPoint;\n        this.callSuper('initialize', options);\n      }\n      else {\n        this._updateObjectsACoords();\n      }\n\n      this.setCoords();\n    },\n\n    /**\n     * @private\n     */\n    _updateObjectsACoords: function() {\n      var skipControls = true;\n      for (var i = this._objects.length; i--; ){\n        this._objects[i].setCoords(skipControls);\n      }\n    },\n\n    /**\n     * @private\n     * @param {Boolean} [skipCoordsChange] if true, coordinates of objects enclosed in a group do not change\n     */\n    _updateObjectsCoords: function(center) {\n      var center = center || this.getCenterPoint();\n      for (var i = this._objects.length; i--; ){\n        this._updateObjectCoords(this._objects[i], center);\n      }\n    },\n\n    /**\n     * @private\n     * @param {Object} object\n     * @param {fabric.Point} center, current center of group.\n     */\n    _updateObjectCoords: function(object, center) {\n      var objectLeft = object.left,\n          objectTop = object.top,\n          skipControls = true;\n\n      object.set({\n        left: objectLeft - center.x,\n        top: objectTop - center.y\n      });\n      object.group = this;\n      object.setCoords(skipControls);\n    },\n\n    /**\n     * Returns string represenation of a group\n     * @return {String}\n     */\n    toString: function() {\n      return '#<fabric.Group: (' + this.complexity() + ')>';\n    },\n\n    /**\n     * Adds an object to a group; Then recalculates group's dimension, position.\n     * @param {Object} object\n     * @return {fabric.Group} thisArg\n     * @chainable\n     */\n    addWithUpdate: function(object) {\n      var nested = !!this.group;\n      this._restoreObjectsState();\n      fabric.util.resetObjectTransform(this);\n      if (object) {\n        if (nested) {\n          // if this group is inside another group, we need to pre transform the object\n          fabric.util.removeTransformFromObject(object, this.group.calcTransformMatrix());\n        }\n        this._objects.push(object);\n        object.group = this;\n        object._set('canvas', this.canvas);\n      }\n      this._calcBounds();\n      this._updateObjectsCoords();\n      this.dirty = true;\n      if (nested) {\n        this.group.addWithUpdate();\n      }\n      else {\n        this.setCoords();\n      }\n      return this;\n    },\n\n    /**\n     * Removes an object from a group; Then recalculates group's dimension, position.\n     * @param {Object} object\n     * @return {fabric.Group} thisArg\n     * @chainable\n     */\n    removeWithUpdate: function(object) {\n      this._restoreObjectsState();\n      fabric.util.resetObjectTransform(this);\n\n      this.remove(object);\n      this._calcBounds();\n      this._updateObjectsCoords();\n      this.setCoords();\n      this.dirty = true;\n      return this;\n    },\n\n    /**\n     * @private\n     */\n    _onObjectAdded: function(object) {\n      this.dirty = true;\n      object.group = this;\n      object._set('canvas', this.canvas);\n    },\n\n    /**\n     * @private\n     */\n    _onObjectRemoved: function(object) {\n      this.dirty = true;\n      delete object.group;\n    },\n\n    /**\n     * @private\n     */\n    _set: function(key, value) {\n      var i = this._objects.length;\n      if (this.useSetOnGroup) {\n        while (i--) {\n          this._objects[i].setOnGroup(key, value);\n        }\n      }\n      if (key === 'canvas') {\n        while (i--) {\n          this._objects[i]._set(key, value);\n        }\n      }\n      fabric.Object.prototype._set.call(this, key, value);\n    },\n\n    /**\n     * Returns object representation of an instance\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {Object} object representation of an instance\n     */\n    toObject: function(propertiesToInclude) {\n      var _includeDefaultValues = this.includeDefaultValues;\n      var objsToObject = this._objects\n        .filter(function (obj) {\n          return !obj.excludeFromExport;\n        })\n        .map(function (obj) {\n          var originalDefaults = obj.includeDefaultValues;\n          obj.includeDefaultValues = _includeDefaultValues;\n          var _obj = obj.toObject(propertiesToInclude);\n          obj.includeDefaultValues = originalDefaults;\n          return _obj;\n        });\n      var obj = fabric.Object.prototype.toObject.call(this, propertiesToInclude);\n      obj.objects = objsToObject;\n      return obj;\n    },\n\n    /**\n     * Returns object representation of an instance, in dataless mode.\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {Object} object representation of an instance\n     */\n    toDatalessObject: function(propertiesToInclude) {\n      var objsToObject, sourcePath = this.sourcePath;\n      if (sourcePath) {\n        objsToObject = sourcePath;\n      }\n      else {\n        var _includeDefaultValues = this.includeDefaultValues;\n        objsToObject = this._objects.map(function(obj) {\n          var originalDefaults = obj.includeDefaultValues;\n          obj.includeDefaultValues = _includeDefaultValues;\n          var _obj = obj.toDatalessObject(propertiesToInclude);\n          obj.includeDefaultValues = originalDefaults;\n          return _obj;\n        });\n      }\n      var obj = fabric.Object.prototype.toDatalessObject.call(this, propertiesToInclude);\n      obj.objects = objsToObject;\n      return obj;\n    },\n\n    /**\n     * Renders instance on a given context\n     * @param {CanvasRenderingContext2D} ctx context to render instance on\n     */\n    render: function(ctx) {\n      this._transformDone = true;\n      this.callSuper('render', ctx);\n      this._transformDone = false;\n    },\n\n    /**\n     * Decide if the object should cache or not. Create its own cache level\n     * needsItsOwnCache should be used when the object drawing method requires\n     * a cache step. None of the fabric classes requires it.\n     * Generally you do not cache objects in groups because the group is already cached.\n     * @return {Boolean}\n     */\n    shouldCache: function() {\n      var ownCache = fabric.Object.prototype.shouldCache.call(this);\n      if (ownCache) {\n        for (var i = 0, len = this._objects.length; i < len; i++) {\n          if (this._objects[i].willDrawShadow()) {\n            this.ownCaching = false;\n            return false;\n          }\n        }\n      }\n      return ownCache;\n    },\n\n    /**\n     * Check if this object or a child object will cast a shadow\n     * @return {Boolean}\n     */\n    willDrawShadow: function() {\n      if (fabric.Object.prototype.willDrawShadow.call(this)) {\n        return true;\n      }\n      for (var i = 0, len = this._objects.length; i < len; i++) {\n        if (this._objects[i].willDrawShadow()) {\n          return true;\n        }\n      }\n      return false;\n    },\n\n    /**\n     * Check if this group or its parent group are caching, recursively up\n     * @return {Boolean}\n     */\n    isOnACache: function() {\n      return this.ownCaching || (this.group && this.group.isOnACache());\n    },\n\n    /**\n     * Execute the drawing operation for an object on a specified context\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    drawObject: function(ctx) {\n      for (var i = 0, len = this._objects.length; i < len; i++) {\n        this._objects[i].render(ctx);\n      }\n      this._drawClipPath(ctx, this.clipPath);\n    },\n\n    /**\n     * Check if cache is dirty\n     */\n    isCacheDirty: function(skipCanvas) {\n      if (this.callSuper('isCacheDirty', skipCanvas)) {\n        return true;\n      }\n      if (!this.statefullCache) {\n        return false;\n      }\n      for (var i = 0, len = this._objects.length; i < len; i++) {\n        if (this._objects[i].isCacheDirty(true)) {\n          if (this._cacheCanvas) {\n            // if this group has not a cache canvas there is nothing to clean\n            var x = this.cacheWidth / this.zoomX, y = this.cacheHeight / this.zoomY;\n            this._cacheContext.clearRect(-x / 2, -y / 2, x, y);\n          }\n          return true;\n        }\n      }\n      return false;\n    },\n\n    /**\n     * Restores original state of each of group objects (original state is that which was before group was created).\n     * if the nested boolean is true, the original state will be restored just for the\n     * first group and not for all the group chain\n     * @private\n     * @param {Boolean} nested tell the function to restore object state up to the parent group and not more\n     * @return {fabric.Group} thisArg\n     * @chainable\n     */\n    _restoreObjectsState: function() {\n      var groupMatrix = this.calcOwnMatrix();\n      this._objects.forEach(function(object) {\n        // instead of using _this = this;\n        fabric.util.addTransformToObject(object, groupMatrix);\n        delete object.group;\n        object.setCoords();\n      });\n      return this;\n    },\n\n    /**\n     * Destroys a group (restoring state of its objects)\n     * @return {fabric.Group} thisArg\n     * @chainable\n     */\n    destroy: function() {\n      // when group is destroyed objects needs to get a repaint to be eventually\n      // displayed on canvas.\n      this._objects.forEach(function(object) {\n        object.set('dirty', true);\n      });\n      return this._restoreObjectsState();\n    },\n\n    dispose: function () {\n      this.callSuper('dispose');\n      this.forEachObject(function (object) {\n        object.dispose && object.dispose();\n      });\n      this._objects = [];\n    },\n\n    /**\n     * make a group an active selection, remove the group from canvas\n     * the group has to be on canvas for this to work.\n     * @return {fabric.ActiveSelection} thisArg\n     * @chainable\n     */\n    toActiveSelection: function() {\n      if (!this.canvas) {\n        return;\n      }\n      var objects = this._objects, canvas = this.canvas;\n      this._objects = [];\n      var options = this.toObject();\n      delete options.objects;\n      var activeSelection = new fabric.ActiveSelection([]);\n      activeSelection.set(options);\n      activeSelection.type = 'activeSelection';\n      canvas.remove(this);\n      objects.forEach(function(object) {\n        object.group = activeSelection;\n        object.dirty = true;\n        canvas.add(object);\n      });\n      activeSelection.canvas = canvas;\n      activeSelection._objects = objects;\n      canvas._activeObject = activeSelection;\n      activeSelection.setCoords();\n      return activeSelection;\n    },\n\n    /**\n     * Destroys a group (restoring state of its objects)\n     * @return {fabric.Group} thisArg\n     * @chainable\n     */\n    ungroupOnCanvas: function() {\n      return this._restoreObjectsState();\n    },\n\n    /**\n     * Sets coordinates of all objects inside group\n     * @return {fabric.Group} thisArg\n     * @chainable\n     */\n    setObjectsCoords: function() {\n      var skipControls = true;\n      this.forEachObject(function(object) {\n        object.setCoords(skipControls);\n      });\n      return this;\n    },\n\n    /**\n     * @private\n     */\n    _calcBounds: function(onlyWidthHeight) {\n      var aX = [],\n          aY = [],\n          o, prop, coords,\n          props = ['tr', 'br', 'bl', 'tl'],\n          i = 0, iLen = this._objects.length,\n          j, jLen = props.length;\n\n      for ( ; i < iLen; ++i) {\n        o = this._objects[i];\n        coords = o.calcACoords();\n        for (j = 0; j < jLen; j++) {\n          prop = props[j];\n          aX.push(coords[prop].x);\n          aY.push(coords[prop].y);\n        }\n        o.aCoords = coords;\n      }\n\n      this._getBounds(aX, aY, onlyWidthHeight);\n    },\n\n    /**\n     * @private\n     */\n    _getBounds: function(aX, aY, onlyWidthHeight) {\n      var minXY = new fabric.Point(min(aX), min(aY)),\n          maxXY = new fabric.Point(max(aX), max(aY)),\n          top = minXY.y || 0, left = minXY.x || 0,\n          width = (maxXY.x - minXY.x) || 0,\n          height = (maxXY.y - minXY.y) || 0;\n      this.width = width;\n      this.height = height;\n      if (!onlyWidthHeight) {\n        // the bounding box always finds the topleft most corner.\n        // whatever is the group origin, we set up here the left/top position.\n        this.setPositionByOrigin({ x: left, y: top }, 'left', 'top');\n      }\n    },\n\n    /* _TO_SVG_START_ */\n    /**\n     * Returns svg representation of an instance\n     * @param {Function} [reviver] Method for further parsing of svg representation.\n     * @return {String} svg representation of an instance\n     */\n    _toSVG: function(reviver) {\n      var svgString = ['<g ', 'COMMON_PARTS', ' >\\n'];\n\n      for (var i = 0, len = this._objects.length; i < len; i++) {\n        svgString.push('\\t\\t', this._objects[i].toSVG(reviver));\n      }\n      svgString.push('</g>\\n');\n      return svgString;\n    },\n\n    /**\n     * Returns styles-string for svg-export, specific version for group\n     * @return {String}\n     */\n    getSvgStyles: function() {\n      var opacity = typeof this.opacity !== 'undefined' && this.opacity !== 1 ?\n            'opacity: ' + this.opacity + ';' : '',\n          visibility = this.visible ? '' : ' visibility: hidden;';\n      return [\n        opacity,\n        this.getSvgFilter(),\n        visibility\n      ].join('');\n    },\n\n    /**\n     * Returns svg clipPath representation of an instance\n     * @param {Function} [reviver] Method for further parsing of svg representation.\n     * @return {String} svg representation of an instance\n     */\n    toClipPathSVG: function(reviver) {\n      var svgString = [];\n\n      for (var i = 0, len = this._objects.length; i < len; i++) {\n        svgString.push('\\t', this._objects[i].toClipPathSVG(reviver));\n      }\n\n      return this._createBaseClipPathSVGMarkup(svgString, { reviver: reviver });\n    },\n    /* _TO_SVG_END_ */\n  });\n\n  /**\n   * Returns {@link fabric.Group} instance from an object representation\n   * @static\n   * @memberOf fabric.Group\n   * @param {Object} object Object to create a group from\n   * @param {Function} [callback] Callback to invoke when an group instance is created\n   */\n  fabric.Group.fromObject = function(object, callback) {\n    var objects = object.objects,\n        options = fabric.util.object.clone(object, true);\n    delete options.objects;\n    if (typeof objects === 'string') {\n      // it has to be an url or something went wrong.\n      fabric.loadSVGFromURL(objects, function (elements) {\n        var group = fabric.util.groupSVGElements(elements, object, objects);\n        group.set(options);\n        callback && callback(group);\n      });\n      return;\n    }\n    fabric.util.enlivenObjects(objects, function (enlivenedObjects) {\n      var options = fabric.util.object.clone(object, true);\n      delete options.objects;\n      fabric.util.enlivenObjectEnlivables(object, options, function () {\n        callback && callback(new fabric.Group(enlivenedObjects, options, true));\n      });\n    });\n  };\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric = global.fabric || (global.fabric = { });\n\n  if (fabric.ActiveSelection) {\n    return;\n  }\n\n  /**\n   * Group class\n   * @class fabric.ActiveSelection\n   * @extends fabric.Group\n   * @tutorial {@link http://fabricjs.com/fabric-intro-part-3#groups}\n   * @see {@link fabric.ActiveSelection#initialize} for constructor definition\n   */\n  fabric.ActiveSelection = fabric.util.createClass(fabric.Group, /** @lends fabric.ActiveSelection.prototype */ {\n\n    /**\n     * Type of an object\n     * @type String\n     * @default\n     */\n    type: 'activeSelection',\n\n    /**\n     * Constructor\n     * @param {Object} objects ActiveSelection objects\n     * @param {Object} [options] Options object\n     * @return {Object} thisArg\n     */\n    initialize: function(objects, options) {\n      options = options || {};\n      this._objects = objects || [];\n      for (var i = this._objects.length; i--; ) {\n        this._objects[i].group = this;\n      }\n\n      if (options.originX) {\n        this.originX = options.originX;\n      }\n      if (options.originY) {\n        this.originY = options.originY;\n      }\n      this._calcBounds();\n      this._updateObjectsCoords();\n      fabric.Object.prototype.initialize.call(this, options);\n      this.setCoords();\n    },\n\n    /**\n     * Change te activeSelection to a normal group,\n     * High level function that automatically adds it to canvas as\n     * active object. no events fired.\n     * @since 2.0.0\n     * @return {fabric.Group}\n     */\n    toGroup: function() {\n      var objects = this._objects.concat();\n      this._objects = [];\n      var options = fabric.Object.prototype.toObject.call(this);\n      var newGroup = new fabric.Group([]);\n      delete options.type;\n      newGroup.set(options);\n      objects.forEach(function(object) {\n        object.canvas.remove(object);\n        object.group = newGroup;\n      });\n      newGroup._objects = objects;\n      if (!this.canvas) {\n        return newGroup;\n      }\n      var canvas = this.canvas;\n      canvas.add(newGroup);\n      canvas._activeObject = newGroup;\n      newGroup.setCoords();\n      return newGroup;\n    },\n\n    /**\n     * If returns true, deselection is cancelled.\n     * @since 2.0.0\n     * @return {Boolean} [cancel]\n     */\n    onDeselect: function() {\n      this.destroy();\n      return false;\n    },\n\n    /**\n     * Returns string representation of a group\n     * @return {String}\n     */\n    toString: function() {\n      return '#<fabric.ActiveSelection: (' + this.complexity() + ')>';\n    },\n\n    /**\n     * Decide if the object should cache or not. Create its own cache level\n     * objectCaching is a global flag, wins over everything\n     * needsItsOwnCache should be used when the object drawing method requires\n     * a cache step. None of the fabric classes requires it.\n     * Generally you do not cache objects in groups because the group outside is cached.\n     * @return {Boolean}\n     */\n    shouldCache: function() {\n      return false;\n    },\n\n    /**\n     * Check if this group or its parent group are caching, recursively up\n     * @return {Boolean}\n     */\n    isOnACache: function() {\n      return false;\n    },\n\n    /**\n     * Renders controls and borders for the object\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     * @param {Object} [styleOverride] properties to override the object style\n     * @param {Object} [childrenOverride] properties to override the children overrides\n     */\n    _renderControls: function(ctx, styleOverride, childrenOverride) {\n      ctx.save();\n      ctx.globalAlpha = this.isMoving ? this.borderOpacityWhenMoving : 1;\n      this.callSuper('_renderControls', ctx, styleOverride);\n      childrenOverride = childrenOverride || { };\n      if (typeof childrenOverride.hasControls === 'undefined') {\n        childrenOverride.hasControls = false;\n      }\n      childrenOverride.forActiveSelection = true;\n      for (var i = 0, len = this._objects.length; i < len; i++) {\n        this._objects[i]._renderControls(ctx, childrenOverride);\n      }\n      ctx.restore();\n    },\n  });\n\n  /**\n   * Returns {@link fabric.ActiveSelection} instance from an object representation\n   * @static\n   * @memberOf fabric.ActiveSelection\n   * @param {Object} object Object to create a group from\n   * @param {Function} [callback] Callback to invoke when an ActiveSelection instance is created\n   */\n  fabric.ActiveSelection.fromObject = function(object, callback) {\n    fabric.util.enlivenObjects(object.objects, function(enlivenedObjects) {\n      delete object.objects;\n      callback && callback(new fabric.ActiveSelection(enlivenedObjects, object, true));\n    });\n  };\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var extend = fabric.util.object.extend;\n\n  if (!global.fabric) {\n    global.fabric = { };\n  }\n\n  if (global.fabric.Image) {\n    fabric.warn('fabric.Image is already defined.');\n    return;\n  }\n\n  /**\n   * Image class\n   * @class fabric.Image\n   * @extends fabric.Object\n   * @tutorial {@link http://fabricjs.com/fabric-intro-part-1#images}\n   * @see {@link fabric.Image#initialize} for constructor definition\n   */\n  fabric.Image = fabric.util.createClass(fabric.Object, /** @lends fabric.Image.prototype */ {\n\n    /**\n     * Type of an object\n     * @type String\n     * @default\n     */\n    type: 'image',\n\n    /**\n     * Width of a stroke.\n     * For image quality a stroke multiple of 2 gives better results.\n     * @type Number\n     * @default\n     */\n    strokeWidth: 0,\n\n    /**\n     * When calling {@link fabric.Image.getSrc}, return value from element src with `element.getAttribute('src')`.\n     * This allows for relative urls as image src.\n     * @since 2.7.0\n     * @type Boolean\n     * @default\n     */\n    srcFromAttribute: false,\n\n    /**\n     * private\n     * contains last value of scaleX to detect\n     * if the Image got resized after the last Render\n     * @type Number\n     */\n    _lastScaleX: 1,\n\n    /**\n     * private\n     * contains last value of scaleY to detect\n     * if the Image got resized after the last Render\n     * @type Number\n     */\n    _lastScaleY: 1,\n\n    /**\n     * private\n     * contains last value of scaling applied by the apply filter chain\n     * @type Number\n     */\n    _filterScalingX: 1,\n\n    /**\n     * private\n     * contains last value of scaling applied by the apply filter chain\n     * @type Number\n     */\n    _filterScalingY: 1,\n\n    /**\n     * minimum scale factor under which any resizeFilter is triggered to resize the image\n     * 0 will disable the automatic resize. 1 will trigger automatically always.\n     * number bigger than 1 are not implemented yet.\n     * @type Number\n     */\n    minimumScaleTrigger: 0.5,\n\n    /**\n     * List of properties to consider when checking if\n     * state of an object is changed ({@link fabric.Object#hasStateChanged})\n     * as well as for history (undo/redo) purposes\n     * @type Array\n     */\n    stateProperties: fabric.Object.prototype.stateProperties.concat('cropX', 'cropY'),\n\n    /**\n     * List of properties to consider when checking if cache needs refresh\n     * Those properties are checked by statefullCache ON ( or lazy mode if we want ) or from single\n     * calls to Object.set(key, value). If the key is in this list, the object is marked as dirty\n     * and refreshed at the next render\n     * @type Array\n     */\n    cacheProperties: fabric.Object.prototype.cacheProperties.concat('cropX', 'cropY'),\n\n    /**\n     * key used to retrieve the texture representing this image\n     * @since 2.0.0\n     * @type String\n     * @default\n     */\n    cacheKey: '',\n\n    /**\n     * Image crop in pixels from original image size.\n     * @since 2.0.0\n     * @type Number\n     * @default\n     */\n    cropX: 0,\n\n    /**\n     * Image crop in pixels from original image size.\n     * @since 2.0.0\n     * @type Number\n     * @default\n     */\n    cropY: 0,\n\n    /**\n     * Indicates whether this canvas will use image smoothing when painting this image.\n     * Also influence if the cacheCanvas for this image uses imageSmoothing\n     * @since 4.0.0-beta.11\n     * @type Boolean\n     * @default\n     */\n    imageSmoothing: true,\n\n    /**\n     * Constructor\n     * Image can be initialized with any canvas drawable or a string.\n     * The string should be a url and will be loaded as an image.\n     * Canvas and Image element work out of the box, while videos require extra code to work.\n     * Please check video element events for seeking.\n     * @param {HTMLImageElement | HTMLCanvasElement | HTMLVideoElement | String} element Image element\n     * @param {Object} [options] Options object\n     * @param {function} [callback] callback function to call after eventual filters applied.\n     * @return {fabric.Image} thisArg\n     */\n    initialize: function(element, options) {\n      options || (options = { });\n      this.filters = [];\n      this.cacheKey = 'texture' + fabric.Object.__uid++;\n      this.callSuper('initialize', options);\n      this._initElement(element, options);\n    },\n\n    /**\n     * Returns image element which this instance if based on\n     * @return {HTMLImageElement} Image element\n     */\n    getElement: function() {\n      return this._element || {};\n    },\n\n    /**\n     * Sets image element for this instance to a specified one.\n     * If filters defined they are applied to new image.\n     * You might need to call `canvas.renderAll` and `object.setCoords` after replacing, to render new image and update controls area.\n     * @param {HTMLImageElement} element\n     * @param {Object} [options] Options object\n     * @return {fabric.Image} thisArg\n     * @chainable\n     */\n    setElement: function(element, options) {\n      this.removeTexture(this.cacheKey);\n      this.removeTexture(this.cacheKey + '_filtered');\n      this._element = element;\n      this._originalElement = element;\n      this._initConfig(options);\n      if (this.filters.length !== 0) {\n        this.applyFilters();\n      }\n      // resizeFilters work on the already filtered copy.\n      // we need to apply resizeFilters AFTER normal filters.\n      // applyResizeFilters is run more often than normal filters\n      // and is triggered by user interactions rather than dev code\n      if (this.resizeFilter) {\n        this.applyResizeFilters();\n      }\n      return this;\n    },\n\n    /**\n     * Delete a single texture if in webgl mode\n     */\n    removeTexture: function(key) {\n      var backend = fabric.filterBackend;\n      if (backend && backend.evictCachesForKey) {\n        backend.evictCachesForKey(key);\n      }\n    },\n\n    /**\n     * Delete textures, reference to elements and eventually JSDOM cleanup\n     */\n    dispose: function () {\n      this.callSuper('dispose');\n      this.removeTexture(this.cacheKey);\n      this.removeTexture(this.cacheKey + '_filtered');\n      this._cacheContext = undefined;\n      ['_originalElement', '_element', '_filteredEl', '_cacheCanvas'].forEach((function(element) {\n        fabric.util.cleanUpJsdomNode(this[element]);\n        this[element] = undefined;\n      }).bind(this));\n    },\n\n    /**\n     * Get the crossOrigin value (of the corresponding image element)\n     */\n    getCrossOrigin: function() {\n      return this._originalElement && (this._originalElement.crossOrigin || null);\n    },\n\n    /**\n     * Returns original size of an image\n     * @return {Object} Object with \"width\" and \"height\" properties\n     */\n    getOriginalSize: function() {\n      var element = this.getElement();\n      return {\n        width: element.naturalWidth || element.width,\n        height: element.naturalHeight || element.height\n      };\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _stroke: function(ctx) {\n      if (!this.stroke || this.strokeWidth === 0) {\n        return;\n      }\n      var w = this.width / 2, h = this.height / 2;\n      ctx.beginPath();\n      ctx.moveTo(-w, -h);\n      ctx.lineTo(w, -h);\n      ctx.lineTo(w, h);\n      ctx.lineTo(-w, h);\n      ctx.lineTo(-w, -h);\n      ctx.closePath();\n    },\n\n    /**\n     * Returns object representation of an instance\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {Object} Object representation of an instance\n     */\n    toObject: function(propertiesToInclude) {\n      var filters = [];\n\n      this.filters.forEach(function(filterObj) {\n        if (filterObj) {\n          filters.push(filterObj.toObject());\n        }\n      });\n      var object = extend(\n        this.callSuper(\n          'toObject',\n          ['cropX', 'cropY'].concat(propertiesToInclude)\n        ), {\n          src: this.getSrc(),\n          crossOrigin: this.getCrossOrigin(),\n          filters: filters,\n        });\n      if (this.resizeFilter) {\n        object.resizeFilter = this.resizeFilter.toObject();\n      }\n      return object;\n    },\n\n    /**\n     * Returns true if an image has crop applied, inspecting values of cropX,cropY,width,height.\n     * @return {Boolean}\n     */\n    hasCrop: function() {\n      return this.cropX || this.cropY || this.width < this._element.width || this.height < this._element.height;\n    },\n\n    /* _TO_SVG_START_ */\n    /**\n     * Returns svg representation of an instance\n     * @return {Array} an array of strings with the specific svg representation\n     * of the instance\n     */\n    _toSVG: function() {\n      var svgString = [], imageMarkup = [], strokeSvg, element = this._element,\n          x = -this.width / 2, y = -this.height / 2, clipPath = '', imageRendering = '';\n      if (!element) {\n        return [];\n      }\n      if (this.hasCrop()) {\n        var clipPathId = fabric.Object.__uid++;\n        svgString.push(\n          '<clipPath id=\"imageCrop_' + clipPathId + '\">\\n',\n          '\\t<rect x=\"' + x + '\" y=\"' + y + '\" width=\"' + this.width + '\" height=\"' + this.height + '\" />\\n',\n          '</clipPath>\\n'\n        );\n        clipPath = ' clip-path=\"url(#imageCrop_' + clipPathId + ')\" ';\n      }\n      if (!this.imageSmoothing) {\n        imageRendering = '\" image-rendering=\"optimizeSpeed';\n      }\n      imageMarkup.push('\\t<image ', 'COMMON_PARTS', 'xlink:href=\"', this.getSvgSrc(true),\n        '\" x=\"', x - this.cropX, '\" y=\"', y - this.cropY,\n        // we're essentially moving origin of transformation from top/left corner to the center of the shape\n        // by wrapping it in container <g> element with actual transformation, then offsetting object to the top/left\n        // so that object's center aligns with container's left/top\n        '\" width=\"', element.width || element.naturalWidth,\n        '\" height=\"', element.height || element.height,\n        imageRendering,\n        '\"', clipPath,\n        '></image>\\n');\n\n      if (this.stroke || this.strokeDashArray) {\n        var origFill = this.fill;\n        this.fill = null;\n        strokeSvg = [\n          '\\t<rect ',\n          'x=\"', x, '\" y=\"', y,\n          '\" width=\"', this.width, '\" height=\"', this.height,\n          '\" style=\"', this.getSvgStyles(),\n          '\"/>\\n'\n        ];\n        this.fill = origFill;\n      }\n      if (this.paintFirst !== 'fill') {\n        svgString = svgString.concat(strokeSvg, imageMarkup);\n      }\n      else {\n        svgString = svgString.concat(imageMarkup, strokeSvg);\n      }\n      return svgString;\n    },\n    /* _TO_SVG_END_ */\n\n    /**\n     * Returns source of an image\n     * @param {Boolean} filtered indicates if the src is needed for svg\n     * @return {String} Source of an image\n     */\n    getSrc: function(filtered) {\n      var element = filtered ? this._element : this._originalElement;\n      if (element) {\n        if (element.toDataURL) {\n          return element.toDataURL();\n        }\n\n        if (this.srcFromAttribute) {\n          return element.getAttribute('src');\n        }\n        else {\n          return element.src;\n        }\n      }\n      else {\n        return this.src || '';\n      }\n    },\n\n    /**\n     * Sets source of an image\n     * @param {String} src Source string (URL)\n     * @param {Function} [callback] Callback is invoked when image has been loaded (and all filters have been applied)\n     * @param {Object} [options] Options object\n     * @param {String} [options.crossOrigin] crossOrigin value (one of \"\", \"anonymous\", \"use-credentials\")\n     * @see https://developer.mozilla.org/en-US/docs/HTML/CORS_settings_attributes\n     * @return {fabric.Image} thisArg\n     * @chainable\n     */\n    setSrc: function(src, callback, options) {\n      fabric.util.loadImage(src, function(img, isError) {\n        this.setElement(img, options);\n        this._setWidthHeight();\n        callback && callback(this, isError);\n      }, this, options && options.crossOrigin);\n      return this;\n    },\n\n    /**\n     * Returns string representation of an instance\n     * @return {String} String representation of an instance\n     */\n    toString: function() {\n      return '#<fabric.Image: { src: \"' + this.getSrc() + '\" }>';\n    },\n\n    applyResizeFilters: function() {\n      var filter = this.resizeFilter,\n          minimumScale = this.minimumScaleTrigger,\n          objectScale = this.getTotalObjectScaling(),\n          scaleX = objectScale.scaleX,\n          scaleY = objectScale.scaleY,\n          elementToFilter = this._filteredEl || this._originalElement;\n      if (this.group) {\n        this.set('dirty', true);\n      }\n      if (!filter || (scaleX > minimumScale && scaleY > minimumScale)) {\n        this._element = elementToFilter;\n        this._filterScalingX = 1;\n        this._filterScalingY = 1;\n        this._lastScaleX = scaleX;\n        this._lastScaleY = scaleY;\n        return;\n      }\n      if (!fabric.filterBackend) {\n        fabric.filterBackend = fabric.initFilterBackend();\n      }\n      var canvasEl = fabric.util.createCanvasElement(),\n          cacheKey = this._filteredEl ? (this.cacheKey + '_filtered') : this.cacheKey,\n          sourceWidth = elementToFilter.width, sourceHeight = elementToFilter.height;\n      canvasEl.width = sourceWidth;\n      canvasEl.height = sourceHeight;\n      this._element = canvasEl;\n      this._lastScaleX = filter.scaleX = scaleX;\n      this._lastScaleY = filter.scaleY = scaleY;\n      fabric.filterBackend.applyFilters(\n        [filter], elementToFilter, sourceWidth, sourceHeight, this._element, cacheKey);\n      this._filterScalingX = canvasEl.width / this._originalElement.width;\n      this._filterScalingY = canvasEl.height / this._originalElement.height;\n    },\n\n    /**\n     * Applies filters assigned to this image (from \"filters\" array) or from filter param\n     * @method applyFilters\n     * @param {Array} filters to be applied\n     * @param {Boolean} forResizing specify if the filter operation is a resize operation\n     * @return {thisArg} return the fabric.Image object\n     * @chainable\n     */\n    applyFilters: function(filters) {\n\n      filters = filters || this.filters || [];\n      filters = filters.filter(function(filter) { return filter && !filter.isNeutralState(); });\n      this.set('dirty', true);\n\n      // needs to clear out or WEBGL will not resize correctly\n      this.removeTexture(this.cacheKey + '_filtered');\n\n      if (filters.length === 0) {\n        this._element = this._originalElement;\n        this._filteredEl = null;\n        this._filterScalingX = 1;\n        this._filterScalingY = 1;\n        return this;\n      }\n\n      var imgElement = this._originalElement,\n          sourceWidth = imgElement.naturalWidth || imgElement.width,\n          sourceHeight = imgElement.naturalHeight || imgElement.height;\n\n      if (this._element === this._originalElement) {\n        // if the element is the same we need to create a new element\n        var canvasEl = fabric.util.createCanvasElement();\n        canvasEl.width = sourceWidth;\n        canvasEl.height = sourceHeight;\n        this._element = canvasEl;\n        this._filteredEl = canvasEl;\n      }\n      else {\n        // clear the existing element to get new filter data\n        // also dereference the eventual resized _element\n        this._element = this._filteredEl;\n        this._filteredEl.getContext('2d').clearRect(0, 0, sourceWidth, sourceHeight);\n        // we also need to resize again at next renderAll, so remove saved _lastScaleX/Y\n        this._lastScaleX = 1;\n        this._lastScaleY = 1;\n      }\n      if (!fabric.filterBackend) {\n        fabric.filterBackend = fabric.initFilterBackend();\n      }\n      fabric.filterBackend.applyFilters(\n        filters, this._originalElement, sourceWidth, sourceHeight, this._element, this.cacheKey);\n      if (this._originalElement.width !== this._element.width ||\n        this._originalElement.height !== this._element.height) {\n        this._filterScalingX = this._element.width / this._originalElement.width;\n        this._filterScalingY = this._element.height / this._originalElement.height;\n      }\n      return this;\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _render: function(ctx) {\n      fabric.util.setImageSmoothing(ctx, this.imageSmoothing);\n      if (this.isMoving !== true && this.resizeFilter && this._needsResize()) {\n        this.applyResizeFilters();\n      }\n      this._stroke(ctx);\n      this._renderPaintInOrder(ctx);\n    },\n\n    /**\n     * Paint the cached copy of the object on the target context.\n     * it will set the imageSmoothing for the draw operation\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    drawCacheOnCanvas: function(ctx) {\n      fabric.util.setImageSmoothing(ctx, this.imageSmoothing);\n      fabric.Object.prototype.drawCacheOnCanvas.call(this, ctx);\n    },\n\n    /**\n     * Decide if the object should cache or not. Create its own cache level\n     * needsItsOwnCache should be used when the object drawing method requires\n     * a cache step. None of the fabric classes requires it.\n     * Generally you do not cache objects in groups because the group outside is cached.\n     * This is the special image version where we would like to avoid caching where possible.\n     * Essentially images do not benefit from caching. They may require caching, and in that\n     * case we do it. Also caching an image usually ends in a loss of details.\n     * A full performance audit should be done.\n     * @return {Boolean}\n     */\n    shouldCache: function() {\n      return this.needsItsOwnCache();\n    },\n\n    _renderFill: function(ctx) {\n      var elementToDraw = this._element;\n      if (!elementToDraw) {\n        return;\n      }\n      var scaleX = this._filterScalingX, scaleY = this._filterScalingY,\n          w = this.width, h = this.height, min = Math.min, max = Math.max,\n          // crop values cannot be lesser than 0.\n          cropX = max(this.cropX, 0), cropY = max(this.cropY, 0),\n          elWidth = elementToDraw.naturalWidth || elementToDraw.width,\n          elHeight = elementToDraw.naturalHeight || elementToDraw.height,\n          sX = cropX * scaleX,\n          sY = cropY * scaleY,\n          // the width height cannot exceed element width/height, starting from the crop offset.\n          sW = min(w * scaleX, elWidth - sX),\n          sH = min(h * scaleY, elHeight - sY),\n          x = -w / 2, y = -h / 2,\n          maxDestW = min(w, elWidth / scaleX - cropX),\n          maxDestH = min(h, elHeight / scaleY - cropY);\n\n      elementToDraw && ctx.drawImage(elementToDraw, sX, sY, sW, sH, x, y, maxDestW, maxDestH);\n    },\n\n    /**\n     * needed to check if image needs resize\n     * @private\n     */\n    _needsResize: function() {\n      var scale = this.getTotalObjectScaling();\n      return (scale.scaleX !== this._lastScaleX || scale.scaleY !== this._lastScaleY);\n    },\n\n    /**\n     * @private\n     */\n    _resetWidthHeight: function() {\n      this.set(this.getOriginalSize());\n    },\n\n    /**\n     * The Image class's initialization method. This method is automatically\n     * called by the constructor.\n     * @private\n     * @param {HTMLImageElement|String} element The element representing the image\n     * @param {Object} [options] Options object\n     */\n    _initElement: function(element, options) {\n      this.setElement(fabric.util.getById(element), options);\n      fabric.util.addClass(this.getElement(), fabric.Image.CSS_CANVAS);\n    },\n\n    /**\n     * @private\n     * @param {Object} [options] Options object\n     */\n    _initConfig: function(options) {\n      options || (options = { });\n      this.setOptions(options);\n      this._setWidthHeight(options);\n    },\n\n    /**\n     * @private\n     * @param {Array} filters to be initialized\n     * @param {Function} callback Callback to invoke when all fabric.Image.filters instances are created\n     */\n    _initFilters: function(filters, callback) {\n      if (filters && filters.length) {\n        fabric.util.enlivenObjects(filters, function(enlivenedObjects) {\n          callback && callback(enlivenedObjects);\n        }, 'fabric.Image.filters');\n      }\n      else {\n        callback && callback();\n      }\n    },\n\n    /**\n     * @private\n     * Set the width and the height of the image object, using the element or the\n     * options.\n     * @param {Object} [options] Object with width/height properties\n     */\n    _setWidthHeight: function(options) {\n      options || (options = { });\n      var el = this.getElement();\n      this.width = options.width || el.naturalWidth || el.width || 0;\n      this.height = options.height || el.naturalHeight || el.height || 0;\n    },\n\n    /**\n     * Calculate offset for center and scale factor for the image in order to respect\n     * the preserveAspectRatio attribute\n     * @private\n     * @return {Object}\n     */\n    parsePreserveAspectRatioAttribute: function() {\n      var pAR = fabric.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio || ''),\n          rWidth = this._element.width, rHeight = this._element.height,\n          scaleX = 1, scaleY = 1, offsetLeft = 0, offsetTop = 0, cropX = 0, cropY = 0,\n          offset, pWidth = this.width, pHeight = this.height, parsedAttributes = { width: pWidth, height: pHeight };\n      if (pAR && (pAR.alignX !== 'none' || pAR.alignY !== 'none')) {\n        if (pAR.meetOrSlice === 'meet') {\n          scaleX = scaleY = fabric.util.findScaleToFit(this._element, parsedAttributes);\n          offset = (pWidth - rWidth * scaleX) / 2;\n          if (pAR.alignX === 'Min') {\n            offsetLeft = -offset;\n          }\n          if (pAR.alignX === 'Max') {\n            offsetLeft = offset;\n          }\n          offset = (pHeight - rHeight * scaleY) / 2;\n          if (pAR.alignY === 'Min') {\n            offsetTop = -offset;\n          }\n          if (pAR.alignY === 'Max') {\n            offsetTop = offset;\n          }\n        }\n        if (pAR.meetOrSlice === 'slice') {\n          scaleX = scaleY = fabric.util.findScaleToCover(this._element, parsedAttributes);\n          offset = rWidth - pWidth / scaleX;\n          if (pAR.alignX === 'Mid') {\n            cropX = offset / 2;\n          }\n          if (pAR.alignX === 'Max') {\n            cropX = offset;\n          }\n          offset = rHeight - pHeight / scaleY;\n          if (pAR.alignY === 'Mid') {\n            cropY = offset / 2;\n          }\n          if (pAR.alignY === 'Max') {\n            cropY = offset;\n          }\n          rWidth = pWidth / scaleX;\n          rHeight = pHeight / scaleY;\n        }\n      }\n      else {\n        scaleX = pWidth / rWidth;\n        scaleY = pHeight / rHeight;\n      }\n      return {\n        width: rWidth,\n        height: rHeight,\n        scaleX: scaleX,\n        scaleY: scaleY,\n        offsetLeft: offsetLeft,\n        offsetTop: offsetTop,\n        cropX: cropX,\n        cropY: cropY\n      };\n    }\n  });\n\n  /**\n   * Default CSS class name for canvas\n   * @static\n   * @type String\n   * @default\n   */\n  fabric.Image.CSS_CANVAS = 'canvas-img';\n\n  /**\n   * Alias for getSrc\n   * @static\n   */\n  fabric.Image.prototype.getSvgSrc = fabric.Image.prototype.getSrc;\n\n  /**\n   * Creates an instance of fabric.Image from its object representation\n   * @static\n   * @param {Object} object Object to create an instance from\n   * @param {Function} callback Callback to invoke when an image instance is created\n   */\n  fabric.Image.fromObject = function(_object, callback) {\n    var object = fabric.util.object.clone(_object);\n    fabric.util.loadImage(object.src, function(img, isError) {\n      if (isError) {\n        callback && callback(null, true);\n        return;\n      }\n      fabric.Image.prototype._initFilters.call(object, object.filters, function(filters) {\n        object.filters = filters || [];\n        fabric.Image.prototype._initFilters.call(object, [object.resizeFilter], function(resizeFilters) {\n          object.resizeFilter = resizeFilters[0];\n          fabric.util.enlivenObjectEnlivables(object, object, function () {\n            var image = new fabric.Image(img, object);\n            callback(image, false);\n          });\n        });\n      });\n    }, null, object.crossOrigin);\n  };\n\n  /**\n   * Creates an instance of fabric.Image from an URL string\n   * @static\n   * @param {String} url URL to create an image from\n   * @param {Function} [callback] Callback to invoke when image is created (newly created image is passed as a first argument). Second argument is a boolean indicating if an error occurred or not.\n   * @param {Object} [imgOptions] Options object\n   */\n  fabric.Image.fromURL = function(url, callback, imgOptions) {\n    fabric.util.loadImage(url, function(img, isError) {\n      callback && callback(new fabric.Image(img, imgOptions), isError);\n    }, null, imgOptions && imgOptions.crossOrigin);\n  };\n\n  /* _FROM_SVG_START_ */\n  /**\n   * List of attribute names to account for when parsing SVG element (used by {@link fabric.Image.fromElement})\n   * @static\n   * @see {@link http://www.w3.org/TR/SVG/struct.html#ImageElement}\n   */\n  fabric.Image.ATTRIBUTE_NAMES =\n    fabric.SHARED_ATTRIBUTES.concat(\n      'x y width height preserveAspectRatio xlink:href crossOrigin image-rendering'.split(' ')\n    );\n\n  /**\n   * Returns {@link fabric.Image} instance from an SVG element\n   * @static\n   * @param {SVGElement} element Element to parse\n   * @param {Object} [options] Options object\n   * @param {Function} callback Callback to execute when fabric.Image object is created\n   * @return {fabric.Image} Instance of fabric.Image\n   */\n  fabric.Image.fromElement = function(element, callback, options) {\n    var parsedAttributes = fabric.parseAttributes(element, fabric.Image.ATTRIBUTE_NAMES);\n    fabric.Image.fromURL(parsedAttributes['xlink:href'], callback,\n      extend((options ? fabric.util.object.clone(options) : { }), parsedAttributes));\n  };\n  /* _FROM_SVG_END_ */\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\nfabric.util.object.extend(fabric.Object.prototype, /** @lends fabric.Object.prototype */ {\n\n  /**\n   * @private\n   * @return {Number} angle value\n   */\n  _getAngleValueForStraighten: function() {\n    var angle = this.angle % 360;\n    if (angle > 0) {\n      return Math.round((angle - 1) / 90) * 90;\n    }\n    return Math.round(angle / 90) * 90;\n  },\n\n  /**\n   * Straightens an object (rotating it from current angle to one of 0, 90, 180, 270, etc. depending on which is closer)\n   * @return {fabric.Object} thisArg\n   * @chainable\n   */\n  straighten: function() {\n    return this.rotate(this._getAngleValueForStraighten());\n  },\n\n  /**\n   * Same as {@link fabric.Object.prototype.straighten} but with animation\n   * @param {Object} callbacks Object with callback functions\n   * @param {Function} [callbacks.onComplete] Invoked on completion\n   * @param {Function} [callbacks.onChange] Invoked on every step of animation\n   * @return {fabric.Object} thisArg\n   */\n  fxStraighten: function(callbacks) {\n    callbacks = callbacks || { };\n\n    var empty = function() { },\n        onComplete = callbacks.onComplete || empty,\n        onChange = callbacks.onChange || empty,\n        _this = this;\n\n    return fabric.util.animate({\n      target: this,\n      startValue: this.get('angle'),\n      endValue: this._getAngleValueForStraighten(),\n      duration: this.FX_DURATION,\n      onChange: function(value) {\n        _this.rotate(value);\n        onChange();\n      },\n      onComplete: function() {\n        _this.setCoords();\n        onComplete();\n      },\n    });\n  }\n});\n\nfabric.util.object.extend(fabric.StaticCanvas.prototype, /** @lends fabric.StaticCanvas.prototype */ {\n\n  /**\n   * Straightens object, then rerenders canvas\n   * @param {fabric.Object} object Object to straighten\n   * @return {fabric.Canvas} thisArg\n   * @chainable\n   */\n  straightenObject: function (object) {\n    object.straighten();\n    this.requestRenderAll();\n    return this;\n  },\n\n  /**\n   * Same as {@link fabric.Canvas.prototype.straightenObject}, but animated\n   * @param {fabric.Object} object Object to straighten\n   * @return {fabric.Canvas} thisArg\n   */\n  fxStraightenObject: function (object) {\n    return object.fxStraighten({\n      onChange: this.requestRenderAllBound\n    });\n  }\n});\n\n\n(function() {\n\n  'use strict';\n\n  /**\n   * Tests if webgl supports certain precision\n   * @param {WebGL} Canvas WebGL context to test on\n   * @param {String} Precision to test can be any of following: 'lowp', 'mediump', 'highp'\n   * @returns {Boolean} Whether the user's browser WebGL supports given precision.\n   */\n  function testPrecision(gl, precision){\n    var fragmentSource = 'precision ' + precision + ' float;\\nvoid main(){}';\n    var fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);\n    gl.shaderSource(fragmentShader, fragmentSource);\n    gl.compileShader(fragmentShader);\n    if (!gl.getShaderParameter(fragmentShader, gl.COMPILE_STATUS)) {\n      return false;\n    }\n    return true;\n  }\n\n  /**\n   * Indicate whether this filtering backend is supported by the user's browser.\n   * @param {Number} tileSize check if the tileSize is supported\n   * @returns {Boolean} Whether the user's browser supports WebGL.\n   */\n  fabric.isWebglSupported = function(tileSize) {\n    if (fabric.isLikelyNode) {\n      return false;\n    }\n    tileSize = tileSize || fabric.WebglFilterBackend.prototype.tileSize;\n    var canvas = document.createElement('canvas');\n    var gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');\n    var isSupported = false;\n    // eslint-disable-next-line\n    if (gl) {\n      fabric.maxTextureSize = gl.getParameter(gl.MAX_TEXTURE_SIZE);\n      isSupported = fabric.maxTextureSize >= tileSize;\n      var precisions = ['highp', 'mediump', 'lowp'];\n      for (var i = 0; i < 3; i++){\n        if (testPrecision(gl, precisions[i])){\n          fabric.webGlPrecision = precisions[i];\n          break;\n        };\n      }\n    }\n    this.isSupported = isSupported;\n    return isSupported;\n  };\n\n  fabric.WebglFilterBackend = WebglFilterBackend;\n\n  /**\n   * WebGL filter backend.\n   */\n  function WebglFilterBackend(options) {\n    if (options && options.tileSize) {\n      this.tileSize = options.tileSize;\n    }\n    this.setupGLContext(this.tileSize, this.tileSize);\n    this.captureGPUInfo();\n  };\n\n  WebglFilterBackend.prototype = /** @lends fabric.WebglFilterBackend.prototype */ {\n\n    tileSize: 2048,\n\n    /**\n     * Experimental. This object is a sort of repository of help layers used to avoid\n     * of recreating them during frequent filtering. If you are previewing a filter with\n     * a slider you probably do not want to create help layers every filter step.\n     * in this object there will be appended some canvases, created once, resized sometimes\n     * cleared never. Clearing is left to the developer.\n     **/\n    resources: {\n\n    },\n\n    /**\n     * Setup a WebGL context suitable for filtering, and bind any needed event handlers.\n     */\n    setupGLContext: function(width, height) {\n      this.dispose();\n      this.createWebGLCanvas(width, height);\n      // eslint-disable-next-line\n      this.aPosition = new Float32Array([0, 0, 0, 1, 1, 0, 1, 1]);\n      this.chooseFastestCopyGLTo2DMethod(width, height);\n    },\n\n    /**\n     * Pick a method to copy data from GL context to 2d canvas.  In some browsers using\n     * putImageData is faster than drawImage for that specific operation.\n     */\n    chooseFastestCopyGLTo2DMethod: function(width, height) {\n      var canMeasurePerf = typeof window.performance !== 'undefined', canUseImageData;\n      try {\n        new ImageData(1, 1);\n        canUseImageData = true;\n      }\n      catch (e) {\n        canUseImageData = false;\n      }\n      // eslint-disable-next-line no-undef\n      var canUseArrayBuffer = typeof ArrayBuffer !== 'undefined';\n      // eslint-disable-next-line no-undef\n      var canUseUint8Clamped = typeof Uint8ClampedArray !== 'undefined';\n\n      if (!(canMeasurePerf && canUseImageData && canUseArrayBuffer && canUseUint8Clamped)) {\n        return;\n      }\n\n      var targetCanvas = fabric.util.createCanvasElement();\n      // eslint-disable-next-line no-undef\n      var imageBuffer = new ArrayBuffer(width * height * 4);\n      if (fabric.forceGLPutImageData) {\n        this.imageBuffer = imageBuffer;\n        this.copyGLTo2D = copyGLTo2DPutImageData;\n        return;\n      }\n      var testContext = {\n        imageBuffer: imageBuffer,\n        destinationWidth: width,\n        destinationHeight: height,\n        targetCanvas: targetCanvas\n      };\n      var startTime, drawImageTime, putImageDataTime;\n      targetCanvas.width = width;\n      targetCanvas.height = height;\n\n      startTime = window.performance.now();\n      copyGLTo2DDrawImage.call(testContext, this.gl, testContext);\n      drawImageTime = window.performance.now() - startTime;\n\n      startTime = window.performance.now();\n      copyGLTo2DPutImageData.call(testContext, this.gl, testContext);\n      putImageDataTime = window.performance.now() - startTime;\n\n      if (drawImageTime > putImageDataTime) {\n        this.imageBuffer = imageBuffer;\n        this.copyGLTo2D = copyGLTo2DPutImageData;\n      }\n      else {\n        this.copyGLTo2D = copyGLTo2DDrawImage;\n      }\n    },\n\n    /**\n     * Create a canvas element and associated WebGL context and attaches them as\n     * class properties to the GLFilterBackend class.\n     */\n    createWebGLCanvas: function(width, height) {\n      var canvas = fabric.util.createCanvasElement();\n      canvas.width = width;\n      canvas.height = height;\n      var glOptions = {\n            alpha: true,\n            premultipliedAlpha: false,\n            depth: false,\n            stencil: false,\n            antialias: false\n          },\n          gl = canvas.getContext('webgl', glOptions);\n      if (!gl) {\n        gl = canvas.getContext('experimental-webgl', glOptions);\n      }\n      if (!gl) {\n        return;\n      }\n      gl.clearColor(0, 0, 0, 0);\n      // this canvas can fire webglcontextlost and webglcontextrestored\n      this.canvas = canvas;\n      this.gl = gl;\n    },\n\n    /**\n     * Attempts to apply the requested filters to the source provided, drawing the filtered output\n     * to the provided target canvas.\n     *\n     * @param {Array} filters The filters to apply.\n     * @param {HTMLImageElement|HTMLCanvasElement} source The source to be filtered.\n     * @param {Number} width The width of the source input.\n     * @param {Number} height The height of the source input.\n     * @param {HTMLCanvasElement} targetCanvas The destination for filtered output to be drawn.\n     * @param {String|undefined} cacheKey A key used to cache resources related to the source. If\n     * omitted, caching will be skipped.\n     */\n    applyFilters: function(filters, source, width, height, targetCanvas, cacheKey) {\n      var gl = this.gl;\n      var cachedTexture;\n      if (cacheKey) {\n        cachedTexture = this.getCachedTexture(cacheKey, source);\n      }\n      var pipelineState = {\n        originalWidth: source.width || source.originalWidth,\n        originalHeight: source.height || source.originalHeight,\n        sourceWidth: width,\n        sourceHeight: height,\n        destinationWidth: width,\n        destinationHeight: height,\n        context: gl,\n        sourceTexture: this.createTexture(gl, width, height, !cachedTexture && source),\n        targetTexture: this.createTexture(gl, width, height),\n        originalTexture: cachedTexture ||\n          this.createTexture(gl, width, height, !cachedTexture && source),\n        passes: filters.length,\n        webgl: true,\n        aPosition: this.aPosition,\n        programCache: this.programCache,\n        pass: 0,\n        filterBackend: this,\n        targetCanvas: targetCanvas\n      };\n      var tempFbo = gl.createFramebuffer();\n      gl.bindFramebuffer(gl.FRAMEBUFFER, tempFbo);\n      filters.forEach(function(filter) { filter && filter.applyTo(pipelineState); });\n      resizeCanvasIfNeeded(pipelineState);\n      this.copyGLTo2D(gl, pipelineState);\n      gl.bindTexture(gl.TEXTURE_2D, null);\n      gl.deleteTexture(pipelineState.sourceTexture);\n      gl.deleteTexture(pipelineState.targetTexture);\n      gl.deleteFramebuffer(tempFbo);\n      targetCanvas.getContext('2d').setTransform(1, 0, 0, 1, 0, 0);\n      return pipelineState;\n    },\n\n    /**\n     * Detach event listeners, remove references, and clean up caches.\n     */\n    dispose: function() {\n      if (this.canvas) {\n        this.canvas = null;\n        this.gl = null;\n      }\n      this.clearWebGLCaches();\n    },\n\n    /**\n     * Wipe out WebGL-related caches.\n     */\n    clearWebGLCaches: function() {\n      this.programCache = {};\n      this.textureCache = {};\n    },\n\n    /**\n     * Create a WebGL texture object.\n     *\n     * Accepts specific dimensions to initialize the texture to or a source image.\n     *\n     * @param {WebGLRenderingContext} gl The GL context to use for creating the texture.\n     * @param {Number} width The width to initialize the texture at.\n     * @param {Number} height The height to initialize the texture.\n     * @param {HTMLImageElement|HTMLCanvasElement} textureImageSource A source for the texture data.\n     * @returns {WebGLTexture}\n     */\n    createTexture: function(gl, width, height, textureImageSource) {\n      var texture = gl.createTexture();\n      gl.bindTexture(gl.TEXTURE_2D, texture);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n      if (textureImageSource) {\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, textureImageSource);\n      }\n      else {\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, width, height, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n      }\n      return texture;\n    },\n\n    /**\n     * Can be optionally used to get a texture from the cache array\n     *\n     * If an existing texture is not found, a new texture is created and cached.\n     *\n     * @param {String} uniqueId A cache key to use to find an existing texture.\n     * @param {HTMLImageElement|HTMLCanvasElement} textureImageSource A source to use to create the\n     * texture cache entry if one does not already exist.\n     */\n    getCachedTexture: function(uniqueId, textureImageSource) {\n      if (this.textureCache[uniqueId]) {\n        return this.textureCache[uniqueId];\n      }\n      else {\n        var texture = this.createTexture(\n          this.gl, textureImageSource.width, textureImageSource.height, textureImageSource);\n        this.textureCache[uniqueId] = texture;\n        return texture;\n      }\n    },\n\n    /**\n     * Clear out cached resources related to a source image that has been\n     * filtered previously.\n     *\n     * @param {String} cacheKey The cache key provided when the source image was filtered.\n     */\n    evictCachesForKey: function(cacheKey) {\n      if (this.textureCache[cacheKey]) {\n        this.gl.deleteTexture(this.textureCache[cacheKey]);\n        delete this.textureCache[cacheKey];\n      }\n    },\n\n    copyGLTo2D: copyGLTo2DDrawImage,\n\n    /**\n     * Attempt to extract GPU information strings from a WebGL context.\n     *\n     * Useful information when debugging or blacklisting specific GPUs.\n     *\n     * @returns {Object} A GPU info object with renderer and vendor strings.\n     */\n    captureGPUInfo: function() {\n      if (this.gpuInfo) {\n        return this.gpuInfo;\n      }\n      var gl = this.gl, gpuInfo = { renderer: '', vendor: '' };\n      if (!gl) {\n        return gpuInfo;\n      }\n      var ext = gl.getExtension('WEBGL_debug_renderer_info');\n      if (ext) {\n        var renderer = gl.getParameter(ext.UNMASKED_RENDERER_WEBGL);\n        var vendor = gl.getParameter(ext.UNMASKED_VENDOR_WEBGL);\n        if (renderer) {\n          gpuInfo.renderer = renderer.toLowerCase();\n        }\n        if (vendor) {\n          gpuInfo.vendor = vendor.toLowerCase();\n        }\n      }\n      this.gpuInfo = gpuInfo;\n      return gpuInfo;\n    },\n  };\n})();\n\nfunction resizeCanvasIfNeeded(pipelineState) {\n  var targetCanvas = pipelineState.targetCanvas,\n      width = targetCanvas.width, height = targetCanvas.height,\n      dWidth = pipelineState.destinationWidth,\n      dHeight = pipelineState.destinationHeight;\n\n  if (width !== dWidth || height !== dHeight) {\n    targetCanvas.width = dWidth;\n    targetCanvas.height = dHeight;\n  }\n}\n\n/**\n * Copy an input WebGL canvas on to an output 2D canvas.\n *\n * The WebGL canvas is assumed to be upside down, with the top-left pixel of the\n * desired output image appearing in the bottom-left corner of the WebGL canvas.\n *\n * @param {WebGLRenderingContext} sourceContext The WebGL context to copy from.\n * @param {HTMLCanvasElement} targetCanvas The 2D target canvas to copy on to.\n * @param {Object} pipelineState The 2D target canvas to copy on to.\n */\nfunction copyGLTo2DDrawImage(gl, pipelineState) {\n  var glCanvas = gl.canvas, targetCanvas = pipelineState.targetCanvas,\n      ctx = targetCanvas.getContext('2d');\n  ctx.translate(0, targetCanvas.height); // move it down again\n  ctx.scale(1, -1); // vertical flip\n  // where is my image on the big glcanvas?\n  var sourceY = glCanvas.height - targetCanvas.height;\n  ctx.drawImage(glCanvas, 0, sourceY, targetCanvas.width, targetCanvas.height, 0, 0,\n    targetCanvas.width, targetCanvas.height);\n}\n\n/**\n * Copy an input WebGL canvas on to an output 2D canvas using 2d canvas' putImageData\n * API. Measurably faster than using ctx.drawImage in Firefox (version 54 on OSX Sierra).\n *\n * @param {WebGLRenderingContext} sourceContext The WebGL context to copy from.\n * @param {HTMLCanvasElement} targetCanvas The 2D target canvas to copy on to.\n * @param {Object} pipelineState The 2D target canvas to copy on to.\n */\nfunction copyGLTo2DPutImageData(gl, pipelineState) {\n  var targetCanvas = pipelineState.targetCanvas, ctx = targetCanvas.getContext('2d'),\n      dWidth = pipelineState.destinationWidth,\n      dHeight = pipelineState.destinationHeight,\n      numBytes = dWidth * dHeight * 4;\n\n  // eslint-disable-next-line no-undef\n  var u8 = new Uint8Array(this.imageBuffer, 0, numBytes);\n  // eslint-disable-next-line no-undef\n  var u8Clamped = new Uint8ClampedArray(this.imageBuffer, 0, numBytes);\n\n  gl.readPixels(0, 0, dWidth, dHeight, gl.RGBA, gl.UNSIGNED_BYTE, u8);\n  var imgData = new ImageData(u8Clamped, dWidth, dHeight);\n  ctx.putImageData(imgData, 0, 0);\n}\n\n\n(function() {\n\n  'use strict';\n\n  var noop = function() {};\n\n  fabric.Canvas2dFilterBackend = Canvas2dFilterBackend;\n\n  /**\n   * Canvas 2D filter backend.\n   */\n  function Canvas2dFilterBackend() {};\n\n  Canvas2dFilterBackend.prototype = /** @lends fabric.Canvas2dFilterBackend.prototype */ {\n    evictCachesForKey: noop,\n    dispose: noop,\n    clearWebGLCaches: noop,\n\n    /**\n     * Experimental. This object is a sort of repository of help layers used to avoid\n     * of recreating them during frequent filtering. If you are previewing a filter with\n     * a slider you probably do not want to create help layers every filter step.\n     * in this object there will be appended some canvases, created once, resized sometimes\n     * cleared never. Clearing is left to the developer.\n     **/\n    resources: {\n\n    },\n\n    /**\n     * Apply a set of filters against a source image and draw the filtered output\n     * to the provided destination canvas.\n     *\n     * @param {EnhancedFilter} filters The filter to apply.\n     * @param {HTMLImageElement|HTMLCanvasElement} sourceElement The source to be filtered.\n     * @param {Number} sourceWidth The width of the source input.\n     * @param {Number} sourceHeight The height of the source input.\n     * @param {HTMLCanvasElement} targetCanvas The destination for filtered output to be drawn.\n     */\n    applyFilters: function(filters, sourceElement, sourceWidth, sourceHeight, targetCanvas) {\n      var ctx = targetCanvas.getContext('2d');\n      ctx.drawImage(sourceElement, 0, 0, sourceWidth, sourceHeight);\n      var imageData = ctx.getImageData(0, 0, sourceWidth, sourceHeight);\n      var originalImageData = ctx.getImageData(0, 0, sourceWidth, sourceHeight);\n      var pipelineState = {\n        sourceWidth: sourceWidth,\n        sourceHeight: sourceHeight,\n        imageData: imageData,\n        originalEl: sourceElement,\n        originalImageData: originalImageData,\n        canvasEl: targetCanvas,\n        ctx: ctx,\n        filterBackend: this,\n      };\n      filters.forEach(function(filter) { filter.applyTo(pipelineState); });\n      if (pipelineState.imageData.width !== sourceWidth || pipelineState.imageData.height !== sourceHeight) {\n        targetCanvas.width = pipelineState.imageData.width;\n        targetCanvas.height = pipelineState.imageData.height;\n      }\n      ctx.putImageData(pipelineState.imageData, 0, 0);\n      return pipelineState;\n    },\n\n  };\n})();\n\n\n/**\n * @namespace fabric.Image.filters\n * @memberOf fabric.Image\n * @tutorial {@link http://fabricjs.com/fabric-intro-part-2#image_filters}\n * @see {@link http://fabricjs.com/image-filters|ImageFilters demo}\n */\nfabric.Image = fabric.Image || { };\nfabric.Image.filters = fabric.Image.filters || { };\n\n/**\n * Root filter class from which all filter classes inherit from\n * @class fabric.Image.filters.BaseFilter\n * @memberOf fabric.Image.filters\n */\nfabric.Image.filters.BaseFilter = fabric.util.createClass(/** @lends fabric.Image.filters.BaseFilter.prototype */ {\n\n  /**\n   * Filter type\n   * @param {String} type\n   * @default\n   */\n  type: 'BaseFilter',\n\n  /**\n   * Array of attributes to send with buffers. do not modify\n   * @private\n   */\n\n  vertexSource: 'attribute vec2 aPosition;\\n' +\n    'varying vec2 vTexCoord;\\n' +\n    'void main() {\\n' +\n      'vTexCoord = aPosition;\\n' +\n      'gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\\n' +\n    '}',\n\n  fragmentSource: 'precision highp float;\\n' +\n    'varying vec2 vTexCoord;\\n' +\n    'uniform sampler2D uTexture;\\n' +\n    'void main() {\\n' +\n      'gl_FragColor = texture2D(uTexture, vTexCoord);\\n' +\n    '}',\n\n  /**\n   * Constructor\n   * @param {Object} [options] Options object\n   */\n  initialize: function(options) {\n    if (options) {\n      this.setOptions(options);\n    }\n  },\n\n  /**\n   * Sets filter's properties from options\n   * @param {Object} [options] Options object\n   */\n  setOptions: function(options) {\n    for (var prop in options) {\n      this[prop] = options[prop];\n    }\n  },\n\n  /**\n   * Compile this filter's shader program.\n   *\n   * @param {WebGLRenderingContext} gl The GL canvas context to use for shader compilation.\n   * @param {String} fragmentSource fragmentShader source for compilation\n   * @param {String} vertexSource vertexShader source for compilation\n   */\n  createProgram: function(gl, fragmentSource, vertexSource) {\n    fragmentSource = fragmentSource || this.fragmentSource;\n    vertexSource = vertexSource || this.vertexSource;\n    if (fabric.webGlPrecision !== 'highp'){\n      fragmentSource = fragmentSource.replace(\n        /precision highp float/g,\n        'precision ' + fabric.webGlPrecision + ' float'\n      );\n    }\n    var vertexShader = gl.createShader(gl.VERTEX_SHADER);\n    gl.shaderSource(vertexShader, vertexSource);\n    gl.compileShader(vertexShader);\n    if (!gl.getShaderParameter(vertexShader, gl.COMPILE_STATUS)) {\n      throw new Error(\n        // eslint-disable-next-line prefer-template\n        'Vertex shader compile error for ' + this.type + ': ' +\n        gl.getShaderInfoLog(vertexShader)\n      );\n    }\n\n    var fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);\n    gl.shaderSource(fragmentShader, fragmentSource);\n    gl.compileShader(fragmentShader);\n    if (!gl.getShaderParameter(fragmentShader, gl.COMPILE_STATUS)) {\n      throw new Error(\n        // eslint-disable-next-line prefer-template\n        'Fragment shader compile error for ' + this.type + ': ' +\n        gl.getShaderInfoLog(fragmentShader)\n      );\n    }\n\n    var program = gl.createProgram();\n    gl.attachShader(program, vertexShader);\n    gl.attachShader(program, fragmentShader);\n    gl.linkProgram(program);\n    if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {\n      throw new Error(\n        // eslint-disable-next-line prefer-template\n        'Shader link error for \"${this.type}\" ' +\n        gl.getProgramInfoLog(program)\n      );\n    }\n\n    var attributeLocations = this.getAttributeLocations(gl, program);\n    var uniformLocations = this.getUniformLocations(gl, program) || { };\n    uniformLocations.uStepW = gl.getUniformLocation(program, 'uStepW');\n    uniformLocations.uStepH = gl.getUniformLocation(program, 'uStepH');\n    return {\n      program: program,\n      attributeLocations: attributeLocations,\n      uniformLocations: uniformLocations\n    };\n  },\n\n  /**\n   * Return a map of attribute names to WebGLAttributeLocation objects.\n   *\n   * @param {WebGLRenderingContext} gl The canvas context used to compile the shader program.\n   * @param {WebGLShaderProgram} program The shader program from which to take attribute locations.\n   * @returns {Object} A map of attribute names to attribute locations.\n   */\n  getAttributeLocations: function(gl, program) {\n    return {\n      aPosition: gl.getAttribLocation(program, 'aPosition'),\n    };\n  },\n\n  /**\n   * Return a map of uniform names to WebGLUniformLocation objects.\n   *\n   * Intended to be overridden by subclasses.\n   *\n   * @param {WebGLRenderingContext} gl The canvas context used to compile the shader program.\n   * @param {WebGLShaderProgram} program The shader program from which to take uniform locations.\n   * @returns {Object} A map of uniform names to uniform locations.\n   */\n  getUniformLocations: function (/* gl, program */) {\n    // in case i do not need any special uniform i need to return an empty object\n    return { };\n  },\n\n  /**\n   * Send attribute data from this filter to its shader program on the GPU.\n   *\n   * @param {WebGLRenderingContext} gl The canvas context used to compile the shader program.\n   * @param {Object} attributeLocations A map of shader attribute names to their locations.\n   */\n  sendAttributeData: function(gl, attributeLocations, aPositionData) {\n    var attributeLocation = attributeLocations.aPosition;\n    var buffer = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n    gl.enableVertexAttribArray(attributeLocation);\n    gl.vertexAttribPointer(attributeLocation, 2, gl.FLOAT, false, 0, 0);\n    gl.bufferData(gl.ARRAY_BUFFER, aPositionData, gl.STATIC_DRAW);\n  },\n\n  _setupFrameBuffer: function(options) {\n    var gl = options.context, width, height;\n    if (options.passes > 1) {\n      width = options.destinationWidth;\n      height = options.destinationHeight;\n      if (options.sourceWidth !== width || options.sourceHeight !== height) {\n        gl.deleteTexture(options.targetTexture);\n        options.targetTexture = options.filterBackend.createTexture(gl, width, height);\n      }\n      gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D,\n        options.targetTexture, 0);\n    }\n    else {\n      // draw last filter on canvas and not to framebuffer.\n      gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n      gl.finish();\n    }\n  },\n\n  _swapTextures: function(options) {\n    options.passes--;\n    options.pass++;\n    var temp = options.targetTexture;\n    options.targetTexture = options.sourceTexture;\n    options.sourceTexture = temp;\n  },\n\n  /**\n   * Generic isNeutral implementation for one parameter based filters.\n   * Used only in image applyFilters to discard filters that will not have an effect\n   * on the image\n   * Other filters may need their own version ( ColorMatrix, HueRotation, gamma, ComposedFilter )\n   * @param {Object} options\n   **/\n  isNeutralState: function(/* options */) {\n    var main = this.mainParameter,\n        _class = fabric.Image.filters[this.type].prototype;\n    if (main) {\n      if (Array.isArray(_class[main])) {\n        for (var i = _class[main].length; i--;) {\n          if (this[main][i] !== _class[main][i]) {\n            return false;\n          }\n        }\n        return true;\n      }\n      else {\n        return _class[main] === this[main];\n      }\n    }\n    else {\n      return false;\n    }\n  },\n\n  /**\n   * Apply this filter to the input image data provided.\n   *\n   * Determines whether to use WebGL or Canvas2D based on the options.webgl flag.\n   *\n   * @param {Object} options\n   * @param {Number} options.passes The number of filters remaining to be executed\n   * @param {Boolean} options.webgl Whether to use webgl to render the filter.\n   * @param {WebGLTexture} options.sourceTexture The texture setup as the source to be filtered.\n   * @param {WebGLTexture} options.targetTexture The texture where filtered output should be drawn.\n   * @param {WebGLRenderingContext} options.context The GL context used for rendering.\n   * @param {Object} options.programCache A map of compiled shader programs, keyed by filter type.\n   */\n  applyTo: function(options) {\n    if (options.webgl) {\n      this._setupFrameBuffer(options);\n      this.applyToWebGL(options);\n      this._swapTextures(options);\n    }\n    else {\n      this.applyTo2d(options);\n    }\n  },\n\n  /**\n   * Retrieves the cached shader.\n   * @param {Object} options\n   * @param {WebGLRenderingContext} options.context The GL context used for rendering.\n   * @param {Object} options.programCache A map of compiled shader programs, keyed by filter type.\n   */\n  retrieveShader: function(options) {\n    if (!options.programCache.hasOwnProperty(this.type)) {\n      options.programCache[this.type] = this.createProgram(options.context);\n    }\n    return options.programCache[this.type];\n  },\n\n  /**\n   * Apply this filter using webgl.\n   *\n   * @param {Object} options\n   * @param {Number} options.passes The number of filters remaining to be executed\n   * @param {Boolean} options.webgl Whether to use webgl to render the filter.\n   * @param {WebGLTexture} options.originalTexture The texture of the original input image.\n   * @param {WebGLTexture} options.sourceTexture The texture setup as the source to be filtered.\n   * @param {WebGLTexture} options.targetTexture The texture where filtered output should be drawn.\n   * @param {WebGLRenderingContext} options.context The GL context used for rendering.\n   * @param {Object} options.programCache A map of compiled shader programs, keyed by filter type.\n   */\n  applyToWebGL: function(options) {\n    var gl = options.context;\n    var shader = this.retrieveShader(options);\n    if (options.pass === 0 && options.originalTexture) {\n      gl.bindTexture(gl.TEXTURE_2D, options.originalTexture);\n    }\n    else {\n      gl.bindTexture(gl.TEXTURE_2D, options.sourceTexture);\n    }\n    gl.useProgram(shader.program);\n    this.sendAttributeData(gl, shader.attributeLocations, options.aPosition);\n\n    gl.uniform1f(shader.uniformLocations.uStepW, 1 / options.sourceWidth);\n    gl.uniform1f(shader.uniformLocations.uStepH, 1 / options.sourceHeight);\n\n    this.sendUniformData(gl, shader.uniformLocations);\n    gl.viewport(0, 0, options.destinationWidth, options.destinationHeight);\n    gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n  },\n\n  bindAdditionalTexture: function(gl, texture, textureUnit) {\n    gl.activeTexture(textureUnit);\n    gl.bindTexture(gl.TEXTURE_2D, texture);\n    // reset active texture to 0 as usual\n    gl.activeTexture(gl.TEXTURE0);\n  },\n\n  unbindAdditionalTexture: function(gl, textureUnit) {\n    gl.activeTexture(textureUnit);\n    gl.bindTexture(gl.TEXTURE_2D, null);\n    gl.activeTexture(gl.TEXTURE0);\n  },\n\n  getMainParameter: function() {\n    return this[this.mainParameter];\n  },\n\n  setMainParameter: function(value) {\n    this[this.mainParameter] = value;\n  },\n\n  /**\n   * Send uniform data from this filter to its shader program on the GPU.\n   *\n   * Intended to be overridden by subclasses.\n   *\n   * @param {WebGLRenderingContext} gl The canvas context used to compile the shader program.\n   * @param {Object} uniformLocations A map of shader uniform names to their locations.\n   */\n  sendUniformData: function(/* gl, uniformLocations */) {\n    // Intentionally left blank.  Override me in subclasses.\n  },\n\n  /**\n   * If needed by a 2d filter, this functions can create an helper canvas to be used\n   * remember that options.targetCanvas is available for use till end of chain.\n   */\n  createHelpLayer: function(options) {\n    if (!options.helpLayer) {\n      var helpLayer = document.createElement('canvas');\n      helpLayer.width = options.sourceWidth;\n      helpLayer.height = options.sourceHeight;\n      options.helpLayer = helpLayer;\n    }\n  },\n\n  /**\n   * Returns object representation of an instance\n   * @return {Object} Object representation of an instance\n   */\n  toObject: function() {\n    var object = { type: this.type }, mainP = this.mainParameter;\n    if (mainP) {\n      object[mainP] = this[mainP];\n    }\n    return object;\n  },\n\n  /**\n   * Returns a JSON representation of an instance\n   * @return {Object} JSON\n   */\n  toJSON: function() {\n    // delegate, not alias\n    return this.toObject();\n  }\n});\n\nfabric.Image.filters.BaseFilter.fromObject = function(object, callback) {\n  var filter = new fabric.Image.filters[object.type](object);\n  callback && callback(filter);\n  return filter;\n};\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric  = global.fabric || (global.fabric = { }),\n      filters = fabric.Image.filters,\n      createClass = fabric.util.createClass;\n\n  /**\n   * Color Matrix filter class\n   * @class fabric.Image.filters.ColorMatrix\n   * @memberOf fabric.Image.filters\n   * @extends fabric.Image.filters.BaseFilter\n   * @see {@link fabric.Image.filters.ColorMatrix#initialize} for constructor definition\n   * @see {@link http://fabricjs.com/image-filters|ImageFilters demo}\n   * @see {@Link http://www.webwasp.co.uk/tutorials/219/Color_Matrix_Filter.php}\n   * @see {@Link http://phoboslab.org/log/2013/11/fast-image-filters-with-webgl}\n   * @example <caption>Kodachrome filter</caption>\n   * var filter = new fabric.Image.filters.ColorMatrix({\n   *  matrix: [\n       1.1285582396593525, -0.3967382283601348, -0.03992559172921793, 0, 63.72958762196502,\n       -0.16404339962244616, 1.0835251566291304, -0.05498805115633132, 0, 24.732407896706203,\n       -0.16786010706155763, -0.5603416277695248, 1.6014850761964943, 0, 35.62982807460946,\n       0, 0, 0, 1, 0\n      ]\n   * });\n   * object.filters.push(filter);\n   * object.applyFilters();\n   */\n  filters.ColorMatrix = createClass(filters.BaseFilter, /** @lends fabric.Image.filters.ColorMatrix.prototype */ {\n\n    /**\n     * Filter type\n     * @param {String} type\n     * @default\n     */\n    type: 'ColorMatrix',\n\n    fragmentSource: 'precision highp float;\\n' +\n      'uniform sampler2D uTexture;\\n' +\n      'varying vec2 vTexCoord;\\n' +\n      'uniform mat4 uColorMatrix;\\n' +\n      'uniform vec4 uConstants;\\n' +\n      'void main() {\\n' +\n        'vec4 color = texture2D(uTexture, vTexCoord);\\n' +\n        'color *= uColorMatrix;\\n' +\n        'color += uConstants;\\n' +\n        'gl_FragColor = color;\\n' +\n      '}',\n\n    /**\n     * Colormatrix for pixels.\n     * array of 20 floats. Numbers in positions 4, 9, 14, 19 loose meaning\n     * outside the -1, 1 range.\n     * 0.0039215686 is the part of 1 that get translated to 1 in 2d\n     * @param {Array} matrix array of 20 numbers.\n     * @default\n     */\n    matrix: [\n      1, 0, 0, 0, 0,\n      0, 1, 0, 0, 0,\n      0, 0, 1, 0, 0,\n      0, 0, 0, 1, 0\n    ],\n\n    mainParameter: 'matrix',\n\n    /**\n     * Lock the colormatrix on the color part, skipping alpha, mainly for non webgl scenario\n     * to save some calculation\n     * @type Boolean\n     * @default true\n     */\n    colorsOnly: true,\n\n    /**\n     * Constructor\n     * @param {Object} [options] Options object\n     */\n    initialize: function(options) {\n      this.callSuper('initialize', options);\n      // create a new array instead mutating the prototype with push\n      this.matrix = this.matrix.slice(0);\n    },\n\n    /**\n     * Apply the ColorMatrix operation to a Uint8Array representing the pixels of an image.\n     *\n     * @param {Object} options\n     * @param {ImageData} options.imageData The Uint8Array to be filtered.\n     */\n    applyTo2d: function(options) {\n      var imageData = options.imageData,\n          data = imageData.data,\n          iLen = data.length,\n          m = this.matrix,\n          r, g, b, a, i, colorsOnly = this.colorsOnly;\n\n      for (i = 0; i < iLen; i += 4) {\n        r = data[i];\n        g = data[i + 1];\n        b = data[i + 2];\n        if (colorsOnly) {\n          data[i] = r * m[0] + g * m[1] + b * m[2] + m[4] * 255;\n          data[i + 1] = r * m[5] + g * m[6] + b * m[7] + m[9] * 255;\n          data[i + 2] = r * m[10] + g * m[11] + b * m[12] + m[14] * 255;\n        }\n        else {\n          a = data[i + 3];\n          data[i] = r * m[0] + g * m[1] + b * m[2] + a * m[3] + m[4] * 255;\n          data[i + 1] = r * m[5] + g * m[6] + b * m[7] + a * m[8] + m[9] * 255;\n          data[i + 2] = r * m[10] + g * m[11] + b * m[12] + a * m[13] + m[14] * 255;\n          data[i + 3] = r * m[15] + g * m[16] + b * m[17] + a * m[18] + m[19] * 255;\n        }\n      }\n    },\n\n    /**\n     * Return WebGL uniform locations for this filter's shader.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {WebGLShaderProgram} program This filter's compiled shader program.\n     */\n    getUniformLocations: function(gl, program) {\n      return {\n        uColorMatrix: gl.getUniformLocation(program, 'uColorMatrix'),\n        uConstants: gl.getUniformLocation(program, 'uConstants'),\n      };\n    },\n\n    /**\n     * Send data from this filter to its shader program's uniforms.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {Object} uniformLocations A map of string uniform names to WebGLUniformLocation objects\n     */\n    sendUniformData: function(gl, uniformLocations) {\n      var m = this.matrix,\n          matrix = [\n            m[0], m[1], m[2], m[3],\n            m[5], m[6], m[7], m[8],\n            m[10], m[11], m[12], m[13],\n            m[15], m[16], m[17], m[18]\n          ],\n          constants = [m[4], m[9], m[14], m[19]];\n      gl.uniformMatrix4fv(uniformLocations.uColorMatrix, false, matrix);\n      gl.uniform4fv(uniformLocations.uConstants, constants);\n    },\n  });\n\n  /**\n   * Returns filter instance from an object representation\n   * @static\n   * @param {Object} object Object to create an instance from\n   * @param {function} [callback] function to invoke after filter creation\n   * @return {fabric.Image.filters.ColorMatrix} Instance of fabric.Image.filters.ColorMatrix\n   */\n  fabric.Image.filters.ColorMatrix.fromObject = fabric.Image.filters.BaseFilter.fromObject;\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric  = global.fabric || (global.fabric = { }),\n      filters = fabric.Image.filters,\n      createClass = fabric.util.createClass;\n\n  /**\n   * Brightness filter class\n   * @class fabric.Image.filters.Brightness\n   * @memberOf fabric.Image.filters\n   * @extends fabric.Image.filters.BaseFilter\n   * @see {@link fabric.Image.filters.Brightness#initialize} for constructor definition\n   * @see {@link http://fabricjs.com/image-filters|ImageFilters demo}\n   * @example\n   * var filter = new fabric.Image.filters.Brightness({\n   *   brightness: 0.05\n   * });\n   * object.filters.push(filter);\n   * object.applyFilters();\n   */\n  filters.Brightness = createClass(filters.BaseFilter, /** @lends fabric.Image.filters.Brightness.prototype */ {\n\n    /**\n     * Filter type\n     * @param {String} type\n     * @default\n     */\n    type: 'Brightness',\n\n    /**\n     * Fragment source for the brightness program\n     */\n    fragmentSource: 'precision highp float;\\n' +\n      'uniform sampler2D uTexture;\\n' +\n      'uniform float uBrightness;\\n' +\n      'varying vec2 vTexCoord;\\n' +\n      'void main() {\\n' +\n        'vec4 color = texture2D(uTexture, vTexCoord);\\n' +\n        'color.rgb += uBrightness;\\n' +\n        'gl_FragColor = color;\\n' +\n      '}',\n\n    /**\n     * Brightness value, from -1 to 1.\n     * translated to -255 to 255 for 2d\n     * 0.0039215686 is the part of 1 that get translated to 1 in 2d\n     * @param {Number} brightness\n     * @default\n     */\n    brightness: 0,\n\n    /**\n     * Describe the property that is the filter parameter\n     * @param {String} m\n     * @default\n     */\n    mainParameter: 'brightness',\n\n    /**\n    * Apply the Brightness operation to a Uint8ClampedArray representing the pixels of an image.\n    *\n    * @param {Object} options\n    * @param {ImageData} options.imageData The Uint8ClampedArray to be filtered.\n    */\n    applyTo2d: function(options) {\n      if (this.brightness === 0) {\n        return;\n      }\n      var imageData = options.imageData,\n          data = imageData.data, i, len = data.length,\n          brightness = Math.round(this.brightness * 255);\n      for (i = 0; i < len; i += 4) {\n        data[i] = data[i] + brightness;\n        data[i + 1] = data[i + 1] + brightness;\n        data[i + 2] = data[i + 2] + brightness;\n      }\n    },\n\n    /**\n     * Return WebGL uniform locations for this filter's shader.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {WebGLShaderProgram} program This filter's compiled shader program.\n     */\n    getUniformLocations: function(gl, program) {\n      return {\n        uBrightness: gl.getUniformLocation(program, 'uBrightness'),\n      };\n    },\n\n    /**\n     * Send data from this filter to its shader program's uniforms.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {Object} uniformLocations A map of string uniform names to WebGLUniformLocation objects\n     */\n    sendUniformData: function(gl, uniformLocations) {\n      gl.uniform1f(uniformLocations.uBrightness, this.brightness);\n    },\n  });\n\n  /**\n   * Returns filter instance from an object representation\n   * @static\n   * @param {Object} object Object to create an instance from\n   * @param {function} [callback] to be invoked after filter creation\n   * @return {fabric.Image.filters.Brightness} Instance of fabric.Image.filters.Brightness\n   */\n  fabric.Image.filters.Brightness.fromObject = fabric.Image.filters.BaseFilter.fromObject;\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric  = global.fabric || (global.fabric = { }),\n      extend = fabric.util.object.extend,\n      filters = fabric.Image.filters,\n      createClass = fabric.util.createClass;\n\n  /**\n   * Adapted from <a href=\"http://www.html5rocks.com/en/tutorials/canvas/imagefilters/\">html5rocks article</a>\n   * @class fabric.Image.filters.Convolute\n   * @memberOf fabric.Image.filters\n   * @extends fabric.Image.filters.BaseFilter\n   * @see {@link fabric.Image.filters.Convolute#initialize} for constructor definition\n   * @see {@link http://fabricjs.com/image-filters|ImageFilters demo}\n   * @example <caption>Sharpen filter</caption>\n   * var filter = new fabric.Image.filters.Convolute({\n   *   matrix: [ 0, -1,  0,\n   *            -1,  5, -1,\n   *             0, -1,  0 ]\n   * });\n   * object.filters.push(filter);\n   * object.applyFilters();\n   * canvas.renderAll();\n   * @example <caption>Blur filter</caption>\n   * var filter = new fabric.Image.filters.Convolute({\n   *   matrix: [ 1/9, 1/9, 1/9,\n   *             1/9, 1/9, 1/9,\n   *             1/9, 1/9, 1/9 ]\n   * });\n   * object.filters.push(filter);\n   * object.applyFilters();\n   * canvas.renderAll();\n   * @example <caption>Emboss filter</caption>\n   * var filter = new fabric.Image.filters.Convolute({\n   *   matrix: [ 1,   1,  1,\n   *             1, 0.7, -1,\n   *            -1,  -1, -1 ]\n   * });\n   * object.filters.push(filter);\n   * object.applyFilters();\n   * canvas.renderAll();\n   * @example <caption>Emboss filter with opaqueness</caption>\n   * var filter = new fabric.Image.filters.Convolute({\n   *   opaque: true,\n   *   matrix: [ 1,   1,  1,\n   *             1, 0.7, -1,\n   *            -1,  -1, -1 ]\n   * });\n   * object.filters.push(filter);\n   * object.applyFilters();\n   * canvas.renderAll();\n   */\n  filters.Convolute = createClass(filters.BaseFilter, /** @lends fabric.Image.filters.Convolute.prototype */ {\n\n    /**\n     * Filter type\n     * @param {String} type\n     * @default\n     */\n    type: 'Convolute',\n\n    /*\n     * Opaque value (true/false)\n     */\n    opaque: false,\n\n    /*\n     * matrix for the filter, max 9x9\n     */\n    matrix: [0, 0, 0, 0, 1, 0, 0, 0, 0],\n\n    /**\n     * Fragment source for the brightness program\n     */\n    fragmentSource: {\n      Convolute_3_1: 'precision highp float;\\n' +\n        'uniform sampler2D uTexture;\\n' +\n        'uniform float uMatrix[9];\\n' +\n        'uniform float uStepW;\\n' +\n        'uniform float uStepH;\\n' +\n        'varying vec2 vTexCoord;\\n' +\n        'void main() {\\n' +\n          'vec4 color = vec4(0, 0, 0, 0);\\n' +\n          'for (float h = 0.0; h < 3.0; h+=1.0) {\\n' +\n            'for (float w = 0.0; w < 3.0; w+=1.0) {\\n' +\n              'vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));\\n' +\n              'color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];\\n' +\n            '}\\n' +\n          '}\\n' +\n          'gl_FragColor = color;\\n' +\n        '}',\n      Convolute_3_0: 'precision highp float;\\n' +\n        'uniform sampler2D uTexture;\\n' +\n        'uniform float uMatrix[9];\\n' +\n        'uniform float uStepW;\\n' +\n        'uniform float uStepH;\\n' +\n        'varying vec2 vTexCoord;\\n' +\n        'void main() {\\n' +\n          'vec4 color = vec4(0, 0, 0, 1);\\n' +\n          'for (float h = 0.0; h < 3.0; h+=1.0) {\\n' +\n            'for (float w = 0.0; w < 3.0; w+=1.0) {\\n' +\n              'vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));\\n' +\n              'color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];\\n' +\n            '}\\n' +\n          '}\\n' +\n          'float alpha = texture2D(uTexture, vTexCoord).a;\\n' +\n          'gl_FragColor = color;\\n' +\n          'gl_FragColor.a = alpha;\\n' +\n        '}',\n      Convolute_5_1: 'precision highp float;\\n' +\n        'uniform sampler2D uTexture;\\n' +\n        'uniform float uMatrix[25];\\n' +\n        'uniform float uStepW;\\n' +\n        'uniform float uStepH;\\n' +\n        'varying vec2 vTexCoord;\\n' +\n        'void main() {\\n' +\n          'vec4 color = vec4(0, 0, 0, 0);\\n' +\n          'for (float h = 0.0; h < 5.0; h+=1.0) {\\n' +\n            'for (float w = 0.0; w < 5.0; w+=1.0) {\\n' +\n              'vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\\n' +\n              'color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];\\n' +\n            '}\\n' +\n          '}\\n' +\n          'gl_FragColor = color;\\n' +\n        '}',\n      Convolute_5_0: 'precision highp float;\\n' +\n        'uniform sampler2D uTexture;\\n' +\n        'uniform float uMatrix[25];\\n' +\n        'uniform float uStepW;\\n' +\n        'uniform float uStepH;\\n' +\n        'varying vec2 vTexCoord;\\n' +\n        'void main() {\\n' +\n          'vec4 color = vec4(0, 0, 0, 1);\\n' +\n          'for (float h = 0.0; h < 5.0; h+=1.0) {\\n' +\n            'for (float w = 0.0; w < 5.0; w+=1.0) {\\n' +\n              'vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\\n' +\n              'color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];\\n' +\n            '}\\n' +\n          '}\\n' +\n          'float alpha = texture2D(uTexture, vTexCoord).a;\\n' +\n          'gl_FragColor = color;\\n' +\n          'gl_FragColor.a = alpha;\\n' +\n        '}',\n      Convolute_7_1: 'precision highp float;\\n' +\n        'uniform sampler2D uTexture;\\n' +\n        'uniform float uMatrix[49];\\n' +\n        'uniform float uStepW;\\n' +\n        'uniform float uStepH;\\n' +\n        'varying vec2 vTexCoord;\\n' +\n        'void main() {\\n' +\n          'vec4 color = vec4(0, 0, 0, 0);\\n' +\n          'for (float h = 0.0; h < 7.0; h+=1.0) {\\n' +\n            'for (float w = 0.0; w < 7.0; w+=1.0) {\\n' +\n              'vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\\n' +\n              'color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];\\n' +\n            '}\\n' +\n          '}\\n' +\n          'gl_FragColor = color;\\n' +\n        '}',\n      Convolute_7_0: 'precision highp float;\\n' +\n        'uniform sampler2D uTexture;\\n' +\n        'uniform float uMatrix[49];\\n' +\n        'uniform float uStepW;\\n' +\n        'uniform float uStepH;\\n' +\n        'varying vec2 vTexCoord;\\n' +\n        'void main() {\\n' +\n          'vec4 color = vec4(0, 0, 0, 1);\\n' +\n          'for (float h = 0.0; h < 7.0; h+=1.0) {\\n' +\n            'for (float w = 0.0; w < 7.0; w+=1.0) {\\n' +\n              'vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\\n' +\n              'color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];\\n' +\n            '}\\n' +\n          '}\\n' +\n          'float alpha = texture2D(uTexture, vTexCoord).a;\\n' +\n          'gl_FragColor = color;\\n' +\n          'gl_FragColor.a = alpha;\\n' +\n        '}',\n      Convolute_9_1: 'precision highp float;\\n' +\n        'uniform sampler2D uTexture;\\n' +\n        'uniform float uMatrix[81];\\n' +\n        'uniform float uStepW;\\n' +\n        'uniform float uStepH;\\n' +\n        'varying vec2 vTexCoord;\\n' +\n        'void main() {\\n' +\n          'vec4 color = vec4(0, 0, 0, 0);\\n' +\n          'for (float h = 0.0; h < 9.0; h+=1.0) {\\n' +\n            'for (float w = 0.0; w < 9.0; w+=1.0) {\\n' +\n              'vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\\n' +\n              'color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];\\n' +\n            '}\\n' +\n          '}\\n' +\n          'gl_FragColor = color;\\n' +\n        '}',\n      Convolute_9_0: 'precision highp float;\\n' +\n        'uniform sampler2D uTexture;\\n' +\n        'uniform float uMatrix[81];\\n' +\n        'uniform float uStepW;\\n' +\n        'uniform float uStepH;\\n' +\n        'varying vec2 vTexCoord;\\n' +\n        'void main() {\\n' +\n          'vec4 color = vec4(0, 0, 0, 1);\\n' +\n          'for (float h = 0.0; h < 9.0; h+=1.0) {\\n' +\n            'for (float w = 0.0; w < 9.0; w+=1.0) {\\n' +\n              'vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\\n' +\n              'color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];\\n' +\n            '}\\n' +\n          '}\\n' +\n          'float alpha = texture2D(uTexture, vTexCoord).a;\\n' +\n          'gl_FragColor = color;\\n' +\n          'gl_FragColor.a = alpha;\\n' +\n        '}',\n    },\n\n    /**\n     * Constructor\n     * @memberOf fabric.Image.filters.Convolute.prototype\n     * @param {Object} [options] Options object\n     * @param {Boolean} [options.opaque=false] Opaque value (true/false)\n     * @param {Array} [options.matrix] Filter matrix\n     */\n\n\n    /**\n    * Retrieves the cached shader.\n    * @param {Object} options\n    * @param {WebGLRenderingContext} options.context The GL context used for rendering.\n    * @param {Object} options.programCache A map of compiled shader programs, keyed by filter type.\n    */\n    retrieveShader: function(options) {\n      var size = Math.sqrt(this.matrix.length);\n      var cacheKey = this.type + '_' + size + '_' + (this.opaque ? 1 : 0);\n      var shaderSource = this.fragmentSource[cacheKey];\n      if (!options.programCache.hasOwnProperty(cacheKey)) {\n        options.programCache[cacheKey] = this.createProgram(options.context, shaderSource);\n      }\n      return options.programCache[cacheKey];\n    },\n\n    /**\n     * Apply the Brightness operation to a Uint8ClampedArray representing the pixels of an image.\n     *\n     * @param {Object} options\n     * @param {ImageData} options.imageData The Uint8ClampedArray to be filtered.\n     */\n    applyTo2d: function(options) {\n      var imageData = options.imageData,\n          data = imageData.data,\n          weights = this.matrix,\n          side = Math.round(Math.sqrt(weights.length)),\n          halfSide = Math.floor(side / 2),\n          sw = imageData.width,\n          sh = imageData.height,\n          output = options.ctx.createImageData(sw, sh),\n          dst = output.data,\n          // go through the destination image pixels\n          alphaFac = this.opaque ? 1 : 0,\n          r, g, b, a, dstOff,\n          scx, scy, srcOff, wt,\n          x, y, cx, cy;\n\n      for (y = 0; y < sh; y++) {\n        for (x = 0; x < sw; x++) {\n          dstOff = (y * sw + x) * 4;\n          // calculate the weighed sum of the source image pixels that\n          // fall under the convolution matrix\n          r = 0; g = 0; b = 0; a = 0;\n\n          for (cy = 0; cy < side; cy++) {\n            for (cx = 0; cx < side; cx++) {\n              scy = y + cy - halfSide;\n              scx = x + cx - halfSide;\n\n              // eslint-disable-next-line max-depth\n              if (scy < 0 || scy >= sh || scx < 0 || scx >= sw) {\n                continue;\n              }\n\n              srcOff = (scy * sw + scx) * 4;\n              wt = weights[cy * side + cx];\n\n              r += data[srcOff] * wt;\n              g += data[srcOff + 1] * wt;\n              b += data[srcOff + 2] * wt;\n              // eslint-disable-next-line max-depth\n              if (!alphaFac) {\n                a += data[srcOff + 3] * wt;\n              }\n            }\n          }\n          dst[dstOff] = r;\n          dst[dstOff + 1] = g;\n          dst[dstOff + 2] = b;\n          if (!alphaFac) {\n            dst[dstOff + 3] = a;\n          }\n          else {\n            dst[dstOff + 3] = data[dstOff + 3];\n          }\n        }\n      }\n      options.imageData = output;\n    },\n\n    /**\n     * Return WebGL uniform locations for this filter's shader.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {WebGLShaderProgram} program This filter's compiled shader program.\n     */\n    getUniformLocations: function(gl, program) {\n      return {\n        uMatrix: gl.getUniformLocation(program, 'uMatrix'),\n        uOpaque: gl.getUniformLocation(program, 'uOpaque'),\n        uHalfSize: gl.getUniformLocation(program, 'uHalfSize'),\n        uSize: gl.getUniformLocation(program, 'uSize'),\n      };\n    },\n\n    /**\n     * Send data from this filter to its shader program's uniforms.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {Object} uniformLocations A map of string uniform names to WebGLUniformLocation objects\n     */\n    sendUniformData: function(gl, uniformLocations) {\n      gl.uniform1fv(uniformLocations.uMatrix, this.matrix);\n    },\n\n    /**\n     * Returns object representation of an instance\n     * @return {Object} Object representation of an instance\n     */\n    toObject: function() {\n      return extend(this.callSuper('toObject'), {\n        opaque: this.opaque,\n        matrix: this.matrix\n      });\n    }\n  });\n\n  /**\n   * Returns filter instance from an object representation\n   * @static\n   * @param {Object} object Object to create an instance from\n   * @param {function} [callback] to be invoked after filter creation\n   * @return {fabric.Image.filters.Convolute} Instance of fabric.Image.filters.Convolute\n   */\n  fabric.Image.filters.Convolute.fromObject = fabric.Image.filters.BaseFilter.fromObject;\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric  = global.fabric || (global.fabric = { }),\n      filters = fabric.Image.filters,\n      createClass = fabric.util.createClass;\n\n  /**\n   * Grayscale image filter class\n   * @class fabric.Image.filters.Grayscale\n   * @memberOf fabric.Image.filters\n   * @extends fabric.Image.filters.BaseFilter\n   * @see {@link http://fabricjs.com/image-filters|ImageFilters demo}\n   * @example\n   * var filter = new fabric.Image.filters.Grayscale();\n   * object.filters.push(filter);\n   * object.applyFilters();\n   */\n  filters.Grayscale = createClass(filters.BaseFilter, /** @lends fabric.Image.filters.Grayscale.prototype */ {\n\n    /**\n     * Filter type\n     * @param {String} type\n     * @default\n     */\n    type: 'Grayscale',\n\n    fragmentSource: {\n      average: 'precision highp float;\\n' +\n        'uniform sampler2D uTexture;\\n' +\n        'varying vec2 vTexCoord;\\n' +\n        'void main() {\\n' +\n          'vec4 color = texture2D(uTexture, vTexCoord);\\n' +\n          'float average = (color.r + color.b + color.g) / 3.0;\\n' +\n          'gl_FragColor = vec4(average, average, average, color.a);\\n' +\n        '}',\n      lightness: 'precision highp float;\\n' +\n        'uniform sampler2D uTexture;\\n' +\n        'uniform int uMode;\\n' +\n        'varying vec2 vTexCoord;\\n' +\n        'void main() {\\n' +\n          'vec4 col = texture2D(uTexture, vTexCoord);\\n' +\n          'float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;\\n' +\n          'gl_FragColor = vec4(average, average, average, col.a);\\n' +\n        '}',\n      luminosity: 'precision highp float;\\n' +\n        'uniform sampler2D uTexture;\\n' +\n        'uniform int uMode;\\n' +\n        'varying vec2 vTexCoord;\\n' +\n        'void main() {\\n' +\n          'vec4 col = texture2D(uTexture, vTexCoord);\\n' +\n          'float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;\\n' +\n          'gl_FragColor = vec4(average, average, average, col.a);\\n' +\n        '}',\n    },\n\n\n    /**\n     * Grayscale mode, between 'average', 'lightness', 'luminosity'\n     * @param {String} type\n     * @default\n     */\n    mode: 'average',\n\n    mainParameter: 'mode',\n\n    /**\n     * Apply the Grayscale operation to a Uint8Array representing the pixels of an image.\n     *\n     * @param {Object} options\n     * @param {ImageData} options.imageData The Uint8Array to be filtered.\n     */\n    applyTo2d: function(options) {\n      var imageData = options.imageData,\n          data = imageData.data, i,\n          len = data.length, value,\n          mode = this.mode;\n      for (i = 0; i < len; i += 4) {\n        if (mode === 'average') {\n          value = (data[i] + data[i + 1] + data[i + 2]) / 3;\n        }\n        else if (mode === 'lightness') {\n          value = (Math.min(data[i], data[i + 1], data[i + 2]) +\n            Math.max(data[i], data[i + 1], data[i + 2])) / 2;\n        }\n        else if (mode === 'luminosity') {\n          value = 0.21 * data[i] + 0.72 * data[i + 1] + 0.07 * data[i + 2];\n        }\n        data[i] = value;\n        data[i + 1] = value;\n        data[i + 2] = value;\n      }\n    },\n\n    /**\n     * Retrieves the cached shader.\n     * @param {Object} options\n     * @param {WebGLRenderingContext} options.context The GL context used for rendering.\n     * @param {Object} options.programCache A map of compiled shader programs, keyed by filter type.\n     */\n    retrieveShader: function(options) {\n      var cacheKey = this.type + '_' + this.mode;\n      if (!options.programCache.hasOwnProperty(cacheKey)) {\n        var shaderSource = this.fragmentSource[this.mode];\n        options.programCache[cacheKey] = this.createProgram(options.context, shaderSource);\n      }\n      return options.programCache[cacheKey];\n    },\n\n    /**\n     * Return WebGL uniform locations for this filter's shader.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {WebGLShaderProgram} program This filter's compiled shader program.\n     */\n    getUniformLocations: function(gl, program) {\n      return {\n        uMode: gl.getUniformLocation(program, 'uMode'),\n      };\n    },\n\n    /**\n     * Send data from this filter to its shader program's uniforms.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {Object} uniformLocations A map of string uniform names to WebGLUniformLocation objects\n     */\n    sendUniformData: function(gl, uniformLocations) {\n      // default average mode.\n      var mode = 1;\n      gl.uniform1i(uniformLocations.uMode, mode);\n    },\n\n    /**\n     * Grayscale filter isNeutralState implementation\n     * The filter is never neutral\n     * on the image\n     **/\n    isNeutralState: function() {\n      return false;\n    },\n  });\n\n  /**\n   * Returns filter instance from an object representation\n   * @static\n   * @param {Object} object Object to create an instance from\n   * @param {function} [callback] to be invoked after filter creation\n   * @return {fabric.Image.filters.Grayscale} Instance of fabric.Image.filters.Grayscale\n   */\n  fabric.Image.filters.Grayscale.fromObject = fabric.Image.filters.BaseFilter.fromObject;\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric  = global.fabric || (global.fabric = { }),\n      filters = fabric.Image.filters,\n      createClass = fabric.util.createClass;\n\n  /**\n   * Invert filter class\n   * @class fabric.Image.filters.Invert\n   * @memberOf fabric.Image.filters\n   * @extends fabric.Image.filters.BaseFilter\n   * @see {@link http://fabricjs.com/image-filters|ImageFilters demo}\n   * @example\n   * var filter = new fabric.Image.filters.Invert();\n   * object.filters.push(filter);\n   * object.applyFilters(canvas.renderAll.bind(canvas));\n   */\n  filters.Invert = createClass(filters.BaseFilter, /** @lends fabric.Image.filters.Invert.prototype */ {\n\n    /**\n     * Filter type\n     * @param {String} type\n     * @default\n     */\n    type: 'Invert',\n\n    fragmentSource: 'precision highp float;\\n' +\n      'uniform sampler2D uTexture;\\n' +\n      'uniform int uInvert;\\n' +\n      'varying vec2 vTexCoord;\\n' +\n      'void main() {\\n' +\n        'vec4 color = texture2D(uTexture, vTexCoord);\\n' +\n        'if (uInvert == 1) {\\n' +\n          'gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);\\n' +\n        '} else {\\n' +\n          'gl_FragColor = color;\\n' +\n        '}\\n' +\n      '}',\n\n    /**\n     * Filter invert. if false, does nothing\n     * @param {Boolean} invert\n     * @default\n     */\n    invert: true,\n\n    mainParameter: 'invert',\n\n    /**\n     * Apply the Invert operation to a Uint8Array representing the pixels of an image.\n     *\n     * @param {Object} options\n     * @param {ImageData} options.imageData The Uint8Array to be filtered.\n     */\n    applyTo2d: function(options) {\n      var imageData = options.imageData,\n          data = imageData.data, i,\n          len = data.length;\n      for (i = 0; i < len; i += 4) {\n        data[i] = 255 - data[i];\n        data[i + 1] = 255 - data[i + 1];\n        data[i + 2] = 255 - data[i + 2];\n      }\n    },\n\n    /**\n     * Invert filter isNeutralState implementation\n     * Used only in image applyFilters to discard filters that will not have an effect\n     * on the image\n     * @param {Object} options\n     **/\n    isNeutralState: function() {\n      return !this.invert;\n    },\n\n    /**\n     * Return WebGL uniform locations for this filter's shader.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {WebGLShaderProgram} program This filter's compiled shader program.\n     */\n    getUniformLocations: function(gl, program) {\n      return {\n        uInvert: gl.getUniformLocation(program, 'uInvert'),\n      };\n    },\n\n    /**\n     * Send data from this filter to its shader program's uniforms.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {Object} uniformLocations A map of string uniform names to WebGLUniformLocation objects\n     */\n    sendUniformData: function(gl, uniformLocations) {\n      gl.uniform1i(uniformLocations.uInvert, this.invert);\n    },\n  });\n\n  /**\n   * Returns filter instance from an object representation\n   * @static\n   * @param {Object} object Object to create an instance from\n   * @param {function} [callback] to be invoked after filter creation\n   * @return {fabric.Image.filters.Invert} Instance of fabric.Image.filters.Invert\n   */\n  fabric.Image.filters.Invert.fromObject = fabric.Image.filters.BaseFilter.fromObject;\n\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric  = global.fabric || (global.fabric = { }),\n      extend = fabric.util.object.extend,\n      filters = fabric.Image.filters,\n      createClass = fabric.util.createClass;\n\n  /**\n   * Noise filter class\n   * @class fabric.Image.filters.Noise\n   * @memberOf fabric.Image.filters\n   * @extends fabric.Image.filters.BaseFilter\n   * @see {@link fabric.Image.filters.Noise#initialize} for constructor definition\n   * @see {@link http://fabricjs.com/image-filters|ImageFilters demo}\n   * @example\n   * var filter = new fabric.Image.filters.Noise({\n   *   noise: 700\n   * });\n   * object.filters.push(filter);\n   * object.applyFilters();\n   * canvas.renderAll();\n   */\n  filters.Noise = createClass(filters.BaseFilter, /** @lends fabric.Image.filters.Noise.prototype */ {\n\n    /**\n     * Filter type\n     * @param {String} type\n     * @default\n     */\n    type: 'Noise',\n\n    /**\n     * Fragment source for the noise program\n     */\n    fragmentSource: 'precision highp float;\\n' +\n      'uniform sampler2D uTexture;\\n' +\n      'uniform float uStepH;\\n' +\n      'uniform float uNoise;\\n' +\n      'uniform float uSeed;\\n' +\n      'varying vec2 vTexCoord;\\n' +\n      'float rand(vec2 co, float seed, float vScale) {\\n' +\n        'return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);\\n' +\n      '}\\n' +\n      'void main() {\\n' +\n        'vec4 color = texture2D(uTexture, vTexCoord);\\n' +\n        'color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;\\n' +\n        'gl_FragColor = color;\\n' +\n      '}',\n\n    /**\n     * Describe the property that is the filter parameter\n     * @param {String} m\n     * @default\n     */\n    mainParameter: 'noise',\n\n    /**\n     * Noise value, from\n     * @param {Number} noise\n     * @default\n     */\n    noise: 0,\n\n    /**\n     * Apply the Brightness operation to a Uint8ClampedArray representing the pixels of an image.\n     *\n     * @param {Object} options\n     * @param {ImageData} options.imageData The Uint8ClampedArray to be filtered.\n     */\n    applyTo2d: function(options) {\n      if (this.noise === 0) {\n        return;\n      }\n      var imageData = options.imageData,\n          data = imageData.data, i, len = data.length,\n          noise = this.noise, rand;\n\n      for (i = 0, len = data.length; i < len; i += 4) {\n\n        rand = (0.5 - Math.random()) * noise;\n\n        data[i] += rand;\n        data[i + 1] += rand;\n        data[i + 2] += rand;\n      }\n    },\n\n    /**\n     * Return WebGL uniform locations for this filter's shader.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {WebGLShaderProgram} program This filter's compiled shader program.\n     */\n    getUniformLocations: function(gl, program) {\n      return {\n        uNoise: gl.getUniformLocation(program, 'uNoise'),\n        uSeed: gl.getUniformLocation(program, 'uSeed'),\n      };\n    },\n\n    /**\n     * Send data from this filter to its shader program's uniforms.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {Object} uniformLocations A map of string uniform names to WebGLUniformLocation objects\n     */\n    sendUniformData: function(gl, uniformLocations) {\n      gl.uniform1f(uniformLocations.uNoise, this.noise / 255);\n      gl.uniform1f(uniformLocations.uSeed, Math.random());\n    },\n\n    /**\n     * Returns object representation of an instance\n     * @return {Object} Object representation of an instance\n     */\n    toObject: function() {\n      return extend(this.callSuper('toObject'), {\n        noise: this.noise\n      });\n    }\n  });\n\n  /**\n   * Returns filter instance from an object representation\n   * @static\n   * @param {Object} object Object to create an instance from\n   * @param {Function} [callback] to be invoked after filter creation\n   * @return {fabric.Image.filters.Noise} Instance of fabric.Image.filters.Noise\n   */\n  fabric.Image.filters.Noise.fromObject = fabric.Image.filters.BaseFilter.fromObject;\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric  = global.fabric || (global.fabric = { }),\n      filters = fabric.Image.filters,\n      createClass = fabric.util.createClass;\n\n  /**\n   * Pixelate filter class\n   * @class fabric.Image.filters.Pixelate\n   * @memberOf fabric.Image.filters\n   * @extends fabric.Image.filters.BaseFilter\n   * @see {@link fabric.Image.filters.Pixelate#initialize} for constructor definition\n   * @see {@link http://fabricjs.com/image-filters|ImageFilters demo}\n   * @example\n   * var filter = new fabric.Image.filters.Pixelate({\n   *   blocksize: 8\n   * });\n   * object.filters.push(filter);\n   * object.applyFilters();\n   */\n  filters.Pixelate = createClass(filters.BaseFilter, /** @lends fabric.Image.filters.Pixelate.prototype */ {\n\n    /**\n     * Filter type\n     * @param {String} type\n     * @default\n     */\n    type: 'Pixelate',\n\n    blocksize: 4,\n\n    mainParameter: 'blocksize',\n\n    /**\n     * Fragment source for the Pixelate program\n     */\n    fragmentSource: 'precision highp float;\\n' +\n      'uniform sampler2D uTexture;\\n' +\n      'uniform float uBlocksize;\\n' +\n      'uniform float uStepW;\\n' +\n      'uniform float uStepH;\\n' +\n      'varying vec2 vTexCoord;\\n' +\n      'void main() {\\n' +\n        'float blockW = uBlocksize * uStepW;\\n' +\n        'float blockH = uBlocksize * uStepW;\\n' +\n        'int posX = int(vTexCoord.x / blockW);\\n' +\n        'int posY = int(vTexCoord.y / blockH);\\n' +\n        'float fposX = float(posX);\\n' +\n        'float fposY = float(posY);\\n' +\n        'vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);\\n' +\n        'vec4 color = texture2D(uTexture, squareCoords);\\n' +\n        'gl_FragColor = color;\\n' +\n      '}',\n\n    /**\n     * Apply the Pixelate operation to a Uint8ClampedArray representing the pixels of an image.\n     *\n     * @param {Object} options\n     * @param {ImageData} options.imageData The Uint8ClampedArray to be filtered.\n     */\n    applyTo2d: function(options) {\n      var imageData = options.imageData,\n          data = imageData.data,\n          iLen = imageData.height,\n          jLen = imageData.width,\n          index, i, j, r, g, b, a,\n          _i, _j, _iLen, _jLen;\n\n      for (i = 0; i < iLen; i += this.blocksize) {\n        for (j = 0; j < jLen; j += this.blocksize) {\n\n          index = (i * 4) * jLen + (j * 4);\n\n          r = data[index];\n          g = data[index + 1];\n          b = data[index + 2];\n          a = data[index + 3];\n\n          _iLen = Math.min(i + this.blocksize, iLen);\n          _jLen = Math.min(j + this.blocksize, jLen);\n          for (_i = i; _i < _iLen; _i++) {\n            for (_j = j; _j < _jLen; _j++) {\n              index = (_i * 4) * jLen + (_j * 4);\n              data[index] = r;\n              data[index + 1] = g;\n              data[index + 2] = b;\n              data[index + 3] = a;\n            }\n          }\n        }\n      }\n    },\n\n    /**\n     * Indicate when the filter is not gonna apply changes to the image\n     **/\n    isNeutralState: function() {\n      return this.blocksize === 1;\n    },\n\n    /**\n     * Return WebGL uniform locations for this filter's shader.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {WebGLShaderProgram} program This filter's compiled shader program.\n     */\n    getUniformLocations: function(gl, program) {\n      return {\n        uBlocksize: gl.getUniformLocation(program, 'uBlocksize'),\n        uStepW: gl.getUniformLocation(program, 'uStepW'),\n        uStepH: gl.getUniformLocation(program, 'uStepH'),\n      };\n    },\n\n    /**\n     * Send data from this filter to its shader program's uniforms.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {Object} uniformLocations A map of string uniform names to WebGLUniformLocation objects\n     */\n    sendUniformData: function(gl, uniformLocations) {\n      gl.uniform1f(uniformLocations.uBlocksize, this.blocksize);\n    },\n  });\n\n  /**\n   * Returns filter instance from an object representation\n   * @static\n   * @param {Object} object Object to create an instance from\n   * @param {Function} [callback] to be invoked after filter creation\n   * @return {fabric.Image.filters.Pixelate} Instance of fabric.Image.filters.Pixelate\n   */\n  fabric.Image.filters.Pixelate.fromObject = fabric.Image.filters.BaseFilter.fromObject;\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric  = global.fabric || (global.fabric = { }),\n      extend = fabric.util.object.extend,\n      filters = fabric.Image.filters,\n      createClass = fabric.util.createClass;\n\n  /**\n   * Remove white filter class\n   * @class fabric.Image.filters.RemoveColor\n   * @memberOf fabric.Image.filters\n   * @extends fabric.Image.filters.BaseFilter\n   * @see {@link fabric.Image.filters.RemoveColor#initialize} for constructor definition\n   * @see {@link http://fabricjs.com/image-filters|ImageFilters demo}\n   * @example\n   * var filter = new fabric.Image.filters.RemoveColor({\n   *   threshold: 0.2,\n   * });\n   * object.filters.push(filter);\n   * object.applyFilters();\n   * canvas.renderAll();\n   */\n  filters.RemoveColor = createClass(filters.BaseFilter, /** @lends fabric.Image.filters.RemoveColor.prototype */ {\n\n    /**\n     * Filter type\n     * @param {String} type\n     * @default\n     */\n    type: 'RemoveColor',\n\n    /**\n     * Color to remove, in any format understood by fabric.Color.\n     * @param {String} type\n     * @default\n     */\n    color: '#FFFFFF',\n\n    /**\n     * Fragment source for the brightness program\n     */\n    fragmentSource: 'precision highp float;\\n' +\n      'uniform sampler2D uTexture;\\n' +\n      'uniform vec4 uLow;\\n' +\n      'uniform vec4 uHigh;\\n' +\n      'varying vec2 vTexCoord;\\n' +\n      'void main() {\\n' +\n        'gl_FragColor = texture2D(uTexture, vTexCoord);\\n' +\n        'if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {\\n' +\n          'gl_FragColor.a = 0.0;\\n' +\n        '}\\n' +\n      '}',\n\n    /**\n     * distance to actual color, as value up or down from each r,g,b\n     * between 0 and 1\n     **/\n    distance: 0.02,\n\n    /**\n     * For color to remove inside distance, use alpha channel for a smoother deletion\n     * NOT IMPLEMENTED YET\n     **/\n    useAlpha: false,\n\n    /**\n     * Constructor\n     * @memberOf fabric.Image.filters.RemoveWhite.prototype\n     * @param {Object} [options] Options object\n     * @param {Number} [options.color=#RRGGBB] Threshold value\n     * @param {Number} [options.distance=10] Distance value\n     */\n\n    /**\n     * Applies filter to canvas element\n     * @param {Object} canvasEl Canvas element to apply filter to\n     */\n    applyTo2d: function(options) {\n      var imageData = options.imageData,\n          data = imageData.data, i,\n          distance = this.distance * 255,\n          r, g, b,\n          source = new fabric.Color(this.color).getSource(),\n          lowC = [\n            source[0] - distance,\n            source[1] - distance,\n            source[2] - distance,\n          ],\n          highC = [\n            source[0] + distance,\n            source[1] + distance,\n            source[2] + distance,\n          ];\n\n\n      for (i = 0; i < data.length; i += 4) {\n        r = data[i];\n        g = data[i + 1];\n        b = data[i + 2];\n\n        if (r > lowC[0] &&\n            g > lowC[1] &&\n            b > lowC[2] &&\n            r < highC[0] &&\n            g < highC[1] &&\n            b < highC[2]) {\n          data[i + 3] = 0;\n        }\n      }\n    },\n\n    /**\n     * Return WebGL uniform locations for this filter's shader.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {WebGLShaderProgram} program This filter's compiled shader program.\n     */\n    getUniformLocations: function(gl, program) {\n      return {\n        uLow: gl.getUniformLocation(program, 'uLow'),\n        uHigh: gl.getUniformLocation(program, 'uHigh'),\n      };\n    },\n\n    /**\n     * Send data from this filter to its shader program's uniforms.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {Object} uniformLocations A map of string uniform names to WebGLUniformLocation objects\n     */\n    sendUniformData: function(gl, uniformLocations) {\n      var source = new fabric.Color(this.color).getSource(),\n          distance = parseFloat(this.distance),\n          lowC = [\n            0 + source[0] / 255 - distance,\n            0 + source[1] / 255 - distance,\n            0 + source[2] / 255 - distance,\n            1\n          ],\n          highC = [\n            source[0] / 255 + distance,\n            source[1] / 255 + distance,\n            source[2] / 255 + distance,\n            1\n          ];\n      gl.uniform4fv(uniformLocations.uLow, lowC);\n      gl.uniform4fv(uniformLocations.uHigh, highC);\n    },\n\n    /**\n     * Returns object representation of an instance\n     * @return {Object} Object representation of an instance\n     */\n    toObject: function() {\n      return extend(this.callSuper('toObject'), {\n        color: this.color,\n        distance: this.distance\n      });\n    }\n  });\n\n  /**\n   * Returns filter instance from an object representation\n   * @static\n   * @param {Object} object Object to create an instance from\n   * @param {Function} [callback] to be invoked after filter creation\n   * @return {fabric.Image.filters.RemoveColor} Instance of fabric.Image.filters.RemoveWhite\n   */\n  fabric.Image.filters.RemoveColor.fromObject = fabric.Image.filters.BaseFilter.fromObject;\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric  = global.fabric || (global.fabric = { }),\n      filters = fabric.Image.filters,\n      createClass = fabric.util.createClass;\n\n  var matrices = {\n    Brownie: [\n      0.59970,0.34553,-0.27082,0,0.186,\n      -0.03770,0.86095,0.15059,0,-0.1449,\n      0.24113,-0.07441,0.44972,0,-0.02965,\n      0,0,0,1,0\n    ],\n    Vintage: [\n      0.62793,0.32021,-0.03965,0,0.03784,\n      0.02578,0.64411,0.03259,0,0.02926,\n      0.04660,-0.08512,0.52416,0,0.02023,\n      0,0,0,1,0\n    ],\n    Kodachrome: [\n      1.12855,-0.39673,-0.03992,0,0.24991,\n      -0.16404,1.08352,-0.05498,0,0.09698,\n      -0.16786,-0.56034,1.60148,0,0.13972,\n      0,0,0,1,0\n    ],\n    Technicolor: [\n      1.91252,-0.85453,-0.09155,0,0.04624,\n      -0.30878,1.76589,-0.10601,0,-0.27589,\n      -0.23110,-0.75018,1.84759,0,0.12137,\n      0,0,0,1,0\n    ],\n    Polaroid: [\n      1.438,-0.062,-0.062,0,0,\n      -0.122,1.378,-0.122,0,0,\n      -0.016,-0.016,1.483,0,0,\n      0,0,0,1,0\n    ],\n    Sepia: [\n      0.393, 0.769, 0.189, 0, 0,\n      0.349, 0.686, 0.168, 0, 0,\n      0.272, 0.534, 0.131, 0, 0,\n      0, 0, 0, 1, 0\n    ],\n    BlackWhite: [\n      1.5, 1.5, 1.5, 0, -1,\n      1.5, 1.5, 1.5, 0, -1,\n      1.5, 1.5, 1.5, 0, -1,\n      0, 0, 0, 1, 0,\n    ]\n  };\n\n  for (var key in matrices) {\n    filters[key] = createClass(filters.ColorMatrix, /** @lends fabric.Image.filters.Sepia.prototype */ {\n\n      /**\n       * Filter type\n       * @param {String} type\n       * @default\n       */\n      type: key,\n\n      /**\n       * Colormatrix for the effect\n       * array of 20 floats. Numbers in positions 4, 9, 14, 19 loose meaning\n       * outside the -1, 1 range.\n       * @param {Array} matrix array of 20 numbers.\n       * @default\n       */\n      matrix: matrices[key],\n\n      /**\n       * Lock the matrix export for this kind of static, parameter less filters.\n       */\n      mainParameter: false,\n      /**\n       * Lock the colormatrix on the color part, skipping alpha\n       */\n      colorsOnly: true,\n\n    });\n    fabric.Image.filters[key].fromObject = fabric.Image.filters.BaseFilter.fromObject;\n  }\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n  'use strict';\n\n  var fabric = global.fabric,\n      filters = fabric.Image.filters,\n      createClass = fabric.util.createClass;\n\n  /**\n   * Color Blend filter class\n   * @class fabric.Image.filter.BlendColor\n   * @memberOf fabric.Image.filters\n   * @extends fabric.Image.filters.BaseFilter\n   * @example\n   * var filter = new fabric.Image.filters.BlendColor({\n   *  color: '#000',\n   *  mode: 'multiply'\n   * });\n   *\n   * var filter = new fabric.Image.filters.BlendImage({\n   *  image: fabricImageObject,\n   *  mode: 'multiply',\n   *  alpha: 0.5\n   * });\n   * object.filters.push(filter);\n   * object.applyFilters();\n   * canvas.renderAll();\n   */\n\n  filters.BlendColor = createClass(filters.BaseFilter, /** @lends fabric.Image.filters.Blend.prototype */ {\n    type: 'BlendColor',\n\n    /**\n     * Color to make the blend operation with. default to a reddish color since black or white\n     * gives always strong result.\n     * @type String\n     * @default\n     **/\n    color: '#F95C63',\n\n    /**\n     * Blend mode for the filter: one of multiply, add, diff, screen, subtract,\n     * darken, lighten, overlay, exclusion, tint.\n     * @type String\n     * @default\n     **/\n    mode: 'multiply',\n\n    /**\n     * alpha value. represent the strength of the blend color operation.\n     * @type Number\n     * @default\n     **/\n    alpha: 1,\n\n    /**\n     * Fragment source for the Multiply program\n     */\n    fragmentSource: {\n      multiply: 'gl_FragColor.rgb *= uColor.rgb;\\n',\n      screen: 'gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);\\n',\n      add: 'gl_FragColor.rgb += uColor.rgb;\\n',\n      diff: 'gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);\\n',\n      subtract: 'gl_FragColor.rgb -= uColor.rgb;\\n',\n      lighten: 'gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);\\n',\n      darken: 'gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);\\n',\n      exclusion: 'gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);\\n',\n      overlay: 'if (uColor.r < 0.5) {\\n' +\n          'gl_FragColor.r *= 2.0 * uColor.r;\\n' +\n        '} else {\\n' +\n          'gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);\\n' +\n        '}\\n' +\n        'if (uColor.g < 0.5) {\\n' +\n          'gl_FragColor.g *= 2.0 * uColor.g;\\n' +\n        '} else {\\n' +\n          'gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);\\n' +\n        '}\\n' +\n        'if (uColor.b < 0.5) {\\n' +\n          'gl_FragColor.b *= 2.0 * uColor.b;\\n' +\n        '} else {\\n' +\n          'gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);\\n' +\n        '}\\n',\n      tint: 'gl_FragColor.rgb *= (1.0 - uColor.a);\\n' +\n        'gl_FragColor.rgb += uColor.rgb;\\n',\n    },\n\n    /**\n     * build the fragment source for the filters, joining the common part with\n     * the specific one.\n     * @param {String} mode the mode of the filter, a key of this.fragmentSource\n     * @return {String} the source to be compiled\n     * @private\n     */\n    buildSource: function(mode) {\n      return 'precision highp float;\\n' +\n        'uniform sampler2D uTexture;\\n' +\n        'uniform vec4 uColor;\\n' +\n        'varying vec2 vTexCoord;\\n' +\n        'void main() {\\n' +\n          'vec4 color = texture2D(uTexture, vTexCoord);\\n' +\n          'gl_FragColor = color;\\n' +\n          'if (color.a > 0.0) {\\n' +\n            this.fragmentSource[mode] +\n          '}\\n' +\n        '}';\n    },\n\n    /**\n     * Retrieves the cached shader.\n     * @param {Object} options\n     * @param {WebGLRenderingContext} options.context The GL context used for rendering.\n     * @param {Object} options.programCache A map of compiled shader programs, keyed by filter type.\n     */\n    retrieveShader: function(options) {\n      var cacheKey = this.type + '_' + this.mode, shaderSource;\n      if (!options.programCache.hasOwnProperty(cacheKey)) {\n        shaderSource = this.buildSource(this.mode);\n        options.programCache[cacheKey] = this.createProgram(options.context, shaderSource);\n      }\n      return options.programCache[cacheKey];\n    },\n\n    /**\n     * Apply the Blend operation to a Uint8ClampedArray representing the pixels of an image.\n     *\n     * @param {Object} options\n     * @param {ImageData} options.imageData The Uint8ClampedArray to be filtered.\n     */\n    applyTo2d: function(options) {\n      var imageData = options.imageData,\n          data = imageData.data, iLen = data.length,\n          tr, tg, tb,\n          r, g, b,\n          source, alpha1 = 1 - this.alpha;\n\n      source = new fabric.Color(this.color).getSource();\n      tr = source[0] * this.alpha;\n      tg = source[1] * this.alpha;\n      tb = source[2] * this.alpha;\n\n      for (var i = 0; i < iLen; i += 4) {\n\n        r = data[i];\n        g = data[i + 1];\n        b = data[i + 2];\n\n        switch (this.mode) {\n          case 'multiply':\n            data[i] = r * tr / 255;\n            data[i + 1] = g * tg / 255;\n            data[i + 2] = b * tb / 255;\n            break;\n          case 'screen':\n            data[i] = 255 - (255 - r) * (255 - tr) / 255;\n            data[i + 1] = 255 - (255 - g) * (255 - tg) / 255;\n            data[i + 2] = 255 - (255 - b) * (255 - tb) / 255;\n            break;\n          case 'add':\n            data[i] = r + tr;\n            data[i + 1] = g + tg;\n            data[i + 2] = b + tb;\n            break;\n          case 'diff':\n          case 'difference':\n            data[i] = Math.abs(r - tr);\n            data[i + 1] = Math.abs(g - tg);\n            data[i + 2] = Math.abs(b - tb);\n            break;\n          case 'subtract':\n            data[i] = r - tr;\n            data[i + 1] = g - tg;\n            data[i + 2] = b - tb;\n            break;\n          case 'darken':\n            data[i] = Math.min(r, tr);\n            data[i + 1] = Math.min(g, tg);\n            data[i + 2] = Math.min(b, tb);\n            break;\n          case 'lighten':\n            data[i] = Math.max(r, tr);\n            data[i + 1] = Math.max(g, tg);\n            data[i + 2] = Math.max(b, tb);\n            break;\n          case 'overlay':\n            data[i] = tr < 128 ? (2 * r * tr / 255) : (255 - 2 * (255 - r) * (255 - tr) / 255);\n            data[i + 1] = tg < 128 ? (2 * g * tg / 255) : (255 - 2 * (255 - g) * (255 - tg) / 255);\n            data[i + 2] = tb < 128 ? (2 * b * tb / 255) : (255 - 2 * (255 - b) * (255 - tb) / 255);\n            break;\n          case 'exclusion':\n            data[i] = tr + r - ((2 * tr * r) / 255);\n            data[i + 1] = tg + g - ((2 * tg * g) / 255);\n            data[i + 2] = tb + b - ((2 * tb * b) / 255);\n            break;\n          case 'tint':\n            data[i] = tr + r * alpha1;\n            data[i + 1] = tg + g * alpha1;\n            data[i + 2] = tb + b * alpha1;\n        }\n      }\n    },\n\n    /**\n     * Return WebGL uniform locations for this filter's shader.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {WebGLShaderProgram} program This filter's compiled shader program.\n     */\n    getUniformLocations: function(gl, program) {\n      return {\n        uColor: gl.getUniformLocation(program, 'uColor'),\n      };\n    },\n\n    /**\n     * Send data from this filter to its shader program's uniforms.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {Object} uniformLocations A map of string uniform names to WebGLUniformLocation objects\n     */\n    sendUniformData: function(gl, uniformLocations) {\n      var source = new fabric.Color(this.color).getSource();\n      source[0] = this.alpha * source[0] / 255;\n      source[1] = this.alpha * source[1] / 255;\n      source[2] = this.alpha * source[2] / 255;\n      source[3] = this.alpha;\n      gl.uniform4fv(uniformLocations.uColor, source);\n    },\n\n    /**\n     * Returns object representation of an instance\n     * @return {Object} Object representation of an instance\n     */\n    toObject: function() {\n      return {\n        type: this.type,\n        color: this.color,\n        mode: this.mode,\n        alpha: this.alpha\n      };\n    }\n  });\n\n  /**\n   * Returns filter instance from an object representation\n   * @static\n   * @param {Object} object Object to create an instance from\n   * @param {function} [callback] to be invoked after filter creation\n   * @return {fabric.Image.filters.BlendColor} Instance of fabric.Image.filters.BlendColor\n   */\n  fabric.Image.filters.BlendColor.fromObject = fabric.Image.filters.BaseFilter.fromObject;\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n  'use strict';\n\n  var fabric = global.fabric,\n      filters = fabric.Image.filters,\n      createClass = fabric.util.createClass;\n\n  /**\n   * Image Blend filter class\n   * @class fabric.Image.filter.BlendImage\n   * @memberOf fabric.Image.filters\n   * @extends fabric.Image.filters.BaseFilter\n   * @example\n   * var filter = new fabric.Image.filters.BlendColor({\n   *  color: '#000',\n   *  mode: 'multiply'\n   * });\n   *\n   * var filter = new fabric.Image.filters.BlendImage({\n   *  image: fabricImageObject,\n   *  mode: 'multiply',\n   *  alpha: 0.5\n   * });\n   * object.filters.push(filter);\n   * object.applyFilters();\n   * canvas.renderAll();\n   */\n\n  filters.BlendImage = createClass(filters.BaseFilter, /** @lends fabric.Image.filters.BlendImage.prototype */ {\n    type: 'BlendImage',\n\n    /**\n     * Color to make the blend operation with. default to a reddish color since black or white\n     * gives always strong result.\n     **/\n    image: null,\n\n    /**\n     * Blend mode for the filter (one of \"multiply\", \"mask\")\n     * @type String\n     * @default\n     **/\n    mode: 'multiply',\n\n    /**\n     * alpha value. represent the strength of the blend image operation.\n     * not implemented.\n     **/\n    alpha: 1,\n\n    vertexSource: 'attribute vec2 aPosition;\\n' +\n      'varying vec2 vTexCoord;\\n' +\n      'varying vec2 vTexCoord2;\\n' +\n      'uniform mat3 uTransformMatrix;\\n' +\n      'void main() {\\n' +\n        'vTexCoord = aPosition;\\n' +\n        'vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;\\n' +\n        'gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\\n' +\n      '}',\n\n    /**\n     * Fragment source for the Multiply program\n     */\n    fragmentSource: {\n      multiply: 'precision highp float;\\n' +\n        'uniform sampler2D uTexture;\\n' +\n        'uniform sampler2D uImage;\\n' +\n        'uniform vec4 uColor;\\n' +\n        'varying vec2 vTexCoord;\\n' +\n        'varying vec2 vTexCoord2;\\n' +\n        'void main() {\\n' +\n          'vec4 color = texture2D(uTexture, vTexCoord);\\n' +\n          'vec4 color2 = texture2D(uImage, vTexCoord2);\\n' +\n          'color.rgba *= color2.rgba;\\n' +\n          'gl_FragColor = color;\\n' +\n        '}',\n      mask: 'precision highp float;\\n' +\n        'uniform sampler2D uTexture;\\n' +\n        'uniform sampler2D uImage;\\n' +\n        'uniform vec4 uColor;\\n' +\n        'varying vec2 vTexCoord;\\n' +\n        'varying vec2 vTexCoord2;\\n' +\n        'void main() {\\n' +\n          'vec4 color = texture2D(uTexture, vTexCoord);\\n' +\n          'vec4 color2 = texture2D(uImage, vTexCoord2);\\n' +\n          'color.a = color2.a;\\n' +\n          'gl_FragColor = color;\\n' +\n        '}',\n    },\n\n    /**\n     * Retrieves the cached shader.\n     * @param {Object} options\n     * @param {WebGLRenderingContext} options.context The GL context used for rendering.\n     * @param {Object} options.programCache A map of compiled shader programs, keyed by filter type.\n     */\n    retrieveShader: function(options) {\n      var cacheKey = this.type + '_' + this.mode;\n      var shaderSource = this.fragmentSource[this.mode];\n      if (!options.programCache.hasOwnProperty(cacheKey)) {\n        options.programCache[cacheKey] = this.createProgram(options.context, shaderSource);\n      }\n      return options.programCache[cacheKey];\n    },\n\n    applyToWebGL: function(options) {\n      // load texture to blend.\n      var gl = options.context,\n          texture = this.createTexture(options.filterBackend, this.image);\n      this.bindAdditionalTexture(gl, texture, gl.TEXTURE1);\n      this.callSuper('applyToWebGL', options);\n      this.unbindAdditionalTexture(gl, gl.TEXTURE1);\n    },\n\n    createTexture: function(backend, image) {\n      return backend.getCachedTexture(image.cacheKey, image._element);\n    },\n\n    /**\n     * Calculate a transformMatrix to adapt the image to blend over\n     * @param {Object} options\n     * @param {WebGLRenderingContext} options.context The GL context used for rendering.\n     * @param {Object} options.programCache A map of compiled shader programs, keyed by filter type.\n     */\n    calculateMatrix: function() {\n      var image = this.image,\n          width = image._element.width,\n          height = image._element.height;\n      return [\n        1 / image.scaleX, 0, 0,\n        0, 1 / image.scaleY, 0,\n        -image.left / width, -image.top / height, 1\n      ];\n    },\n\n    /**\n     * Apply the Blend operation to a Uint8ClampedArray representing the pixels of an image.\n     *\n     * @param {Object} options\n     * @param {ImageData} options.imageData The Uint8ClampedArray to be filtered.\n     */\n    applyTo2d: function(options) {\n      var imageData = options.imageData,\n          resources = options.filterBackend.resources,\n          data = imageData.data, iLen = data.length,\n          width = imageData.width,\n          height = imageData.height,\n          tr, tg, tb, ta,\n          r, g, b, a,\n          canvas1, context, image = this.image, blendData;\n\n      if (!resources.blendImage) {\n        resources.blendImage = fabric.util.createCanvasElement();\n      }\n      canvas1 = resources.blendImage;\n      context = canvas1.getContext('2d');\n      if (canvas1.width !== width || canvas1.height !== height) {\n        canvas1.width = width;\n        canvas1.height = height;\n      }\n      else {\n        context.clearRect(0, 0, width, height);\n      }\n      context.setTransform(image.scaleX, 0, 0, image.scaleY, image.left, image.top);\n      context.drawImage(image._element, 0, 0, width, height);\n      blendData = context.getImageData(0, 0, width, height).data;\n      for (var i = 0; i < iLen; i += 4) {\n\n        r = data[i];\n        g = data[i + 1];\n        b = data[i + 2];\n        a = data[i + 3];\n\n        tr = blendData[i];\n        tg = blendData[i + 1];\n        tb = blendData[i + 2];\n        ta = blendData[i + 3];\n\n        switch (this.mode) {\n          case 'multiply':\n            data[i] = r * tr / 255;\n            data[i + 1] = g * tg / 255;\n            data[i + 2] = b * tb / 255;\n            data[i + 3] = a * ta / 255;\n            break;\n          case 'mask':\n            data[i + 3] = ta;\n            break;\n        }\n      }\n    },\n\n    /**\n     * Return WebGL uniform locations for this filter's shader.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {WebGLShaderProgram} program This filter's compiled shader program.\n     */\n    getUniformLocations: function(gl, program) {\n      return {\n        uTransformMatrix: gl.getUniformLocation(program, 'uTransformMatrix'),\n        uImage: gl.getUniformLocation(program, 'uImage'),\n      };\n    },\n\n    /**\n     * Send data from this filter to its shader program's uniforms.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {Object} uniformLocations A map of string uniform names to WebGLUniformLocation objects\n     */\n    sendUniformData: function(gl, uniformLocations) {\n      var matrix = this.calculateMatrix();\n      gl.uniform1i(uniformLocations.uImage, 1); // texture unit 1.\n      gl.uniformMatrix3fv(uniformLocations.uTransformMatrix, false, matrix);\n    },\n\n    /**\n     * Returns object representation of an instance\n     * @return {Object} Object representation of an instance\n     */\n    toObject: function() {\n      return {\n        type: this.type,\n        image: this.image && this.image.toObject(),\n        mode: this.mode,\n        alpha: this.alpha\n      };\n    }\n  });\n\n  /**\n   * Returns filter instance from an object representation\n   * @static\n   * @param {Object} object Object to create an instance from\n   * @param {function} callback to be invoked after filter creation\n   * @return {fabric.Image.filters.BlendImage} Instance of fabric.Image.filters.BlendImage\n   */\n  fabric.Image.filters.BlendImage.fromObject = function(object, callback) {\n    fabric.Image.fromObject(object.image, function(image) {\n      var options = fabric.util.object.clone(object);\n      options.image = image;\n      callback(new fabric.Image.filters.BlendImage(options));\n    });\n  };\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric  = global.fabric || (global.fabric = { }), pow = Math.pow, floor = Math.floor,\n      sqrt = Math.sqrt, abs = Math.abs, round = Math.round, sin = Math.sin,\n      ceil = Math.ceil,\n      filters = fabric.Image.filters,\n      createClass = fabric.util.createClass;\n\n  /**\n   * Resize image filter class\n   * @class fabric.Image.filters.Resize\n   * @memberOf fabric.Image.filters\n   * @extends fabric.Image.filters.BaseFilter\n   * @see {@link http://fabricjs.com/image-filters|ImageFilters demo}\n   * @example\n   * var filter = new fabric.Image.filters.Resize();\n   * object.filters.push(filter);\n   * object.applyFilters(canvas.renderAll.bind(canvas));\n   */\n  filters.Resize = createClass(filters.BaseFilter, /** @lends fabric.Image.filters.Resize.prototype */ {\n\n    /**\n     * Filter type\n     * @param {String} type\n     * @default\n     */\n    type: 'Resize',\n\n    /**\n     * Resize type\n     * for webgl resizeType is just lanczos, for canvas2d can be:\n     * bilinear, hermite, sliceHack, lanczos.\n     * @param {String} resizeType\n     * @default\n     */\n    resizeType: 'hermite',\n\n    /**\n     * Scale factor for resizing, x axis\n     * @param {Number} scaleX\n     * @default\n     */\n    scaleX: 1,\n\n    /**\n     * Scale factor for resizing, y axis\n     * @param {Number} scaleY\n     * @default\n     */\n    scaleY: 1,\n\n    /**\n     * LanczosLobes parameter for lanczos filter, valid for resizeType lanczos\n     * @param {Number} lanczosLobes\n     * @default\n     */\n    lanczosLobes: 3,\n\n\n    /**\n     * Return WebGL uniform locations for this filter's shader.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {WebGLShaderProgram} program This filter's compiled shader program.\n     */\n    getUniformLocations: function(gl, program) {\n      return {\n        uDelta: gl.getUniformLocation(program, 'uDelta'),\n        uTaps: gl.getUniformLocation(program, 'uTaps'),\n      };\n    },\n\n    /**\n     * Send data from this filter to its shader program's uniforms.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {Object} uniformLocations A map of string uniform names to WebGLUniformLocation objects\n     */\n    sendUniformData: function(gl, uniformLocations) {\n      gl.uniform2fv(uniformLocations.uDelta, this.horizontal ? [1 / this.width, 0] : [0, 1 / this.height]);\n      gl.uniform1fv(uniformLocations.uTaps, this.taps);\n    },\n\n    /**\n     * Retrieves the cached shader.\n     * @param {Object} options\n     * @param {WebGLRenderingContext} options.context The GL context used for rendering.\n     * @param {Object} options.programCache A map of compiled shader programs, keyed by filter type.\n     */\n    retrieveShader: function(options) {\n      var filterWindow = this.getFilterWindow(), cacheKey = this.type + '_' + filterWindow;\n      if (!options.programCache.hasOwnProperty(cacheKey)) {\n        var fragmentShader = this.generateShader(filterWindow);\n        options.programCache[cacheKey] = this.createProgram(options.context, fragmentShader);\n      }\n      return options.programCache[cacheKey];\n    },\n\n    getFilterWindow: function() {\n      var scale = this.tempScale;\n      return Math.ceil(this.lanczosLobes / scale);\n    },\n\n    getTaps: function() {\n      var lobeFunction = this.lanczosCreate(this.lanczosLobes), scale = this.tempScale,\n          filterWindow = this.getFilterWindow(), taps = new Array(filterWindow);\n      for (var i = 1; i <= filterWindow; i++) {\n        taps[i - 1] = lobeFunction(i * scale);\n      }\n      return taps;\n    },\n\n    /**\n     * Generate vertex and shader sources from the necessary steps numbers\n     * @param {Number} filterWindow\n     */\n    generateShader: function(filterWindow) {\n      var offsets = new Array(filterWindow),\n          fragmentShader = this.fragmentSourceTOP, filterWindow;\n\n      for (var i = 1; i <= filterWindow; i++) {\n        offsets[i - 1] = i + '.0 * uDelta';\n      }\n\n      fragmentShader += 'uniform float uTaps[' + filterWindow + '];\\n';\n      fragmentShader += 'void main() {\\n';\n      fragmentShader += '  vec4 color = texture2D(uTexture, vTexCoord);\\n';\n      fragmentShader += '  float sum = 1.0;\\n';\n\n      offsets.forEach(function(offset, i) {\n        fragmentShader += '  color += texture2D(uTexture, vTexCoord + ' + offset + ') * uTaps[' + i + '];\\n';\n        fragmentShader += '  color += texture2D(uTexture, vTexCoord - ' + offset + ') * uTaps[' + i + '];\\n';\n        fragmentShader += '  sum += 2.0 * uTaps[' + i + '];\\n';\n      });\n      fragmentShader += '  gl_FragColor = color / sum;\\n';\n      fragmentShader += '}';\n      return fragmentShader;\n    },\n\n    fragmentSourceTOP: 'precision highp float;\\n' +\n      'uniform sampler2D uTexture;\\n' +\n      'uniform vec2 uDelta;\\n' +\n      'varying vec2 vTexCoord;\\n',\n\n    /**\n     * Apply the resize filter to the image\n     * Determines whether to use WebGL or Canvas2D based on the options.webgl flag.\n     *\n     * @param {Object} options\n     * @param {Number} options.passes The number of filters remaining to be executed\n     * @param {Boolean} options.webgl Whether to use webgl to render the filter.\n     * @param {WebGLTexture} options.sourceTexture The texture setup as the source to be filtered.\n     * @param {WebGLTexture} options.targetTexture The texture where filtered output should be drawn.\n     * @param {WebGLRenderingContext} options.context The GL context used for rendering.\n     * @param {Object} options.programCache A map of compiled shader programs, keyed by filter type.\n     */\n    applyTo: function(options) {\n      if (options.webgl) {\n        options.passes++;\n        this.width = options.sourceWidth;\n        this.horizontal = true;\n        this.dW = Math.round(this.width * this.scaleX);\n        this.dH = options.sourceHeight;\n        this.tempScale = this.dW / this.width;\n        this.taps = this.getTaps();\n        options.destinationWidth = this.dW;\n        this._setupFrameBuffer(options);\n        this.applyToWebGL(options);\n        this._swapTextures(options);\n        options.sourceWidth = options.destinationWidth;\n\n        this.height = options.sourceHeight;\n        this.horizontal = false;\n        this.dH = Math.round(this.height * this.scaleY);\n        this.tempScale = this.dH / this.height;\n        this.taps = this.getTaps();\n        options.destinationHeight = this.dH;\n        this._setupFrameBuffer(options);\n        this.applyToWebGL(options);\n        this._swapTextures(options);\n        options.sourceHeight = options.destinationHeight;\n      }\n      else {\n        this.applyTo2d(options);\n      }\n    },\n\n    isNeutralState: function() {\n      return this.scaleX === 1 && this.scaleY === 1;\n    },\n\n    lanczosCreate: function(lobes) {\n      return function(x) {\n        if (x >= lobes || x <= -lobes) {\n          return 0.0;\n        }\n        if (x < 1.19209290E-07 && x > -1.19209290E-07) {\n          return 1.0;\n        }\n        x *= Math.PI;\n        var xx = x / lobes;\n        return (sin(x) / x) * sin(xx) / xx;\n      };\n    },\n\n    /**\n     * Applies filter to canvas element\n     * @memberOf fabric.Image.filters.Resize.prototype\n     * @param {Object} canvasEl Canvas element to apply filter to\n     * @param {Number} scaleX\n     * @param {Number} scaleY\n     */\n    applyTo2d: function(options) {\n      var imageData = options.imageData,\n          scaleX = this.scaleX,\n          scaleY = this.scaleY;\n\n      this.rcpScaleX = 1 / scaleX;\n      this.rcpScaleY = 1 / scaleY;\n\n      var oW = imageData.width, oH = imageData.height,\n          dW = round(oW * scaleX), dH = round(oH * scaleY),\n          newData;\n\n      if (this.resizeType === 'sliceHack') {\n        newData = this.sliceByTwo(options, oW, oH, dW, dH);\n      }\n      else if (this.resizeType === 'hermite') {\n        newData = this.hermiteFastResize(options, oW, oH, dW, dH);\n      }\n      else if (this.resizeType === 'bilinear') {\n        newData = this.bilinearFiltering(options, oW, oH, dW, dH);\n      }\n      else if (this.resizeType === 'lanczos') {\n        newData = this.lanczosResize(options, oW, oH, dW, dH);\n      }\n      options.imageData = newData;\n    },\n\n    /**\n     * Filter sliceByTwo\n     * @param {Object} canvasEl Canvas element to apply filter to\n     * @param {Number} oW Original Width\n     * @param {Number} oH Original Height\n     * @param {Number} dW Destination Width\n     * @param {Number} dH Destination Height\n     * @returns {ImageData}\n     */\n    sliceByTwo: function(options, oW, oH, dW, dH) {\n      var imageData = options.imageData,\n          mult = 0.5, doneW = false, doneH = false, stepW = oW * mult,\n          stepH = oH * mult, resources = fabric.filterBackend.resources,\n          tmpCanvas, ctx, sX = 0, sY = 0, dX = oW, dY = 0;\n      if (!resources.sliceByTwo) {\n        resources.sliceByTwo = document.createElement('canvas');\n      }\n      tmpCanvas = resources.sliceByTwo;\n      if (tmpCanvas.width < oW * 1.5 || tmpCanvas.height < oH) {\n        tmpCanvas.width = oW * 1.5;\n        tmpCanvas.height = oH;\n      }\n      ctx = tmpCanvas.getContext('2d');\n      ctx.clearRect(0, 0, oW * 1.5, oH);\n      ctx.putImageData(imageData, 0, 0);\n\n      dW = floor(dW);\n      dH = floor(dH);\n\n      while (!doneW || !doneH) {\n        oW = stepW;\n        oH = stepH;\n        if (dW < floor(stepW * mult)) {\n          stepW = floor(stepW * mult);\n        }\n        else {\n          stepW = dW;\n          doneW = true;\n        }\n        if (dH < floor(stepH * mult)) {\n          stepH = floor(stepH * mult);\n        }\n        else {\n          stepH = dH;\n          doneH = true;\n        }\n        ctx.drawImage(tmpCanvas, sX, sY, oW, oH, dX, dY, stepW, stepH);\n        sX = dX;\n        sY = dY;\n        dY += stepH;\n      }\n      return ctx.getImageData(sX, sY, dW, dH);\n    },\n\n    /**\n     * Filter lanczosResize\n     * @param {Object} canvasEl Canvas element to apply filter to\n     * @param {Number} oW Original Width\n     * @param {Number} oH Original Height\n     * @param {Number} dW Destination Width\n     * @param {Number} dH Destination Height\n     * @returns {ImageData}\n     */\n    lanczosResize: function(options, oW, oH, dW, dH) {\n\n      function process(u) {\n        var v, i, weight, idx, a, red, green,\n            blue, alpha, fX, fY;\n        center.x = (u + 0.5) * ratioX;\n        icenter.x = floor(center.x);\n        for (v = 0; v < dH; v++) {\n          center.y = (v + 0.5) * ratioY;\n          icenter.y = floor(center.y);\n          a = 0; red = 0; green = 0; blue = 0; alpha = 0;\n          for (i = icenter.x - range2X; i <= icenter.x + range2X; i++) {\n            if (i < 0 || i >= oW) {\n              continue;\n            }\n            fX = floor(1000 * abs(i - center.x));\n            if (!cacheLanc[fX]) {\n              cacheLanc[fX] = { };\n            }\n            for (var j = icenter.y - range2Y; j <= icenter.y + range2Y; j++) {\n              if (j < 0 || j >= oH) {\n                continue;\n              }\n              fY = floor(1000 * abs(j - center.y));\n              if (!cacheLanc[fX][fY]) {\n                cacheLanc[fX][fY] = lanczos(sqrt(pow(fX * rcpRatioX, 2) + pow(fY * rcpRatioY, 2)) / 1000);\n              }\n              weight = cacheLanc[fX][fY];\n              if (weight > 0) {\n                idx = (j * oW + i) * 4;\n                a += weight;\n                red += weight * srcData[idx];\n                green += weight * srcData[idx + 1];\n                blue += weight * srcData[idx + 2];\n                alpha += weight * srcData[idx + 3];\n              }\n            }\n          }\n          idx = (v * dW + u) * 4;\n          destData[idx] = red / a;\n          destData[idx + 1] = green / a;\n          destData[idx + 2] = blue / a;\n          destData[idx + 3] = alpha / a;\n        }\n\n        if (++u < dW) {\n          return process(u);\n        }\n        else {\n          return destImg;\n        }\n      }\n\n      var srcData = options.imageData.data,\n          destImg = options.ctx.createImageData(dW, dH),\n          destData = destImg.data,\n          lanczos = this.lanczosCreate(this.lanczosLobes),\n          ratioX = this.rcpScaleX, ratioY = this.rcpScaleY,\n          rcpRatioX = 2 / this.rcpScaleX, rcpRatioY = 2 / this.rcpScaleY,\n          range2X = ceil(ratioX * this.lanczosLobes / 2),\n          range2Y = ceil(ratioY * this.lanczosLobes / 2),\n          cacheLanc = { }, center = { }, icenter = { };\n\n      return process(0);\n    },\n\n    /**\n     * bilinearFiltering\n     * @param {Object} canvasEl Canvas element to apply filter to\n     * @param {Number} oW Original Width\n     * @param {Number} oH Original Height\n     * @param {Number} dW Destination Width\n     * @param {Number} dH Destination Height\n     * @returns {ImageData}\n     */\n    bilinearFiltering: function(options, oW, oH, dW, dH) {\n      var a, b, c, d, x, y, i, j, xDiff, yDiff, chnl,\n          color, offset = 0, origPix, ratioX = this.rcpScaleX,\n          ratioY = this.rcpScaleY,\n          w4 = 4 * (oW - 1), img = options.imageData,\n          pixels = img.data, destImage = options.ctx.createImageData(dW, dH),\n          destPixels = destImage.data;\n      for (i = 0; i < dH; i++) {\n        for (j = 0; j < dW; j++) {\n          x = floor(ratioX * j);\n          y = floor(ratioY * i);\n          xDiff = ratioX * j - x;\n          yDiff = ratioY * i - y;\n          origPix = 4 * (y * oW + x);\n\n          for (chnl = 0; chnl < 4; chnl++) {\n            a = pixels[origPix + chnl];\n            b = pixels[origPix + 4 + chnl];\n            c = pixels[origPix + w4 + chnl];\n            d = pixels[origPix + w4 + 4 + chnl];\n            color = a * (1 - xDiff) * (1 - yDiff) + b * xDiff * (1 - yDiff) +\n                    c * yDiff * (1 - xDiff) + d * xDiff * yDiff;\n            destPixels[offset++] = color;\n          }\n        }\n      }\n      return destImage;\n    },\n\n    /**\n     * hermiteFastResize\n     * @param {Object} canvasEl Canvas element to apply filter to\n     * @param {Number} oW Original Width\n     * @param {Number} oH Original Height\n     * @param {Number} dW Destination Width\n     * @param {Number} dH Destination Height\n     * @returns {ImageData}\n     */\n    hermiteFastResize: function(options, oW, oH, dW, dH) {\n      var ratioW = this.rcpScaleX, ratioH = this.rcpScaleY,\n          ratioWHalf = ceil(ratioW / 2),\n          ratioHHalf = ceil(ratioH / 2),\n          img = options.imageData, data = img.data,\n          img2 = options.ctx.createImageData(dW, dH), data2 = img2.data;\n      for (var j = 0; j < dH; j++) {\n        for (var i = 0; i < dW; i++) {\n          var x2 = (i + j * dW) * 4, weight = 0, weights = 0, weightsAlpha = 0,\n              gxR = 0, gxG = 0, gxB = 0, gxA = 0, centerY = (j + 0.5) * ratioH;\n          for (var yy = floor(j * ratioH); yy < (j + 1) * ratioH; yy++) {\n            var dy = abs(centerY - (yy + 0.5)) / ratioHHalf,\n                centerX = (i + 0.5) * ratioW, w0 = dy * dy;\n            for (var xx = floor(i * ratioW); xx < (i + 1) * ratioW; xx++) {\n              var dx = abs(centerX - (xx + 0.5)) / ratioWHalf,\n                  w = sqrt(w0 + dx * dx);\n              /* eslint-disable max-depth */\n              if (w > 1 && w < -1) {\n                continue;\n              }\n              //hermite filter\n              weight = 2 * w * w * w - 3 * w * w + 1;\n              if (weight > 0) {\n                dx = 4 * (xx + yy * oW);\n                //alpha\n                gxA += weight * data[dx + 3];\n                weightsAlpha += weight;\n                //colors\n                if (data[dx + 3] < 255) {\n                  weight = weight * data[dx + 3] / 250;\n                }\n                gxR += weight * data[dx];\n                gxG += weight * data[dx + 1];\n                gxB += weight * data[dx + 2];\n                weights += weight;\n              }\n              /* eslint-enable max-depth */\n            }\n          }\n          data2[x2] = gxR / weights;\n          data2[x2 + 1] = gxG / weights;\n          data2[x2 + 2] = gxB / weights;\n          data2[x2 + 3] = gxA / weightsAlpha;\n        }\n      }\n      return img2;\n    },\n\n    /**\n     * Returns object representation of an instance\n     * @return {Object} Object representation of an instance\n     */\n    toObject: function() {\n      return {\n        type: this.type,\n        scaleX: this.scaleX,\n        scaleY: this.scaleY,\n        resizeType: this.resizeType,\n        lanczosLobes: this.lanczosLobes\n      };\n    }\n  });\n\n  /**\n   * Returns filter instance from an object representation\n   * @static\n   * @param {Object} object Object to create an instance from\n   * @param {Function} [callback] to be invoked after filter creation\n   * @return {fabric.Image.filters.Resize} Instance of fabric.Image.filters.Resize\n   */\n  fabric.Image.filters.Resize.fromObject = fabric.Image.filters.BaseFilter.fromObject;\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric  = global.fabric || (global.fabric = { }),\n      filters = fabric.Image.filters,\n      createClass = fabric.util.createClass;\n\n  /**\n   * Contrast filter class\n   * @class fabric.Image.filters.Contrast\n   * @memberOf fabric.Image.filters\n   * @extends fabric.Image.filters.BaseFilter\n   * @see {@link fabric.Image.filters.Contrast#initialize} for constructor definition\n   * @see {@link http://fabricjs.com/image-filters|ImageFilters demo}\n   * @example\n   * var filter = new fabric.Image.filters.Contrast({\n   *   contrast: 0.25\n   * });\n   * object.filters.push(filter);\n   * object.applyFilters();\n   */\n  filters.Contrast = createClass(filters.BaseFilter, /** @lends fabric.Image.filters.Contrast.prototype */ {\n\n    /**\n     * Filter type\n     * @param {String} type\n     * @default\n     */\n    type: 'Contrast',\n\n    fragmentSource: 'precision highp float;\\n' +\n      'uniform sampler2D uTexture;\\n' +\n      'uniform float uContrast;\\n' +\n      'varying vec2 vTexCoord;\\n' +\n      'void main() {\\n' +\n        'vec4 color = texture2D(uTexture, vTexCoord);\\n' +\n        'float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));\\n' +\n        'color.rgb = contrastF * (color.rgb - 0.5) + 0.5;\\n' +\n        'gl_FragColor = color;\\n' +\n      '}',\n\n    /**\n     * contrast value, range from -1 to 1.\n     * @param {Number} contrast\n     * @default 0\n     */\n    contrast: 0,\n\n    mainParameter: 'contrast',\n\n    /**\n     * Constructor\n     * @memberOf fabric.Image.filters.Contrast.prototype\n     * @param {Object} [options] Options object\n     * @param {Number} [options.contrast=0] Value to contrast the image up (-1...1)\n     */\n\n    /**\n      * Apply the Contrast operation to a Uint8Array representing the pixels of an image.\n      *\n      * @param {Object} options\n      * @param {ImageData} options.imageData The Uint8Array to be filtered.\n      */\n    applyTo2d: function(options) {\n      if (this.contrast === 0) {\n        return;\n      }\n      var imageData = options.imageData, i, len,\n          data = imageData.data, len = data.length,\n          contrast = Math.floor(this.contrast * 255),\n          contrastF = 259 * (contrast + 255) / (255 * (259 - contrast));\n\n      for (i = 0; i < len; i += 4) {\n        data[i] = contrastF * (data[i] - 128) + 128;\n        data[i + 1] = contrastF * (data[i + 1] - 128) + 128;\n        data[i + 2] = contrastF * (data[i + 2] - 128) + 128;\n      }\n    },\n\n    /**\n     * Return WebGL uniform locations for this filter's shader.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {WebGLShaderProgram} program This filter's compiled shader program.\n     */\n    getUniformLocations: function(gl, program) {\n      return {\n        uContrast: gl.getUniformLocation(program, 'uContrast'),\n      };\n    },\n\n    /**\n     * Send data from this filter to its shader program's uniforms.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {Object} uniformLocations A map of string uniform names to WebGLUniformLocation objects\n     */\n    sendUniformData: function(gl, uniformLocations) {\n      gl.uniform1f(uniformLocations.uContrast, this.contrast);\n    },\n  });\n\n  /**\n   * Returns filter instance from an object representation\n   * @static\n   * @param {Object} object Object to create an instance from\n   * @param {function} [callback] to be invoked after filter creation\n   * @return {fabric.Image.filters.Contrast} Instance of fabric.Image.filters.Contrast\n   */\n  fabric.Image.filters.Contrast.fromObject = fabric.Image.filters.BaseFilter.fromObject;\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric  = global.fabric || (global.fabric = { }),\n      filters = fabric.Image.filters,\n      createClass = fabric.util.createClass;\n\n  /**\n   * Saturate filter class\n   * @class fabric.Image.filters.Saturation\n   * @memberOf fabric.Image.filters\n   * @extends fabric.Image.filters.BaseFilter\n   * @see {@link fabric.Image.filters.Saturation#initialize} for constructor definition\n   * @see {@link http://fabricjs.com/image-filters|ImageFilters demo}\n   * @example\n   * var filter = new fabric.Image.filters.Saturation({\n   *   saturation: 1\n   * });\n   * object.filters.push(filter);\n   * object.applyFilters();\n   */\n  filters.Saturation = createClass(filters.BaseFilter, /** @lends fabric.Image.filters.Saturation.prototype */ {\n\n    /**\n     * Filter type\n     * @param {String} type\n     * @default\n     */\n    type: 'Saturation',\n\n    fragmentSource: 'precision highp float;\\n' +\n      'uniform sampler2D uTexture;\\n' +\n      'uniform float uSaturation;\\n' +\n      'varying vec2 vTexCoord;\\n' +\n      'void main() {\\n' +\n        'vec4 color = texture2D(uTexture, vTexCoord);\\n' +\n        'float rgMax = max(color.r, color.g);\\n' +\n        'float rgbMax = max(rgMax, color.b);\\n' +\n        'color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;\\n' +\n        'color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;\\n' +\n        'color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;\\n' +\n        'gl_FragColor = color;\\n' +\n      '}',\n\n    /**\n     * Saturation value, from -1 to 1.\n     * Increases/decreases the color saturation.\n     * A value of 0 has no effect.\n     * \n     * @param {Number} saturation\n     * @default\n     */\n    saturation: 0,\n\n    mainParameter: 'saturation',\n\n    /**\n     * Constructor\n     * @memberOf fabric.Image.filters.Saturate.prototype\n     * @param {Object} [options] Options object\n     * @param {Number} [options.saturate=0] Value to saturate the image (-1...1)\n     */\n\n    /**\n     * Apply the Saturation operation to a Uint8ClampedArray representing the pixels of an image.\n     *\n     * @param {Object} options\n     * @param {ImageData} options.imageData The Uint8ClampedArray to be filtered.\n     */\n    applyTo2d: function(options) {\n      if (this.saturation === 0) {\n        return;\n      }\n      var imageData = options.imageData,\n          data = imageData.data, len = data.length,\n          adjust = -this.saturation, i, max;\n\n      for (i = 0; i < len; i += 4) {\n        max = Math.max(data[i], data[i + 1], data[i + 2]);\n        data[i] += max !== data[i] ? (max - data[i]) * adjust : 0;\n        data[i + 1] += max !== data[i + 1] ? (max - data[i + 1]) * adjust : 0;\n        data[i + 2] += max !== data[i + 2] ? (max - data[i + 2]) * adjust : 0;\n      }\n    },\n\n    /**\n     * Return WebGL uniform locations for this filter's shader.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {WebGLShaderProgram} program This filter's compiled shader program.\n     */\n    getUniformLocations: function(gl, program) {\n      return {\n        uSaturation: gl.getUniformLocation(program, 'uSaturation'),\n      };\n    },\n\n    /**\n     * Send data from this filter to its shader program's uniforms.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {Object} uniformLocations A map of string uniform names to WebGLUniformLocation objects\n     */\n    sendUniformData: function(gl, uniformLocations) {\n      gl.uniform1f(uniformLocations.uSaturation, -this.saturation);\n    },\n  });\n\n  /**\n   * Returns filter instance from an object representation\n   * @static\n   * @param {Object} object Object to create an instance from\n   * @param {Function} [callback] to be invoked after filter creation\n   * @return {fabric.Image.filters.Saturation} Instance of fabric.Image.filters.Saturate\n   */\n  fabric.Image.filters.Saturation.fromObject = fabric.Image.filters.BaseFilter.fromObject;\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric  = global.fabric || (global.fabric = { }),\n      filters = fabric.Image.filters,\n      createClass = fabric.util.createClass;\n\n  /**\n   * Vibrance filter class\n   * @class fabric.Image.filters.Vibrance\n   * @memberOf fabric.Image.filters\n   * @extends fabric.Image.filters.BaseFilter\n   * @see {@link fabric.Image.filters.Vibrance#initialize} for constructor definition\n   * @see {@link http://fabricjs.com/image-filters|ImageFilters demo}\n   * @example\n   * var filter = new fabric.Image.filters.Vibrance({\n   *   vibrance: 1\n   * });\n   * object.filters.push(filter);\n   * object.applyFilters();\n   */\n  filters.Vibrance = createClass(filters.BaseFilter, /** @lends fabric.Image.filters.Vibrance.prototype */ {\n\n    /**\n     * Filter type\n     * @param {String} type\n     * @default\n     */\n    type: 'Vibrance',\n\n    fragmentSource: 'precision highp float;\\n' +\n      'uniform sampler2D uTexture;\\n' +\n      'uniform float uVibrance;\\n' +\n      'varying vec2 vTexCoord;\\n' +\n      'void main() {\\n' +\n        'vec4 color = texture2D(uTexture, vTexCoord);\\n' +\n        'float max = max(color.r, max(color.g, color.b));\\n' +\n        'float avg = (color.r + color.g + color.b) / 3.0;\\n' +\n        'float amt = (abs(max - avg) * 2.0) * uVibrance;\\n' +\n        'color.r += max != color.r ? (max - color.r) * amt : 0.00;\\n' +\n        'color.g += max != color.g ? (max - color.g) * amt : 0.00;\\n' +\n        'color.b += max != color.b ? (max - color.b) * amt : 0.00;\\n' +\n        'gl_FragColor = color;\\n' +\n      '}',\n\n    /**\n     * Vibrance value, from -1 to 1.\n     * Increases/decreases the saturation of more muted colors with less effect on saturated colors.\n     * A value of 0 has no effect.\n     * \n     * @param {Number} vibrance\n     * @default\n     */\n    vibrance: 0,\n\n    mainParameter: 'vibrance',\n\n    /**\n     * Constructor\n     * @memberOf fabric.Image.filters.Vibrance.prototype\n     * @param {Object} [options] Options object\n     * @param {Number} [options.vibrance=0] Vibrance value for the image (between -1 and 1)\n     */\n\n    /**\n     * Apply the Vibrance operation to a Uint8ClampedArray representing the pixels of an image.\n     *\n     * @param {Object} options\n     * @param {ImageData} options.imageData The Uint8ClampedArray to be filtered.\n     */\n    applyTo2d: function(options) {\n      if (this.vibrance === 0) {\n        return;\n      }\n      var imageData = options.imageData,\n          data = imageData.data, len = data.length,\n          adjust = -this.vibrance, i, max, avg, amt;\n\n      for (i = 0; i < len; i += 4) {\n        max = Math.max(data[i], data[i + 1], data[i + 2]);\n        avg = (data[i] + data[i + 1] + data[i + 2]) / 3;\n        amt = ((Math.abs(max - avg) * 2 / 255) * adjust);\n        data[i] += max !== data[i] ? (max - data[i]) * amt : 0;\n        data[i + 1] += max !== data[i + 1] ? (max - data[i + 1]) * amt : 0;\n        data[i + 2] += max !== data[i + 2] ? (max - data[i + 2]) * amt : 0;\n      }\n    },\n\n    /**\n     * Return WebGL uniform locations for this filter's shader.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {WebGLShaderProgram} program This filter's compiled shader program.\n     */\n    getUniformLocations: function(gl, program) {\n      return {\n        uVibrance: gl.getUniformLocation(program, 'uVibrance'),\n      };\n    },\n\n    /**\n     * Send data from this filter to its shader program's uniforms.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {Object} uniformLocations A map of string uniform names to WebGLUniformLocation objects\n     */\n    sendUniformData: function(gl, uniformLocations) {\n      gl.uniform1f(uniformLocations.uVibrance, -this.vibrance);\n    },\n  });\n\n  /**\n   * Returns filter instance from an object representation\n   * @static\n   * @param {Object} object Object to create an instance from\n   * @param {Function} [callback] to be invoked after filter creation\n   * @return {fabric.Image.filters.Vibrance} Instance of fabric.Image.filters.Vibrance\n   */\n  fabric.Image.filters.Vibrance.fromObject = fabric.Image.filters.BaseFilter.fromObject;\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric  = global.fabric || (global.fabric = { }),\n      filters = fabric.Image.filters,\n      createClass = fabric.util.createClass;\n\n  /**\n   * Blur filter class\n   * @class fabric.Image.filters.Blur\n   * @memberOf fabric.Image.filters\n   * @extends fabric.Image.filters.BaseFilter\n   * @see {@link fabric.Image.filters.Blur#initialize} for constructor definition\n   * @see {@link http://fabricjs.com/image-filters|ImageFilters demo}\n   * @example\n   * var filter = new fabric.Image.filters.Blur({\n   *   blur: 0.5\n   * });\n   * object.filters.push(filter);\n   * object.applyFilters();\n   * canvas.renderAll();\n   */\n  filters.Blur = createClass(filters.BaseFilter, /** @lends fabric.Image.filters.Blur.prototype */ {\n\n    type: 'Blur',\n\n    /*\n'gl_FragColor = vec4(0.0);',\n'gl_FragColor += texture2D(texture, vTexCoord + -7 * uDelta)*0.0044299121055113265;',\n'gl_FragColor += texture2D(texture, vTexCoord + -6 * uDelta)*0.00895781211794;',\n'gl_FragColor += texture2D(texture, vTexCoord + -5 * uDelta)*0.0215963866053;',\n'gl_FragColor += texture2D(texture, vTexCoord + -4 * uDelta)*0.0443683338718;',\n'gl_FragColor += texture2D(texture, vTexCoord + -3 * uDelta)*0.0776744219933;',\n'gl_FragColor += texture2D(texture, vTexCoord + -2 * uDelta)*0.115876621105;',\n'gl_FragColor += texture2D(texture, vTexCoord + -1 * uDelta)*0.147308056121;',\n'gl_FragColor += texture2D(texture, vTexCoord              )*0.159576912161;',\n'gl_FragColor += texture2D(texture, vTexCoord + 1 * uDelta)*0.147308056121;',\n'gl_FragColor += texture2D(texture, vTexCoord + 2 * uDelta)*0.115876621105;',\n'gl_FragColor += texture2D(texture, vTexCoord + 3 * uDelta)*0.0776744219933;',\n'gl_FragColor += texture2D(texture, vTexCoord + 4 * uDelta)*0.0443683338718;',\n'gl_FragColor += texture2D(texture, vTexCoord + 5 * uDelta)*0.0215963866053;',\n'gl_FragColor += texture2D(texture, vTexCoord + 6 * uDelta)*0.00895781211794;',\n'gl_FragColor += texture2D(texture, vTexCoord + 7 * uDelta)*0.0044299121055113265;',\n*/\n\n    /* eslint-disable max-len */\n    fragmentSource: 'precision highp float;\\n' +\n      'uniform sampler2D uTexture;\\n' +\n      'uniform vec2 uDelta;\\n' +\n      'varying vec2 vTexCoord;\\n' +\n      'const float nSamples = 15.0;\\n' +\n      'vec3 v3offset = vec3(12.9898, 78.233, 151.7182);\\n' +\n      'float random(vec3 scale) {\\n' +\n        /* use the fragment position for a different seed per-pixel */\n        'return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);\\n' +\n      '}\\n' +\n      'void main() {\\n' +\n        'vec4 color = vec4(0.0);\\n' +\n        'float total = 0.0;\\n' +\n        'float offset = random(v3offset);\\n' +\n        'for (float t = -nSamples; t <= nSamples; t++) {\\n' +\n          'float percent = (t + offset - 0.5) / nSamples;\\n' +\n          'float weight = 1.0 - abs(percent);\\n' +\n          'color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;\\n' +\n          'total += weight;\\n' +\n        '}\\n' +\n        'gl_FragColor = color / total;\\n' +\n      '}',\n    /* eslint-enable max-len */\n\n    /**\n     * blur value, in percentage of image dimensions.\n     * specific to keep the image blur constant at different resolutions\n     * range between 0 and 1.\n     * @type Number\n     * @default\n     */\n    blur: 0,\n\n    mainParameter: 'blur',\n\n    applyTo: function(options) {\n      if (options.webgl) {\n        // this aspectRatio is used to give the same blur to vertical and horizontal\n        this.aspectRatio = options.sourceWidth / options.sourceHeight;\n        options.passes++;\n        this._setupFrameBuffer(options);\n        this.horizontal = true;\n        this.applyToWebGL(options);\n        this._swapTextures(options);\n        this._setupFrameBuffer(options);\n        this.horizontal = false;\n        this.applyToWebGL(options);\n        this._swapTextures(options);\n      }\n      else {\n        this.applyTo2d(options);\n      }\n    },\n\n    applyTo2d: function(options) {\n      // paint canvasEl with current image data.\n      //options.ctx.putImageData(options.imageData, 0, 0);\n      options.imageData = this.simpleBlur(options);\n    },\n\n    simpleBlur: function(options) {\n      var resources = options.filterBackend.resources, canvas1, canvas2,\n          width = options.imageData.width,\n          height = options.imageData.height;\n\n      if (!resources.blurLayer1) {\n        resources.blurLayer1 = fabric.util.createCanvasElement();\n        resources.blurLayer2 = fabric.util.createCanvasElement();\n      }\n      canvas1 = resources.blurLayer1;\n      canvas2 = resources.blurLayer2;\n      if (canvas1.width !== width || canvas1.height !== height) {\n        canvas2.width = canvas1.width = width;\n        canvas2.height = canvas1.height = height;\n      }\n      var ctx1 = canvas1.getContext('2d'),\n          ctx2 = canvas2.getContext('2d'),\n          nSamples = 15,\n          random, percent, j, i,\n          blur = this.blur * 0.06 * 0.5;\n\n      // load first canvas\n      ctx1.putImageData(options.imageData, 0, 0);\n      ctx2.clearRect(0, 0, width, height);\n\n      for (i = -nSamples; i <= nSamples; i++) {\n        random = (Math.random() - 0.5) / 4;\n        percent = i / nSamples;\n        j = blur * percent * width + random;\n        ctx2.globalAlpha = 1 - Math.abs(percent);\n        ctx2.drawImage(canvas1, j, random);\n        ctx1.drawImage(canvas2, 0, 0);\n        ctx2.globalAlpha = 1;\n        ctx2.clearRect(0, 0, canvas2.width, canvas2.height);\n      }\n      for (i = -nSamples; i <= nSamples; i++) {\n        random = (Math.random() - 0.5) / 4;\n        percent = i / nSamples;\n        j = blur * percent * height + random;\n        ctx2.globalAlpha = 1 - Math.abs(percent);\n        ctx2.drawImage(canvas1, random, j);\n        ctx1.drawImage(canvas2, 0, 0);\n        ctx2.globalAlpha = 1;\n        ctx2.clearRect(0, 0, canvas2.width, canvas2.height);\n      }\n      options.ctx.drawImage(canvas1, 0, 0);\n      var newImageData = options.ctx.getImageData(0, 0, canvas1.width, canvas1.height);\n      ctx1.globalAlpha = 1;\n      ctx1.clearRect(0, 0, canvas1.width, canvas1.height);\n      return newImageData;\n    },\n\n    /**\n     * Return WebGL uniform locations for this filter's shader.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {WebGLShaderProgram} program This filter's compiled shader program.\n     */\n    getUniformLocations: function(gl, program) {\n      return {\n        delta: gl.getUniformLocation(program, 'uDelta'),\n      };\n    },\n\n    /**\n     * Send data from this filter to its shader program's uniforms.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {Object} uniformLocations A map of string uniform names to WebGLUniformLocation objects\n     */\n    sendUniformData: function(gl, uniformLocations) {\n      var delta = this.chooseRightDelta();\n      gl.uniform2fv(uniformLocations.delta, delta);\n    },\n\n    /**\n     * choose right value of image percentage to blur with\n     * @returns {Array} a numeric array with delta values\n     */\n    chooseRightDelta: function() {\n      var blurScale = 1, delta = [0, 0], blur;\n      if (this.horizontal) {\n        if (this.aspectRatio > 1) {\n          // image is wide, i want to shrink radius horizontal\n          blurScale = 1 / this.aspectRatio;\n        }\n      }\n      else {\n        if (this.aspectRatio < 1) {\n          // image is tall, i want to shrink radius vertical\n          blurScale = this.aspectRatio;\n        }\n      }\n      blur = blurScale * this.blur * 0.12;\n      if (this.horizontal) {\n        delta[0] = blur;\n      }\n      else {\n        delta[1] = blur;\n      }\n      return delta;\n    },\n  });\n\n  /**\n   * Deserialize a JSON definition of a BlurFilter into a concrete instance.\n   */\n  filters.Blur.fromObject = fabric.Image.filters.BaseFilter.fromObject;\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric  = global.fabric || (global.fabric = { }),\n      filters = fabric.Image.filters,\n      createClass = fabric.util.createClass;\n\n  /**\n   * Gamma filter class\n   * @class fabric.Image.filters.Gamma\n   * @memberOf fabric.Image.filters\n   * @extends fabric.Image.filters.BaseFilter\n   * @see {@link fabric.Image.filters.Gamma#initialize} for constructor definition\n   * @see {@link http://fabricjs.com/image-filters|ImageFilters demo}\n   * @example\n   * var filter = new fabric.Image.filters.Gamma({\n   *   gamma: [1, 0.5, 2.1]\n   * });\n   * object.filters.push(filter);\n   * object.applyFilters();\n   */\n  filters.Gamma = createClass(filters.BaseFilter, /** @lends fabric.Image.filters.Gamma.prototype */ {\n\n    /**\n     * Filter type\n     * @param {String} type\n     * @default\n     */\n    type: 'Gamma',\n\n    fragmentSource: 'precision highp float;\\n' +\n      'uniform sampler2D uTexture;\\n' +\n      'uniform vec3 uGamma;\\n' +\n      'varying vec2 vTexCoord;\\n' +\n      'void main() {\\n' +\n        'vec4 color = texture2D(uTexture, vTexCoord);\\n' +\n        'vec3 correction = (1.0 / uGamma);\\n' +\n        'color.r = pow(color.r, correction.r);\\n' +\n        'color.g = pow(color.g, correction.g);\\n' +\n        'color.b = pow(color.b, correction.b);\\n' +\n        'gl_FragColor = color;\\n' +\n        'gl_FragColor.rgb *= color.a;\\n' +\n      '}',\n\n    /**\n     * Gamma array value, from 0.01 to 2.2.\n     * @param {Array} gamma\n     * @default\n     */\n    gamma: [1, 1, 1],\n\n    /**\n     * Describe the property that is the filter parameter\n     * @param {String} m\n     * @default\n     */\n    mainParameter: 'gamma',\n\n    /**\n     * Constructor\n     * @param {Object} [options] Options object\n     */\n    initialize: function(options) {\n      this.gamma = [1, 1, 1];\n      filters.BaseFilter.prototype.initialize.call(this, options);\n    },\n\n    /**\n     * Apply the Gamma operation to a Uint8Array representing the pixels of an image.\n     *\n     * @param {Object} options\n     * @param {ImageData} options.imageData The Uint8Array to be filtered.\n     */\n    applyTo2d: function(options) {\n      var imageData = options.imageData, data = imageData.data,\n          gamma = this.gamma, len = data.length,\n          rInv = 1 / gamma[0], gInv = 1 / gamma[1],\n          bInv = 1 / gamma[2], i;\n\n      if (!this.rVals) {\n        // eslint-disable-next-line\n        this.rVals = new Uint8Array(256);\n        // eslint-disable-next-line\n        this.gVals = new Uint8Array(256);\n        // eslint-disable-next-line\n        this.bVals = new Uint8Array(256);\n      }\n\n      // This is an optimization - pre-compute a look-up table for each color channel\n      // instead of performing these pow calls for each pixel in the image.\n      for (i = 0, len = 256; i < len; i++) {\n        this.rVals[i] = Math.pow(i / 255, rInv) * 255;\n        this.gVals[i] = Math.pow(i / 255, gInv) * 255;\n        this.bVals[i] = Math.pow(i / 255, bInv) * 255;\n      }\n      for (i = 0, len = data.length; i < len; i += 4) {\n        data[i] = this.rVals[data[i]];\n        data[i + 1] = this.gVals[data[i + 1]];\n        data[i + 2] = this.bVals[data[i + 2]];\n      }\n    },\n\n    /**\n     * Return WebGL uniform locations for this filter's shader.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {WebGLShaderProgram} program This filter's compiled shader program.\n     */\n    getUniformLocations: function(gl, program) {\n      return {\n        uGamma: gl.getUniformLocation(program, 'uGamma'),\n      };\n    },\n\n    /**\n     * Send data from this filter to its shader program's uniforms.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {Object} uniformLocations A map of string uniform names to WebGLUniformLocation objects\n     */\n    sendUniformData: function(gl, uniformLocations) {\n      gl.uniform3fv(uniformLocations.uGamma, this.gamma);\n    },\n  });\n\n  /**\n   * Returns filter instance from an object representation\n   * @static\n   * @param {Object} object Object to create an instance from\n   * @param {function} [callback] to be invoked after filter creation\n   * @return {fabric.Image.filters.Gamma} Instance of fabric.Image.filters.Gamma\n   */\n  fabric.Image.filters.Gamma.fromObject = fabric.Image.filters.BaseFilter.fromObject;\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric  = global.fabric || (global.fabric = { }),\n      filters = fabric.Image.filters,\n      createClass = fabric.util.createClass;\n\n  /**\n   * A container class that knows how to apply a sequence of filters to an input image.\n   */\n  filters.Composed = createClass(filters.BaseFilter, /** @lends fabric.Image.filters.Composed.prototype */ {\n\n    type: 'Composed',\n\n    /**\n     * A non sparse array of filters to apply\n     */\n    subFilters: [],\n\n    /**\n     * Constructor\n     * @param {Object} [options] Options object\n     */\n    initialize: function(options) {\n      this.callSuper('initialize', options);\n      // create a new array instead mutating the prototype with push\n      this.subFilters = this.subFilters.slice(0);\n    },\n\n    /**\n     * Apply this container's filters to the input image provided.\n     *\n     * @param {Object} options\n     * @param {Number} options.passes The number of filters remaining to be applied.\n     */\n    applyTo: function(options) {\n      options.passes += this.subFilters.length - 1;\n      this.subFilters.forEach(function(filter) {\n        filter.applyTo(options);\n      });\n    },\n\n    /**\n     * Serialize this filter into JSON.\n     *\n     * @returns {Object} A JSON representation of this filter.\n     */\n    toObject: function() {\n      return fabric.util.object.extend(this.callSuper('toObject'), {\n        subFilters: this.subFilters.map(function(filter) { return filter.toObject(); }),\n      });\n    },\n\n    isNeutralState: function() {\n      return !this.subFilters.some(function(filter) { return !filter.isNeutralState(); });\n    }\n  });\n\n  /**\n   * Deserialize a JSON definition of a ComposedFilter into a concrete instance.\n   */\n  fabric.Image.filters.Composed.fromObject = function(object, callback) {\n    var filters = object.subFilters || [],\n        subFilters = filters.map(function(filter) {\n          return new fabric.Image.filters[filter.type](filter);\n        }),\n        instance = new fabric.Image.filters.Composed({ subFilters: subFilters });\n    callback && callback(instance);\n    return instance;\n  };\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric  = global.fabric || (global.fabric = { }),\n      filters = fabric.Image.filters,\n      createClass = fabric.util.createClass;\n\n  /**\n   * HueRotation filter class\n   * @class fabric.Image.filters.HueRotation\n   * @memberOf fabric.Image.filters\n   * @extends fabric.Image.filters.BaseFilter\n   * @see {@link fabric.Image.filters.HueRotation#initialize} for constructor definition\n   * @see {@link http://fabricjs.com/image-filters|ImageFilters demo}\n   * @example\n   * var filter = new fabric.Image.filters.HueRotation({\n   *   rotation: -0.5\n   * });\n   * object.filters.push(filter);\n   * object.applyFilters();\n   */\n  filters.HueRotation = createClass(filters.ColorMatrix, /** @lends fabric.Image.filters.HueRotation.prototype */ {\n\n    /**\n     * Filter type\n     * @param {String} type\n     * @default\n     */\n    type: 'HueRotation',\n\n    /**\n     * HueRotation value, from -1 to 1.\n     * the unit is radians\n     * @param {Number} myParameter\n     * @default\n     */\n    rotation: 0,\n\n    /**\n     * Describe the property that is the filter parameter\n     * @param {String} m\n     * @default\n     */\n    mainParameter: 'rotation',\n\n    calculateMatrix: function() {\n      var rad = this.rotation * Math.PI, cos = fabric.util.cos(rad), sin = fabric.util.sin(rad),\n          aThird = 1 / 3, aThirdSqtSin = Math.sqrt(aThird) * sin, OneMinusCos = 1 - cos;\n      this.matrix = [\n        1, 0, 0, 0, 0,\n        0, 1, 0, 0, 0,\n        0, 0, 1, 0, 0,\n        0, 0, 0, 1, 0\n      ];\n      this.matrix[0] = cos + OneMinusCos / 3;\n      this.matrix[1] = aThird * OneMinusCos - aThirdSqtSin;\n      this.matrix[2] = aThird * OneMinusCos + aThirdSqtSin;\n      this.matrix[5] = aThird * OneMinusCos + aThirdSqtSin;\n      this.matrix[6] = cos + aThird * OneMinusCos;\n      this.matrix[7] = aThird * OneMinusCos - aThirdSqtSin;\n      this.matrix[10] = aThird * OneMinusCos - aThirdSqtSin;\n      this.matrix[11] = aThird * OneMinusCos + aThirdSqtSin;\n      this.matrix[12] = cos + aThird * OneMinusCos;\n    },\n\n    /**\n     * HueRotation isNeutralState implementation\n     * Used only in image applyFilters to discard filters that will not have an effect\n     * on the image\n     * @param {Object} options\n     **/\n    isNeutralState: function(options) {\n      this.calculateMatrix();\n      return filters.BaseFilter.prototype.isNeutralState.call(this, options);\n    },\n\n    /**\n     * Apply this filter to the input image data provided.\n     *\n     * Determines whether to use WebGL or Canvas2D based on the options.webgl flag.\n     *\n     * @param {Object} options\n     * @param {Number} options.passes The number of filters remaining to be executed\n     * @param {Boolean} options.webgl Whether to use webgl to render the filter.\n     * @param {WebGLTexture} options.sourceTexture The texture setup as the source to be filtered.\n     * @param {WebGLTexture} options.targetTexture The texture where filtered output should be drawn.\n     * @param {WebGLRenderingContext} options.context The GL context used for rendering.\n     * @param {Object} options.programCache A map of compiled shader programs, keyed by filter type.\n     */\n    applyTo: function(options) {\n      this.calculateMatrix();\n      filters.BaseFilter.prototype.applyTo.call(this, options);\n    },\n\n  });\n\n  /**\n   * Returns filter instance from an object representation\n   * @static\n   * @param {Object} object Object to create an instance from\n   * @param {function} [callback] to be invoked after filter creation\n   * @return {fabric.Image.filters.HueRotation} Instance of fabric.Image.filters.HueRotation\n   */\n  fabric.Image.filters.HueRotation.fromObject = fabric.Image.filters.BaseFilter.fromObject;\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric = global.fabric || (global.fabric = { }),\n      clone = fabric.util.object.clone;\n\n  if (fabric.Text) {\n    fabric.warn('fabric.Text is already defined');\n    return;\n  }\n\n  var additionalProps =\n    ('fontFamily fontWeight fontSize text underline overline linethrough' +\n    ' textAlign fontStyle lineHeight textBackgroundColor charSpacing styles' +\n    ' direction path pathStartOffset pathSide pathAlign').split(' ');\n\n  /**\n   * Text class\n   * @class fabric.Text\n   * @extends fabric.Object\n   * @return {fabric.Text} thisArg\n   * @tutorial {@link http://fabricjs.com/fabric-intro-part-2#text}\n   * @see {@link fabric.Text#initialize} for constructor definition\n   */\n  fabric.Text = fabric.util.createClass(fabric.Object, /** @lends fabric.Text.prototype */ {\n\n    /**\n     * Properties which when set cause object to change dimensions\n     * @type Array\n     * @private\n     */\n    _dimensionAffectingProps: [\n      'fontSize',\n      'fontWeight',\n      'fontFamily',\n      'fontStyle',\n      'lineHeight',\n      'text',\n      'charSpacing',\n      'textAlign',\n      'styles',\n      'path',\n      'pathStartOffset',\n      'pathSide',\n      'pathAlign'\n    ],\n\n    /**\n     * @private\n     */\n    _reNewline: /\\r?\\n/,\n\n    /**\n     * Use this regular expression to filter for whitespaces that is not a new line.\n     * Mostly used when text is 'justify' aligned.\n     * @private\n     */\n    _reSpacesAndTabs: /[ \\t\\r]/g,\n\n    /**\n     * Use this regular expression to filter for whitespace that is not a new line.\n     * Mostly used when text is 'justify' aligned.\n     * @private\n     */\n    _reSpaceAndTab: /[ \\t\\r]/,\n\n    /**\n     * Use this regular expression to filter consecutive groups of non spaces.\n     * Mostly used when text is 'justify' aligned.\n     * @private\n     */\n    _reWords: /\\S+/g,\n\n    /**\n     * Type of an object\n     * @type String\n     * @default\n     */\n    type:                 'text',\n\n    /**\n     * Font size (in pixels)\n     * @type Number\n     * @default\n     */\n    fontSize:             40,\n\n    /**\n     * Font weight (e.g. bold, normal, 400, 600, 800)\n     * @type {(Number|String)}\n     * @default\n     */\n    fontWeight:           'normal',\n\n    /**\n     * Font family\n     * @type String\n     * @default\n     */\n    fontFamily:           'Times New Roman',\n\n    /**\n     * Text decoration underline.\n     * @type Boolean\n     * @default\n     */\n    underline:       false,\n\n    /**\n     * Text decoration overline.\n     * @type Boolean\n     * @default\n     */\n    overline:       false,\n\n    /**\n     * Text decoration linethrough.\n     * @type Boolean\n     * @default\n     */\n    linethrough:       false,\n\n    /**\n     * Text alignment. Possible values: \"left\", \"center\", \"right\", \"justify\",\n     * \"justify-left\", \"justify-center\" or \"justify-right\".\n     * @type String\n     * @default\n     */\n    textAlign:            'left',\n\n    /**\n     * Font style . Possible values: \"\", \"normal\", \"italic\" or \"oblique\".\n     * @type String\n     * @default\n     */\n    fontStyle:            'normal',\n\n    /**\n     * Line height\n     * @type Number\n     * @default\n     */\n    lineHeight:           1.16,\n\n    /**\n     * Superscript schema object (minimum overlap)\n     * @type {Object}\n     * @default\n     */\n    superscript: {\n      size:      0.60, // fontSize factor\n      baseline: -0.35  // baseline-shift factor (upwards)\n    },\n\n    /**\n     * Subscript schema object (minimum overlap)\n     * @type {Object}\n     * @default\n     */\n    subscript: {\n      size:      0.60, // fontSize factor\n      baseline:  0.11  // baseline-shift factor (downwards)\n    },\n\n    /**\n     * Background color of text lines\n     * @type String\n     * @default\n     */\n    textBackgroundColor:  '',\n\n    /**\n     * List of properties to consider when checking if\n     * state of an object is changed ({@link fabric.Object#hasStateChanged})\n     * as well as for history (undo/redo) purposes\n     * @type Array\n     */\n    stateProperties: fabric.Object.prototype.stateProperties.concat(additionalProps),\n\n    /**\n     * List of properties to consider when checking if cache needs refresh\n     * @type Array\n     */\n    cacheProperties: fabric.Object.prototype.cacheProperties.concat(additionalProps),\n\n    /**\n     * When defined, an object is rendered via stroke and this property specifies its color.\n     * <b>Backwards incompatibility note:</b> This property was named \"strokeStyle\" until v1.1.6\n     * @type String\n     * @default\n     */\n    stroke:               null,\n\n    /**\n     * Shadow object representing shadow of this shape.\n     * <b>Backwards incompatibility note:</b> This property was named \"textShadow\" (String) until v1.2.11\n     * @type fabric.Shadow\n     * @default\n     */\n    shadow:               null,\n\n    /**\n     * fabric.Path that the text should follow.\n     * since 4.6.0 the path will be drawn automatically.\n     * if you want to make the path visible, give it a stroke and strokeWidth or fill value\n     * if you want it to be hidden, assign visible = false to the path.\n     * This feature is in BETA, and SVG import/export is not yet supported.\n     * @type fabric.Path\n     * @example\n     * var textPath = new fabric.Text('Text on a path', {\n     *     top: 150,\n     *     left: 150,\n     *     textAlign: 'center',\n     *     charSpacing: -50,\n     *     path: new fabric.Path('M 0 0 C 50 -100 150 -100 200 0', {\n     *         strokeWidth: 1,\n     *         visible: false\n     *     }),\n     *     pathSide: 'left',\n     *     pathStartOffset: 0\n     * });\n     * @default\n     */\n    path:               null,\n\n    /**\n     * Offset amount for text path starting position\n     * Only used when text has a path\n     * @type Number\n     * @default\n     */\n    pathStartOffset:               0,\n\n    /**\n     * Which side of the path the text should be drawn on.\n     * Only used when text has a path\n     * @type {String} 'left|right'\n     * @default\n     */\n    pathSide:               'left',\n\n    /**\n     * How text is aligned to the path. This property determines\n     * the perpendicular position of each character relative to the path.\n     * (one of \"baseline\", \"center\", \"ascender\", \"descender\")\n     * This feature is in BETA, and its behavior may change\n     * @type String\n     * @default\n     */\n    pathAlign:               'baseline',\n\n    /**\n     * @private\n     */\n    _fontSizeFraction: 0.222,\n\n    /**\n     * @private\n     */\n    offsets: {\n      underline: 0.10,\n      linethrough: -0.315,\n      overline: -0.88\n    },\n\n    /**\n     * Text Line proportion to font Size (in pixels)\n     * @type Number\n     * @default\n     */\n    _fontSizeMult:             1.13,\n\n    /**\n     * additional space between characters\n     * expressed in thousands of em unit\n     * @type Number\n     * @default\n     */\n    charSpacing:             0,\n\n    /**\n     * Object containing character styles - top-level properties -> line numbers,\n     * 2nd-level properties - character numbers\n     * @type Object\n     * @default\n     */\n    styles: null,\n\n    /**\n     * Reference to a context to measure text char or couple of chars\n     * the cacheContext of the canvas will be used or a freshly created one if the object is not on canvas\n     * once created it will be referenced on fabric._measuringContext to avoid creating a canvas for every\n     * text object created.\n     * @type {CanvasRenderingContext2D}\n     * @default\n     */\n    _measuringContext: null,\n\n    /**\n     * Baseline shift, styles only, keep at 0 for the main text object\n     * @type {Number}\n     * @default\n     */\n    deltaY: 0,\n\n    /**\n     * WARNING: EXPERIMENTAL. NOT SUPPORTED YET\n     * determine the direction of the text.\n     * This has to be set manually together with textAlign and originX for proper\n     * experience.\n     * some interesting link for the future\n     * https://www.w3.org/International/questions/qa-bidi-unicode-controls\n     * @since 4.5.0\n     * @type {String} 'ltr|rtl'\n     * @default\n     */\n    direction: 'ltr',\n\n    /**\n     * Array of properties that define a style unit (of 'styles').\n     * @type {Array}\n     * @default\n     */\n    _styleProperties: [\n      'stroke',\n      'strokeWidth',\n      'fill',\n      'fontFamily',\n      'fontSize',\n      'fontWeight',\n      'fontStyle',\n      'underline',\n      'overline',\n      'linethrough',\n      'deltaY',\n      'textBackgroundColor',\n    ],\n\n    /**\n     * contains characters bounding boxes\n     */\n    __charBounds: [],\n\n    /**\n     * use this size when measuring text. To avoid IE11 rounding errors\n     * @type {Number}\n     * @default\n     * @readonly\n     * @private\n     */\n    CACHE_FONT_SIZE: 400,\n\n    /**\n     * contains the min text width to avoid getting 0\n     * @type {Number}\n     * @default\n     */\n    MIN_TEXT_WIDTH: 2,\n\n    /**\n     * Constructor\n     * @param {String} text Text string\n     * @param {Object} [options] Options object\n     * @return {fabric.Text} thisArg\n     */\n    initialize: function(text, options) {\n      this.styles = options ? (options.styles || { }) : { };\n      this.text = text;\n      this.__skipDimension = true;\n      this.callSuper('initialize', options);\n      if (this.path) {\n        this.setPathInfo();\n      }\n      this.__skipDimension = false;\n      this.initDimensions();\n      this.setCoords();\n      this.setupState({ propertySet: '_dimensionAffectingProps' });\n    },\n\n    /**\n     * If text has a path, it will add the extra information needed\n     * for path and text calculations\n     * @return {fabric.Text} thisArg\n     */\n    setPathInfo: function() {\n      var path = this.path;\n      if (path) {\n        path.segmentsInfo = fabric.util.getPathSegmentsInfo(path.path);\n      }\n    },\n\n    /**\n     * Return a context for measurement of text string.\n     * if created it gets stored for reuse\n     * this is for internal use, please do not use it\n     * @private\n     * @param {String} text Text string\n     * @param {Object} [options] Options object\n     * @return {fabric.Text} thisArg\n     */\n    getMeasuringContext: function() {\n      // if we did not return we have to measure something.\n      if (!fabric._measuringContext) {\n        fabric._measuringContext = this.canvas && this.canvas.contextCache ||\n          fabric.util.createCanvasElement().getContext('2d');\n      }\n      return fabric._measuringContext;\n    },\n\n    /**\n     * @private\n     * Divides text into lines of text and lines of graphemes.\n     */\n    _splitText: function() {\n      var newLines = this._splitTextIntoLines(this.text);\n      this.textLines = newLines.lines;\n      this._textLines = newLines.graphemeLines;\n      this._unwrappedTextLines = newLines._unwrappedLines;\n      this._text = newLines.graphemeText;\n      return newLines;\n    },\n\n    /**\n     * Initialize or update text dimensions.\n     * Updates this.width and this.height with the proper values.\n     * Does not return dimensions.\n     */\n    initDimensions: function() {\n      if (this.__skipDimension) {\n        return;\n      }\n      this._splitText();\n      this._clearCache();\n      if (this.path) {\n        this.width = this.path.width;\n        this.height = this.path.height;\n      }\n      else {\n        this.width = this.calcTextWidth() || this.cursorWidth || this.MIN_TEXT_WIDTH;\n        this.height = this.calcTextHeight();\n      }\n      if (this.textAlign.indexOf('justify') !== -1) {\n        // once text is measured we need to make space fatter to make justified text.\n        this.enlargeSpaces();\n      }\n      this.saveState({ propertySet: '_dimensionAffectingProps' });\n    },\n\n    /**\n     * Enlarge space boxes and shift the others\n     */\n    enlargeSpaces: function() {\n      var diffSpace, currentLineWidth, numberOfSpaces, accumulatedSpace, line, charBound, spaces;\n      for (var i = 0, len = this._textLines.length; i < len; i++) {\n        if (this.textAlign !== 'justify' && (i === len - 1 || this.isEndOfWrapping(i))) {\n          continue;\n        }\n        accumulatedSpace = 0;\n        line = this._textLines[i];\n        currentLineWidth = this.getLineWidth(i);\n        if (currentLineWidth < this.width && (spaces = this.textLines[i].match(this._reSpacesAndTabs))) {\n          numberOfSpaces = spaces.length;\n          diffSpace = (this.width - currentLineWidth) / numberOfSpaces;\n          for (var j = 0, jlen = line.length; j <= jlen; j++) {\n            charBound = this.__charBounds[i][j];\n            if (this._reSpaceAndTab.test(line[j])) {\n              charBound.width += diffSpace;\n              charBound.kernedWidth += diffSpace;\n              charBound.left += accumulatedSpace;\n              accumulatedSpace += diffSpace;\n            }\n            else {\n              charBound.left += accumulatedSpace;\n            }\n          }\n        }\n      }\n    },\n\n    /**\n     * Detect if the text line is ended with an hard break\n     * text and itext do not have wrapping, return false\n     * @return {Boolean}\n     */\n    isEndOfWrapping: function(lineIndex) {\n      return lineIndex === this._textLines.length - 1;\n    },\n\n    /**\n     * Detect if a line has a linebreak and so we need to account for it when moving\n     * and counting style.\n     * It return always for text and Itext.\n     * @return Number\n     */\n    missingNewlineOffset: function() {\n      return 1;\n    },\n\n    /**\n     * Returns string representation of an instance\n     * @return {String} String representation of text object\n     */\n    toString: function() {\n      return '#<fabric.Text (' + this.complexity() +\n        '): { \"text\": \"' + this.text + '\", \"fontFamily\": \"' + this.fontFamily + '\" }>';\n    },\n\n    /**\n     * Return the dimension and the zoom level needed to create a cache canvas\n     * big enough to host the object to be cached.\n     * @private\n     * @param {Object} dim.x width of object to be cached\n     * @param {Object} dim.y height of object to be cached\n     * @return {Object}.width width of canvas\n     * @return {Object}.height height of canvas\n     * @return {Object}.zoomX zoomX zoom value to unscale the canvas before drawing cache\n     * @return {Object}.zoomY zoomY zoom value to unscale the canvas before drawing cache\n     */\n    _getCacheCanvasDimensions: function() {\n      var dims = this.callSuper('_getCacheCanvasDimensions');\n      var fontSize = this.fontSize;\n      dims.width += fontSize * dims.zoomX;\n      dims.height += fontSize * dims.zoomY;\n      return dims;\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _render: function(ctx) {\n      var path = this.path;\n      path && !path.isNotVisible() && path._render(ctx);\n      this._setTextStyles(ctx);\n      this._renderTextLinesBackground(ctx);\n      this._renderTextDecoration(ctx, 'underline');\n      this._renderText(ctx);\n      this._renderTextDecoration(ctx, 'overline');\n      this._renderTextDecoration(ctx, 'linethrough');\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _renderText: function(ctx) {\n      if (this.paintFirst === 'stroke') {\n        this._renderTextStroke(ctx);\n        this._renderTextFill(ctx);\n      }\n      else {\n        this._renderTextFill(ctx);\n        this._renderTextStroke(ctx);\n      }\n    },\n\n    /**\n     * Set the font parameter of the context with the object properties or with charStyle\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     * @param {Object} [charStyle] object with font style properties\n     * @param {String} [charStyle.fontFamily] Font Family\n     * @param {Number} [charStyle.fontSize] Font size in pixels. ( without px suffix )\n     * @param {String} [charStyle.fontWeight] Font weight\n     * @param {String} [charStyle.fontStyle] Font style (italic|normal)\n     */\n    _setTextStyles: function(ctx, charStyle, forMeasuring) {\n      ctx.textBaseline = 'alphabetical';\n      if (this.path) {\n        switch (this.pathAlign) {\n          case 'center':\n            ctx.textBaseline = 'middle';\n            break;\n          case 'ascender':\n            ctx.textBaseline = 'top';\n            break;\n          case 'descender':\n            ctx.textBaseline = 'bottom';\n            break;\n        }\n      }\n      ctx.font = this._getFontDeclaration(charStyle, forMeasuring);\n    },\n\n    /**\n     * calculate and return the text Width measuring each line.\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     * @return {Number} Maximum width of fabric.Text object\n     */\n    calcTextWidth: function() {\n      var maxWidth = this.getLineWidth(0);\n\n      for (var i = 1, len = this._textLines.length; i < len; i++) {\n        var currentLineWidth = this.getLineWidth(i);\n        if (currentLineWidth > maxWidth) {\n          maxWidth = currentLineWidth;\n        }\n      }\n      return maxWidth;\n    },\n\n    /**\n     * @private\n     * @param {String} method Method name (\"fillText\" or \"strokeText\")\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     * @param {String} line Text to render\n     * @param {Number} left Left position of text\n     * @param {Number} top Top position of text\n     * @param {Number} lineIndex Index of a line in a text\n     */\n    _renderTextLine: function(method, ctx, line, left, top, lineIndex) {\n      this._renderChars(method, ctx, line, left, top, lineIndex);\n    },\n\n    /**\n     * Renders the text background for lines, taking care of style\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _renderTextLinesBackground: function(ctx) {\n      if (!this.textBackgroundColor && !this.styleHas('textBackgroundColor')) {\n        return;\n      }\n      var heightOfLine,\n          lineLeftOffset, originalFill = ctx.fillStyle,\n          line, lastColor,\n          leftOffset = this._getLeftOffset(),\n          lineTopOffset = this._getTopOffset(),\n          boxStart = 0, boxWidth = 0, charBox, currentColor, path = this.path,\n          drawStart;\n\n      for (var i = 0, len = this._textLines.length; i < len; i++) {\n        heightOfLine = this.getHeightOfLine(i);\n        if (!this.textBackgroundColor && !this.styleHas('textBackgroundColor', i)) {\n          lineTopOffset += heightOfLine;\n          continue;\n        }\n        line = this._textLines[i];\n        lineLeftOffset = this._getLineLeftOffset(i);\n        boxWidth = 0;\n        boxStart = 0;\n        lastColor = this.getValueOfPropertyAt(i, 0, 'textBackgroundColor');\n        for (var j = 0, jlen = line.length; j < jlen; j++) {\n          charBox = this.__charBounds[i][j];\n          currentColor = this.getValueOfPropertyAt(i, j, 'textBackgroundColor');\n          if (path) {\n            ctx.save();\n            ctx.translate(charBox.renderLeft, charBox.renderTop);\n            ctx.rotate(charBox.angle);\n            ctx.fillStyle = currentColor;\n            currentColor && ctx.fillRect(\n              -charBox.width / 2,\n              -heightOfLine / this.lineHeight * (1 - this._fontSizeFraction),\n              charBox.width,\n              heightOfLine / this.lineHeight\n            );\n            ctx.restore();\n          }\n          else if (currentColor !== lastColor) {\n            drawStart = leftOffset + lineLeftOffset + boxStart;\n            if (this.direction === 'rtl') {\n              drawStart = this.width - drawStart - boxWidth;\n            }\n            ctx.fillStyle = lastColor;\n            lastColor && ctx.fillRect(\n              drawStart,\n              lineTopOffset,\n              boxWidth,\n              heightOfLine / this.lineHeight\n            );\n            boxStart = charBox.left;\n            boxWidth = charBox.width;\n            lastColor = currentColor;\n          }\n          else {\n            boxWidth += charBox.kernedWidth;\n          }\n        }\n        if (currentColor && !path) {\n          drawStart = leftOffset + lineLeftOffset + boxStart;\n          if (this.direction === 'rtl') {\n            drawStart = this.width - drawStart - boxWidth;\n          }\n          ctx.fillStyle = currentColor;\n          ctx.fillRect(\n            drawStart,\n            lineTopOffset,\n            boxWidth,\n            heightOfLine / this.lineHeight\n          );\n        }\n        lineTopOffset += heightOfLine;\n      }\n      ctx.fillStyle = originalFill;\n      // if there is text background color no\n      // other shadows should be casted\n      this._removeShadow(ctx);\n    },\n\n    /**\n     * @private\n     * @param {Object} decl style declaration for cache\n     * @param {String} decl.fontFamily fontFamily\n     * @param {String} decl.fontStyle fontStyle\n     * @param {String} decl.fontWeight fontWeight\n     * @return {Object} reference to cache\n     */\n    getFontCache: function(decl) {\n      var fontFamily = decl.fontFamily.toLowerCase();\n      if (!fabric.charWidthsCache[fontFamily]) {\n        fabric.charWidthsCache[fontFamily] = { };\n      }\n      var cache = fabric.charWidthsCache[fontFamily],\n          cacheProp = decl.fontStyle.toLowerCase() + '_' + (decl.fontWeight + '').toLowerCase();\n      if (!cache[cacheProp]) {\n        cache[cacheProp] = { };\n      }\n      return cache[cacheProp];\n    },\n\n    /**\n     * measure and return the width of a single character.\n     * possibly overridden to accommodate different measure logic or\n     * to hook some external lib for character measurement\n     * @private\n     * @param {String} _char, char to be measured\n     * @param {Object} charStyle style of char to be measured\n     * @param {String} [previousChar] previous char\n     * @param {Object} [prevCharStyle] style of previous char\n     */\n    _measureChar: function(_char, charStyle, previousChar, prevCharStyle) {\n      // first i try to return from cache\n      var fontCache = this.getFontCache(charStyle), fontDeclaration = this._getFontDeclaration(charStyle),\n          previousFontDeclaration = this._getFontDeclaration(prevCharStyle), couple = previousChar + _char,\n          stylesAreEqual = fontDeclaration === previousFontDeclaration, width, coupleWidth, previousWidth,\n          fontMultiplier = charStyle.fontSize / this.CACHE_FONT_SIZE, kernedWidth;\n\n      if (previousChar && fontCache[previousChar] !== undefined) {\n        previousWidth = fontCache[previousChar];\n      }\n      if (fontCache[_char] !== undefined) {\n        kernedWidth = width = fontCache[_char];\n      }\n      if (stylesAreEqual && fontCache[couple] !== undefined) {\n        coupleWidth = fontCache[couple];\n        kernedWidth = coupleWidth - previousWidth;\n      }\n      if (width === undefined || previousWidth === undefined || coupleWidth === undefined) {\n        var ctx = this.getMeasuringContext();\n        // send a TRUE to specify measuring font size CACHE_FONT_SIZE\n        this._setTextStyles(ctx, charStyle, true);\n      }\n      if (width === undefined) {\n        kernedWidth = width = ctx.measureText(_char).width;\n        fontCache[_char] = width;\n      }\n      if (previousWidth === undefined && stylesAreEqual && previousChar) {\n        previousWidth = ctx.measureText(previousChar).width;\n        fontCache[previousChar] = previousWidth;\n      }\n      if (stylesAreEqual && coupleWidth === undefined) {\n        // we can measure the kerning couple and subtract the width of the previous character\n        coupleWidth = ctx.measureText(couple).width;\n        fontCache[couple] = coupleWidth;\n        kernedWidth = coupleWidth - previousWidth;\n      }\n      return { width: width * fontMultiplier, kernedWidth: kernedWidth * fontMultiplier };\n    },\n\n    /**\n     * Computes height of character at given position\n     * @param {Number} line the line index number\n     * @param {Number} _char the character index number\n     * @return {Number} fontSize of the character\n     */\n    getHeightOfChar: function(line, _char) {\n      return this.getValueOfPropertyAt(line, _char, 'fontSize');\n    },\n\n    /**\n     * measure a text line measuring all characters.\n     * @param {Number} lineIndex line number\n     * @return {Number} Line width\n     */\n    measureLine: function(lineIndex) {\n      var lineInfo = this._measureLine(lineIndex);\n      if (this.charSpacing !== 0) {\n        lineInfo.width -= this._getWidthOfCharSpacing();\n      }\n      if (lineInfo.width < 0) {\n        lineInfo.width = 0;\n      }\n      return lineInfo;\n    },\n\n    /**\n     * measure every grapheme of a line, populating __charBounds\n     * @param {Number} lineIndex\n     * @return {Object} object.width total width of characters\n     * @return {Object} object.widthOfSpaces length of chars that match this._reSpacesAndTabs\n     */\n    _measureLine: function(lineIndex) {\n      var width = 0, i, grapheme, line = this._textLines[lineIndex], prevGrapheme,\n          graphemeInfo, numOfSpaces = 0, lineBounds = new Array(line.length),\n          positionInPath = 0, startingPoint, totalPathLength, path = this.path,\n          reverse = this.pathSide === 'right';\n\n      this.__charBounds[lineIndex] = lineBounds;\n      for (i = 0; i < line.length; i++) {\n        grapheme = line[i];\n        graphemeInfo = this._getGraphemeBox(grapheme, lineIndex, i, prevGrapheme);\n        lineBounds[i] = graphemeInfo;\n        width += graphemeInfo.kernedWidth;\n        prevGrapheme = grapheme;\n      }\n      // this latest bound box represent the last character of the line\n      // to simplify cursor handling in interactive mode.\n      lineBounds[i] = {\n        left: graphemeInfo ? graphemeInfo.left + graphemeInfo.width : 0,\n        width: 0,\n        kernedWidth: 0,\n        height: this.fontSize\n      };\n      if (path) {\n        totalPathLength = path.segmentsInfo[path.segmentsInfo.length - 1].length;\n        startingPoint = fabric.util.getPointOnPath(path.path, 0, path.segmentsInfo);\n        startingPoint.x += path.pathOffset.x;\n        startingPoint.y += path.pathOffset.y;\n        switch (this.textAlign) {\n          case 'left':\n            positionInPath = reverse ? (totalPathLength - width) : 0;\n            break;\n          case 'center':\n            positionInPath = (totalPathLength - width) / 2;\n            break;\n          case 'right':\n            positionInPath = reverse ? 0 : (totalPathLength - width);\n            break;\n          //todo - add support for justify\n        }\n        positionInPath += this.pathStartOffset * (reverse ? -1 : 1);\n        for (i = reverse ? line.length - 1 : 0;\n          reverse ? i >= 0 : i < line.length;\n          reverse ? i-- : i++) {\n          graphemeInfo = lineBounds[i];\n          if (positionInPath > totalPathLength) {\n            positionInPath %= totalPathLength;\n          }\n          else if (positionInPath < 0) {\n            positionInPath += totalPathLength;\n          }\n          // it would probably much faster to send all the grapheme position for a line\n          // and calculate path position/angle at once.\n          this._setGraphemeOnPath(positionInPath, graphemeInfo, startingPoint);\n          positionInPath += graphemeInfo.kernedWidth;\n        }\n      }\n      return { width: width, numOfSpaces: numOfSpaces };\n    },\n\n    /**\n     * Calculate the angle  and the left,top position of the char that follow a path.\n     * It appends it to graphemeInfo to be reused later at rendering\n     * @private\n     * @param {Number} positionInPath to be measured\n     * @param {Object} graphemeInfo current grapheme box information\n     * @param {Object} startingPoint position of the point\n     */\n    _setGraphemeOnPath: function(positionInPath, graphemeInfo, startingPoint) {\n      var centerPosition = positionInPath + graphemeInfo.kernedWidth / 2,\n          path = this.path;\n\n      // we are at currentPositionOnPath. we want to know what point on the path is.\n      var info = fabric.util.getPointOnPath(path.path, centerPosition, path.segmentsInfo);\n      graphemeInfo.renderLeft = info.x - startingPoint.x;\n      graphemeInfo.renderTop = info.y - startingPoint.y;\n      graphemeInfo.angle = info.angle + (this.pathSide ===  'right' ? Math.PI : 0);\n    },\n\n    /**\n     * Measure and return the info of a single grapheme.\n     * needs the the info of previous graphemes already filled\n     * @private\n     * @param {String} grapheme to be measured\n     * @param {Number} lineIndex index of the line where the char is\n     * @param {Number} charIndex position in the line\n     * @param {String} [prevGrapheme] character preceding the one to be measured\n     */\n    _getGraphemeBox: function(grapheme, lineIndex, charIndex, prevGrapheme, skipLeft) {\n      var style = this.getCompleteStyleDeclaration(lineIndex, charIndex),\n          prevStyle = prevGrapheme ? this.getCompleteStyleDeclaration(lineIndex, charIndex - 1) : { },\n          info = this._measureChar(grapheme, style, prevGrapheme, prevStyle),\n          kernedWidth = info.kernedWidth,\n          width = info.width, charSpacing;\n\n      if (this.charSpacing !== 0) {\n        charSpacing = this._getWidthOfCharSpacing();\n        width += charSpacing;\n        kernedWidth += charSpacing;\n      }\n\n      var box = {\n        width: width,\n        left: 0,\n        height: style.fontSize,\n        kernedWidth: kernedWidth,\n        deltaY: style.deltaY,\n      };\n      if (charIndex > 0 && !skipLeft) {\n        var previousBox = this.__charBounds[lineIndex][charIndex - 1];\n        box.left = previousBox.left + previousBox.width + info.kernedWidth - info.width;\n      }\n      return box;\n    },\n\n    /**\n     * Calculate height of line at 'lineIndex'\n     * @param {Number} lineIndex index of line to calculate\n     * @return {Number}\n     */\n    getHeightOfLine: function(lineIndex) {\n      if (this.__lineHeights[lineIndex]) {\n        return this.__lineHeights[lineIndex];\n      }\n\n      var line = this._textLines[lineIndex],\n          // char 0 is measured before the line cycle because it nneds to char\n          // emptylines\n          maxHeight = this.getHeightOfChar(lineIndex, 0);\n      for (var i = 1, len = line.length; i < len; i++) {\n        maxHeight = Math.max(this.getHeightOfChar(lineIndex, i), maxHeight);\n      }\n\n      return this.__lineHeights[lineIndex] = maxHeight * this.lineHeight * this._fontSizeMult;\n    },\n\n    /**\n     * Calculate text box height\n     */\n    calcTextHeight: function() {\n      var lineHeight, height = 0;\n      for (var i = 0, len = this._textLines.length; i < len; i++) {\n        lineHeight = this.getHeightOfLine(i);\n        height += (i === len - 1 ? lineHeight / this.lineHeight : lineHeight);\n      }\n      return height;\n    },\n\n    /**\n     * @private\n     * @return {Number} Left offset\n     */\n    _getLeftOffset: function() {\n      return this.direction === 'ltr' ? -this.width / 2 : this.width / 2;\n    },\n\n    /**\n     * @private\n     * @return {Number} Top offset\n     */\n    _getTopOffset: function() {\n      return -this.height / 2;\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     * @param {String} method Method name (\"fillText\" or \"strokeText\")\n     */\n    _renderTextCommon: function(ctx, method) {\n      ctx.save();\n      var lineHeights = 0, left = this._getLeftOffset(), top = this._getTopOffset();\n      for (var i = 0, len = this._textLines.length; i < len; i++) {\n        var heightOfLine = this.getHeightOfLine(i),\n            maxHeight = heightOfLine / this.lineHeight,\n            leftOffset = this._getLineLeftOffset(i);\n        this._renderTextLine(\n          method,\n          ctx,\n          this._textLines[i],\n          left + leftOffset,\n          top + lineHeights + maxHeight,\n          i\n        );\n        lineHeights += heightOfLine;\n      }\n      ctx.restore();\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _renderTextFill: function(ctx) {\n      if (!this.fill && !this.styleHas('fill')) {\n        return;\n      }\n\n      this._renderTextCommon(ctx, 'fillText');\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _renderTextStroke: function(ctx) {\n      if ((!this.stroke || this.strokeWidth === 0) && this.isEmptyStyles()) {\n        return;\n      }\n\n      if (this.shadow && !this.shadow.affectStroke) {\n        this._removeShadow(ctx);\n      }\n\n      ctx.save();\n      this._setLineDash(ctx, this.strokeDashArray);\n      ctx.beginPath();\n      this._renderTextCommon(ctx, 'strokeText');\n      ctx.closePath();\n      ctx.restore();\n    },\n\n    /**\n     * @private\n     * @param {String} method fillText or strokeText.\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     * @param {Array} line Content of the line, splitted in an array by grapheme\n     * @param {Number} left\n     * @param {Number} top\n     * @param {Number} lineIndex\n     */\n    _renderChars: function(method, ctx, line, left, top, lineIndex) {\n      // set proper line offset\n      var lineHeight = this.getHeightOfLine(lineIndex),\n          isJustify = this.textAlign.indexOf('justify') !== -1,\n          actualStyle,\n          nextStyle,\n          charsToRender = '',\n          charBox,\n          boxWidth = 0,\n          timeToRender,\n          path = this.path,\n          shortCut = !isJustify && this.charSpacing === 0 && this.isEmptyStyles(lineIndex) && !path,\n          isLtr = this.direction === 'ltr', sign = this.direction === 'ltr' ? 1 : -1,\n          drawingLeft, currentDirection = ctx.canvas.getAttribute('dir');\n      ctx.save();\n      if (currentDirection !== this.direction) {\n        ctx.canvas.setAttribute('dir', isLtr ? 'ltr' : 'rtl');\n        ctx.direction = isLtr ? 'ltr' : 'rtl';\n        ctx.textAlign = isLtr ? 'left' : 'right';\n      }\n      top -= lineHeight * this._fontSizeFraction / this.lineHeight;\n      if (shortCut) {\n        // render all the line in one pass without checking\n        // drawingLeft = isLtr ? left : left - this.getLineWidth(lineIndex);\n        this._renderChar(method, ctx, lineIndex, 0, line.join(''), left, top, lineHeight);\n        ctx.restore();\n        return;\n      }\n      for (var i = 0, len = line.length - 1; i <= len; i++) {\n        timeToRender = i === len || this.charSpacing || path;\n        charsToRender += line[i];\n        charBox = this.__charBounds[lineIndex][i];\n        if (boxWidth === 0) {\n          left += sign * (charBox.kernedWidth - charBox.width);\n          boxWidth += charBox.width;\n        }\n        else {\n          boxWidth += charBox.kernedWidth;\n        }\n        if (isJustify && !timeToRender) {\n          if (this._reSpaceAndTab.test(line[i])) {\n            timeToRender = true;\n          }\n        }\n        if (!timeToRender) {\n          // if we have charSpacing, we render char by char\n          actualStyle = actualStyle || this.getCompleteStyleDeclaration(lineIndex, i);\n          nextStyle = this.getCompleteStyleDeclaration(lineIndex, i + 1);\n          timeToRender = this._hasStyleChanged(actualStyle, nextStyle);\n        }\n        if (timeToRender) {\n          if (path) {\n            ctx.save();\n            ctx.translate(charBox.renderLeft, charBox.renderTop);\n            ctx.rotate(charBox.angle);\n            this._renderChar(method, ctx, lineIndex, i, charsToRender, -boxWidth / 2, 0, lineHeight);\n            ctx.restore();\n          }\n          else {\n            drawingLeft = left;\n            this._renderChar(method, ctx, lineIndex, i, charsToRender, drawingLeft, top, lineHeight);\n          }\n          charsToRender = '';\n          actualStyle = nextStyle;\n          left += sign * boxWidth;\n          boxWidth = 0;\n        }\n      }\n      ctx.restore();\n    },\n\n    /**\n     * This function try to patch the missing gradientTransform on canvas gradients.\n     * transforming a context to transform the gradient, is going to transform the stroke too.\n     * we want to transform the gradient but not the stroke operation, so we create\n     * a transformed gradient on a pattern and then we use the pattern instead of the gradient.\n     * this method has drawbacks: is slow, is in low resolution, needs a patch for when the size\n     * is limited.\n     * @private\n     * @param {fabric.Gradient} filler a fabric gradient instance\n     * @return {CanvasPattern} a pattern to use as fill/stroke style\n     */\n    _applyPatternGradientTransformText: function(filler) {\n      var pCanvas = fabric.util.createCanvasElement(), pCtx,\n          // TODO: verify compatibility with strokeUniform\n          width = this.width + this.strokeWidth, height = this.height + this.strokeWidth;\n      pCanvas.width = width;\n      pCanvas.height = height;\n      pCtx = pCanvas.getContext('2d');\n      pCtx.beginPath(); pCtx.moveTo(0, 0); pCtx.lineTo(width, 0); pCtx.lineTo(width, height);\n      pCtx.lineTo(0, height); pCtx.closePath();\n      pCtx.translate(width / 2, height / 2);\n      pCtx.fillStyle = filler.toLive(pCtx);\n      this._applyPatternGradientTransform(pCtx, filler);\n      pCtx.fill();\n      return pCtx.createPattern(pCanvas, 'no-repeat');\n    },\n\n    handleFiller: function(ctx, property, filler) {\n      var offsetX, offsetY;\n      if (filler.toLive) {\n        if (filler.gradientUnits === 'percentage' || filler.gradientTransform || filler.patternTransform) {\n          // need to transform gradient in a pattern.\n          // this is a slow process. If you are hitting this codepath, and the object\n          // is not using caching, you should consider switching it on.\n          // we need a canvas as big as the current object caching canvas.\n          offsetX = -this.width / 2;\n          offsetY = -this.height / 2;\n          ctx.translate(offsetX, offsetY);\n          ctx[property] = this._applyPatternGradientTransformText(filler);\n          return { offsetX: offsetX, offsetY: offsetY };\n        }\n        else {\n          // is a simple gradient or pattern\n          ctx[property] = filler.toLive(ctx, this);\n          return this._applyPatternGradientTransform(ctx, filler);\n        }\n      }\n      else {\n        // is a color\n        ctx[property] = filler;\n      }\n      return { offsetX: 0, offsetY: 0 };\n    },\n\n    _setStrokeStyles: function(ctx, decl) {\n      ctx.lineWidth = decl.strokeWidth;\n      ctx.lineCap = this.strokeLineCap;\n      ctx.lineDashOffset = this.strokeDashOffset;\n      ctx.lineJoin = this.strokeLineJoin;\n      ctx.miterLimit = this.strokeMiterLimit;\n      return this.handleFiller(ctx, 'strokeStyle', decl.stroke);\n    },\n\n    _setFillStyles: function(ctx, decl) {\n      return this.handleFiller(ctx, 'fillStyle', decl.fill);\n    },\n\n    /**\n     * @private\n     * @param {String} method\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     * @param {Number} lineIndex\n     * @param {Number} charIndex\n     * @param {String} _char\n     * @param {Number} left Left coordinate\n     * @param {Number} top Top coordinate\n     * @param {Number} lineHeight Height of the line\n     */\n    _renderChar: function(method, ctx, lineIndex, charIndex, _char, left, top) {\n      var decl = this._getStyleDeclaration(lineIndex, charIndex),\n          fullDecl = this.getCompleteStyleDeclaration(lineIndex, charIndex),\n          shouldFill = method === 'fillText' && fullDecl.fill,\n          shouldStroke = method === 'strokeText' && fullDecl.stroke && fullDecl.strokeWidth,\n          fillOffsets, strokeOffsets;\n\n      if (!shouldStroke && !shouldFill) {\n        return;\n      }\n      ctx.save();\n\n      shouldFill && (fillOffsets = this._setFillStyles(ctx, fullDecl));\n      shouldStroke && (strokeOffsets = this._setStrokeStyles(ctx, fullDecl));\n\n      ctx.font = this._getFontDeclaration(fullDecl);\n\n\n      if (decl && decl.textBackgroundColor) {\n        this._removeShadow(ctx);\n      }\n      if (decl && decl.deltaY) {\n        top += decl.deltaY;\n      }\n      shouldFill && ctx.fillText(_char, left - fillOffsets.offsetX, top - fillOffsets.offsetY);\n      shouldStroke && ctx.strokeText(_char, left - strokeOffsets.offsetX, top - strokeOffsets.offsetY);\n      ctx.restore();\n    },\n\n    /**\n     * Turns the character into a 'superior figure' (i.e. 'superscript')\n     * @param {Number} start selection start\n     * @param {Number} end selection end\n     * @returns {fabric.Text} thisArg\n     * @chainable\n     */\n    setSuperscript: function(start, end) {\n      return this._setScript(start, end, this.superscript);\n    },\n\n    /**\n     * Turns the character into an 'inferior figure' (i.e. 'subscript')\n     * @param {Number} start selection start\n     * @param {Number} end selection end\n     * @returns {fabric.Text} thisArg\n     * @chainable\n     */\n    setSubscript: function(start, end) {\n      return this._setScript(start, end, this.subscript);\n    },\n\n    /**\n     * Applies 'schema' at given position\n     * @private\n     * @param {Number} start selection start\n     * @param {Number} end selection end\n     * @param {Number} schema\n     * @returns {fabric.Text} thisArg\n     * @chainable\n     */\n    _setScript: function(start, end, schema) {\n      var loc = this.get2DCursorLocation(start, true),\n          fontSize = this.getValueOfPropertyAt(loc.lineIndex, loc.charIndex, 'fontSize'),\n          dy = this.getValueOfPropertyAt(loc.lineIndex, loc.charIndex, 'deltaY'),\n          style = { fontSize: fontSize * schema.size, deltaY: dy + fontSize * schema.baseline };\n      this.setSelectionStyles(style, start, end);\n      return this;\n    },\n\n    /**\n     * @private\n     * @param {Object} prevStyle\n     * @param {Object} thisStyle\n     */\n    _hasStyleChanged: function(prevStyle, thisStyle) {\n      return prevStyle.fill !== thisStyle.fill ||\n              prevStyle.stroke !== thisStyle.stroke ||\n              prevStyle.strokeWidth !== thisStyle.strokeWidth ||\n              prevStyle.fontSize !== thisStyle.fontSize ||\n              prevStyle.fontFamily !== thisStyle.fontFamily ||\n              prevStyle.fontWeight !== thisStyle.fontWeight ||\n              prevStyle.fontStyle !== thisStyle.fontStyle ||\n              prevStyle.deltaY !== thisStyle.deltaY;\n    },\n\n    /**\n     * @private\n     * @param {Object} prevStyle\n     * @param {Object} thisStyle\n     */\n    _hasStyleChangedForSvg: function(prevStyle, thisStyle) {\n      return this._hasStyleChanged(prevStyle, thisStyle) ||\n        prevStyle.overline !== thisStyle.overline ||\n        prevStyle.underline !== thisStyle.underline ||\n        prevStyle.linethrough !== thisStyle.linethrough;\n    },\n\n    /**\n     * @private\n     * @param {Number} lineIndex index text line\n     * @return {Number} Line left offset\n     */\n    _getLineLeftOffset: function(lineIndex) {\n      var lineWidth = this.getLineWidth(lineIndex),\n          lineDiff = this.width - lineWidth, textAlign = this.textAlign, direction = this.direction,\n          isEndOfWrapping, leftOffset = 0, isEndOfWrapping = this.isEndOfWrapping(lineIndex);\n      if (textAlign === 'justify'\n        || (textAlign === 'justify-center' && !isEndOfWrapping)\n        || (textAlign === 'justify-right' && !isEndOfWrapping)\n        || (textAlign === 'justify-left' && !isEndOfWrapping)\n      ) {\n        return 0;\n      }\n      if (textAlign === 'center') {\n        leftOffset = lineDiff / 2;\n      }\n      if (textAlign === 'right') {\n        leftOffset = lineDiff;\n      }\n      if (textAlign === 'justify-center') {\n        leftOffset = lineDiff / 2;\n      }\n      if (textAlign === 'justify-right') {\n        leftOffset = lineDiff;\n      }\n      if (direction === 'rtl') {\n        leftOffset -= lineDiff;\n      }\n      return leftOffset;\n    },\n\n    /**\n     * @private\n     */\n    _clearCache: function() {\n      this.__lineWidths = [];\n      this.__lineHeights = [];\n      this.__charBounds = [];\n    },\n\n    /**\n     * @private\n     */\n    _shouldClearDimensionCache: function() {\n      var shouldClear = this._forceClearCache;\n      shouldClear || (shouldClear = this.hasStateChanged('_dimensionAffectingProps'));\n      if (shouldClear) {\n        this.dirty = true;\n        this._forceClearCache = false;\n      }\n      return shouldClear;\n    },\n\n    /**\n     * Measure a single line given its index. Used to calculate the initial\n     * text bounding box. The values are calculated and stored in __lineWidths cache.\n     * @private\n     * @param {Number} lineIndex line number\n     * @return {Number} Line width\n     */\n    getLineWidth: function(lineIndex) {\n      if (this.__lineWidths[lineIndex] !== undefined) {\n        return this.__lineWidths[lineIndex];\n      }\n\n      var lineInfo = this.measureLine(lineIndex);\n      var width = lineInfo.width;\n      this.__lineWidths[lineIndex] = width;\n      return width;\n    },\n\n    _getWidthOfCharSpacing: function() {\n      if (this.charSpacing !== 0) {\n        return this.fontSize * this.charSpacing / 1000;\n      }\n      return 0;\n    },\n\n    /**\n     * Retrieves the value of property at given character position\n     * @param {Number} lineIndex the line number\n     * @param {Number} charIndex the character number\n     * @param {String} property the property name\n     * @returns the value of 'property'\n     */\n    getValueOfPropertyAt: function(lineIndex, charIndex, property) {\n      var charStyle = this._getStyleDeclaration(lineIndex, charIndex);\n      if (charStyle && typeof charStyle[property] !== 'undefined') {\n        return charStyle[property];\n      }\n      return this[property];\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _renderTextDecoration: function(ctx, type) {\n      if (!this[type] && !this.styleHas(type)) {\n        return;\n      }\n      var heightOfLine, size, _size,\n          lineLeftOffset, dy, _dy,\n          line, lastDecoration,\n          leftOffset = this._getLeftOffset(),\n          topOffset = this._getTopOffset(), top,\n          boxStart, boxWidth, charBox, currentDecoration,\n          maxHeight, currentFill, lastFill, path = this.path,\n          charSpacing = this._getWidthOfCharSpacing(),\n          offsetY = this.offsets[type];\n\n      for (var i = 0, len = this._textLines.length; i < len; i++) {\n        heightOfLine = this.getHeightOfLine(i);\n        if (!this[type] && !this.styleHas(type, i)) {\n          topOffset += heightOfLine;\n          continue;\n        }\n        line = this._textLines[i];\n        maxHeight = heightOfLine / this.lineHeight;\n        lineLeftOffset = this._getLineLeftOffset(i);\n        boxStart = 0;\n        boxWidth = 0;\n        lastDecoration = this.getValueOfPropertyAt(i, 0, type);\n        lastFill = this.getValueOfPropertyAt(i, 0, 'fill');\n        top = topOffset + maxHeight * (1 - this._fontSizeFraction);\n        size = this.getHeightOfChar(i, 0);\n        dy = this.getValueOfPropertyAt(i, 0, 'deltaY');\n        for (var j = 0, jlen = line.length; j < jlen; j++) {\n          charBox = this.__charBounds[i][j];\n          currentDecoration = this.getValueOfPropertyAt(i, j, type);\n          currentFill = this.getValueOfPropertyAt(i, j, 'fill');\n          _size = this.getHeightOfChar(i, j);\n          _dy = this.getValueOfPropertyAt(i, j, 'deltaY');\n          if (path && currentDecoration && currentFill) {\n            ctx.save();\n            ctx.fillStyle = lastFill;\n            ctx.translate(charBox.renderLeft, charBox.renderTop);\n            ctx.rotate(charBox.angle);\n            ctx.fillRect(\n              -charBox.kernedWidth / 2,\n              offsetY * _size + _dy,\n              charBox.kernedWidth,\n              this.fontSize / 15\n            );\n            ctx.restore();\n          }\n          else if (\n            (currentDecoration !== lastDecoration || currentFill !== lastFill || _size !== size || _dy !== dy)\n            && boxWidth > 0\n          ) {\n            var drawStart = leftOffset + lineLeftOffset + boxStart;\n            if (this.direction === 'rtl') {\n              drawStart = this.width - drawStart - boxWidth;\n            }\n            if (lastDecoration && lastFill) {\n              ctx.fillStyle = lastFill;\n              ctx.fillRect(\n                drawStart,\n                top + offsetY * size + dy,\n                boxWidth,\n                this.fontSize / 15\n              );\n            }\n            boxStart = charBox.left;\n            boxWidth = charBox.width;\n            lastDecoration = currentDecoration;\n            lastFill = currentFill;\n            size = _size;\n            dy = _dy;\n          }\n          else {\n            boxWidth += charBox.kernedWidth;\n          }\n        }\n        var drawStart = leftOffset + lineLeftOffset + boxStart;\n        if (this.direction === 'rtl') {\n          drawStart = this.width - drawStart - boxWidth;\n        }\n        ctx.fillStyle = currentFill;\n        currentDecoration && currentFill && ctx.fillRect(\n          drawStart,\n          top + offsetY * size + dy,\n          boxWidth - charSpacing,\n          this.fontSize / 15\n        );\n        topOffset += heightOfLine;\n      }\n      // if there is text background color no\n      // other shadows should be casted\n      this._removeShadow(ctx);\n    },\n\n    /**\n     * return font declaration string for canvas context\n     * @param {Object} [styleObject] object\n     * @returns {String} font declaration formatted for canvas context.\n     */\n    _getFontDeclaration: function(styleObject, forMeasuring) {\n      var style = styleObject || this, family = this.fontFamily,\n          fontIsGeneric = fabric.Text.genericFonts.indexOf(family.toLowerCase()) > -1;\n      var fontFamily = family === undefined ||\n      family.indexOf('\\'') > -1 || family.indexOf(',') > -1 ||\n      family.indexOf('\"') > -1 || fontIsGeneric\n        ? style.fontFamily : '\"' + style.fontFamily + '\"';\n      return [\n        // node-canvas needs \"weight style\", while browsers need \"style weight\"\n        // verify if this can be fixed in JSDOM\n        (fabric.isLikelyNode ? style.fontWeight : style.fontStyle),\n        (fabric.isLikelyNode ? style.fontStyle : style.fontWeight),\n        forMeasuring ? this.CACHE_FONT_SIZE + 'px' : style.fontSize + 'px',\n        fontFamily\n      ].join(' ');\n    },\n\n    /**\n     * Renders text instance on a specified context\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    render: function(ctx) {\n      // do not render if object is not visible\n      if (!this.visible) {\n        return;\n      }\n      if (this.canvas && this.canvas.skipOffscreen && !this.group && !this.isOnScreen()) {\n        return;\n      }\n      if (this._shouldClearDimensionCache()) {\n        this.initDimensions();\n      }\n      this.callSuper('render', ctx);\n    },\n\n    /**\n     * Returns the text as an array of lines.\n     * @param {String} text text to split\n     * @returns {Array} Lines in the text\n     */\n    _splitTextIntoLines: function(text) {\n      var lines = text.split(this._reNewline),\n          newLines = new Array(lines.length),\n          newLine = ['\\n'],\n          newText = [];\n      for (var i = 0; i < lines.length; i++) {\n        newLines[i] = fabric.util.string.graphemeSplit(lines[i]);\n        newText = newText.concat(newLines[i], newLine);\n      }\n      newText.pop();\n      return { _unwrappedLines: newLines, lines: lines, graphemeText: newText, graphemeLines: newLines };\n    },\n\n    /**\n     * Returns object representation of an instance\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {Object} Object representation of an instance\n     */\n    toObject: function(propertiesToInclude) {\n      var allProperties = additionalProps.concat(propertiesToInclude);\n      var obj = this.callSuper('toObject', allProperties);\n      // styles will be overridden with a properly cloned structure\n      obj.styles = clone(this.styles, true);\n      if (obj.path) {\n        obj.path = this.path.toObject();\n      }\n      return obj;\n    },\n\n    /**\n     * Sets property to a given value. When changing position/dimension -related properties (left, top, scale, angle, etc.) `set` does not update position of object's borders/controls. If you need to update those, call `setCoords()`.\n     * @param {String|Object} key Property name or object (if object, iterate over the object properties)\n     * @param {Object|Function} value Property value (if function, the value is passed into it and its return value is used as a new one)\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n    set: function(key, value) {\n      this.callSuper('set', key, value);\n      var needsDims = false;\n      var isAddingPath = false;\n      if (typeof key === 'object') {\n        for (var _key in key) {\n          if (_key === 'path') {\n            this.setPathInfo();\n          }\n          needsDims = needsDims || this._dimensionAffectingProps.indexOf(_key) !== -1;\n          isAddingPath = isAddingPath || _key === 'path';\n        }\n      }\n      else {\n        needsDims = this._dimensionAffectingProps.indexOf(key) !== -1;\n        isAddingPath = key === 'path';\n      }\n      if (isAddingPath) {\n        this.setPathInfo();\n      }\n      if (needsDims) {\n        this.initDimensions();\n        this.setCoords();\n      }\n      return this;\n    },\n\n    /**\n     * Returns complexity of an instance\n     * @return {Number} complexity\n     */\n    complexity: function() {\n      return 1;\n    }\n  });\n\n  /* _FROM_SVG_START_ */\n  /**\n   * List of attribute names to account for when parsing SVG element (used by {@link fabric.Text.fromElement})\n   * @static\n   * @memberOf fabric.Text\n   * @see: http://www.w3.org/TR/SVG/text.html#TextElement\n   */\n  fabric.Text.ATTRIBUTE_NAMES = fabric.SHARED_ATTRIBUTES.concat(\n    'x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor'.split(' '));\n\n  /**\n   * Default SVG font size\n   * @static\n   * @memberOf fabric.Text\n   */\n  fabric.Text.DEFAULT_SVG_FONT_SIZE = 16;\n\n  /**\n   * Returns fabric.Text instance from an SVG element (<b>not yet implemented</b>)\n   * @static\n   * @memberOf fabric.Text\n   * @param {SVGElement} element Element to parse\n   * @param {Function} callback callback function invoked after parsing\n   * @param {Object} [options] Options object\n   */\n  fabric.Text.fromElement = function(element, callback, options) {\n    if (!element) {\n      return callback(null);\n    }\n\n    var parsedAttributes = fabric.parseAttributes(element, fabric.Text.ATTRIBUTE_NAMES),\n        parsedAnchor = parsedAttributes.textAnchor || 'left';\n    options = fabric.util.object.extend((options ? clone(options) : { }), parsedAttributes);\n\n    options.top = options.top || 0;\n    options.left = options.left || 0;\n    if (parsedAttributes.textDecoration) {\n      var textDecoration = parsedAttributes.textDecoration;\n      if (textDecoration.indexOf('underline') !== -1) {\n        options.underline = true;\n      }\n      if (textDecoration.indexOf('overline') !== -1) {\n        options.overline = true;\n      }\n      if (textDecoration.indexOf('line-through') !== -1) {\n        options.linethrough = true;\n      }\n      delete options.textDecoration;\n    }\n    if ('dx' in parsedAttributes) {\n      options.left += parsedAttributes.dx;\n    }\n    if ('dy' in parsedAttributes) {\n      options.top += parsedAttributes.dy;\n    }\n    if (!('fontSize' in options)) {\n      options.fontSize = fabric.Text.DEFAULT_SVG_FONT_SIZE;\n    }\n\n    var textContent = '';\n\n    // The XML is not properly parsed in IE9 so a workaround to get\n    // textContent is through firstChild.data. Another workaround would be\n    // to convert XML loaded from a file to be converted using DOMParser (same way loadSVGFromString() does)\n    if (!('textContent' in element)) {\n      if ('firstChild' in element && element.firstChild !== null) {\n        if ('data' in element.firstChild && element.firstChild.data !== null) {\n          textContent = element.firstChild.data;\n        }\n      }\n    }\n    else {\n      textContent = element.textContent;\n    }\n\n    textContent = textContent.replace(/^\\s+|\\s+$|\\n+/g, '').replace(/\\s+/g, ' ');\n    var originalStrokeWidth = options.strokeWidth;\n    options.strokeWidth = 0;\n\n    var text = new fabric.Text(textContent, options),\n        textHeightScaleFactor = text.getScaledHeight() / text.height,\n        lineHeightDiff = (text.height + text.strokeWidth) * text.lineHeight - text.height,\n        scaledDiff = lineHeightDiff * textHeightScaleFactor,\n        textHeight = text.getScaledHeight() + scaledDiff,\n        offX = 0;\n    /*\n      Adjust positioning:\n        x/y attributes in SVG correspond to the bottom-left corner of text bounding box\n        fabric output by default at top, left.\n    */\n    if (parsedAnchor === 'center') {\n      offX = text.getScaledWidth() / 2;\n    }\n    if (parsedAnchor === 'right') {\n      offX = text.getScaledWidth();\n    }\n    text.set({\n      left: text.left - offX,\n      top: text.top - (textHeight - text.fontSize * (0.07 + text._fontSizeFraction)) / text.lineHeight,\n      strokeWidth: typeof originalStrokeWidth !== 'undefined' ? originalStrokeWidth : 1,\n    });\n    callback(text);\n  };\n  /* _FROM_SVG_END_ */\n\n  /**\n   * Returns fabric.Text instance from an object representation\n   * @static\n   * @memberOf fabric.Text\n   * @param {Object} object plain js Object to create an instance from\n   * @param {Function} [callback] Callback to invoke when an fabric.Text instance is created\n   */\n  fabric.Text.fromObject = function(object, callback) {\n    var objectCopy = clone(object), path = object.path;\n    delete objectCopy.path;\n    return fabric.Object._fromObject('Text', objectCopy, function(textInstance) {\n      if (path) {\n        fabric.Object._fromObject('Path', path, function(pathInstance) {\n          textInstance.set('path', pathInstance);\n          callback(textInstance);\n        }, 'path');\n      }\n      else {\n        callback(textInstance);\n      }\n    }, 'text');\n  };\n\n  fabric.Text.genericFonts = ['sans-serif', 'serif', 'cursive', 'fantasy', 'monospace'];\n\n  fabric.util.createAccessors && fabric.util.createAccessors(fabric.Text);\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function() {\n  fabric.util.object.extend(fabric.Text.prototype, /** @lends fabric.Text.prototype */ {\n    /**\n     * Returns true if object has no styling or no styling in a line\n     * @param {Number} lineIndex , lineIndex is on wrapped lines.\n     * @return {Boolean}\n     */\n    isEmptyStyles: function(lineIndex) {\n      if (!this.styles) {\n        return true;\n      }\n      if (typeof lineIndex !== 'undefined' && !this.styles[lineIndex]) {\n        return true;\n      }\n      var obj = typeof lineIndex === 'undefined' ? this.styles : { line: this.styles[lineIndex] };\n      for (var p1 in obj) {\n        for (var p2 in obj[p1]) {\n          // eslint-disable-next-line no-unused-vars\n          for (var p3 in obj[p1][p2]) {\n            return false;\n          }\n        }\n      }\n      return true;\n    },\n\n    /**\n     * Returns true if object has a style property or has it ina specified line\n     * This function is used to detect if a text will use a particular property or not.\n     * @param {String} property to check for\n     * @param {Number} lineIndex to check the style on\n     * @return {Boolean}\n     */\n    styleHas: function(property, lineIndex) {\n      if (!this.styles || !property || property === '') {\n        return false;\n      }\n      if (typeof lineIndex !== 'undefined' && !this.styles[lineIndex]) {\n        return false;\n      }\n      var obj = typeof lineIndex === 'undefined' ? this.styles : { 0: this.styles[lineIndex] };\n      // eslint-disable-next-line\n      for (var p1 in obj) {\n        // eslint-disable-next-line\n        for (var p2 in obj[p1]) {\n          if (typeof obj[p1][p2][property] !== 'undefined') {\n            return true;\n          }\n        }\n      }\n      return false;\n    },\n\n    /**\n     * Check if characters in a text have a value for a property\n     * whose value matches the textbox's value for that property.  If so,\n     * the character-level property is deleted.  If the character\n     * has no other properties, then it is also deleted.  Finally,\n     * if the line containing that character has no other characters\n     * then it also is deleted.\n     *\n     * @param {string} property The property to compare between characters and text.\n     */\n    cleanStyle: function(property) {\n      if (!this.styles || !property || property === '') {\n        return false;\n      }\n      var obj = this.styles, stylesCount = 0, letterCount, stylePropertyValue,\n          allStyleObjectPropertiesMatch = true, graphemeCount = 0, styleObject;\n      // eslint-disable-next-line\n      for (var p1 in obj) {\n        letterCount = 0;\n        // eslint-disable-next-line\n        for (var p2 in obj[p1]) {\n          var styleObject = obj[p1][p2],\n              stylePropertyHasBeenSet = styleObject.hasOwnProperty(property);\n\n          stylesCount++;\n\n          if (stylePropertyHasBeenSet) {\n            if (!stylePropertyValue) {\n              stylePropertyValue = styleObject[property];\n            }\n            else if (styleObject[property] !== stylePropertyValue) {\n              allStyleObjectPropertiesMatch = false;\n            }\n\n            if (styleObject[property] === this[property]) {\n              delete styleObject[property];\n            }\n          }\n          else {\n            allStyleObjectPropertiesMatch = false;\n          }\n\n          if (Object.keys(styleObject).length !== 0) {\n            letterCount++;\n          }\n          else {\n            delete obj[p1][p2];\n          }\n        }\n\n        if (letterCount === 0) {\n          delete obj[p1];\n        }\n      }\n      // if every grapheme has the same style set then\n      // delete those styles and set it on the parent\n      for (var i = 0; i < this._textLines.length; i++) {\n        graphemeCount += this._textLines[i].length;\n      }\n      if (allStyleObjectPropertiesMatch && stylesCount === graphemeCount) {\n        this[property] = stylePropertyValue;\n        this.removeStyle(property);\n      }\n    },\n\n    /**\n     * Remove a style property or properties from all individual character styles\n     * in a text object.  Deletes the character style object if it contains no other style\n     * props.  Deletes a line style object if it contains no other character styles.\n     *\n     * @param {String} props The property to remove from character styles.\n     */\n    removeStyle: function(property) {\n      if (!this.styles || !property || property === '') {\n        return;\n      }\n      var obj = this.styles, line, lineNum, charNum;\n      for (lineNum in obj) {\n        line = obj[lineNum];\n        for (charNum in line) {\n          delete line[charNum][property];\n          if (Object.keys(line[charNum]).length === 0) {\n            delete line[charNum];\n          }\n        }\n        if (Object.keys(line).length === 0) {\n          delete obj[lineNum];\n        }\n      }\n    },\n\n    /**\n     * @private\n     */\n    _extendStyles: function(index, styles) {\n      var loc = this.get2DCursorLocation(index);\n\n      if (!this._getLineStyle(loc.lineIndex)) {\n        this._setLineStyle(loc.lineIndex);\n      }\n\n      if (!this._getStyleDeclaration(loc.lineIndex, loc.charIndex)) {\n        this._setStyleDeclaration(loc.lineIndex, loc.charIndex, {});\n      }\n\n      fabric.util.object.extend(this._getStyleDeclaration(loc.lineIndex, loc.charIndex), styles);\n    },\n\n    /**\n     * Returns 2d representation (lineIndex and charIndex) of cursor (or selection start)\n     * @param {Number} [selectionStart] Optional index. When not given, current selectionStart is used.\n     * @param {Boolean} [skipWrapping] consider the location for unwrapped lines. useful to manage styles.\n     */\n    get2DCursorLocation: function(selectionStart, skipWrapping) {\n      if (typeof selectionStart === 'undefined') {\n        selectionStart = this.selectionStart;\n      }\n      var lines = skipWrapping ? this._unwrappedTextLines : this._textLines,\n          len = lines.length;\n      for (var i = 0; i < len; i++) {\n        if (selectionStart <= lines[i].length) {\n          return {\n            lineIndex: i,\n            charIndex: selectionStart\n          };\n        }\n        selectionStart -= lines[i].length + this.missingNewlineOffset(i);\n      }\n      return {\n        lineIndex: i - 1,\n        charIndex: lines[i - 1].length < selectionStart ? lines[i - 1].length : selectionStart\n      };\n    },\n\n    /**\n     * Gets style of a current selection/cursor (at the start position)\n     * if startIndex or endIndex are not provided, selectionStart or selectionEnd will be used.\n     * @param {Number} [startIndex] Start index to get styles at\n     * @param {Number} [endIndex] End index to get styles at, if not specified selectionEnd or startIndex + 1\n     * @param {Boolean} [complete] get full style or not\n     * @return {Array} styles an array with one, zero or more Style objects\n     */\n    getSelectionStyles: function(startIndex, endIndex, complete) {\n      if (typeof startIndex === 'undefined') {\n        startIndex = this.selectionStart || 0;\n      }\n      if (typeof endIndex === 'undefined') {\n        endIndex = this.selectionEnd || startIndex;\n      }\n      var styles = [];\n      for (var i = startIndex; i < endIndex; i++) {\n        styles.push(this.getStyleAtPosition(i, complete));\n      }\n      return styles;\n    },\n\n    /**\n     * Gets style of a current selection/cursor position\n     * @param {Number} position  to get styles at\n     * @param {Boolean} [complete] full style if true\n     * @return {Object} style Style object at a specified index\n     * @private\n     */\n    getStyleAtPosition: function(position, complete) {\n      var loc = this.get2DCursorLocation(position),\n          style = complete ? this.getCompleteStyleDeclaration(loc.lineIndex, loc.charIndex) :\n            this._getStyleDeclaration(loc.lineIndex, loc.charIndex);\n      return style || {};\n    },\n\n    /**\n     * Sets style of a current selection, if no selection exist, do not set anything.\n     * @param {Object} [styles] Styles object\n     * @param {Number} [startIndex] Start index to get styles at\n     * @param {Number} [endIndex] End index to get styles at, if not specified selectionEnd or startIndex + 1\n     * @return {fabric.IText} thisArg\n     * @chainable\n     */\n    setSelectionStyles: function(styles, startIndex, endIndex) {\n      if (typeof startIndex === 'undefined') {\n        startIndex = this.selectionStart || 0;\n      }\n      if (typeof endIndex === 'undefined') {\n        endIndex = this.selectionEnd || startIndex;\n      }\n      for (var i = startIndex; i < endIndex; i++) {\n        this._extendStyles(i, styles);\n      }\n      /* not included in _extendStyles to avoid clearing cache more than once */\n      this._forceClearCache = true;\n      return this;\n    },\n\n    /**\n     * get the reference, not a clone, of the style object for a given character\n     * @param {Number} lineIndex\n     * @param {Number} charIndex\n     * @return {Object} style object\n     */\n    _getStyleDeclaration: function(lineIndex, charIndex) {\n      var lineStyle = this.styles && this.styles[lineIndex];\n      if (!lineStyle) {\n        return null;\n      }\n      return lineStyle[charIndex];\n    },\n\n    /**\n     * return a new object that contains all the style property for a character\n     * the object returned is newly created\n     * @param {Number} lineIndex of the line where the character is\n     * @param {Number} charIndex position of the character on the line\n     * @return {Object} style object\n     */\n    getCompleteStyleDeclaration: function(lineIndex, charIndex) {\n      var style = this._getStyleDeclaration(lineIndex, charIndex) || { },\n          styleObject = { }, prop;\n      for (var i = 0; i < this._styleProperties.length; i++) {\n        prop = this._styleProperties[i];\n        styleObject[prop] = typeof style[prop] === 'undefined' ? this[prop] : style[prop];\n      }\n      return styleObject;\n    },\n\n    /**\n     * @param {Number} lineIndex\n     * @param {Number} charIndex\n     * @param {Object} style\n     * @private\n     */\n    _setStyleDeclaration: function(lineIndex, charIndex, style) {\n      this.styles[lineIndex][charIndex] = style;\n    },\n\n    /**\n     *\n     * @param {Number} lineIndex\n     * @param {Number} charIndex\n     * @private\n     */\n    _deleteStyleDeclaration: function(lineIndex, charIndex) {\n      delete this.styles[lineIndex][charIndex];\n    },\n\n    /**\n     * @param {Number} lineIndex\n     * @return {Boolean} if the line exists or not\n     * @private\n     */\n    _getLineStyle: function(lineIndex) {\n      return !!this.styles[lineIndex];\n    },\n\n    /**\n     * Set the line style to an empty object so that is initialized\n     * @param {Number} lineIndex\n     * @private\n     */\n    _setLineStyle: function(lineIndex) {\n      this.styles[lineIndex] = {};\n    },\n\n    /**\n     * @param {Number} lineIndex\n     * @private\n     */\n    _deleteLineStyle: function(lineIndex) {\n      delete this.styles[lineIndex];\n    }\n  });\n})();\n\n\n(function() {\n\n  function parseDecoration(object) {\n    if (object.textDecoration) {\n      object.textDecoration.indexOf('underline') > -1 && (object.underline = true);\n      object.textDecoration.indexOf('line-through') > -1 && (object.linethrough = true);\n      object.textDecoration.indexOf('overline') > -1 && (object.overline = true);\n      delete object.textDecoration;\n    }\n  }\n\n  /**\n   * IText class (introduced in <b>v1.4</b>) Events are also fired with \"text:\"\n   * prefix when observing canvas.\n   * @class fabric.IText\n   * @extends fabric.Text\n   * @mixes fabric.Observable\n   *\n   * @fires changed\n   * @fires selection:changed\n   * @fires editing:entered\n   * @fires editing:exited\n   *\n   * @return {fabric.IText} thisArg\n   * @see {@link fabric.IText#initialize} for constructor definition\n   *\n   * <p>Supported key combinations:</p>\n   * <pre>\n   *   Move cursor:                    left, right, up, down\n   *   Select character:               shift + left, shift + right\n   *   Select text vertically:         shift + up, shift + down\n   *   Move cursor by word:            alt + left, alt + right\n   *   Select words:                   shift + alt + left, shift + alt + right\n   *   Move cursor to line start/end:  cmd + left, cmd + right or home, end\n   *   Select till start/end of line:  cmd + shift + left, cmd + shift + right or shift + home, shift + end\n   *   Jump to start/end of text:      cmd + up, cmd + down\n   *   Select till start/end of text:  cmd + shift + up, cmd + shift + down or shift + pgUp, shift + pgDown\n   *   Delete character:               backspace\n   *   Delete word:                    alt + backspace\n   *   Delete line:                    cmd + backspace\n   *   Forward delete:                 delete\n   *   Copy text:                      ctrl/cmd + c\n   *   Paste text:                     ctrl/cmd + v\n   *   Cut text:                       ctrl/cmd + x\n   *   Select entire text:             ctrl/cmd + a\n   *   Quit editing                    tab or esc\n   * </pre>\n   *\n   * <p>Supported mouse/touch combination</p>\n   * <pre>\n   *   Position cursor:                click/touch\n   *   Create selection:               click/touch & drag\n   *   Create selection:               click & shift + click\n   *   Select word:                    double click\n   *   Select line:                    triple click\n   * </pre>\n   */\n  fabric.IText = fabric.util.createClass(fabric.Text, fabric.Observable, /** @lends fabric.IText.prototype */ {\n\n    /**\n     * Type of an object\n     * @type String\n     * @default\n     */\n    type: 'i-text',\n\n    /**\n     * Index where text selection starts (or where cursor is when there is no selection)\n     * @type Number\n     * @default\n     */\n    selectionStart: 0,\n\n    /**\n     * Index where text selection ends\n     * @type Number\n     * @default\n     */\n    selectionEnd: 0,\n\n    /**\n     * Color of text selection\n     * @type String\n     * @default\n     */\n    selectionColor: 'rgba(17,119,255,0.3)',\n\n    /**\n     * Indicates whether text is in editing mode\n     * @type Boolean\n     * @default\n     */\n    isEditing: false,\n\n    /**\n     * Indicates whether a text can be edited\n     * @type Boolean\n     * @default\n     */\n    editable: true,\n\n    /**\n     * Border color of text object while it's in editing mode\n     * @type String\n     * @default\n     */\n    editingBorderColor: 'rgba(102,153,255,0.25)',\n\n    /**\n     * Width of cursor (in px)\n     * @type Number\n     * @default\n     */\n    cursorWidth: 2,\n\n    /**\n     * Color of text cursor color in editing mode.\n     * if not set (default) will take color from the text.\n     * if set to a color value that fabric can understand, it will\n     * be used instead of the color of the text at the current position.\n     * @type String\n     * @default\n     */\n    cursorColor: '',\n\n    /**\n     * Delay between cursor blink (in ms)\n     * @type Number\n     * @default\n     */\n    cursorDelay: 1000,\n\n    /**\n     * Duration of cursor fadein (in ms)\n     * @type Number\n     * @default\n     */\n    cursorDuration: 600,\n\n    /**\n     * Indicates whether internal text char widths can be cached\n     * @type Boolean\n     * @default\n     */\n    caching: true,\n\n    /**\n     * DOM container to append the hiddenTextarea.\n     * An alternative to attaching to the document.body.\n     * Useful to reduce laggish redraw of the full document.body tree and\n     * also with modals event capturing that won't let the textarea take focus.\n     * @type HTMLElement\n     * @default\n     */\n    hiddenTextareaContainer: null,\n\n    /**\n     * @private\n     */\n    _reSpace: /\\s|\\n/,\n\n    /**\n     * @private\n     */\n    _currentCursorOpacity: 0,\n\n    /**\n     * @private\n     */\n    _selectionDirection: null,\n\n    /**\n     * @private\n     */\n    _abortCursorAnimation: false,\n\n    /**\n     * @private\n     */\n    __widthOfSpace: [],\n\n    /**\n     * Helps determining when the text is in composition, so that the cursor\n     * rendering is altered.\n     */\n    inCompositionMode: false,\n\n    /**\n     * Constructor\n     * @param {String} text Text string\n     * @param {Object} [options] Options object\n     * @return {fabric.IText} thisArg\n     */\n    initialize: function(text, options) {\n      this.callSuper('initialize', text, options);\n      this.initBehavior();\n    },\n\n    /**\n     * Sets selection start (left boundary of a selection)\n     * @param {Number} index Index to set selection start to\n     */\n    setSelectionStart: function(index) {\n      index = Math.max(index, 0);\n      this._updateAndFire('selectionStart', index);\n    },\n\n    /**\n     * Sets selection end (right boundary of a selection)\n     * @param {Number} index Index to set selection end to\n     */\n    setSelectionEnd: function(index) {\n      index = Math.min(index, this.text.length);\n      this._updateAndFire('selectionEnd', index);\n    },\n\n    /**\n     * @private\n     * @param {String} property 'selectionStart' or 'selectionEnd'\n     * @param {Number} index new position of property\n     */\n    _updateAndFire: function(property, index) {\n      if (this[property] !== index) {\n        this._fireSelectionChanged();\n        this[property] = index;\n      }\n      this._updateTextarea();\n    },\n\n    /**\n     * Fires the even of selection changed\n     * @private\n     */\n    _fireSelectionChanged: function() {\n      this.fire('selection:changed');\n      this.canvas && this.canvas.fire('text:selection:changed', { target: this });\n    },\n\n    /**\n     * Initialize text dimensions. Render all text on given context\n     * or on a offscreen canvas to get the text width with measureText.\n     * Updates this.width and this.height with the proper values.\n     * Does not return dimensions.\n     * @private\n     */\n    initDimensions: function() {\n      this.isEditing && this.initDelayedCursor();\n      this.clearContextTop();\n      this.callSuper('initDimensions');\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    render: function(ctx) {\n      this.clearContextTop();\n      this.callSuper('render', ctx);\n      // clear the cursorOffsetCache, so we ensure to calculate once per renderCursor\n      // the correct position but not at every cursor animation.\n      this.cursorOffsetCache = { };\n      this.renderCursorOrSelection();\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _render: function(ctx) {\n      this.callSuper('_render', ctx);\n    },\n\n    /**\n     * Prepare and clean the contextTop\n     */\n    clearContextTop: function(skipRestore) {\n      if (!this.isEditing || !this.canvas || !this.canvas.contextTop) {\n        return;\n      }\n      var ctx = this.canvas.contextTop, v = this.canvas.viewportTransform;\n      ctx.save();\n      ctx.transform(v[0], v[1], v[2], v[3], v[4], v[5]);\n      this.transform(ctx);\n      this._clearTextArea(ctx);\n      skipRestore || ctx.restore();\n    },\n    /**\n     * Renders cursor or selection (depending on what exists)\n     * it does on the contextTop. If contextTop is not available, do nothing.\n     */\n    renderCursorOrSelection: function() {\n      if (!this.isEditing || !this.canvas || !this.canvas.contextTop) {\n        return;\n      }\n      var boundaries = this._getCursorBoundaries(),\n          ctx = this.canvas.contextTop;\n      this.clearContextTop(true);\n      if (this.selectionStart === this.selectionEnd) {\n        this.renderCursor(boundaries, ctx);\n      }\n      else {\n        this.renderSelection(boundaries, ctx);\n      }\n      ctx.restore();\n    },\n\n    _clearTextArea: function(ctx) {\n      // we add 4 pixel, to be sure to do not leave any pixel out\n      var width = this.width + 4, height = this.height + 4;\n      ctx.clearRect(-width / 2, -height / 2, width, height);\n    },\n\n    /**\n     * Returns cursor boundaries (left, top, leftOffset, topOffset)\n     * @private\n     * @param {Array} chars Array of characters\n     * @param {String} typeOfBoundaries\n     */\n    _getCursorBoundaries: function(position) {\n\n      // left/top are left/top of entire text box\n      // leftOffset/topOffset are offset from that left/top point of a text box\n\n      if (typeof position === 'undefined') {\n        position = this.selectionStart;\n      }\n\n      var left = this._getLeftOffset(),\n          top = this._getTopOffset(),\n          offsets = this._getCursorBoundariesOffsets(position);\n      return {\n        left: left,\n        top: top,\n        leftOffset: offsets.left,\n        topOffset: offsets.top\n      };\n    },\n\n    /**\n     * @private\n     */\n    _getCursorBoundariesOffsets: function(position) {\n      if (this.cursorOffsetCache && 'top' in this.cursorOffsetCache) {\n        return this.cursorOffsetCache;\n      }\n      var lineLeftOffset,\n          lineIndex,\n          charIndex,\n          topOffset = 0,\n          leftOffset = 0,\n          boundaries,\n          cursorPosition = this.get2DCursorLocation(position);\n      charIndex = cursorPosition.charIndex;\n      lineIndex = cursorPosition.lineIndex;\n      for (var i = 0; i < lineIndex; i++) {\n        topOffset += this.getHeightOfLine(i);\n      }\n      lineLeftOffset = this._getLineLeftOffset(lineIndex);\n      var bound = this.__charBounds[lineIndex][charIndex];\n      bound && (leftOffset = bound.left);\n      if (this.charSpacing !== 0 && charIndex === this._textLines[lineIndex].length) {\n        leftOffset -= this._getWidthOfCharSpacing();\n      }\n      boundaries = {\n        top: topOffset,\n        left: lineLeftOffset + (leftOffset > 0 ? leftOffset : 0),\n      };\n      if (this.direction === 'rtl') {\n        boundaries.left *= -1;\n      }\n      this.cursorOffsetCache = boundaries;\n      return this.cursorOffsetCache;\n    },\n\n    /**\n     * Renders cursor\n     * @param {Object} boundaries\n     * @param {CanvasRenderingContext2D} ctx transformed context to draw on\n     */\n    renderCursor: function(boundaries, ctx) {\n      var cursorLocation = this.get2DCursorLocation(),\n          lineIndex = cursorLocation.lineIndex,\n          charIndex = cursorLocation.charIndex > 0 ? cursorLocation.charIndex - 1 : 0,\n          charHeight = this.getValueOfPropertyAt(lineIndex, charIndex, 'fontSize'),\n          multiplier = this.scaleX * this.canvas.getZoom(),\n          cursorWidth = this.cursorWidth / multiplier,\n          topOffset = boundaries.topOffset,\n          dy = this.getValueOfPropertyAt(lineIndex, charIndex, 'deltaY');\n      topOffset += (1 - this._fontSizeFraction) * this.getHeightOfLine(lineIndex) / this.lineHeight\n        - charHeight * (1 - this._fontSizeFraction);\n\n      if (this.inCompositionMode) {\n        this.renderSelection(boundaries, ctx);\n      }\n      ctx.fillStyle = this.cursorColor || this.getValueOfPropertyAt(lineIndex, charIndex, 'fill');\n      ctx.globalAlpha = this.__isMousedown ? 1 : this._currentCursorOpacity;\n      ctx.fillRect(\n        boundaries.left + boundaries.leftOffset - cursorWidth / 2,\n        topOffset + boundaries.top + dy,\n        cursorWidth,\n        charHeight);\n    },\n\n    /**\n     * Renders text selection\n     * @param {Object} boundaries Object with left/top/leftOffset/topOffset\n     * @param {CanvasRenderingContext2D} ctx transformed context to draw on\n     */\n    renderSelection: function(boundaries, ctx) {\n\n      var selectionStart = this.inCompositionMode ? this.hiddenTextarea.selectionStart : this.selectionStart,\n          selectionEnd = this.inCompositionMode ? this.hiddenTextarea.selectionEnd : this.selectionEnd,\n          isJustify = this.textAlign.indexOf('justify') !== -1,\n          start = this.get2DCursorLocation(selectionStart),\n          end = this.get2DCursorLocation(selectionEnd),\n          startLine = start.lineIndex,\n          endLine = end.lineIndex,\n          startChar = start.charIndex < 0 ? 0 : start.charIndex,\n          endChar = end.charIndex < 0 ? 0 : end.charIndex;\n\n      for (var i = startLine; i <= endLine; i++) {\n        var lineOffset = this._getLineLeftOffset(i) || 0,\n            lineHeight = this.getHeightOfLine(i),\n            realLineHeight = 0, boxStart = 0, boxEnd = 0;\n\n        if (i === startLine) {\n          boxStart = this.__charBounds[startLine][startChar].left;\n        }\n        if (i >= startLine && i < endLine) {\n          boxEnd = isJustify && !this.isEndOfWrapping(i) ? this.width : this.getLineWidth(i) || 5; // WTF is this 5?\n        }\n        else if (i === endLine) {\n          if (endChar === 0) {\n            boxEnd = this.__charBounds[endLine][endChar].left;\n          }\n          else {\n            var charSpacing = this._getWidthOfCharSpacing();\n            boxEnd = this.__charBounds[endLine][endChar - 1].left\n              + this.__charBounds[endLine][endChar - 1].width - charSpacing;\n          }\n        }\n        realLineHeight = lineHeight;\n        if (this.lineHeight < 1 || (i === endLine && this.lineHeight > 1)) {\n          lineHeight /= this.lineHeight;\n        }\n        var drawStart = boundaries.left + lineOffset + boxStart,\n            drawWidth = boxEnd - boxStart,\n            drawHeight = lineHeight, extraTop = 0;\n        if (this.inCompositionMode) {\n          ctx.fillStyle = this.compositionColor || 'black';\n          drawHeight = 1;\n          extraTop = lineHeight;\n        }\n        else {\n          ctx.fillStyle = this.selectionColor;\n        }\n        if (this.direction === 'rtl') {\n          drawStart = this.width - drawStart - drawWidth;\n        }\n        ctx.fillRect(\n          drawStart,\n          boundaries.top + boundaries.topOffset + extraTop,\n          drawWidth,\n          drawHeight);\n        boundaries.topOffset += realLineHeight;\n      }\n    },\n\n    /**\n     * High level function to know the height of the cursor.\n     * the currentChar is the one that precedes the cursor\n     * Returns fontSize of char at the current cursor\n     * Unused from the library, is for the end user\n     * @return {Number} Character font size\n     */\n    getCurrentCharFontSize: function() {\n      var cp = this._getCurrentCharIndex();\n      return this.getValueOfPropertyAt(cp.l, cp.c, 'fontSize');\n    },\n\n    /**\n     * High level function to know the color of the cursor.\n     * the currentChar is the one that precedes the cursor\n     * Returns color (fill) of char at the current cursor\n     * if the text object has a pattern or gradient for filler, it will return that.\n     * Unused by the library, is for the end user\n     * @return {String | fabric.Gradient | fabric.Pattern} Character color (fill)\n     */\n    getCurrentCharColor: function() {\n      var cp = this._getCurrentCharIndex();\n      return this.getValueOfPropertyAt(cp.l, cp.c, 'fill');\n    },\n\n    /**\n     * Returns the cursor position for the getCurrent.. functions\n     * @private\n     */\n    _getCurrentCharIndex: function() {\n      var cursorPosition = this.get2DCursorLocation(this.selectionStart, true),\n          charIndex = cursorPosition.charIndex > 0 ? cursorPosition.charIndex - 1 : 0;\n      return { l: cursorPosition.lineIndex, c: charIndex };\n    }\n  });\n\n  /**\n   * Returns fabric.IText instance from an object representation\n   * @static\n   * @memberOf fabric.IText\n   * @param {Object} object Object to create an instance from\n   * @param {function} [callback] invoked with new instance as argument\n   */\n  fabric.IText.fromObject = function(object, callback) {\n    parseDecoration(object);\n    if (object.styles) {\n      for (var i in object.styles) {\n        for (var j in object.styles[i]) {\n          parseDecoration(object.styles[i][j]);\n        }\n      }\n    }\n    fabric.Object._fromObject('IText', object, callback, 'text');\n  };\n})();\n\n\n(function() {\n\n  var clone = fabric.util.object.clone;\n\n  fabric.util.object.extend(fabric.IText.prototype, /** @lends fabric.IText.prototype */ {\n\n    /**\n     * Initializes all the interactive behavior of IText\n     */\n    initBehavior: function() {\n      this.initAddedHandler();\n      this.initRemovedHandler();\n      this.initCursorSelectionHandlers();\n      this.initDoubleClickSimulation();\n      this.mouseMoveHandler = this.mouseMoveHandler.bind(this);\n    },\n\n    onDeselect: function() {\n      this.isEditing && this.exitEditing();\n      this.selected = false;\n    },\n\n    /**\n     * Initializes \"added\" event handler\n     */\n    initAddedHandler: function() {\n      var _this = this;\n      this.on('added', function() {\n        var canvas = _this.canvas;\n        if (canvas) {\n          if (!canvas._hasITextHandlers) {\n            canvas._hasITextHandlers = true;\n            _this._initCanvasHandlers(canvas);\n          }\n          canvas._iTextInstances = canvas._iTextInstances || [];\n          canvas._iTextInstances.push(_this);\n        }\n      });\n    },\n\n    initRemovedHandler: function() {\n      var _this = this;\n      this.on('removed', function() {\n        var canvas = _this.canvas;\n        if (canvas) {\n          canvas._iTextInstances = canvas._iTextInstances || [];\n          fabric.util.removeFromArray(canvas._iTextInstances, _this);\n          if (canvas._iTextInstances.length === 0) {\n            canvas._hasITextHandlers = false;\n            _this._removeCanvasHandlers(canvas);\n          }\n        }\n      });\n    },\n\n    /**\n     * register canvas event to manage exiting on other instances\n     * @private\n     */\n    _initCanvasHandlers: function(canvas) {\n      canvas._mouseUpITextHandler = function() {\n        if (canvas._iTextInstances) {\n          canvas._iTextInstances.forEach(function(obj) {\n            obj.__isMousedown = false;\n          });\n        }\n      };\n      canvas.on('mouse:up', canvas._mouseUpITextHandler);\n    },\n\n    /**\n     * remove canvas event to manage exiting on other instances\n     * @private\n     */\n    _removeCanvasHandlers: function(canvas) {\n      canvas.off('mouse:up', canvas._mouseUpITextHandler);\n    },\n\n    /**\n     * @private\n     */\n    _tick: function() {\n      this._currentTickState = this._animateCursor(this, 1, this.cursorDuration, '_onTickComplete');\n    },\n\n    /**\n     * @private\n     */\n    _animateCursor: function(obj, targetOpacity, duration, completeMethod) {\n\n      var tickState;\n\n      tickState = {\n        isAborted: false,\n        abort: function() {\n          this.isAborted = true;\n        },\n      };\n\n      obj.animate('_currentCursorOpacity', targetOpacity, {\n        duration: duration,\n        onComplete: function() {\n          if (!tickState.isAborted) {\n            obj[completeMethod]();\n          }\n        },\n        onChange: function() {\n          // we do not want to animate a selection, only cursor\n          if (obj.canvas && obj.selectionStart === obj.selectionEnd) {\n            obj.renderCursorOrSelection();\n          }\n        },\n        abort: function() {\n          return tickState.isAborted;\n        }\n      });\n      return tickState;\n    },\n\n    /**\n     * @private\n     */\n    _onTickComplete: function() {\n\n      var _this = this;\n\n      if (this._cursorTimeout1) {\n        clearTimeout(this._cursorTimeout1);\n      }\n      this._cursorTimeout1 = setTimeout(function() {\n        _this._currentTickCompleteState = _this._animateCursor(_this, 0, this.cursorDuration / 2, '_tick');\n      }, 100);\n    },\n\n    /**\n     * Initializes delayed cursor\n     */\n    initDelayedCursor: function(restart) {\n      var _this = this,\n          delay = restart ? 0 : this.cursorDelay;\n\n      this.abortCursorAnimation();\n      this._currentCursorOpacity = 1;\n      this._cursorTimeout2 = setTimeout(function() {\n        _this._tick();\n      }, delay);\n    },\n\n    /**\n     * Aborts cursor animation and clears all timeouts\n     */\n    abortCursorAnimation: function() {\n      var shouldClear = this._currentTickState || this._currentTickCompleteState,\n          canvas = this.canvas;\n      this._currentTickState && this._currentTickState.abort();\n      this._currentTickCompleteState && this._currentTickCompleteState.abort();\n\n      clearTimeout(this._cursorTimeout1);\n      clearTimeout(this._cursorTimeout2);\n\n      this._currentCursorOpacity = 0;\n      // to clear just itext area we need to transform the context\n      // it may not be worth it\n      if (shouldClear && canvas) {\n        canvas.clearContext(canvas.contextTop || canvas.contextContainer);\n      }\n\n    },\n\n    /**\n     * Selects entire text\n     * @return {fabric.IText} thisArg\n     * @chainable\n     */\n    selectAll: function() {\n      this.selectionStart = 0;\n      this.selectionEnd = this._text.length;\n      this._fireSelectionChanged();\n      this._updateTextarea();\n      return this;\n    },\n\n    /**\n     * Returns selected text\n     * @return {String}\n     */\n    getSelectedText: function() {\n      return this._text.slice(this.selectionStart, this.selectionEnd).join('');\n    },\n\n    /**\n     * Find new selection index representing start of current word according to current selection index\n     * @param {Number} startFrom Current selection index\n     * @return {Number} New selection index\n     */\n    findWordBoundaryLeft: function(startFrom) {\n      var offset = 0, index = startFrom - 1;\n\n      // remove space before cursor first\n      if (this._reSpace.test(this._text[index])) {\n        while (this._reSpace.test(this._text[index])) {\n          offset++;\n          index--;\n        }\n      }\n      while (/\\S/.test(this._text[index]) && index > -1) {\n        offset++;\n        index--;\n      }\n\n      return startFrom - offset;\n    },\n\n    /**\n     * Find new selection index representing end of current word according to current selection index\n     * @param {Number} startFrom Current selection index\n     * @return {Number} New selection index\n     */\n    findWordBoundaryRight: function(startFrom) {\n      var offset = 0, index = startFrom;\n\n      // remove space after cursor first\n      if (this._reSpace.test(this._text[index])) {\n        while (this._reSpace.test(this._text[index])) {\n          offset++;\n          index++;\n        }\n      }\n      while (/\\S/.test(this._text[index]) && index < this._text.length) {\n        offset++;\n        index++;\n      }\n\n      return startFrom + offset;\n    },\n\n    /**\n     * Find new selection index representing start of current line according to current selection index\n     * @param {Number} startFrom Current selection index\n     * @return {Number} New selection index\n     */\n    findLineBoundaryLeft: function(startFrom) {\n      var offset = 0, index = startFrom - 1;\n\n      while (!/\\n/.test(this._text[index]) && index > -1) {\n        offset++;\n        index--;\n      }\n\n      return startFrom - offset;\n    },\n\n    /**\n     * Find new selection index representing end of current line according to current selection index\n     * @param {Number} startFrom Current selection index\n     * @return {Number} New selection index\n     */\n    findLineBoundaryRight: function(startFrom) {\n      var offset = 0, index = startFrom;\n\n      while (!/\\n/.test(this._text[index]) && index < this._text.length) {\n        offset++;\n        index++;\n      }\n\n      return startFrom + offset;\n    },\n\n    /**\n     * Finds index corresponding to beginning or end of a word\n     * @param {Number} selectionStart Index of a character\n     * @param {Number} direction 1 or -1\n     * @return {Number} Index of the beginning or end of a word\n     */\n    searchWordBoundary: function(selectionStart, direction) {\n      var text = this._text,\n          index     = this._reSpace.test(text[selectionStart]) ? selectionStart - 1 : selectionStart,\n          _char     = text[index],\n          // wrong\n          reNonWord = fabric.reNonWord;\n\n      while (!reNonWord.test(_char) && index > 0 && index < text.length) {\n        index += direction;\n        _char = text[index];\n      }\n      if (reNonWord.test(_char)) {\n        index += direction === 1 ? 0 : 1;\n      }\n      return index;\n    },\n\n    /**\n     * Selects a word based on the index\n     * @param {Number} selectionStart Index of a character\n     */\n    selectWord: function(selectionStart) {\n      selectionStart = selectionStart || this.selectionStart;\n      var newSelectionStart = this.searchWordBoundary(selectionStart, -1), /* search backwards */\n          newSelectionEnd = this.searchWordBoundary(selectionStart, 1); /* search forward */\n\n      this.selectionStart = newSelectionStart;\n      this.selectionEnd = newSelectionEnd;\n      this._fireSelectionChanged();\n      this._updateTextarea();\n      this.renderCursorOrSelection();\n    },\n\n    /**\n     * Selects a line based on the index\n     * @param {Number} selectionStart Index of a character\n     * @return {fabric.IText} thisArg\n     * @chainable\n     */\n    selectLine: function(selectionStart) {\n      selectionStart = selectionStart || this.selectionStart;\n      var newSelectionStart = this.findLineBoundaryLeft(selectionStart),\n          newSelectionEnd = this.findLineBoundaryRight(selectionStart);\n\n      this.selectionStart = newSelectionStart;\n      this.selectionEnd = newSelectionEnd;\n      this._fireSelectionChanged();\n      this._updateTextarea();\n      return this;\n    },\n\n    /**\n     * Enters editing state\n     * @return {fabric.IText} thisArg\n     * @chainable\n     */\n    enterEditing: function(e) {\n      if (this.isEditing || !this.editable) {\n        return;\n      }\n\n      if (this.canvas) {\n        this.canvas.calcOffset();\n        this.exitEditingOnOthers(this.canvas);\n      }\n\n      this.isEditing = true;\n\n      this.initHiddenTextarea(e);\n      this.hiddenTextarea.focus();\n      this.hiddenTextarea.value = this.text;\n      this._updateTextarea();\n      this._saveEditingProps();\n      this._setEditingProps();\n      this._textBeforeEdit = this.text;\n\n      this._tick();\n      this.fire('editing:entered');\n      this._fireSelectionChanged();\n      if (!this.canvas) {\n        return this;\n      }\n      this.canvas.fire('text:editing:entered', { target: this });\n      this.initMouseMoveHandler();\n      this.canvas.requestRenderAll();\n      return this;\n    },\n\n    exitEditingOnOthers: function(canvas) {\n      if (canvas._iTextInstances) {\n        canvas._iTextInstances.forEach(function(obj) {\n          obj.selected = false;\n          if (obj.isEditing) {\n            obj.exitEditing();\n          }\n        });\n      }\n    },\n\n    /**\n     * Initializes \"mousemove\" event handler\n     */\n    initMouseMoveHandler: function() {\n      this.canvas.on('mouse:move', this.mouseMoveHandler);\n    },\n\n    /**\n     * @private\n     */\n    mouseMoveHandler: function(options) {\n      if (!this.__isMousedown || !this.isEditing) {\n        return;\n      }\n\n      var newSelectionStart = this.getSelectionStartFromPointer(options.e),\n          currentStart = this.selectionStart,\n          currentEnd = this.selectionEnd;\n      if (\n        (newSelectionStart !== this.__selectionStartOnMouseDown || currentStart === currentEnd)\n        &&\n        (currentStart === newSelectionStart || currentEnd === newSelectionStart)\n      ) {\n        return;\n      }\n      if (newSelectionStart > this.__selectionStartOnMouseDown) {\n        this.selectionStart = this.__selectionStartOnMouseDown;\n        this.selectionEnd = newSelectionStart;\n      }\n      else {\n        this.selectionStart = newSelectionStart;\n        this.selectionEnd = this.__selectionStartOnMouseDown;\n      }\n      if (this.selectionStart !== currentStart || this.selectionEnd !== currentEnd) {\n        this.restartCursorIfNeeded();\n        this._fireSelectionChanged();\n        this._updateTextarea();\n        this.renderCursorOrSelection();\n      }\n    },\n\n    /**\n     * @private\n     */\n    _setEditingProps: function() {\n      this.hoverCursor = 'text';\n\n      if (this.canvas) {\n        this.canvas.defaultCursor = this.canvas.moveCursor = 'text';\n      }\n\n      this.borderColor = this.editingBorderColor;\n      this.hasControls = this.selectable = false;\n      this.lockMovementX = this.lockMovementY = true;\n    },\n\n    /**\n     * convert from textarea to grapheme indexes\n     */\n    fromStringToGraphemeSelection: function(start, end, text) {\n      var smallerTextStart = text.slice(0, start),\n          graphemeStart = fabric.util.string.graphemeSplit(smallerTextStart).length;\n      if (start === end) {\n        return { selectionStart: graphemeStart, selectionEnd: graphemeStart };\n      }\n      var smallerTextEnd = text.slice(start, end),\n          graphemeEnd = fabric.util.string.graphemeSplit(smallerTextEnd).length;\n      return { selectionStart: graphemeStart, selectionEnd: graphemeStart + graphemeEnd };\n    },\n\n    /**\n     * convert from fabric to textarea values\n     */\n    fromGraphemeToStringSelection: function(start, end, _text) {\n      var smallerTextStart = _text.slice(0, start),\n          graphemeStart = smallerTextStart.join('').length;\n      if (start === end) {\n        return { selectionStart: graphemeStart, selectionEnd: graphemeStart };\n      }\n      var smallerTextEnd = _text.slice(start, end),\n          graphemeEnd = smallerTextEnd.join('').length;\n      return { selectionStart: graphemeStart, selectionEnd: graphemeStart + graphemeEnd };\n    },\n\n    /**\n     * @private\n     */\n    _updateTextarea: function() {\n      this.cursorOffsetCache = { };\n      if (!this.hiddenTextarea) {\n        return;\n      }\n      if (!this.inCompositionMode) {\n        var newSelection = this.fromGraphemeToStringSelection(this.selectionStart, this.selectionEnd, this._text);\n        this.hiddenTextarea.selectionStart = newSelection.selectionStart;\n        this.hiddenTextarea.selectionEnd = newSelection.selectionEnd;\n      }\n      this.updateTextareaPosition();\n    },\n\n    /**\n     * @private\n     */\n    updateFromTextArea: function() {\n      if (!this.hiddenTextarea) {\n        return;\n      }\n      this.cursorOffsetCache = { };\n      this.text = this.hiddenTextarea.value;\n      if (this._shouldClearDimensionCache()) {\n        this.initDimensions();\n        this.setCoords();\n      }\n      var newSelection = this.fromStringToGraphemeSelection(\n        this.hiddenTextarea.selectionStart, this.hiddenTextarea.selectionEnd, this.hiddenTextarea.value);\n      this.selectionEnd = this.selectionStart = newSelection.selectionEnd;\n      if (!this.inCompositionMode) {\n        this.selectionStart = newSelection.selectionStart;\n      }\n      this.updateTextareaPosition();\n    },\n\n    /**\n     * @private\n     */\n    updateTextareaPosition: function() {\n      if (this.selectionStart === this.selectionEnd) {\n        var style = this._calcTextareaPosition();\n        this.hiddenTextarea.style.left = style.left;\n        this.hiddenTextarea.style.top = style.top;\n      }\n    },\n\n    /**\n     * @private\n     * @return {Object} style contains style for hiddenTextarea\n     */\n    _calcTextareaPosition: function() {\n      if (!this.canvas) {\n        return { x: 1, y: 1 };\n      }\n      var desiredPosition = this.inCompositionMode ? this.compositionStart : this.selectionStart,\n          boundaries = this._getCursorBoundaries(desiredPosition),\n          cursorLocation = this.get2DCursorLocation(desiredPosition),\n          lineIndex = cursorLocation.lineIndex,\n          charIndex = cursorLocation.charIndex,\n          charHeight = this.getValueOfPropertyAt(lineIndex, charIndex, 'fontSize') * this.lineHeight,\n          leftOffset = boundaries.leftOffset,\n          m = this.calcTransformMatrix(),\n          p = {\n            x: boundaries.left + leftOffset,\n            y: boundaries.top + boundaries.topOffset + charHeight\n          },\n          retinaScaling = this.canvas.getRetinaScaling(),\n          upperCanvas = this.canvas.upperCanvasEl,\n          upperCanvasWidth = upperCanvas.width / retinaScaling,\n          upperCanvasHeight = upperCanvas.height / retinaScaling,\n          maxWidth = upperCanvasWidth - charHeight,\n          maxHeight = upperCanvasHeight - charHeight,\n          scaleX = upperCanvas.clientWidth / upperCanvasWidth,\n          scaleY = upperCanvas.clientHeight / upperCanvasHeight;\n\n      p = fabric.util.transformPoint(p, m);\n      p = fabric.util.transformPoint(p, this.canvas.viewportTransform);\n      p.x *= scaleX;\n      p.y *= scaleY;\n      if (p.x < 0) {\n        p.x = 0;\n      }\n      if (p.x > maxWidth) {\n        p.x = maxWidth;\n      }\n      if (p.y < 0) {\n        p.y = 0;\n      }\n      if (p.y > maxHeight) {\n        p.y = maxHeight;\n      }\n\n      // add canvas offset on document\n      p.x += this.canvas._offset.left;\n      p.y += this.canvas._offset.top;\n\n      return { left: p.x + 'px', top: p.y + 'px', fontSize: charHeight + 'px', charHeight: charHeight };\n    },\n\n    /**\n     * @private\n     */\n    _saveEditingProps: function() {\n      this._savedProps = {\n        hasControls: this.hasControls,\n        borderColor: this.borderColor,\n        lockMovementX: this.lockMovementX,\n        lockMovementY: this.lockMovementY,\n        hoverCursor: this.hoverCursor,\n        selectable: this.selectable,\n        defaultCursor: this.canvas && this.canvas.defaultCursor,\n        moveCursor: this.canvas && this.canvas.moveCursor\n      };\n    },\n\n    /**\n     * @private\n     */\n    _restoreEditingProps: function() {\n      if (!this._savedProps) {\n        return;\n      }\n\n      this.hoverCursor = this._savedProps.hoverCursor;\n      this.hasControls = this._savedProps.hasControls;\n      this.borderColor = this._savedProps.borderColor;\n      this.selectable = this._savedProps.selectable;\n      this.lockMovementX = this._savedProps.lockMovementX;\n      this.lockMovementY = this._savedProps.lockMovementY;\n\n      if (this.canvas) {\n        this.canvas.defaultCursor = this._savedProps.defaultCursor;\n        this.canvas.moveCursor = this._savedProps.moveCursor;\n      }\n    },\n\n    /**\n     * Exits from editing state\n     * @return {fabric.IText} thisArg\n     * @chainable\n     */\n    exitEditing: function() {\n      var isTextChanged = (this._textBeforeEdit !== this.text);\n      var hiddenTextarea = this.hiddenTextarea;\n      this.selected = false;\n      this.isEditing = false;\n\n      this.selectionEnd = this.selectionStart;\n\n      if (hiddenTextarea) {\n        hiddenTextarea.blur && hiddenTextarea.blur();\n        hiddenTextarea.parentNode && hiddenTextarea.parentNode.removeChild(hiddenTextarea);\n      }\n      this.hiddenTextarea = null;\n      this.abortCursorAnimation();\n      this._restoreEditingProps();\n      this._currentCursorOpacity = 0;\n      if (this._shouldClearDimensionCache()) {\n        this.initDimensions();\n        this.setCoords();\n      }\n      this.fire('editing:exited');\n      isTextChanged && this.fire('modified');\n      if (this.canvas) {\n        this.canvas.off('mouse:move', this.mouseMoveHandler);\n        this.canvas.fire('text:editing:exited', { target: this });\n        isTextChanged && this.canvas.fire('object:modified', { target: this });\n      }\n      return this;\n    },\n\n    /**\n     * @private\n     */\n    _removeExtraneousStyles: function() {\n      for (var prop in this.styles) {\n        if (!this._textLines[prop]) {\n          delete this.styles[prop];\n        }\n      }\n    },\n\n    /**\n     * remove and reflow a style block from start to end.\n     * @param {Number} start linear start position for removal (included in removal)\n     * @param {Number} end linear end position for removal ( excluded from removal )\n     */\n    removeStyleFromTo: function(start, end) {\n      var cursorStart = this.get2DCursorLocation(start, true),\n          cursorEnd = this.get2DCursorLocation(end, true),\n          lineStart = cursorStart.lineIndex,\n          charStart = cursorStart.charIndex,\n          lineEnd = cursorEnd.lineIndex,\n          charEnd = cursorEnd.charIndex,\n          i, styleObj;\n      if (lineStart !== lineEnd) {\n        // step1 remove the trailing of lineStart\n        if (this.styles[lineStart]) {\n          for (i = charStart; i < this._unwrappedTextLines[lineStart].length; i++) {\n            delete this.styles[lineStart][i];\n          }\n        }\n        // step2 move the trailing of lineEnd to lineStart if needed\n        if (this.styles[lineEnd]) {\n          for (i = charEnd; i < this._unwrappedTextLines[lineEnd].length; i++) {\n            styleObj = this.styles[lineEnd][i];\n            if (styleObj) {\n              this.styles[lineStart] || (this.styles[lineStart] = { });\n              this.styles[lineStart][charStart + i - charEnd] = styleObj;\n            }\n          }\n        }\n        // step3 detects lines will be completely removed.\n        for (i = lineStart + 1; i <= lineEnd; i++) {\n          delete this.styles[i];\n        }\n        // step4 shift remaining lines.\n        this.shiftLineStyles(lineEnd, lineStart - lineEnd);\n      }\n      else {\n        // remove and shift left on the same line\n        if (this.styles[lineStart]) {\n          styleObj = this.styles[lineStart];\n          var diff = charEnd - charStart, numericChar, _char;\n          for (i = charStart; i < charEnd; i++) {\n            delete styleObj[i];\n          }\n          for (_char in this.styles[lineStart]) {\n            numericChar = parseInt(_char, 10);\n            if (numericChar >= charEnd) {\n              styleObj[numericChar - diff] = styleObj[_char];\n              delete styleObj[_char];\n            }\n          }\n        }\n      }\n    },\n\n    /**\n     * Shifts line styles up or down\n     * @param {Number} lineIndex Index of a line\n     * @param {Number} offset Can any number?\n     */\n    shiftLineStyles: function(lineIndex, offset) {\n      // shift all line styles by offset upward or downward\n      // do not clone deep. we need new array, not new style objects\n      var clonedStyles = clone(this.styles);\n      for (var line in this.styles) {\n        var numericLine = parseInt(line, 10);\n        if (numericLine > lineIndex) {\n          this.styles[numericLine + offset] = clonedStyles[numericLine];\n          if (!clonedStyles[numericLine - offset]) {\n            delete this.styles[numericLine];\n          }\n        }\n      }\n    },\n\n    restartCursorIfNeeded: function() {\n      if (!this._currentTickState || this._currentTickState.isAborted\n        || !this._currentTickCompleteState || this._currentTickCompleteState.isAborted\n      ) {\n        this.initDelayedCursor();\n      }\n    },\n\n    /**\n     * Handle insertion of more consecutive style lines for when one or more\n     * newlines gets added to the text. Since current style needs to be shifted\n     * first we shift the current style of the number lines needed, then we add\n     * new lines from the last to the first.\n     * @param {Number} lineIndex Index of a line\n     * @param {Number} charIndex Index of a char\n     * @param {Number} qty number of lines to add\n     * @param {Array} copiedStyle Array of objects styles\n     */\n    insertNewlineStyleObject: function(lineIndex, charIndex, qty, copiedStyle) {\n      var currentCharStyle,\n          newLineStyles = {},\n          somethingAdded = false,\n          isEndOfLine = this._unwrappedTextLines[lineIndex].length === charIndex;\n\n      qty || (qty = 1);\n      this.shiftLineStyles(lineIndex, qty);\n      if (this.styles[lineIndex]) {\n        currentCharStyle = this.styles[lineIndex][charIndex === 0 ? charIndex : charIndex - 1];\n      }\n      // we clone styles of all chars\n      // after cursor onto the current line\n      for (var index in this.styles[lineIndex]) {\n        var numIndex = parseInt(index, 10);\n        if (numIndex >= charIndex) {\n          somethingAdded = true;\n          newLineStyles[numIndex - charIndex] = this.styles[lineIndex][index];\n          // remove lines from the previous line since they're on a new line now\n          if (!(isEndOfLine && charIndex === 0)) {\n            delete this.styles[lineIndex][index];\n          }\n        }\n      }\n      var styleCarriedOver = false;\n      if (somethingAdded && !isEndOfLine) {\n        // if is end of line, the extra style we copied\n        // is probably not something we want\n        this.styles[lineIndex + qty] = newLineStyles;\n        styleCarriedOver = true;\n      }\n      if (styleCarriedOver) {\n        // skip the last line of since we already prepared it.\n        qty--;\n      }\n      // for the all the lines or all the other lines\n      // we clone current char style onto the next (otherwise empty) line\n      while (qty > 0) {\n        if (copiedStyle && copiedStyle[qty - 1]) {\n          this.styles[lineIndex + qty] = { 0: clone(copiedStyle[qty - 1]) };\n        }\n        else if (currentCharStyle) {\n          this.styles[lineIndex + qty] = { 0: clone(currentCharStyle) };\n        }\n        else {\n          delete this.styles[lineIndex + qty];\n        }\n        qty--;\n      }\n      this._forceClearCache = true;\n    },\n\n    /**\n     * Inserts style object for a given line/char index\n     * @param {Number} lineIndex Index of a line\n     * @param {Number} charIndex Index of a char\n     * @param {Number} quantity number Style object to insert, if given\n     * @param {Array} copiedStyle array of style objects\n     */\n    insertCharStyleObject: function(lineIndex, charIndex, quantity, copiedStyle) {\n      if (!this.styles) {\n        this.styles = {};\n      }\n      var currentLineStyles       = this.styles[lineIndex],\n          currentLineStylesCloned = currentLineStyles ? clone(currentLineStyles) : {};\n\n      quantity || (quantity = 1);\n      // shift all char styles by quantity forward\n      // 0,1,2,3 -> (charIndex=2) -> 0,1,3,4 -> (insert 2) -> 0,1,2,3,4\n      for (var index in currentLineStylesCloned) {\n        var numericIndex = parseInt(index, 10);\n        if (numericIndex >= charIndex) {\n          currentLineStyles[numericIndex + quantity] = currentLineStylesCloned[numericIndex];\n          // only delete the style if there was nothing moved there\n          if (!currentLineStylesCloned[numericIndex - quantity]) {\n            delete currentLineStyles[numericIndex];\n          }\n        }\n      }\n      this._forceClearCache = true;\n      if (copiedStyle) {\n        while (quantity--) {\n          if (!Object.keys(copiedStyle[quantity]).length) {\n            continue;\n          }\n          if (!this.styles[lineIndex]) {\n            this.styles[lineIndex] = {};\n          }\n          this.styles[lineIndex][charIndex + quantity] = clone(copiedStyle[quantity]);\n        }\n        return;\n      }\n      if (!currentLineStyles) {\n        return;\n      }\n      var newStyle = currentLineStyles[charIndex ? charIndex - 1 : 1];\n      while (newStyle && quantity--) {\n        this.styles[lineIndex][charIndex + quantity] = clone(newStyle);\n      }\n    },\n\n    /**\n     * Inserts style object(s)\n     * @param {Array} insertedText Characters at the location where style is inserted\n     * @param {Number} start cursor index for inserting style\n     * @param {Array} [copiedStyle] array of style objects to insert.\n     */\n    insertNewStyleBlock: function(insertedText, start, copiedStyle) {\n      var cursorLoc = this.get2DCursorLocation(start, true),\n          addedLines = [0], linesLength = 0;\n      // get an array of how many char per lines are being added.\n      for (var i = 0; i < insertedText.length; i++) {\n        if (insertedText[i] === '\\n') {\n          linesLength++;\n          addedLines[linesLength] = 0;\n        }\n        else {\n          addedLines[linesLength]++;\n        }\n      }\n      // for the first line copy the style from the current char position.\n      if (addedLines[0] > 0) {\n        this.insertCharStyleObject(cursorLoc.lineIndex, cursorLoc.charIndex, addedLines[0], copiedStyle);\n        copiedStyle = copiedStyle && copiedStyle.slice(addedLines[0] + 1);\n      }\n      linesLength && this.insertNewlineStyleObject(\n        cursorLoc.lineIndex, cursorLoc.charIndex + addedLines[0], linesLength);\n      for (var i = 1; i < linesLength; i++) {\n        if (addedLines[i] > 0) {\n          this.insertCharStyleObject(cursorLoc.lineIndex + i, 0, addedLines[i], copiedStyle);\n        }\n        else if (copiedStyle) {\n          // this test is required in order to close #6841\n          // when a pasted buffer begins with a newline then\n          // this.styles[cursorLoc.lineIndex + i] and copiedStyle[0]\n          // may be undefined for some reason\n          if (this.styles[cursorLoc.lineIndex + i] && copiedStyle[0]) {\n            this.styles[cursorLoc.lineIndex + i][0] = copiedStyle[0];\n          }\n        }\n        copiedStyle = copiedStyle && copiedStyle.slice(addedLines[i] + 1);\n      }\n      // we use i outside the loop to get it like linesLength\n      if (addedLines[i] > 0) {\n        this.insertCharStyleObject(cursorLoc.lineIndex + i, 0, addedLines[i], copiedStyle);\n      }\n    },\n\n    /**\n     * Set the selectionStart and selectionEnd according to the new position of cursor\n     * mimic the key - mouse navigation when shift is pressed.\n     */\n    setSelectionStartEndWithShift: function(start, end, newSelection) {\n      if (newSelection <= start) {\n        if (end === start) {\n          this._selectionDirection = 'left';\n        }\n        else if (this._selectionDirection === 'right') {\n          this._selectionDirection = 'left';\n          this.selectionEnd = start;\n        }\n        this.selectionStart = newSelection;\n      }\n      else if (newSelection > start && newSelection < end) {\n        if (this._selectionDirection === 'right') {\n          this.selectionEnd = newSelection;\n        }\n        else {\n          this.selectionStart = newSelection;\n        }\n      }\n      else {\n        // newSelection is > selection start and end\n        if (end === start) {\n          this._selectionDirection = 'right';\n        }\n        else if (this._selectionDirection === 'left') {\n          this._selectionDirection = 'right';\n          this.selectionStart = end;\n        }\n        this.selectionEnd = newSelection;\n      }\n    },\n\n    setSelectionInBoundaries: function() {\n      var length = this.text.length;\n      if (this.selectionStart > length) {\n        this.selectionStart = length;\n      }\n      else if (this.selectionStart < 0) {\n        this.selectionStart = 0;\n      }\n      if (this.selectionEnd > length) {\n        this.selectionEnd = length;\n      }\n      else if (this.selectionEnd < 0) {\n        this.selectionEnd = 0;\n      }\n    }\n  });\n})();\n\n\nfabric.util.object.extend(fabric.IText.prototype, /** @lends fabric.IText.prototype */ {\n  /**\n   * Initializes \"dbclick\" event handler\n   */\n  initDoubleClickSimulation: function() {\n\n    // for double click\n    this.__lastClickTime = +new Date();\n\n    // for triple click\n    this.__lastLastClickTime = +new Date();\n\n    this.__lastPointer = { };\n\n    this.on('mousedown', this.onMouseDown);\n  },\n\n  /**\n   * Default event handler to simulate triple click\n   * @private\n   */\n  onMouseDown: function(options) {\n    if (!this.canvas) {\n      return;\n    }\n    this.__newClickTime = +new Date();\n    var newPointer = options.pointer;\n    if (this.isTripleClick(newPointer)) {\n      this.fire('tripleclick', options);\n      this._stopEvent(options.e);\n    }\n    this.__lastLastClickTime = this.__lastClickTime;\n    this.__lastClickTime = this.__newClickTime;\n    this.__lastPointer = newPointer;\n    this.__lastIsEditing = this.isEditing;\n    this.__lastSelected = this.selected;\n  },\n\n  isTripleClick: function(newPointer) {\n    return this.__newClickTime - this.__lastClickTime < 500 &&\n        this.__lastClickTime - this.__lastLastClickTime < 500 &&\n        this.__lastPointer.x === newPointer.x &&\n        this.__lastPointer.y === newPointer.y;\n  },\n\n  /**\n   * @private\n   */\n  _stopEvent: function(e) {\n    e.preventDefault && e.preventDefault();\n    e.stopPropagation && e.stopPropagation();\n  },\n\n  /**\n   * Initializes event handlers related to cursor or selection\n   */\n  initCursorSelectionHandlers: function() {\n    this.initMousedownHandler();\n    this.initMouseupHandler();\n    this.initClicks();\n  },\n\n  /**\n   * Default handler for double click, select a word\n   */\n  doubleClickHandler: function(options) {\n    if (!this.isEditing) {\n      return;\n    }\n    this.selectWord(this.getSelectionStartFromPointer(options.e));\n  },\n\n  /**\n   * Default handler for triple click, select a line\n   */\n  tripleClickHandler: function(options) {\n    if (!this.isEditing) {\n      return;\n    }\n    this.selectLine(this.getSelectionStartFromPointer(options.e));\n  },\n\n  /**\n   * Initializes double and triple click event handlers\n   */\n  initClicks: function() {\n    this.on('mousedblclick', this.doubleClickHandler);\n    this.on('tripleclick', this.tripleClickHandler);\n  },\n\n  /**\n   * Default event handler for the basic functionalities needed on _mouseDown\n   * can be overridden to do something different.\n   * Scope of this implementation is: find the click position, set selectionStart\n   * find selectionEnd, initialize the drawing of either cursor or selection area\n   * initializing a mousedDown on a text area will cancel fabricjs knowledge of\n   * current compositionMode. It will be set to false.\n   */\n  _mouseDownHandler: function(options) {\n    if (!this.canvas || !this.editable || (options.e.button && options.e.button !== 1)) {\n      return;\n    }\n\n    this.__isMousedown = true;\n\n    if (this.selected) {\n      this.inCompositionMode = false;\n      this.setCursorByClick(options.e);\n    }\n\n    if (this.isEditing) {\n      this.__selectionStartOnMouseDown = this.selectionStart;\n      if (this.selectionStart === this.selectionEnd) {\n        this.abortCursorAnimation();\n      }\n      this.renderCursorOrSelection();\n    }\n  },\n\n  /**\n   * Default event handler for the basic functionalities needed on mousedown:before\n   * can be overridden to do something different.\n   * Scope of this implementation is: verify the object is already selected when mousing down\n   */\n  _mouseDownHandlerBefore: function(options) {\n    if (!this.canvas || !this.editable || (options.e.button && options.e.button !== 1)) {\n      return;\n    }\n    // we want to avoid that an object that was selected and then becomes unselectable,\n    // may trigger editing mode in some way.\n    this.selected = this === this.canvas._activeObject;\n  },\n\n  /**\n   * Initializes \"mousedown\" event handler\n   */\n  initMousedownHandler: function() {\n    this.on('mousedown', this._mouseDownHandler);\n    this.on('mousedown:before', this._mouseDownHandlerBefore);\n  },\n\n  /**\n   * Initializes \"mouseup\" event handler\n   */\n  initMouseupHandler: function() {\n    this.on('mouseup', this.mouseUpHandler);\n  },\n\n  /**\n   * standard handler for mouse up, overridable\n   * @private\n   */\n  mouseUpHandler: function(options) {\n    this.__isMousedown = false;\n    if (!this.editable || this.group ||\n      (options.transform && options.transform.actionPerformed) ||\n      (options.e.button && options.e.button !== 1)) {\n      return;\n    }\n\n    if (this.canvas) {\n      var currentActive = this.canvas._activeObject;\n      if (currentActive && currentActive !== this) {\n        // avoid running this logic when there is an active object\n        // this because is possible with shift click and fast clicks,\n        // to rapidly deselect and reselect this object and trigger an enterEdit\n        return;\n      }\n    }\n\n    if (this.__lastSelected && !this.__corner) {\n      this.selected = false;\n      this.__lastSelected = false;\n      this.enterEditing(options.e);\n      if (this.selectionStart === this.selectionEnd) {\n        this.initDelayedCursor(true);\n      }\n      else {\n        this.renderCursorOrSelection();\n      }\n    }\n    else {\n      this.selected = true;\n    }\n  },\n\n  /**\n   * Changes cursor location in a text depending on passed pointer (x/y) object\n   * @param {Event} e Event object\n   */\n  setCursorByClick: function(e) {\n    var newSelection = this.getSelectionStartFromPointer(e),\n        start = this.selectionStart, end = this.selectionEnd;\n    if (e.shiftKey) {\n      this.setSelectionStartEndWithShift(start, end, newSelection);\n    }\n    else {\n      this.selectionStart = newSelection;\n      this.selectionEnd = newSelection;\n    }\n    if (this.isEditing) {\n      this._fireSelectionChanged();\n      this._updateTextarea();\n    }\n  },\n\n  /**\n   * Returns index of a character corresponding to where an object was clicked\n   * @param {Event} e Event object\n   * @return {Number} Index of a character\n   */\n  getSelectionStartFromPointer: function(e) {\n    var mouseOffset = this.getLocalPointer(e),\n        prevWidth = 0,\n        width = 0,\n        height = 0,\n        charIndex = 0,\n        lineIndex = 0,\n        lineLeftOffset,\n        line;\n    for (var i = 0, len = this._textLines.length; i < len; i++) {\n      if (height <= mouseOffset.y) {\n        height += this.getHeightOfLine(i) * this.scaleY;\n        lineIndex = i;\n        if (i > 0) {\n          charIndex += this._textLines[i - 1].length + this.missingNewlineOffset(i - 1);\n        }\n      }\n      else {\n        break;\n      }\n    }\n    lineLeftOffset = this._getLineLeftOffset(lineIndex);\n    width = lineLeftOffset * this.scaleX;\n    line = this._textLines[lineIndex];\n    // handling of RTL: in order to get things work correctly,\n    // we assume RTL writing is mirrored compared to LTR writing.\n    // so in position detection we mirror the X offset, and when is time\n    // of rendering it, we mirror it again.\n    if (this.direction === 'rtl') {\n      mouseOffset.x = this.width * this.scaleX - mouseOffset.x + width;\n    }\n    for (var j = 0, jlen = line.length; j < jlen; j++) {\n      prevWidth = width;\n      // i removed something about flipX here, check.\n      width += this.__charBounds[lineIndex][j].kernedWidth * this.scaleX;\n      if (width <= mouseOffset.x) {\n        charIndex++;\n      }\n      else {\n        break;\n      }\n    }\n    return this._getNewSelectionStartFromOffset(mouseOffset, prevWidth, width, charIndex, jlen);\n  },\n\n  /**\n   * @private\n   */\n  _getNewSelectionStartFromOffset: function(mouseOffset, prevWidth, width, index, jlen) {\n    // we need Math.abs because when width is after the last char, the offset is given as 1, while is 0\n    var distanceBtwLastCharAndCursor = mouseOffset.x - prevWidth,\n        distanceBtwNextCharAndCursor = width - mouseOffset.x,\n        offset = distanceBtwNextCharAndCursor > distanceBtwLastCharAndCursor ||\n          distanceBtwNextCharAndCursor < 0 ? 0 : 1,\n        newSelectionStart = index + offset;\n    // if object is horizontally flipped, mirror cursor location from the end\n    if (this.flipX) {\n      newSelectionStart = jlen - newSelectionStart;\n    }\n\n    if (newSelectionStart > this._text.length) {\n      newSelectionStart = this._text.length;\n    }\n\n    return newSelectionStart;\n  }\n});\n\n\nfabric.util.object.extend(fabric.IText.prototype, /** @lends fabric.IText.prototype */ {\n\n  /**\n   * Initializes hidden textarea (needed to bring up keyboard in iOS)\n   */\n  initHiddenTextarea: function() {\n    this.hiddenTextarea = fabric.document.createElement('textarea');\n    this.hiddenTextarea.setAttribute('autocapitalize', 'off');\n    this.hiddenTextarea.setAttribute('autocorrect', 'off');\n    this.hiddenTextarea.setAttribute('autocomplete', 'off');\n    this.hiddenTextarea.setAttribute('spellcheck', 'false');\n    this.hiddenTextarea.setAttribute('data-fabric-hiddentextarea', '');\n    this.hiddenTextarea.setAttribute('wrap', 'off');\n    var style = this._calcTextareaPosition();\n    // line-height: 1px; was removed from the style to fix this:\n    // https://bugs.chromium.org/p/chromium/issues/detail?id=870966\n    this.hiddenTextarea.style.cssText = 'position: absolute; top: ' + style.top +\n    '; left: ' + style.left + '; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px;' +\n    ' paddingｰtop: ' + style.fontSize + ';';\n\n    if (this.hiddenTextareaContainer) {\n      this.hiddenTextareaContainer.appendChild(this.hiddenTextarea);\n    }\n    else {\n      fabric.document.body.appendChild(this.hiddenTextarea);\n    }\n\n    fabric.util.addListener(this.hiddenTextarea, 'keydown', this.onKeyDown.bind(this));\n    fabric.util.addListener(this.hiddenTextarea, 'keyup', this.onKeyUp.bind(this));\n    fabric.util.addListener(this.hiddenTextarea, 'input', this.onInput.bind(this));\n    fabric.util.addListener(this.hiddenTextarea, 'copy', this.copy.bind(this));\n    fabric.util.addListener(this.hiddenTextarea, 'cut', this.copy.bind(this));\n    fabric.util.addListener(this.hiddenTextarea, 'paste', this.paste.bind(this));\n    fabric.util.addListener(this.hiddenTextarea, 'compositionstart', this.onCompositionStart.bind(this));\n    fabric.util.addListener(this.hiddenTextarea, 'compositionupdate', this.onCompositionUpdate.bind(this));\n    fabric.util.addListener(this.hiddenTextarea, 'compositionend', this.onCompositionEnd.bind(this));\n\n    if (!this._clickHandlerInitialized && this.canvas) {\n      fabric.util.addListener(this.canvas.upperCanvasEl, 'click', this.onClick.bind(this));\n      this._clickHandlerInitialized = true;\n    }\n  },\n\n  /**\n   * For functionalities on keyDown\n   * Map a special key to a function of the instance/prototype\n   * If you need different behaviour for ESC or TAB or arrows, you have to change\n   * this map setting the name of a function that you build on the fabric.Itext or\n   * your prototype.\n   * the map change will affect all Instances unless you need for only some text Instances\n   * in that case you have to clone this object and assign your Instance.\n   * this.keysMap = fabric.util.object.clone(this.keysMap);\n   * The function must be in fabric.Itext.prototype.myFunction And will receive event as args[0]\n   */\n  keysMap: {\n    9:  'exitEditing',\n    27: 'exitEditing',\n    33: 'moveCursorUp',\n    34: 'moveCursorDown',\n    35: 'moveCursorRight',\n    36: 'moveCursorLeft',\n    37: 'moveCursorLeft',\n    38: 'moveCursorUp',\n    39: 'moveCursorRight',\n    40: 'moveCursorDown',\n  },\n\n  keysMapRtl: {\n    9:  'exitEditing',\n    27: 'exitEditing',\n    33: 'moveCursorUp',\n    34: 'moveCursorDown',\n    35: 'moveCursorLeft',\n    36: 'moveCursorRight',\n    37: 'moveCursorRight',\n    38: 'moveCursorUp',\n    39: 'moveCursorLeft',\n    40: 'moveCursorDown',\n  },\n\n  /**\n   * For functionalities on keyUp + ctrl || cmd\n   */\n  ctrlKeysMapUp: {\n    67: 'copy',\n    88: 'cut'\n  },\n\n  /**\n   * For functionalities on keyDown + ctrl || cmd\n   */\n  ctrlKeysMapDown: {\n    65: 'selectAll'\n  },\n\n  onClick: function() {\n    // No need to trigger click event here, focus is enough to have the keyboard appear on Android\n    this.hiddenTextarea && this.hiddenTextarea.focus();\n  },\n\n  /**\n   * Handles keydown event\n   * only used for arrows and combination of modifier keys.\n   * @param {Event} e Event object\n   */\n  onKeyDown: function(e) {\n    if (!this.isEditing) {\n      return;\n    }\n    var keyMap = this.direction === 'rtl' ? this.keysMapRtl : this.keysMap;\n    if (e.keyCode in keyMap) {\n      this[keyMap[e.keyCode]](e);\n    }\n    else if ((e.keyCode in this.ctrlKeysMapDown) && (e.ctrlKey || e.metaKey)) {\n      this[this.ctrlKeysMapDown[e.keyCode]](e);\n    }\n    else {\n      return;\n    }\n    e.stopImmediatePropagation();\n    e.preventDefault();\n    if (e.keyCode >= 33 && e.keyCode <= 40) {\n      // if i press an arrow key just update selection\n      this.inCompositionMode = false;\n      this.clearContextTop();\n      this.renderCursorOrSelection();\n    }\n    else {\n      this.canvas && this.canvas.requestRenderAll();\n    }\n  },\n\n  /**\n   * Handles keyup event\n   * We handle KeyUp because ie11 and edge have difficulties copy/pasting\n   * if a copy/cut event fired, keyup is dismissed\n   * @param {Event} e Event object\n   */\n  onKeyUp: function(e) {\n    if (!this.isEditing || this._copyDone || this.inCompositionMode) {\n      this._copyDone = false;\n      return;\n    }\n    if ((e.keyCode in this.ctrlKeysMapUp) && (e.ctrlKey || e.metaKey)) {\n      this[this.ctrlKeysMapUp[e.keyCode]](e);\n    }\n    else {\n      return;\n    }\n    e.stopImmediatePropagation();\n    e.preventDefault();\n    this.canvas && this.canvas.requestRenderAll();\n  },\n\n  /**\n   * Handles onInput event\n   * @param {Event} e Event object\n   */\n  onInput: function(e) {\n    var fromPaste = this.fromPaste;\n    this.fromPaste = false;\n    e && e.stopPropagation();\n    if (!this.isEditing) {\n      return;\n    }\n    // decisions about style changes.\n    var nextText = this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,\n        charCount = this._text.length,\n        nextCharCount = nextText.length,\n        removedText, insertedText,\n        charDiff = nextCharCount - charCount,\n        selectionStart = this.selectionStart, selectionEnd = this.selectionEnd,\n        selection = selectionStart !== selectionEnd,\n        copiedStyle, removeFrom, removeTo;\n    if (this.hiddenTextarea.value === '') {\n      this.styles = { };\n      this.updateFromTextArea();\n      this.fire('changed');\n      if (this.canvas) {\n        this.canvas.fire('text:changed', { target: this });\n        this.canvas.requestRenderAll();\n      }\n      return;\n    }\n\n    var textareaSelection = this.fromStringToGraphemeSelection(\n      this.hiddenTextarea.selectionStart,\n      this.hiddenTextarea.selectionEnd,\n      this.hiddenTextarea.value\n    );\n    var backDelete = selectionStart > textareaSelection.selectionStart;\n\n    if (selection) {\n      removedText = this._text.slice(selectionStart, selectionEnd);\n      charDiff += selectionEnd - selectionStart;\n    }\n    else if (nextCharCount < charCount) {\n      if (backDelete) {\n        removedText = this._text.slice(selectionEnd + charDiff, selectionEnd);\n      }\n      else {\n        removedText = this._text.slice(selectionStart, selectionStart - charDiff);\n      }\n    }\n    insertedText = nextText.slice(textareaSelection.selectionEnd - charDiff, textareaSelection.selectionEnd);\n    if (removedText && removedText.length) {\n      if (insertedText.length) {\n        // let's copy some style before deleting.\n        // we want to copy the style before the cursor OR the style at the cursor if selection\n        // is bigger than 0.\n        copiedStyle = this.getSelectionStyles(selectionStart, selectionStart + 1, false);\n        // now duplicate the style one for each inserted text.\n        copiedStyle = insertedText.map(function() {\n          // this return an array of references, but that is fine since we are\n          // copying the style later.\n          return copiedStyle[0];\n        });\n      }\n      if (selection) {\n        removeFrom = selectionStart;\n        removeTo = selectionEnd;\n      }\n      else if (backDelete) {\n        // detect differences between forwardDelete and backDelete\n        removeFrom = selectionEnd - removedText.length;\n        removeTo = selectionEnd;\n      }\n      else {\n        removeFrom = selectionEnd;\n        removeTo = selectionEnd + removedText.length;\n      }\n      this.removeStyleFromTo(removeFrom, removeTo);\n    }\n    if (insertedText.length) {\n      if (fromPaste && insertedText.join('') === fabric.copiedText && !fabric.disableStyleCopyPaste) {\n        copiedStyle = fabric.copiedTextStyle;\n      }\n      this.insertNewStyleBlock(insertedText, selectionStart, copiedStyle);\n    }\n    this.updateFromTextArea();\n    this.fire('changed');\n    if (this.canvas) {\n      this.canvas.fire('text:changed', { target: this });\n      this.canvas.requestRenderAll();\n    }\n  },\n  /**\n   * Composition start\n   */\n  onCompositionStart: function() {\n    this.inCompositionMode = true;\n  },\n\n  /**\n   * Composition end\n   */\n  onCompositionEnd: function() {\n    this.inCompositionMode = false;\n  },\n\n  // /**\n  //  * Composition update\n  //  */\n  onCompositionUpdate: function(e) {\n    this.compositionStart = e.target.selectionStart;\n    this.compositionEnd = e.target.selectionEnd;\n    this.updateTextareaPosition();\n  },\n\n  /**\n   * Copies selected text\n   * @param {Event} e Event object\n   */\n  copy: function() {\n    if (this.selectionStart === this.selectionEnd) {\n      //do not cut-copy if no selection\n      return;\n    }\n\n    fabric.copiedText = this.getSelectedText();\n    if (!fabric.disableStyleCopyPaste) {\n      fabric.copiedTextStyle = this.getSelectionStyles(this.selectionStart, this.selectionEnd, true);\n    }\n    else {\n      fabric.copiedTextStyle = null;\n    }\n    this._copyDone = true;\n  },\n\n  /**\n   * Pastes text\n   * @param {Event} e Event object\n   */\n  paste: function() {\n    this.fromPaste = true;\n  },\n\n  /**\n   * @private\n   * @param {Event} e Event object\n   * @return {Object} Clipboard data object\n   */\n  _getClipboardData: function(e) {\n    return (e && e.clipboardData) || fabric.window.clipboardData;\n  },\n\n  /**\n   * Finds the width in pixels before the cursor on the same line\n   * @private\n   * @param {Number} lineIndex\n   * @param {Number} charIndex\n   * @return {Number} widthBeforeCursor width before cursor\n   */\n  _getWidthBeforeCursor: function(lineIndex, charIndex) {\n    var widthBeforeCursor = this._getLineLeftOffset(lineIndex), bound;\n\n    if (charIndex > 0) {\n      bound = this.__charBounds[lineIndex][charIndex - 1];\n      widthBeforeCursor += bound.left + bound.width;\n    }\n    return widthBeforeCursor;\n  },\n\n  /**\n   * Gets start offset of a selection\n   * @param {Event} e Event object\n   * @param {Boolean} isRight\n   * @return {Number}\n   */\n  getDownCursorOffset: function(e, isRight) {\n    var selectionProp = this._getSelectionForOffset(e, isRight),\n        cursorLocation = this.get2DCursorLocation(selectionProp),\n        lineIndex = cursorLocation.lineIndex;\n    // if on last line, down cursor goes to end of line\n    if (lineIndex === this._textLines.length - 1 || e.metaKey || e.keyCode === 34) {\n      // move to the end of a text\n      return this._text.length - selectionProp;\n    }\n    var charIndex = cursorLocation.charIndex,\n        widthBeforeCursor = this._getWidthBeforeCursor(lineIndex, charIndex),\n        indexOnOtherLine = this._getIndexOnLine(lineIndex + 1, widthBeforeCursor),\n        textAfterCursor = this._textLines[lineIndex].slice(charIndex);\n    return textAfterCursor.length + indexOnOtherLine + 1 + this.missingNewlineOffset(lineIndex);\n  },\n\n  /**\n   * private\n   * Helps finding if the offset should be counted from Start or End\n   * @param {Event} e Event object\n   * @param {Boolean} isRight\n   * @return {Number}\n   */\n  _getSelectionForOffset: function(e, isRight) {\n    if (e.shiftKey && this.selectionStart !== this.selectionEnd && isRight) {\n      return this.selectionEnd;\n    }\n    else {\n      return this.selectionStart;\n    }\n  },\n\n  /**\n   * @param {Event} e Event object\n   * @param {Boolean} isRight\n   * @return {Number}\n   */\n  getUpCursorOffset: function(e, isRight) {\n    var selectionProp = this._getSelectionForOffset(e, isRight),\n        cursorLocation = this.get2DCursorLocation(selectionProp),\n        lineIndex = cursorLocation.lineIndex;\n    if (lineIndex === 0 || e.metaKey || e.keyCode === 33) {\n      // if on first line, up cursor goes to start of line\n      return -selectionProp;\n    }\n    var charIndex = cursorLocation.charIndex,\n        widthBeforeCursor = this._getWidthBeforeCursor(lineIndex, charIndex),\n        indexOnOtherLine = this._getIndexOnLine(lineIndex - 1, widthBeforeCursor),\n        textBeforeCursor = this._textLines[lineIndex].slice(0, charIndex),\n        missingNewlineOffset = this.missingNewlineOffset(lineIndex - 1);\n    // return a negative offset\n    return -this._textLines[lineIndex - 1].length\n     + indexOnOtherLine - textBeforeCursor.length + (1 - missingNewlineOffset);\n  },\n\n  /**\n   * for a given width it founds the matching character.\n   * @private\n   */\n  _getIndexOnLine: function(lineIndex, width) {\n\n    var line = this._textLines[lineIndex],\n        lineLeftOffset = this._getLineLeftOffset(lineIndex),\n        widthOfCharsOnLine = lineLeftOffset,\n        indexOnLine = 0, charWidth, foundMatch;\n\n    for (var j = 0, jlen = line.length; j < jlen; j++) {\n      charWidth = this.__charBounds[lineIndex][j].width;\n      widthOfCharsOnLine += charWidth;\n      if (widthOfCharsOnLine > width) {\n        foundMatch = true;\n        var leftEdge = widthOfCharsOnLine - charWidth,\n            rightEdge = widthOfCharsOnLine,\n            offsetFromLeftEdge = Math.abs(leftEdge - width),\n            offsetFromRightEdge = Math.abs(rightEdge - width);\n\n        indexOnLine = offsetFromRightEdge < offsetFromLeftEdge ? j : (j - 1);\n        break;\n      }\n    }\n\n    // reached end\n    if (!foundMatch) {\n      indexOnLine = line.length - 1;\n    }\n\n    return indexOnLine;\n  },\n\n\n  /**\n   * Moves cursor down\n   * @param {Event} e Event object\n   */\n  moveCursorDown: function(e) {\n    if (this.selectionStart >= this._text.length && this.selectionEnd >= this._text.length) {\n      return;\n    }\n    this._moveCursorUpOrDown('Down', e);\n  },\n\n  /**\n   * Moves cursor up\n   * @param {Event} e Event object\n   */\n  moveCursorUp: function(e) {\n    if (this.selectionStart === 0 && this.selectionEnd === 0) {\n      return;\n    }\n    this._moveCursorUpOrDown('Up', e);\n  },\n\n  /**\n   * Moves cursor up or down, fires the events\n   * @param {String} direction 'Up' or 'Down'\n   * @param {Event} e Event object\n   */\n  _moveCursorUpOrDown: function(direction, e) {\n    // getUpCursorOffset\n    // getDownCursorOffset\n    var action = 'get' + direction + 'CursorOffset',\n        offset = this[action](e, this._selectionDirection === 'right');\n    if (e.shiftKey) {\n      this.moveCursorWithShift(offset);\n    }\n    else {\n      this.moveCursorWithoutShift(offset);\n    }\n    if (offset !== 0) {\n      this.setSelectionInBoundaries();\n      this.abortCursorAnimation();\n      this._currentCursorOpacity = 1;\n      this.initDelayedCursor();\n      this._fireSelectionChanged();\n      this._updateTextarea();\n    }\n  },\n\n  /**\n   * Moves cursor with shift\n   * @param {Number} offset\n   */\n  moveCursorWithShift: function(offset) {\n    var newSelection = this._selectionDirection === 'left'\n      ? this.selectionStart + offset\n      : this.selectionEnd + offset;\n    this.setSelectionStartEndWithShift(this.selectionStart, this.selectionEnd, newSelection);\n    return offset !== 0;\n  },\n\n  /**\n   * Moves cursor up without shift\n   * @param {Number} offset\n   */\n  moveCursorWithoutShift: function(offset) {\n    if (offset < 0) {\n      this.selectionStart += offset;\n      this.selectionEnd = this.selectionStart;\n    }\n    else {\n      this.selectionEnd += offset;\n      this.selectionStart = this.selectionEnd;\n    }\n    return offset !== 0;\n  },\n\n  /**\n   * Moves cursor left\n   * @param {Event} e Event object\n   */\n  moveCursorLeft: function(e) {\n    if (this.selectionStart === 0 && this.selectionEnd === 0) {\n      return;\n    }\n    this._moveCursorLeftOrRight('Left', e);\n  },\n\n  /**\n   * @private\n   * @return {Boolean} true if a change happened\n   */\n  _move: function(e, prop, direction) {\n    var newValue;\n    if (e.altKey) {\n      newValue = this['findWordBoundary' + direction](this[prop]);\n    }\n    else if (e.metaKey || e.keyCode === 35 ||  e.keyCode === 36 ) {\n      newValue = this['findLineBoundary' + direction](this[prop]);\n    }\n    else {\n      this[prop] += direction === 'Left' ? -1 : 1;\n      return true;\n    }\n    if (typeof newValue !== undefined && this[prop] !== newValue) {\n      this[prop] = newValue;\n      return true;\n    }\n  },\n\n  /**\n   * @private\n   */\n  _moveLeft: function(e, prop) {\n    return this._move(e, prop, 'Left');\n  },\n\n  /**\n   * @private\n   */\n  _moveRight: function(e, prop) {\n    return this._move(e, prop, 'Right');\n  },\n\n  /**\n   * Moves cursor left without keeping selection\n   * @param {Event} e\n   */\n  moveCursorLeftWithoutShift: function(e) {\n    var change = true;\n    this._selectionDirection = 'left';\n\n    // only move cursor when there is no selection,\n    // otherwise we discard it, and leave cursor on same place\n    if (this.selectionEnd === this.selectionStart && this.selectionStart !== 0) {\n      change = this._moveLeft(e, 'selectionStart');\n\n    }\n    this.selectionEnd = this.selectionStart;\n    return change;\n  },\n\n  /**\n   * Moves cursor left while keeping selection\n   * @param {Event} e\n   */\n  moveCursorLeftWithShift: function(e) {\n    if (this._selectionDirection === 'right' && this.selectionStart !== this.selectionEnd) {\n      return this._moveLeft(e, 'selectionEnd');\n    }\n    else if (this.selectionStart !== 0){\n      this._selectionDirection = 'left';\n      return this._moveLeft(e, 'selectionStart');\n    }\n  },\n\n  /**\n   * Moves cursor right\n   * @param {Event} e Event object\n   */\n  moveCursorRight: function(e) {\n    if (this.selectionStart >= this._text.length && this.selectionEnd >= this._text.length) {\n      return;\n    }\n    this._moveCursorLeftOrRight('Right', e);\n  },\n\n  /**\n   * Moves cursor right or Left, fires event\n   * @param {String} direction 'Left', 'Right'\n   * @param {Event} e Event object\n   */\n  _moveCursorLeftOrRight: function(direction, e) {\n    var actionName = 'moveCursor' + direction + 'With';\n    this._currentCursorOpacity = 1;\n\n    if (e.shiftKey) {\n      actionName += 'Shift';\n    }\n    else {\n      actionName += 'outShift';\n    }\n    if (this[actionName](e)) {\n      this.abortCursorAnimation();\n      this.initDelayedCursor();\n      this._fireSelectionChanged();\n      this._updateTextarea();\n    }\n  },\n\n  /**\n   * Moves cursor right while keeping selection\n   * @param {Event} e\n   */\n  moveCursorRightWithShift: function(e) {\n    if (this._selectionDirection === 'left' && this.selectionStart !== this.selectionEnd) {\n      return this._moveRight(e, 'selectionStart');\n    }\n    else if (this.selectionEnd !== this._text.length) {\n      this._selectionDirection = 'right';\n      return this._moveRight(e, 'selectionEnd');\n    }\n  },\n\n  /**\n   * Moves cursor right without keeping selection\n   * @param {Event} e Event object\n   */\n  moveCursorRightWithoutShift: function(e) {\n    var changed = true;\n    this._selectionDirection = 'right';\n\n    if (this.selectionStart === this.selectionEnd) {\n      changed = this._moveRight(e, 'selectionStart');\n      this.selectionEnd = this.selectionStart;\n    }\n    else {\n      this.selectionStart = this.selectionEnd;\n    }\n    return changed;\n  },\n\n  /**\n   * Removes characters from start/end\n   * start/end ar per grapheme position in _text array.\n   *\n   * @param {Number} start\n   * @param {Number} end default to start + 1\n   */\n  removeChars: function(start, end) {\n    if (typeof end === 'undefined') {\n      end = start + 1;\n    }\n    this.removeStyleFromTo(start, end);\n    this._text.splice(start, end - start);\n    this.text = this._text.join('');\n    this.set('dirty', true);\n    if (this._shouldClearDimensionCache()) {\n      this.initDimensions();\n      this.setCoords();\n    }\n    this._removeExtraneousStyles();\n  },\n\n  /**\n   * insert characters at start position, before start position.\n   * start  equal 1 it means the text get inserted between actual grapheme 0 and 1\n   * if style array is provided, it must be as the same length of text in graphemes\n   * if end is provided and is bigger than start, old text is replaced.\n   * start/end ar per grapheme position in _text array.\n   *\n   * @param {String} text text to insert\n   * @param {Array} style array of style objects\n   * @param {Number} start\n   * @param {Number} end default to start + 1\n   */\n  insertChars: function(text, style, start, end) {\n    if (typeof end === 'undefined') {\n      end = start;\n    }\n    if (end > start) {\n      this.removeStyleFromTo(start, end);\n    }\n    var graphemes = fabric.util.string.graphemeSplit(text);\n    this.insertNewStyleBlock(graphemes, start, style);\n    this._text = [].concat(this._text.slice(0, start), graphemes, this._text.slice(end));\n    this.text = this._text.join('');\n    this.set('dirty', true);\n    if (this._shouldClearDimensionCache()) {\n      this.initDimensions();\n      this.setCoords();\n    }\n    this._removeExtraneousStyles();\n  },\n\n});\n\n\n/* _TO_SVG_START_ */\n(function() {\n  var toFixed = fabric.util.toFixed,\n      multipleSpacesRegex = /  +/g;\n\n  fabric.util.object.extend(fabric.Text.prototype, /** @lends fabric.Text.prototype */ {\n\n    /**\n     * Returns SVG representation of an instance\n     * @param {Function} [reviver] Method for further parsing of svg representation.\n     * @return {String} svg representation of an instance\n     */\n    _toSVG: function() {\n      var offsets = this._getSVGLeftTopOffsets(),\n          textAndBg = this._getSVGTextAndBg(offsets.textTop, offsets.textLeft);\n      return this._wrapSVGTextAndBg(textAndBg);\n    },\n\n    /**\n     * Returns svg representation of an instance\n     * @param {Function} [reviver] Method for further parsing of svg representation.\n     * @return {String} svg representation of an instance\n     */\n    toSVG: function(reviver) {\n      return this._createBaseSVGMarkup(\n        this._toSVG(),\n        { reviver: reviver, noStyle: true, withShadow: true }\n      );\n    },\n\n    /**\n     * @private\n     */\n    _getSVGLeftTopOffsets: function() {\n      return {\n        textLeft: -this.width / 2,\n        textTop: -this.height / 2,\n        lineTop: this.getHeightOfLine(0)\n      };\n    },\n\n    /**\n     * @private\n     */\n    _wrapSVGTextAndBg: function(textAndBg) {\n      var noShadow = true,\n          textDecoration = this.getSvgTextDecoration(this);\n      return [\n        textAndBg.textBgRects.join(''),\n        '\\t\\t<text xml:space=\"preserve\" ',\n        (this.fontFamily ? 'font-family=\"' + this.fontFamily.replace(/\"/g, '\\'') + '\" ' : ''),\n        (this.fontSize ? 'font-size=\"' + this.fontSize + '\" ' : ''),\n        (this.fontStyle ? 'font-style=\"' + this.fontStyle + '\" ' : ''),\n        (this.fontWeight ? 'font-weight=\"' + this.fontWeight + '\" ' : ''),\n        (textDecoration ? 'text-decoration=\"' + textDecoration + '\" ' : ''),\n        'style=\"', this.getSvgStyles(noShadow), '\"', this.addPaintOrder(), ' >',\n        textAndBg.textSpans.join(''),\n        '</text>\\n'\n      ];\n    },\n\n    /**\n     * @private\n     * @param {Number} textTopOffset Text top offset\n     * @param {Number} textLeftOffset Text left offset\n     * @return {Object}\n     */\n    _getSVGTextAndBg: function(textTopOffset, textLeftOffset) {\n      var textSpans = [],\n          textBgRects = [],\n          height = textTopOffset, lineOffset;\n      // bounding-box background\n      this._setSVGBg(textBgRects);\n\n      // text and text-background\n      for (var i = 0, len = this._textLines.length; i < len; i++) {\n        lineOffset = this._getLineLeftOffset(i);\n        if (this.textBackgroundColor || this.styleHas('textBackgroundColor', i)) {\n          this._setSVGTextLineBg(textBgRects, i, textLeftOffset + lineOffset, height);\n        }\n        this._setSVGTextLineText(textSpans, i, textLeftOffset + lineOffset, height);\n        height += this.getHeightOfLine(i);\n      }\n\n      return {\n        textSpans: textSpans,\n        textBgRects: textBgRects\n      };\n    },\n\n    /**\n     * @private\n     */\n    _createTextCharSpan: function(_char, styleDecl, left, top) {\n      var shouldUseWhitespace = _char !== _char.trim() || _char.match(multipleSpacesRegex),\n          styleProps = this.getSvgSpanStyles(styleDecl, shouldUseWhitespace),\n          fillStyles = styleProps ? 'style=\"' + styleProps + '\"' : '',\n          dy = styleDecl.deltaY, dySpan = '',\n          NUM_FRACTION_DIGITS = fabric.Object.NUM_FRACTION_DIGITS;\n      if (dy) {\n        dySpan = ' dy=\"' + toFixed(dy, NUM_FRACTION_DIGITS) + '\" ';\n      }\n      return [\n        '<tspan x=\"', toFixed(left, NUM_FRACTION_DIGITS), '\" y=\"',\n        toFixed(top, NUM_FRACTION_DIGITS), '\" ', dySpan,\n        fillStyles, '>',\n        fabric.util.string.escapeXml(_char),\n        '</tspan>'\n      ].join('');\n    },\n\n    _setSVGTextLineText: function(textSpans, lineIndex, textLeftOffset, textTopOffset) {\n      // set proper line offset\n      var lineHeight = this.getHeightOfLine(lineIndex),\n          isJustify = this.textAlign.indexOf('justify') !== -1,\n          actualStyle,\n          nextStyle,\n          charsToRender = '',\n          charBox, style,\n          boxWidth = 0,\n          line = this._textLines[lineIndex],\n          timeToRender;\n\n      textTopOffset += lineHeight * (1 - this._fontSizeFraction) / this.lineHeight;\n      for (var i = 0, len = line.length - 1; i <= len; i++) {\n        timeToRender = i === len || this.charSpacing;\n        charsToRender += line[i];\n        charBox = this.__charBounds[lineIndex][i];\n        if (boxWidth === 0) {\n          textLeftOffset += charBox.kernedWidth - charBox.width;\n          boxWidth += charBox.width;\n        }\n        else {\n          boxWidth += charBox.kernedWidth;\n        }\n        if (isJustify && !timeToRender) {\n          if (this._reSpaceAndTab.test(line[i])) {\n            timeToRender = true;\n          }\n        }\n        if (!timeToRender) {\n          // if we have charSpacing, we render char by char\n          actualStyle = actualStyle || this.getCompleteStyleDeclaration(lineIndex, i);\n          nextStyle = this.getCompleteStyleDeclaration(lineIndex, i + 1);\n          timeToRender = this._hasStyleChangedForSvg(actualStyle, nextStyle);\n        }\n        if (timeToRender) {\n          style = this._getStyleDeclaration(lineIndex, i) || { };\n          textSpans.push(this._createTextCharSpan(charsToRender, style, textLeftOffset, textTopOffset));\n          charsToRender = '';\n          actualStyle = nextStyle;\n          textLeftOffset += boxWidth;\n          boxWidth = 0;\n        }\n      }\n    },\n\n    _pushTextBgRect: function(textBgRects, color, left, top, width, height) {\n      var NUM_FRACTION_DIGITS = fabric.Object.NUM_FRACTION_DIGITS;\n      textBgRects.push(\n        '\\t\\t<rect ',\n        this._getFillAttributes(color),\n        ' x=\"',\n        toFixed(left, NUM_FRACTION_DIGITS),\n        '\" y=\"',\n        toFixed(top, NUM_FRACTION_DIGITS),\n        '\" width=\"',\n        toFixed(width, NUM_FRACTION_DIGITS),\n        '\" height=\"',\n        toFixed(height, NUM_FRACTION_DIGITS),\n        '\"></rect>\\n');\n    },\n\n    _setSVGTextLineBg: function(textBgRects, i, leftOffset, textTopOffset) {\n      var line = this._textLines[i],\n          heightOfLine = this.getHeightOfLine(i) / this.lineHeight,\n          boxWidth = 0,\n          boxStart = 0,\n          charBox, currentColor,\n          lastColor = this.getValueOfPropertyAt(i, 0, 'textBackgroundColor');\n      for (var j = 0, jlen = line.length; j < jlen; j++) {\n        charBox = this.__charBounds[i][j];\n        currentColor = this.getValueOfPropertyAt(i, j, 'textBackgroundColor');\n        if (currentColor !== lastColor) {\n          lastColor && this._pushTextBgRect(textBgRects, lastColor, leftOffset + boxStart,\n            textTopOffset, boxWidth, heightOfLine);\n          boxStart = charBox.left;\n          boxWidth = charBox.width;\n          lastColor = currentColor;\n        }\n        else {\n          boxWidth += charBox.kernedWidth;\n        }\n      }\n      currentColor && this._pushTextBgRect(textBgRects, currentColor, leftOffset + boxStart,\n        textTopOffset, boxWidth, heightOfLine);\n    },\n\n    /**\n     * Adobe Illustrator (at least CS5) is unable to render rgba()-based fill values\n     * we work around it by \"moving\" alpha channel into opacity attribute and setting fill's alpha to 1\n     *\n     * @private\n     * @param {*} value\n     * @return {String}\n     */\n    _getFillAttributes: function(value) {\n      var fillColor = (value && typeof value === 'string') ? new fabric.Color(value) : '';\n      if (!fillColor || !fillColor.getSource() || fillColor.getAlpha() === 1) {\n        return 'fill=\"' + value + '\"';\n      }\n      return 'opacity=\"' + fillColor.getAlpha() + '\" fill=\"' + fillColor.setAlpha(1).toRgb() + '\"';\n    },\n\n    /**\n     * @private\n     */\n    _getSVGLineTopOffset: function(lineIndex) {\n      var lineTopOffset = 0, lastHeight = 0;\n      for (var j = 0; j < lineIndex; j++) {\n        lineTopOffset += this.getHeightOfLine(j);\n      }\n      lastHeight = this.getHeightOfLine(j);\n      return {\n        lineTop: lineTopOffset,\n        offset: (this._fontSizeMult - this._fontSizeFraction) * lastHeight / (this.lineHeight * this._fontSizeMult)\n      };\n    },\n\n    /**\n     * Returns styles-string for svg-export\n     * @param {Boolean} skipShadow a boolean to skip shadow filter output\n     * @return {String}\n     */\n    getSvgStyles: function(skipShadow) {\n      var svgStyle = fabric.Object.prototype.getSvgStyles.call(this, skipShadow);\n      return svgStyle + ' white-space: pre;';\n    },\n  });\n})();\n/* _TO_SVG_END_ */\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric = global.fabric || (global.fabric = {});\n\n  /**\n   * Textbox class, based on IText, allows the user to resize the text rectangle\n   * and wraps lines automatically. Textboxes have their Y scaling locked, the\n   * user can only change width. Height is adjusted automatically based on the\n   * wrapping of lines.\n   * @class fabric.Textbox\n   * @extends fabric.IText\n   * @mixes fabric.Observable\n   * @return {fabric.Textbox} thisArg\n   * @see {@link fabric.Textbox#initialize} for constructor definition\n   */\n  fabric.Textbox = fabric.util.createClass(fabric.IText, fabric.Observable, {\n\n    /**\n     * Type of an object\n     * @type String\n     * @default\n     */\n    type: 'textbox',\n\n    /**\n     * Minimum width of textbox, in pixels.\n     * @type Number\n     * @default\n     */\n    minWidth: 20,\n\n    /**\n     * Minimum calculated width of a textbox, in pixels.\n     * fixed to 2 so that an empty textbox cannot go to 0\n     * and is still selectable without text.\n     * @type Number\n     * @default\n     */\n    dynamicMinWidth: 2,\n\n    /**\n     * Cached array of text wrapping.\n     * @type Array\n     */\n    __cachedLines: null,\n\n    /**\n     * Override standard Object class values\n     */\n    lockScalingFlip: true,\n\n    /**\n     * Override standard Object class values\n     * Textbox needs this on false\n     */\n    noScaleCache: false,\n\n    /**\n     * Properties which when set cause object to change dimensions\n     * @type Object\n     * @private\n     */\n    _dimensionAffectingProps: fabric.Text.prototype._dimensionAffectingProps.concat('width'),\n\n    /**\n     * Use this regular expression to split strings in breakable lines\n     * @private\n     */\n    _wordJoiners: /[ \\t\\r]/,\n\n    /**\n     * Use this boolean property in order to split strings that have no white space concept.\n     * this is a cheap way to help with chinese/japanese\n     * @type Boolean\n     * @since 2.6.0\n     */\n    splitByGrapheme: false,\n\n    /**\n     * Unlike superclass's version of this function, Textbox does not update\n     * its width.\n     * @private\n     * @override\n     */\n    initDimensions: function() {\n      if (this.__skipDimension) {\n        return;\n      }\n      this.isEditing && this.initDelayedCursor();\n      this.clearContextTop();\n      this._clearCache();\n      // clear dynamicMinWidth as it will be different after we re-wrap line\n      this.dynamicMinWidth = 0;\n      // wrap lines\n      this._styleMap = this._generateStyleMap(this._splitText());\n      // if after wrapping, the width is smaller than dynamicMinWidth, change the width and re-wrap\n      if (this.dynamicMinWidth > this.width) {\n        this._set('width', this.dynamicMinWidth);\n      }\n      if (this.textAlign.indexOf('justify') !== -1) {\n        // once text is measured we need to make space fatter to make justified text.\n        this.enlargeSpaces();\n      }\n      // clear cache and re-calculate height\n      this.height = this.calcTextHeight();\n      this.saveState({ propertySet: '_dimensionAffectingProps' });\n    },\n\n    /**\n     * Generate an object that translates the style object so that it is\n     * broken up by visual lines (new lines and automatic wrapping).\n     * The original text styles object is broken up by actual lines (new lines only),\n     * which is only sufficient for Text / IText\n     * @private\n     */\n    _generateStyleMap: function(textInfo) {\n      var realLineCount     = 0,\n          realLineCharCount = 0,\n          charCount         = 0,\n          map               = {};\n\n      for (var i = 0; i < textInfo.graphemeLines.length; i++) {\n        if (textInfo.graphemeText[charCount] === '\\n' && i > 0) {\n          realLineCharCount = 0;\n          charCount++;\n          realLineCount++;\n        }\n        else if (!this.splitByGrapheme && this._reSpaceAndTab.test(textInfo.graphemeText[charCount]) && i > 0) {\n          // this case deals with space's that are removed from end of lines when wrapping\n          realLineCharCount++;\n          charCount++;\n        }\n\n        map[i] = { line: realLineCount, offset: realLineCharCount };\n\n        charCount += textInfo.graphemeLines[i].length;\n        realLineCharCount += textInfo.graphemeLines[i].length;\n      }\n\n      return map;\n    },\n\n    /**\n     * Returns true if object has a style property or has it on a specified line\n     * @param {Number} lineIndex\n     * @return {Boolean}\n     */\n    styleHas: function(property, lineIndex) {\n      if (this._styleMap && !this.isWrapping) {\n        var map = this._styleMap[lineIndex];\n        if (map) {\n          lineIndex = map.line;\n        }\n      }\n      return fabric.Text.prototype.styleHas.call(this, property, lineIndex);\n    },\n\n    /**\n     * Returns true if object has no styling or no styling in a line\n     * @param {Number} lineIndex , lineIndex is on wrapped lines.\n     * @return {Boolean}\n     */\n    isEmptyStyles: function(lineIndex) {\n      if (!this.styles) {\n        return true;\n      }\n      var offset = 0, nextLineIndex = lineIndex + 1, nextOffset, obj, shouldLimit = false,\n          map = this._styleMap[lineIndex], mapNextLine = this._styleMap[lineIndex + 1];\n      if (map) {\n        lineIndex = map.line;\n        offset = map.offset;\n      }\n      if (mapNextLine) {\n        nextLineIndex = mapNextLine.line;\n        shouldLimit = nextLineIndex === lineIndex;\n        nextOffset = mapNextLine.offset;\n      }\n      obj = typeof lineIndex === 'undefined' ? this.styles : { line: this.styles[lineIndex] };\n      for (var p1 in obj) {\n        for (var p2 in obj[p1]) {\n          if (p2 >= offset && (!shouldLimit || p2 < nextOffset)) {\n            // eslint-disable-next-line no-unused-vars\n            for (var p3 in obj[p1][p2]) {\n              return false;\n            }\n          }\n        }\n      }\n      return true;\n    },\n\n    /**\n     * @param {Number} lineIndex\n     * @param {Number} charIndex\n     * @private\n     */\n    _getStyleDeclaration: function(lineIndex, charIndex) {\n      if (this._styleMap && !this.isWrapping) {\n        var map = this._styleMap[lineIndex];\n        if (!map) {\n          return null;\n        }\n        lineIndex = map.line;\n        charIndex = map.offset + charIndex;\n      }\n      return this.callSuper('_getStyleDeclaration', lineIndex, charIndex);\n    },\n\n    /**\n     * @param {Number} lineIndex\n     * @param {Number} charIndex\n     * @param {Object} style\n     * @private\n     */\n    _setStyleDeclaration: function(lineIndex, charIndex, style) {\n      var map = this._styleMap[lineIndex];\n      lineIndex = map.line;\n      charIndex = map.offset + charIndex;\n\n      this.styles[lineIndex][charIndex] = style;\n    },\n\n    /**\n     * @param {Number} lineIndex\n     * @param {Number} charIndex\n     * @private\n     */\n    _deleteStyleDeclaration: function(lineIndex, charIndex) {\n      var map = this._styleMap[lineIndex];\n      lineIndex = map.line;\n      charIndex = map.offset + charIndex;\n      delete this.styles[lineIndex][charIndex];\n    },\n\n    /**\n     * probably broken need a fix\n     * Returns the real style line that correspond to the wrapped lineIndex line\n     * Used just to verify if the line does exist or not.\n     * @param {Number} lineIndex\n     * @returns {Boolean} if the line exists or not\n     * @private\n     */\n    _getLineStyle: function(lineIndex) {\n      var map = this._styleMap[lineIndex];\n      return !!this.styles[map.line];\n    },\n\n    /**\n     * Set the line style to an empty object so that is initialized\n     * @param {Number} lineIndex\n     * @param {Object} style\n     * @private\n     */\n    _setLineStyle: function(lineIndex) {\n      var map = this._styleMap[lineIndex];\n      this.styles[map.line] = {};\n    },\n\n    /**\n     * Wraps text using the 'width' property of Textbox. First this function\n     * splits text on newlines, so we preserve newlines entered by the user.\n     * Then it wraps each line using the width of the Textbox by calling\n     * _wrapLine().\n     * @param {Array} lines The string array of text that is split into lines\n     * @param {Number} desiredWidth width you want to wrap to\n     * @returns {Array} Array of lines\n     */\n    _wrapText: function(lines, desiredWidth) {\n      var wrapped = [], i;\n      this.isWrapping = true;\n      for (i = 0; i < lines.length; i++) {\n        wrapped = wrapped.concat(this._wrapLine(lines[i], i, desiredWidth));\n      }\n      this.isWrapping = false;\n      return wrapped;\n    },\n\n    /**\n     * Helper function to measure a string of text, given its lineIndex and charIndex offset\n     * it gets called when charBounds are not available yet.\n     * @param {CanvasRenderingContext2D} ctx\n     * @param {String} text\n     * @param {number} lineIndex\n     * @param {number} charOffset\n     * @returns {number}\n     * @private\n     */\n    _measureWord: function(word, lineIndex, charOffset) {\n      var width = 0, prevGrapheme, skipLeft = true;\n      charOffset = charOffset || 0;\n      for (var i = 0, len = word.length; i < len; i++) {\n        var box = this._getGraphemeBox(word[i], lineIndex, i + charOffset, prevGrapheme, skipLeft);\n        width += box.kernedWidth;\n        prevGrapheme = word[i];\n      }\n      return width;\n    },\n\n    /**\n     * Wraps a line of text using the width of the Textbox and a context.\n     * @param {Array} line The grapheme array that represent the line\n     * @param {Number} lineIndex\n     * @param {Number} desiredWidth width you want to wrap the line to\n     * @param {Number} reservedSpace space to remove from wrapping for custom functionalities\n     * @returns {Array} Array of line(s) into which the given text is wrapped\n     * to.\n     */\n    _wrapLine: function(_line, lineIndex, desiredWidth, reservedSpace) {\n      var lineWidth = 0,\n          splitByGrapheme = this.splitByGrapheme,\n          graphemeLines = [],\n          line = [],\n          // spaces in different languages?\n          words = splitByGrapheme ? fabric.util.string.graphemeSplit(_line) : _line.split(this._wordJoiners),\n          word = '',\n          offset = 0,\n          infix = splitByGrapheme ? '' : ' ',\n          wordWidth = 0,\n          infixWidth = 0,\n          largestWordWidth = 0,\n          lineJustStarted = true,\n          additionalSpace = this._getWidthOfCharSpacing(),\n          reservedSpace = reservedSpace || 0;\n      // fix a difference between split and graphemeSplit\n      if (words.length === 0) {\n        words.push([]);\n      }\n      desiredWidth -= reservedSpace;\n      for (var i = 0; i < words.length; i++) {\n        // if using splitByGrapheme words are already in graphemes.\n        word = splitByGrapheme ? words[i] : fabric.util.string.graphemeSplit(words[i]);\n        wordWidth = this._measureWord(word, lineIndex, offset);\n        offset += word.length;\n\n        lineWidth += infixWidth + wordWidth - additionalSpace;\n        if (lineWidth > desiredWidth && !lineJustStarted) {\n          graphemeLines.push(line);\n          line = [];\n          lineWidth = wordWidth;\n          lineJustStarted = true;\n        }\n        else {\n          lineWidth += additionalSpace;\n        }\n\n        if (!lineJustStarted && !splitByGrapheme) {\n          line.push(infix);\n        }\n        line = line.concat(word);\n\n        infixWidth = splitByGrapheme ? 0 : this._measureWord([infix], lineIndex, offset);\n        offset++;\n        lineJustStarted = false;\n        // keep track of largest word\n        if (wordWidth > largestWordWidth) {\n          largestWordWidth = wordWidth;\n        }\n      }\n\n      i && graphemeLines.push(line);\n\n      if (largestWordWidth + reservedSpace > this.dynamicMinWidth) {\n        this.dynamicMinWidth = largestWordWidth - additionalSpace + reservedSpace;\n      }\n      return graphemeLines;\n    },\n\n    /**\n     * Detect if the text line is ended with an hard break\n     * text and itext do not have wrapping, return false\n     * @param {Number} lineIndex text to split\n     * @return {Boolean}\n     */\n    isEndOfWrapping: function(lineIndex) {\n      if (!this._styleMap[lineIndex + 1]) {\n        // is last line, return true;\n        return true;\n      }\n      if (this._styleMap[lineIndex + 1].line !== this._styleMap[lineIndex].line) {\n        // this is last line before a line break, return true;\n        return true;\n      }\n      return false;\n    },\n\n    /**\n     * Detect if a line has a linebreak and so we need to account for it when moving\n     * and counting style.\n     * @return Number\n     */\n    missingNewlineOffset: function(lineIndex) {\n      if (this.splitByGrapheme) {\n        return this.isEndOfWrapping(lineIndex) ? 1 : 0;\n      }\n      return 1;\n    },\n\n    /**\n    * Gets lines of text to render in the Textbox. This function calculates\n    * text wrapping on the fly every time it is called.\n    * @param {String} text text to split\n    * @returns {Array} Array of lines in the Textbox.\n    * @override\n    */\n    _splitTextIntoLines: function(text) {\n      var newText = fabric.Text.prototype._splitTextIntoLines.call(this, text),\n          graphemeLines = this._wrapText(newText.lines, this.width),\n          lines = new Array(graphemeLines.length);\n      for (var i = 0; i < graphemeLines.length; i++) {\n        lines[i] = graphemeLines[i].join('');\n      }\n      newText.lines = lines;\n      newText.graphemeLines = graphemeLines;\n      return newText;\n    },\n\n    getMinWidth: function() {\n      return Math.max(this.minWidth, this.dynamicMinWidth);\n    },\n\n    _removeExtraneousStyles: function() {\n      var linesToKeep = {};\n      for (var prop in this._styleMap) {\n        if (this._textLines[prop]) {\n          linesToKeep[this._styleMap[prop].line] = 1;\n        }\n      }\n      for (var prop in this.styles) {\n        if (!linesToKeep[prop]) {\n          delete this.styles[prop];\n        }\n      }\n    },\n\n    /**\n     * Returns object representation of an instance\n     * @method toObject\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {Object} object representation of an instance\n     */\n    toObject: function(propertiesToInclude) {\n      return this.callSuper('toObject', ['minWidth', 'splitByGrapheme'].concat(propertiesToInclude));\n    }\n  });\n\n  /**\n   * Returns fabric.Textbox instance from an object representation\n   * @static\n   * @memberOf fabric.Textbox\n   * @param {Object} object Object to create an instance from\n   * @param {Function} [callback] Callback to invoke when an fabric.Textbox instance is created\n   */\n  fabric.Textbox.fromObject = function(object, callback) {\n    return fabric.Object._fromObject('Textbox', object, callback, 'text');\n  };\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function() {\n\n  var controlsUtils = fabric.controlsUtils,\n      scaleSkewStyleHandler = controlsUtils.scaleSkewCursorStyleHandler,\n      scaleStyleHandler = controlsUtils.scaleCursorStyleHandler,\n      scalingEqually = controlsUtils.scalingEqually,\n      scalingYOrSkewingX = controlsUtils.scalingYOrSkewingX,\n      scalingXOrSkewingY = controlsUtils.scalingXOrSkewingY,\n      scaleOrSkewActionName = controlsUtils.scaleOrSkewActionName,\n      objectControls = fabric.Object.prototype.controls;\n\n  objectControls.ml = new fabric.Control({\n    x: -0.5,\n    y: 0,\n    cursorStyleHandler: scaleSkewStyleHandler,\n    actionHandler: scalingXOrSkewingY,\n    getActionName: scaleOrSkewActionName,\n  });\n\n  objectControls.mr = new fabric.Control({\n    x: 0.5,\n    y: 0,\n    cursorStyleHandler: scaleSkewStyleHandler,\n    actionHandler: scalingXOrSkewingY,\n    getActionName: scaleOrSkewActionName,\n  });\n\n  objectControls.mb = new fabric.Control({\n    x: 0,\n    y: 0.5,\n    cursorStyleHandler: scaleSkewStyleHandler,\n    actionHandler: scalingYOrSkewingX,\n    getActionName: scaleOrSkewActionName,\n  });\n\n  objectControls.mt = new fabric.Control({\n    x: 0,\n    y: -0.5,\n    cursorStyleHandler: scaleSkewStyleHandler,\n    actionHandler: scalingYOrSkewingX,\n    getActionName: scaleOrSkewActionName,\n  });\n\n  objectControls.tl = new fabric.Control({\n    x: -0.5,\n    y: -0.5,\n    cursorStyleHandler: scaleStyleHandler,\n    actionHandler: scalingEqually\n  });\n\n  objectControls.tr = new fabric.Control({\n    x: 0.5,\n    y: -0.5,\n    cursorStyleHandler: scaleStyleHandler,\n    actionHandler: scalingEqually\n  });\n\n  objectControls.bl = new fabric.Control({\n    x: -0.5,\n    y: 0.5,\n    cursorStyleHandler: scaleStyleHandler,\n    actionHandler: scalingEqually\n  });\n\n  objectControls.br = new fabric.Control({\n    x: 0.5,\n    y: 0.5,\n    cursorStyleHandler: scaleStyleHandler,\n    actionHandler: scalingEqually\n  });\n\n  objectControls.mtr = new fabric.Control({\n    x: 0,\n    y: -0.5,\n    actionHandler: controlsUtils.rotationWithSnapping,\n    cursorStyleHandler: controlsUtils.rotationStyleHandler,\n    offsetY: -40,\n    withConnection: true,\n    actionName: 'rotate',\n  });\n\n  if (fabric.Textbox) {\n    // this is breaking the prototype inheritance, no time / ideas to fix it.\n    // is important to document that if you want to have all objects to have a\n    // specific custom control, you have to add it to Object prototype and to Textbox\n    // prototype. The controls are shared as references. So changes to control `tr`\n    // can still apply to all objects if needed.\n    var textBoxControls = fabric.Textbox.prototype.controls = { };\n\n    textBoxControls.mtr = objectControls.mtr;\n    textBoxControls.tr = objectControls.tr;\n    textBoxControls.br = objectControls.br;\n    textBoxControls.tl = objectControls.tl;\n    textBoxControls.bl = objectControls.bl;\n    textBoxControls.mt = objectControls.mt;\n    textBoxControls.mb = objectControls.mb;\n\n    textBoxControls.mr = new fabric.Control({\n      x: 0.5,\n      y: 0,\n      actionHandler: controlsUtils.changeWidth,\n      cursorStyleHandler: scaleSkewStyleHandler,\n      actionName: 'resizing',\n    });\n\n    textBoxControls.ml = new fabric.Control({\n      x: -0.5,\n      y: 0,\n      actionHandler: controlsUtils.changeWidth,\n      cursorStyleHandler: scaleSkewStyleHandler,\n      actionName: 'resizing',\n    });\n  }\n})();\n\n","/*\n* FileSaver.js\n* A saveAs() FileSaver implementation.\n*\n* By Eli Grey, http://eligrey.com\n*\n* License : https://github.com/eligrey/FileSaver.js/blob/master/LICENSE.md (MIT)\n* source  : http://purl.eligrey.com/github/FileSaver.js\n*/\n\n// The one and only way of getting global scope in all environments\n// https://stackoverflow.com/q/3277182/1008999\nvar _global = typeof window === 'object' && window.window === window\n  ? window : typeof self === 'object' && self.self === self\n  ? self : typeof global === 'object' && global.global === global\n  ? global\n  : this\n\nfunction bom (blob, opts) {\n  if (typeof opts === 'undefined') opts = { autoBom: false }\n  else if (typeof opts !== 'object') {\n    console.warn('Deprecated: Expected third argument to be a object')\n    opts = { autoBom: !opts }\n  }\n\n  // prepend BOM for UTF-8 XML and text/* types (including HTML)\n  // note: your browser will automatically convert UTF-16 U+FEFF to EF BB BF\n  if (opts.autoBom && /^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(blob.type)) {\n    return new Blob([String.fromCharCode(0xFEFF), blob], { type: blob.type })\n  }\n  return blob\n}\n\nfunction download (url, name, opts) {\n  var xhr = new XMLHttpRequest()\n  xhr.open('GET', url)\n  xhr.responseType = 'blob'\n  xhr.onload = function () {\n    saveAs(xhr.response, name, opts)\n  }\n  xhr.onerror = function () {\n    console.error('could not download file')\n  }\n  xhr.send()\n}\n\nfunction corsEnabled (url) {\n  var xhr = new XMLHttpRequest()\n  // use sync to avoid popup blocker\n  xhr.open('HEAD', url, false)\n  try {\n    xhr.send()\n  } catch (e) {}\n  return xhr.status >= 200 && xhr.status <= 299\n}\n\n// `a.click()` doesn't work for all browsers (#465)\nfunction click (node) {\n  try {\n    node.dispatchEvent(new MouseEvent('click'))\n  } catch (e) {\n    var evt = document.createEvent('MouseEvents')\n    evt.initMouseEvent('click', true, true, window, 0, 0, 0, 80,\n                          20, false, false, false, false, 0, null)\n    node.dispatchEvent(evt)\n  }\n}\n\n// Detect WebView inside a native macOS app by ruling out all browsers\n// We just need to check for 'Safari' because all other browsers (besides Firefox) include that too\n// https://www.whatismybrowser.com/guides/the-latest-user-agent/macos\nvar isMacOSWebView = _global.navigator && /Macintosh/.test(navigator.userAgent) && /AppleWebKit/.test(navigator.userAgent) && !/Safari/.test(navigator.userAgent)\n\nvar saveAs = _global.saveAs || (\n  // probably in some web worker\n  (typeof window !== 'object' || window !== _global)\n    ? function saveAs () { /* noop */ }\n\n  // Use download attribute first if possible (#193 Lumia mobile) unless this is a macOS WebView\n  : ('download' in HTMLAnchorElement.prototype && !isMacOSWebView)\n  ? function saveAs (blob, name, opts) {\n    var URL = _global.URL || _global.webkitURL\n    var a = document.createElement('a')\n    name = name || blob.name || 'download'\n\n    a.download = name\n    a.rel = 'noopener' // tabnabbing\n\n    // TODO: detect chrome extensions & packaged apps\n    // a.target = '_blank'\n\n    if (typeof blob === 'string') {\n      // Support regular links\n      a.href = blob\n      if (a.origin !== location.origin) {\n        corsEnabled(a.href)\n          ? download(blob, name, opts)\n          : click(a, a.target = '_blank')\n      } else {\n        click(a)\n      }\n    } else {\n      // Support blobs\n      a.href = URL.createObjectURL(blob)\n      setTimeout(function () { URL.revokeObjectURL(a.href) }, 4E4) // 40s\n      setTimeout(function () { click(a) }, 0)\n    }\n  }\n\n  // Use msSaveOrOpenBlob as a second approach\n  : 'msSaveOrOpenBlob' in navigator\n  ? function saveAs (blob, name, opts) {\n    name = name || blob.name || 'download'\n\n    if (typeof blob === 'string') {\n      if (corsEnabled(blob)) {\n        download(blob, name, opts)\n      } else {\n        var a = document.createElement('a')\n        a.href = blob\n        a.target = '_blank'\n        setTimeout(function () { click(a) })\n      }\n    } else {\n      navigator.msSaveOrOpenBlob(bom(blob, opts), name)\n    }\n  }\n\n  // Fallback to using FileReader and a popup\n  : function saveAs (blob, name, opts, popup) {\n    // Open a popup immediately do go around popup blocker\n    // Mostly only available on user interaction and the fileReader is async so...\n    popup = popup || open('', '_blank')\n    if (popup) {\n      popup.document.title =\n      popup.document.body.innerText = 'downloading...'\n    }\n\n    if (typeof blob === 'string') return download(blob, name, opts)\n\n    var force = blob.type === 'application/octet-stream'\n    var isSafari = /constructor/i.test(_global.HTMLElement) || _global.safari\n    var isChromeIOS = /CriOS\\/[\\d]+/.test(navigator.userAgent)\n\n    if ((isChromeIOS || (force && isSafari) || isMacOSWebView) && typeof FileReader !== 'undefined') {\n      // Safari doesn't allow downloading of blob URLs\n      var reader = new FileReader()\n      reader.onloadend = function () {\n        var url = reader.result\n        url = isChromeIOS ? url : url.replace(/^data:[^;]*;/, 'data:attachment/file;')\n        if (popup) popup.location.href = url\n        else location = url\n        popup = null // reverse-tabnabbing #460\n      }\n      reader.readAsDataURL(blob)\n    } else {\n      var URL = _global.URL || _global.webkitURL\n      var url = URL.createObjectURL(blob)\n      if (popup) popup.location = url\n      else location.href = url\n      popup = null // reverse-tabnabbing #460\n      setTimeout(function () { URL.revokeObjectURL(url) }, 4E4) // 40s\n    }\n  }\n)\n\n_global.saveAs = saveAs.saveAs = saveAs\n\nif (typeof module !== 'undefined') {\n  module.exports = saveAs;\n}\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  define(IteratorPrototype, iteratorSymbol, function () {\n    return this;\n  });\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = GeneratorFunctionPrototype;\n  define(Gp, \"constructor\", GeneratorFunctionPrototype);\n  define(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction);\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\n    return this;\n  });\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  define(Gp, iteratorSymbol, function() {\n    return this;\n  });\n\n  define(Gp, \"toString\", function() {\n    return \"[object Generator]\";\n  });\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, in modern engines\n  // we can explicitly access globalThis. In older engines we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  if (typeof globalThis === \"object\") {\n    globalThis.regeneratorRuntime = runtime;\n  } else {\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n}\n","import { fabric } from 'fabric'\n\nconst { PatternBrush } = fabric\n\nexport default class MosaicBrush extends PatternBrush {\n  constructor (canvas, options) {\n    super(canvas, options)\n    this.source = this.getPatternSrc()\n  }\n\n  getPatternSrc () {\n    const squareWidth = 10\n    const squareDistance = 0\n    const patternCanvas = fabric.document.createElement('canvas')\n    patternCanvas.width = patternCanvas.height = squareWidth + squareDistance\n    const ctx = patternCanvas.getContext('2d')\n\n    // Creating a mosaic\n    const imageData = ctx.createImageData(10, 10)\n    const pixels = imageData.data\n\n    // Dimensions of each tile\n    const tileWidth = imageData.width\n    const tileHeight = imageData.height\n\n    // Loop through each tile\n    for (let r = 0; r < tileWidth; r++) {\n      for (let c = 0; c < tileHeight; c++) {\n        // Set the pixel values for each tile\n        const gray = Math.random() * 120 + 100 // 255\n        const index = (r * tileWidth + c) * 4\n        pixels[index] = gray\n        pixels[index + 1] = gray\n        pixels[index + 2] = gray\n        pixels[index + 3] = 255\n      }\n    }\n    // Draw image data to the canvas\n    ctx.putImageData(imageData, 0, 0)\n\n    return patternCanvas\n  }\n}\n","import { removeAll } from './utils.js'\n\nexport default class ScreenshotFabricEvent {\n  #list = {}\n  /**\n   * @type {fabric.Canvas}\n   */\n  #node\n\n  constructor (node) {\n    this.#node = node\n  }\n\n  add (types, func) {\n    if (!types) {\n      throw new Error('Event must have types')\n    }\n    if (!func) {\n      throw new Error('Function does not exist')\n    }\n    const typeList = types.split(',')\n    for (const type of typeList) {\n      this.#list[type] = this.#list[type] || []\n      this.#list[type].push(func)\n      this.#node?.on(type, func)\n    }\n  }\n\n  remove (types, func) {\n    if (!types) {\n      if (func) {\n        for (const type in this.#list) {\n          removeAll(this.#list[type], func, (event) => {\n            if (event) {\n              this.#node?.off(type, event)\n            }\n          })\n        }\n      } else {\n        for (const type in this.#list) {\n          this.#node?.off(type)\n          delete this.#list[type]\n        }\n      }\n    } else {\n      const typeList = types.split(',').map(item => item.trim()).filter(item => !!item)\n      if (func) {\n        for (const type of typeList) {\n          removeAll(this.#list[type], func, (event) => {\n            if (event) {\n              this.#node?.off(type, event)\n            }\n          })\n        }\n      } else {\n        for (const type of typeList) {\n          this.#node?.off(type)\n          delete this.#list[type]\n        }\n      }\n    }\n  }\n}\n","import { removeAll } from './utils.js'\n\nexport default class ScreenshotToolEvent {\n  #list = {}\n  /**\n   * 工具节点\n   * @type HTMLElement\n   */\n  #node\n\n  constructor (node) {\n    this.#node = node\n  }\n\n  add (types, func) {\n    if (!types) {\n      throw new Error('Event must have types')\n    }\n    if (!func) {\n      throw new Error('Function does not exist')\n    }\n    const typeList = types.split(',')\n    for (const type of typeList) {\n      this.#list[type] = this.#list[type] || []\n      this.#list[type].push(func)\n      this.#node?.addEventListener(type, func)\n    }\n  }\n\n  remove (types, func) {\n    if (!types) {\n      if (func) {\n        for (const type in this.#list) {\n          removeAll(this.#list[type], func, (event) => {\n            if (event) {\n              this.#node?.removeEventListener(type, event)\n            }\n          })\n        }\n      } else {\n        for (const type in this.#list) {\n          for (const event of (this.#list[type] || [])) {\n            this.#node?.removeEventListener(type, event)\n          }\n          delete this.#list[type]\n        }\n      }\n    } else {\n      const typeList = types.split(',').map(item => item.trim()).filter(item => !!item)\n      if (func) {\n        for (const type of typeList) {\n          removeAll(this.#list[type], func, (event) => {\n            if (event) {\n              this.#node?.removeEventListener(type, event)\n            }\n          })\n        }\n      } else {\n        for (const type of typeList) {\n          for (const event of (this.#list[type] || [])) {\n            this.#node?.removeEventListener(type, event)\n          }\n          delete this.#list[type]\n        }\n      }\n    }\n  }\n}\n","import ScreenshotToolEvent from './screenshot-tool-event'\n\nexport default class ScreenshotTool {\n  /**\n   * 工具名称\n   * @type {string}\n   */\n  #name = ''\n  /**\n   * 图标颜色\n   * @type {string}\n   */\n  #color = 'white'\n\n  /**\n   * 禁用状态\n   * @type {boolean}\n   */\n  #disabled = false\n  /**\n   * 激活状态\n   * @type {boolean}\n   */\n  #active = false\n\n  /**\n   * 事件管理器\n   * @type ScreenshotToolEvent\n   */\n  #events\n  /**\n   * 激活事件\n   * @type Function\n   */\n  #activeEvent\n  /**\n   * 暂停事件\n   * @type Function\n   */\n  #pauseEvent\n\n  /**\n   * 工具节点\n   * @type HTMLElement\n   */\n  #node\n  /**\n   * 工具图标节点\n   * @type HTMLElement\n   */\n  #iconNode\n\n  /**\n   * Screenshot constructor\n   * @param name {string} 名称\n   * @param icon {string} 图标类\n   * @param [color='white'] {string} 图标默认颜色\n   * @param [disabled] {boolean} 是否禁用\n   * @param [clickEvent] {function} 点击方法\n   * @param [activeEvent] {function} 激活方法\n   * @param [pauseEvent] {function} 取消激活方法\n   */\n  constructor ({ name, icon, color, disabled, clickEvent, activeEvent, pauseEvent } = {}) {\n    this.#node = document.createElement('div')\n    this.#node.classList.add('screenshot-toolbar-tool')\n    this.#initEvents()\n\n    name && (this.name = name)\n    color && (this.color = color)\n    disabled && (this.disabled = disabled)\n    icon && (this.icon = icon)\n    activeEvent && (this.#activeEvent = activeEvent)\n    pauseEvent && (this.#pauseEvent = pauseEvent)\n    if (clickEvent) {\n      this.events.add('click', clickEvent)\n    }\n  }\n\n  get node () {\n    return this.#node\n  }\n\n  get events () {\n    return this.#events\n  }\n\n  get name () {\n    return this.#name\n  }\n\n  set name (val) {\n    this.#name = val\n    this.node?.setAttribute('title', val)\n  }\n\n  get disabled () {\n    return this.#disabled\n  }\n\n  set disabled (val) {\n    this.#disabled = !!val\n    if (val) {\n      this.active = false\n      this.node?.classList.add('disabled')\n    } else {\n      this.node?.classList.remove('disabled')\n    }\n  }\n\n  get active () {\n    return this.#active\n  }\n\n  set active (val) {\n    if (this.active === !!val) {\n      return\n    }\n    this.#active = !!val\n    if (val) {\n      this.disabled = false\n      this.node?.classList.add('active')\n      if (this.#activeEvent) {\n        this.#activeEvent()\n      }\n    } else {\n      this.node?.classList.remove('active')\n      if (this.#pauseEvent) {\n        this.#pauseEvent()\n      }\n    }\n  }\n\n  get color () {\n    return this.#color\n  }\n\n  set color (val) {\n    this.#color = val\n    if (this.node) {\n      this.node.style.color = val\n    }\n  }\n\n  get icon () {\n    return this.#iconNode.classList\n  }\n\n  set icon (val) {\n    if (this.#iconNode) {\n      this.#iconNode.remove()\n    }\n    if (this.node && val && val.trim()) {\n      this.#iconNode = document.createElement('span')\n      this.#iconNode.classList.add('screenshot-icon', 'icon-s-' + val.trim())\n      this.node.append(this.#iconNode)\n    }\n  }\n\n  #initEvents () {\n    this.#events = new ScreenshotToolEvent(this.node)\n  }\n}\n","/**\n * 清空节点\n * @param {HTMLElement} node\n */\nfunction clearNode (node) {\n  if (!(node instanceof window.HTMLElement)) {\n    throw new Error('node must be HTMLElement')\n  }\n  while (node.firstChild) {\n    node.removeChild(node.lastChild)\n  }\n}\n\nfunction addDragEvent ({ node, moveNode, upNode, moveCallback = () => {}, downCallback = () => {}, upCallback = () => {}, last = false } = {}) {\n  if (!(node instanceof window.HTMLElement)) {\n    throw new Error('node must be HTMLElement')\n  }\n\n  let startPosition = null\n  upNode = upNode || node\n  moveNode = moveNode || node\n\n  node.addEventListener('mousedown', _handleMouseDown)\n  upNode.addEventListener('mouseup', _handleMouseUp)\n  let isDown = false\n\n  function _handleMouseDown (e) {\n    if (e.button !== 0) return\n    e.stopPropagation()\n    e.preventDefault()\n    if (!isDown) {\n      isDown = true\n      startPosition = {\n        x: e.clientX,\n        y: e.clientY\n      }\n      moveNode.addEventListener('mousemove', _handleMouseMove)\n      downCallback({ startPosition })\n    }\n  }\n\n  function _handleMouseMove (e) {\n    if (!isDown) return\n    e.stopPropagation()\n    e.preventDefault()\n    moveCallback({\n      startPosition,\n      endPosition: {\n        x: e.clientX,\n        y: e.clientY\n      }\n    })\n  }\n\n  function _handleMouseUp (e) {\n    if (e.button !== 0) return\n    e.stopPropagation()\n    e.preventDefault()\n    if (!startPosition) {\n      return\n    }\n    moveNode.removeEventListener('mousemove', _handleMouseMove)\n    if (!last) {\n      node.removeEventListener('mousedown', _handleMouseDown)\n      upNode.removeEventListener('mouseup', _handleMouseUp)\n    }\n    upCallback({\n      startPosition,\n      endPosition: {\n        x: e.clientX,\n        y: e.clientY\n      }\n    })\n    startPosition = null\n    isDown = false\n  }\n\n  function stop () {\n    last = false\n    isDown = false\n    moveNode.removeEventListener('mousemove', _handleMouseMove)\n    node.removeEventListener('mousedown', _handleMouseDown)\n    upNode.removeEventListener('mouseup', _handleMouseUp)\n    startPosition = null\n  }\n\n  return {\n    stop\n  }\n}\n\nasync function dataURLToBlob (dataURI) {\n  return await (await window.fetch(dataURI)).blob()\n}\n\nasync function blobToDataURL (blob) {\n  return await (await window.fetch(window.URL.createObjectURL(blob))).text()\n}\n\nfunction log (...msg) {\n  console.log('%c[' + new Date().toLocaleString('zh', { hour12: false }) + '] %cINFO: ' + msg.join(' '), 'color:yellow', 'color: green')\n}\n\nfunction error (...msg) {\n  console.log('%c[' + new Date().toLocaleString('zh', { hour12: false }) + '] %cERROR: ' + msg.join(' '), 'color:yellow', 'color: red')\n}\n\nfunction removeAll (list = [], item, callback = () => {}) {\n  let index = list.indexOf(item)\n  while (index > -1) {\n    callback(list.splice(index, 1)[0])\n    index = list.indexOf(item)\n  }\n}\nexport {\n  clearNode,\n  addDragEvent,\n  dataURLToBlob,\n  blobToDataURL,\n  log,\n  error,\n  removeAll\n}\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../node_modules/css-loader/dist/runtime/api.js\";\nimport ___CSS_LOADER_GET_URL_IMPORT___ from \"../node_modules/css-loader/dist/runtime/getUrl.js\";\nvar ___CSS_LOADER_URL_IMPORT_0___ = new URL(\"data:image/svg+xml;utf8,%3C?xml version=%271.0%27 encoding=%27UTF-8%27?%3E%3Csvg viewBox=%270 0 48 48%27 fill=%27none%27 xmlns=%27http://www.w3.org/2000/svg%27%3E%3Cpath d=%27M39 6H9C7.34315 6 6 7.34315 6 9V39C6 40.6569 7.34315 42 9 42H39C40.6569 42 42 40.6569 42 39V9C42 7.34315 40.6569 6 39 6Z%27 stroke=%27%23333%27 stroke-width=%274%27/%3E%3C/svg%3E\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_1___ = new URL(\"data:image/svg+xml;utf8,%3C?xml version=%271.0%27 encoding=%27UTF-8%27?%3E%3Csvg viewBox=%270 0 48 48%27 fill=%27none%27 xmlns=%27http://www.w3.org/2000/svg%27%3E%3Ccircle cx=%2724%27 cy=%2724%27 r=%2720%27 stroke=%27%23333%27 stroke-width=%274%27/%3E%3C/svg%3E\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_2___ = new URL(\"data:image/svg+xml;utf8,%3C?xml version=%271.0%27 encoding=%27UTF-8%27?%3E%3Csvg viewBox=%270 0 48 48%27 fill=%27none%27 xmlns=%27http://www.w3.org/2000/svg%27%3E%3Crect width=%2748%27 height=%2748%27 fill=%27white%27 fill-opacity=%270.01%27/%3E%3Cpath d=%27M5.32497 43.4998L13.81 43.5L44.9227 12.3873L36.4374 3.90204L5.32471 35.0147L5.32497 43.4998Z%27 fill=%27none%27 stroke=%27%23333%27 stroke-width=%274%27 stroke-linejoin=%27round%27/%3E%3Cpath d=%27M27.9521 12.3873L36.4374 20.8726%27 stroke=%27%23333%27 stroke-width=%274%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27/%3E%3C/svg%3E\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_3___ = new URL(\"data:image/svg+xml;utf8,%3C?xml version=%271.0%27 encoding=%27UTF-8%27?%3E%3Csvg viewBox=%270 0 48 48%27 fill=%27none%27 xmlns=%27http://www.w3.org/2000/svg%27%3E%3Crect width=%2748%27 height=%2748%27 fill=%27white%27 fill-opacity=%270.01%27/%3E%3Cpath d=%27M44 36H36V44H44V36Z%27 fill=%27%23333%27/%3E%3Cpath d=%27M28 36H20V44H28V36Z%27 fill=%27%23333%27/%3E%3Cpath d=%27M12 36H4V44H12V36Z%27 fill=%27%23333%27/%3E%3Cpath d=%27M44 20H36V28H44V20Z%27 fill=%27%23333%27/%3E%3Cpath d=%27M28 20H20V28H28V20Z%27 fill=%27%23333%27/%3E%3Cpath d=%27M12 20H4V28H12V20Z%27 fill=%27%23333%27/%3E%3Cpath d=%27M44 4H36V12H44V4Z%27 fill=%27%23333%27/%3E%3Cpath d=%27M28 4H20V12H28V4Z%27 fill=%27%23333%27/%3E%3Cpath d=%27M12 4H4V12H12V4Z%27 fill=%27%23333%27/%3E%3Cpath d=%27M20 12H12V20H20V12Z%27 fill=%27%23333%27/%3E%3Cpath d=%27M20 28H12V36H20V28Z%27 fill=%27%23333%27/%3E%3Cpath d=%27M36 12H28V20H36V12Z%27 fill=%27%23333%27/%3E%3Cpath d=%27M36 28H28V36H36V28Z%27 fill=%27%23333%27/%3E%3C/svg%3E\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_4___ = new URL(\"data:image/svg+xml;utf8,%3C?xml version=%271.0%27 encoding=%27UTF-8%27?%3E%3Csvg viewBox=%270 0 48 48%27 fill=%27none%27 xmlns=%27http://www.w3.org/2000/svg%27%3E%3Crect width=%2748%27 height=%2748%27 fill=%27white%27 fill-opacity=%270.01%27/%3E%3Crect x=%276%27 y=%276%27 width=%2736%27 height=%2736%27 rx=%273%27 fill=%27none%27 stroke=%27%23333%27 stroke-width=%274%27 stroke-linejoin=%27round%27/%3E%3Cpath d=%27M16 19V16H32V19%27 stroke=%27%23333%27 stroke-width=%274%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27/%3E%3Cpath d=%27M22 34H26%27 stroke=%27%23333%27 stroke-width=%274%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27/%3E%3Cpath d=%27M24 18L24 34%27 stroke=%27%23333%27 stroke-width=%274%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27/%3E%3C/svg%3E\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_5___ = new URL(\"data:image/svg+xml;utf8,%3C?xml version=%271.0%27 encoding=%27UTF-8%27?%3E%3Csvg viewBox=%270 0 48 48%27 fill=%27none%27 xmlns=%27http://www.w3.org/2000/svg%27%3E%3Crect width=%2748%27 height=%2748%27 fill=%27white%27 fill-opacity=%270.01%27/%3E%3Cpath d=%27M6 24.0083V42H42V24%27 stroke=%27%23333%27 stroke-width=%274%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27/%3E%3Cpath d=%27M33 23L24 32L15 23%27 stroke=%27%23333%27 stroke-width=%274%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27/%3E%3Cpath d=%27M23.9917 6V32%27 stroke=%27%23333%27 stroke-width=%274%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27/%3E%3C/svg%3E\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_6___ = new URL(\"data:image/svg+xml;utf8,%3C?xml version=%271.0%27 encoding=%27UTF-8%27?%3E%3Csvg viewBox=%270 0 48 48%27 fill=%27none%27 xmlns=%27http://www.w3.org/2000/svg%27%3E%3Cpath d=%27M12.9998 8L6 14L12.9998 21%27 stroke=%27%23333%27 stroke-width=%274%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27/%3E%3Cpath d=%27M6 14H28.9938C35.8768 14 41.7221 19.6204 41.9904 26.5C42.2739 33.7696 36.2671 40 28.9938 40H11.9984%27 stroke=%27%23333%27 stroke-width=%274%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27/%3E%3C/svg%3E\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_7___ = new URL(\"data:image/svg+xml;utf8,%3C?xml version=%271.0%27 encoding=%27UTF-8%27?%3E%3Csvg viewBox=%270 0 48 48%27 fill=%27none%27 xmlns=%27http://www.w3.org/2000/svg%27%3E%3Crect width=%2748%27 height=%2748%27 fill=%27white%27 fill-opacity=%270.01%27/%3E%3Cpath d=%27M43 11L16.875 37L5 25.1818%27 stroke=%27%23333%27 stroke-width=%274%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27/%3E%3C/svg%3E\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_8___ = new URL(\"data:image/svg+xml;utf8,%3C?xml version=%271.0%27 encoding=%27UTF-8%27?%3E%3Csvg viewBox=%270 0 48 48%27 fill=%27none%27 xmlns=%27http://www.w3.org/2000/svg%27%3E%3Crect width=%2748%27 height=%2748%27 fill=%27white%27 fill-opacity=%270.01%27/%3E%3Cpath d=%27M8 8L40 40%27 stroke=%27%23333%27 stroke-width=%274%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27/%3E%3Cpath d=%27M8 40L40 8%27 stroke=%27%23333%27 stroke-width=%274%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27/%3E%3C/svg%3E\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_9___ = new URL(\"data:image/svg+xml;utf8,%3C?xml version=%271.0%27 encoding=%27UTF-8%27?%3E%3Csvg viewBox=%270 0 48 48%27 fill=%27none%27 xmlns=%27http://www.w3.org/2000/svg%27%3E%3Crect width=%2748%27 height=%2748%27 fill=%27white%27 fill-opacity=%270.01%27/%3E%3Cpath d=%27M19 11H37V29%27 stroke=%27%23333%27 stroke-width=%274%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27/%3E%3Cpath d=%27M11.5441 36.4559L36.9999 11%27 stroke=%27%23333%27 stroke-width=%274%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27/%3E%3C/svg%3E\", import.meta.url);\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\nvar ___CSS_LOADER_URL_REPLACEMENT_0___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_0___);\nvar ___CSS_LOADER_URL_REPLACEMENT_1___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_1___);\nvar ___CSS_LOADER_URL_REPLACEMENT_2___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_2___);\nvar ___CSS_LOADER_URL_REPLACEMENT_3___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_3___);\nvar ___CSS_LOADER_URL_REPLACEMENT_4___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_4___);\nvar ___CSS_LOADER_URL_REPLACEMENT_5___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_5___);\nvar ___CSS_LOADER_URL_REPLACEMENT_6___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_6___);\nvar ___CSS_LOADER_URL_REPLACEMENT_7___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_7___);\nvar ___CSS_LOADER_URL_REPLACEMENT_8___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_8___);\nvar ___CSS_LOADER_URL_REPLACEMENT_9___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_9___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".screenshot {\\n  overflow: hidden;\\n  width: 100%;\\n  height: 100%;\\n  position: relative;\\n  -webkit-user-select: none;\\n     -moz-user-select: none;\\n      -ms-user-select: none;\\n          user-select: none;\\n}\\n.screenshot-image {\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  width: 100%;\\n  height: 100%;\\n}\\n.screenshot-snipper {\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  border-color: transparent;\\n  border-style: solid;\\n  -webkit-transform-origin: top left;\\n      -ms-transform-origin: top left;\\n          transform-origin: top left;\\n  cursor: crosshair;\\n}\\n.screenshot-resizer {\\n  position: absolute;\\n  top: 0;\\n  bottom: 0;\\n  left: 0;\\n  right: 0;\\n  cursor: move;\\n  z-index: 1;\\n}\\n.screenshot-resizer-wrapper {\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  width: 100%;\\n  height: 100%;\\n  border: 1px solid red;\\n  -webkit-box-sizing: border-box;\\n          box-sizing: border-box;\\n}\\n.screenshot-resizer-wrapper * {\\n  -webkit-box-sizing: border-box;\\n          box-sizing: border-box;\\n}\\n.screenshot-resizer-item {\\n  position: absolute;\\n  width: 5px;\\n  height: 5px;\\n  background-color: red;\\n}\\n.screenshot-resizer-top {\\n  top: 0;\\n  left: 50%;\\n  -webkit-transform: translateX(-50%);\\n      -ms-transform: translateX(-50%);\\n          transform: translateX(-50%);\\n  cursor: ns-resize;\\n}\\n.screenshot-resizer-topright {\\n  top: 0;\\n  right: 0;\\n  cursor: nesw-resize;\\n}\\n.screenshot-resizer-right {\\n  top: 50%;\\n  right: 0;\\n  -webkit-transform: translateY(-50%);\\n      -ms-transform: translateY(-50%);\\n          transform: translateY(-50%);\\n  cursor: ew-resize;\\n}\\n.screenshot-resizer-bottomright {\\n  bottom: 0;\\n  right: 0;\\n  cursor: nwse-resize;\\n}\\n.screenshot-resizer-bottom {\\n  bottom: 0;\\n  left: 50%;\\n  -webkit-transform: translateX(-50%);\\n      -ms-transform: translateX(-50%);\\n          transform: translateX(-50%);\\n  cursor: ns-resize;\\n}\\n.screenshot-resizer-bottomleft {\\n  bottom: 0;\\n  left: 0;\\n  cursor: nesw-resize;\\n}\\n.screenshot-resizer-left {\\n  top: 50%;\\n  left: 0;\\n  -webkit-transform: translateY(-50%);\\n      -ms-transform: translateY(-50%);\\n          transform: translateY(-50%);\\n  cursor: ew-resize;\\n}\\n.screenshot-resizer-topleft {\\n  top: 0;\\n  left: 0;\\n  cursor: nwse-resize;\\n}\\n.screenshot-sizeinfo {\\n  display: none;\\n  position: absolute;\\n  left: 0;\\n  top: -27px;\\n  color: #fff;\\n  padding: 0 8px;\\n  font-size: 14px;\\n  line-height: 22px;\\n  background: rgba(0, 0, 0, 0.6);\\n  white-space: nowrap;\\n  z-index: 999;\\n}\\n.screenshot-toolbar {\\n  position: absolute;\\n  top: -webkit-calc(100% + 8px);\\n  top: calc(100% + 8px);\\n  right: 0;\\n  display: -webkit-box;\\n  display: -ms-flexbox;\\n  display: flex;\\n  background: rgba(0, 0, 0, 0.6);\\n  -webkit-box-align: center;\\n      -ms-flex-align: center;\\n          align-items: center;\\n  padding: 5px 8px;\\n  gap: 8px;\\n  color: #fff;\\n  z-index: 1000;\\n}\\n.screenshot-toolbar-divider {\\n  background: rgba(255, 255, 255, 0.3);\\n  width: 1px;\\n  height: 22px;\\n}\\n.screenshot-toolbar-tool {\\n  display: -webkit-box;\\n  display: -ms-flexbox;\\n  display: flex;\\n  -webkit-box-align: center;\\n      -ms-flex-align: center;\\n          align-items: center;\\n  -webkit-box-pack: center;\\n      -ms-flex-pack: center;\\n          justify-content: center;\\n  padding: 2px;\\n  cursor: pointer;\\n}\\n.screenshot-toolbar-tool .icon {\\n  font-size: 22px;\\n}\\n.screenshot-toolbar-tool:hover {\\n  background: rgba(0, 0, 0, 0.6);\\n}\\n.screenshot-toolbar-tool.active {\\n  color: red !important;\\n}\\n.screenshot-toolbar-tool.disabled {\\n  color: rgba(255, 255, 255, 0.3) !important;\\n  cursor: not-allowed;\\n}\\n.screenshot-toolbar-tool.disabled:hover {\\n  background: unset;\\n}\\n.screenshot-drawer {\\n  position: absolute;\\n  top: 0;\\n  bottom: 0;\\n  left: 0;\\n  right: 0;\\n}\\n\\n.screenshot-icon.icon-s-square {\\n  -webkit-mask: url(\" + ___CSS_LOADER_URL_REPLACEMENT_0___ + \") no-repeat 100% 100%;\\n          mask: url(\" + ___CSS_LOADER_URL_REPLACEMENT_0___ + \") no-repeat 100% 100%;\\n  background-color: currentColor;\\n  height: 1em;\\n  width: 1em;\\n}\\n.screenshot-icon.icon-s-circle {\\n  -webkit-mask: url(\" + ___CSS_LOADER_URL_REPLACEMENT_1___ + \") no-repeat 100% 100%;\\n          mask: url(\" + ___CSS_LOADER_URL_REPLACEMENT_1___ + \") no-repeat 100% 100%;\\n  background-color: currentColor;\\n  height: 1em;\\n  width: 1em;\\n}\\n.screenshot-icon.icon-s-write {\\n  -webkit-mask: url(\" + ___CSS_LOADER_URL_REPLACEMENT_2___ + \") no-repeat 100% 100%;\\n          mask: url(\" + ___CSS_LOADER_URL_REPLACEMENT_2___ + \") no-repeat 100% 100%;\\n  background-color: currentColor;\\n  height: 1em;\\n  width: 1em;\\n}\\n.screenshot-icon.icon-s-mosaic {\\n  -webkit-mask: url(\" + ___CSS_LOADER_URL_REPLACEMENT_3___ + \") no-repeat 100% 100%;\\n          mask: url(\" + ___CSS_LOADER_URL_REPLACEMENT_3___ + \") no-repeat 100% 100%;\\n  background-color: currentColor;\\n  height: 1em;\\n  width: 1em;\\n}\\n.screenshot-icon.icon-s-text {\\n  -webkit-mask: url(\" + ___CSS_LOADER_URL_REPLACEMENT_4___ + \") no-repeat 100% 100%;\\n          mask: url(\" + ___CSS_LOADER_URL_REPLACEMENT_4___ + \") no-repeat 100% 100%;\\n  background-color: currentColor;\\n  height: 1em;\\n  width: 1em;\\n}\\n.screenshot-icon.icon-s-download {\\n  -webkit-mask: url(\" + ___CSS_LOADER_URL_REPLACEMENT_5___ + \") no-repeat 100% 100%;\\n          mask: url(\" + ___CSS_LOADER_URL_REPLACEMENT_5___ + \") no-repeat 100% 100%;\\n  background-color: currentColor;\\n  height: 1em;\\n  width: 1em;\\n}\\n.screenshot-icon.icon-s-return {\\n  -webkit-mask: url(\" + ___CSS_LOADER_URL_REPLACEMENT_6___ + \") no-repeat 100% 100%;\\n          mask: url(\" + ___CSS_LOADER_URL_REPLACEMENT_6___ + \") no-repeat 100% 100%;\\n  background-color: currentColor;\\n  height: 1em;\\n  width: 1em;\\n}\\n.screenshot-icon.icon-s-check {\\n  -webkit-mask: url(\" + ___CSS_LOADER_URL_REPLACEMENT_7___ + \") no-repeat 100% 100%;\\n          mask: url(\" + ___CSS_LOADER_URL_REPLACEMENT_7___ + \") no-repeat 100% 100%;\\n  background-color: currentColor;\\n  height: 1em;\\n  width: 1em;\\n}\\n.screenshot-icon.icon-s-close {\\n  -webkit-mask: url(\" + ___CSS_LOADER_URL_REPLACEMENT_8___ + \") no-repeat 100% 100%;\\n          mask: url(\" + ___CSS_LOADER_URL_REPLACEMENT_8___ + \") no-repeat 100% 100%;\\n  background-color: currentColor;\\n  height: 1em;\\n  width: 1em;\\n}\\n.screenshot-icon.icon-s-arrow-right-up {\\n  -webkit-mask: url(\" + ___CSS_LOADER_URL_REPLACEMENT_9___ + \") no-repeat 100% 100%;\\n          mask: url(\" + ___CSS_LOADER_URL_REPLACEMENT_9___ + \") no-repeat 100% 100%;\\n  background-color: currentColor;\\n  height: 1em;\\n  width: 1em;\\n}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/screenshot.scss\",\"webpack://./src/svg-encode.scss\"],\"names\":[],\"mappings\":\"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\",\"sourcesContent\":[\"@import \\\"svg-encode\\\";\\n\\n.screenshot {\\n  overflow: hidden;\\n  width: 100%;\\n  height: 100%;\\n  position: relative;\\n  user-select: none;\\n\\n  &-image {\\n    position: absolute;\\n    top: 0;\\n    left: 0;\\n    width: 100%;\\n    height: 100%;\\n  }\\n\\n  &-snipper {\\n    position: absolute;\\n    top: 0;\\n    left: 0;\\n    border-color: transparent;\\n    border-style: solid;\\n    transform-origin: top left;\\n    cursor: crosshair;\\n  }\\n\\n  &-resizer {\\n    position: absolute;\\n    top: 0;\\n    bottom: 0;\\n    left: 0;\\n    right: 0;\\n    cursor: move;\\n    z-index: 1;\\n\\n    &-wrapper {\\n      position: absolute;\\n      top: 0;\\n      left: 0;\\n      width: 100%;\\n      height: 100%;\\n      border: 1px solid red;\\n      box-sizing: border-box;\\n\\n      * {\\n        box-sizing: border-box;\\n      }\\n    }\\n\\n    &-item {\\n      position: absolute;\\n      width: 5px;\\n      height: 5px;\\n      background-color: red;\\n    }\\n\\n    &-top {\\n      top: 0;\\n      left: 50%;\\n      transform: translateX(-50%);\\n      cursor: ns-resize;\\n    }\\n\\n    &-topright {\\n      top: 0;\\n      right: 0;\\n      cursor: nesw-resize;\\n    }\\n\\n    &-right {\\n      top: 50%;\\n      right: 0;\\n      transform: translateY(-50%);\\n      cursor: ew-resize;\\n    }\\n\\n    &-bottomright {\\n      bottom: 0;\\n      right: 0;\\n      cursor: nwse-resize;\\n    }\\n\\n    &-bottom {\\n      bottom: 0;\\n      left: 50%;\\n      transform: translateX(-50%);\\n      cursor: ns-resize;\\n    }\\n\\n    &-bottomleft {\\n      bottom: 0;\\n      left: 0;\\n      cursor: nesw-resize;\\n    }\\n\\n    &-left {\\n      top: 50%;\\n      left: 0;\\n      transform: translateY(-50%);\\n      cursor: ew-resize;\\n    }\\n\\n    &-topleft {\\n      top: 0;\\n      left: 0;\\n      cursor: nwse-resize;\\n    }\\n  }\\n\\n  &-sizeinfo {\\n    display: none;\\n    position: absolute;\\n    left: 0;\\n    top: -27px;\\n    color: #fff;\\n    padding: 0 8px;\\n    font-size: 14px;\\n    line-height: 22px;\\n    background: rgba(0, 0, 0, 0.6);\\n    white-space: nowrap;\\n    z-index: 999;\\n  }\\n\\n  &-toolbar {\\n    position: absolute;\\n    top: calc(100% + 8px);\\n    right: 0;\\n    display: flex;\\n    background: rgba(0, 0, 0, 0.6);\\n    align-items: center;\\n    padding: 5px 8px;\\n    gap: 8px;\\n    color: #fff;\\n    z-index: 1000;\\n\\n    &-divider {\\n      background: rgba(255, 255, 255, .3);\\n      width: 1px;\\n      height: 22px;\\n    }\\n\\n    &-tool {\\n      display: flex;\\n      align-items: center;\\n      justify-content: center;\\n      padding: 2px;\\n      cursor: pointer;\\n\\n      .icon {\\n        font-size: 22px;\\n      }\\n\\n      &:hover {\\n        background: rgba(0, 0, 0, 0.6);\\n      }\\n\\n      &.active {\\n        color: red !important;\\n      }\\n\\n      &.disabled {\\n        color: rgba(255, 255, 255, .3) !important;\\n        cursor: not-allowed;\\n\\n        &:hover {\\n          background: unset;\\n        }\\n      }\\n    }\\n  }\\n\\n  &-drawer {\\n    position: absolute;\\n    top: 0;\\n    bottom: 0;\\n    left: 0;\\n    right: 0;\\n  }\\n}\\n\\n.screenshot-icon {\\n  &.icon-s-square {\\n    @include single-color-icon('<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?><svg viewBox=\\\"0 0 48 48\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M39 6H9C7.34315 6 6 7.34315 6 9V39C6 40.6569 7.34315 42 9 42H39C40.6569 42 42 40.6569 42 39V9C42 7.34315 40.6569 6 39 6Z\\\" stroke=\\\"#333\\\" stroke-width=\\\"4\\\"/></svg>');\\n  }\\n\\n  &.icon-s-circle {\\n    @include single-color-icon('<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?><svg viewBox=\\\"0 0 48 48\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><circle cx=\\\"24\\\" cy=\\\"24\\\" r=\\\"20\\\" stroke=\\\"#333\\\" stroke-width=\\\"4\\\"/></svg>')\\n  }\\n\\n  &.icon-s-write {\\n    @include single-color-icon('<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?><svg viewBox=\\\"0 0 48 48\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><rect width=\\\"48\\\" height=\\\"48\\\" fill=\\\"white\\\" fill-opacity=\\\"0.01\\\"/><path d=\\\"M5.32497 43.4998L13.81 43.5L44.9227 12.3873L36.4374 3.90204L5.32471 35.0147L5.32497 43.4998Z\\\" fill=\\\"none\\\" stroke=\\\"#333\\\" stroke-width=\\\"4\\\" stroke-linejoin=\\\"round\\\"/><path d=\\\"M27.9521 12.3873L36.4374 20.8726\\\" stroke=\\\"#333\\\" stroke-width=\\\"4\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\"/></svg>')\\n  }\\n\\n  &.icon-s-mosaic {\\n    @include single-color-icon('<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?><svg viewBox=\\\"0 0 48 48\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><rect width=\\\"48\\\" height=\\\"48\\\" fill=\\\"white\\\" fill-opacity=\\\"0.01\\\"/><path d=\\\"M44 36H36V44H44V36Z\\\" fill=\\\"#333\\\"/><path d=\\\"M28 36H20V44H28V36Z\\\" fill=\\\"#333\\\"/><path d=\\\"M12 36H4V44H12V36Z\\\" fill=\\\"#333\\\"/><path d=\\\"M44 20H36V28H44V20Z\\\" fill=\\\"#333\\\"/><path d=\\\"M28 20H20V28H28V20Z\\\" fill=\\\"#333\\\"/><path d=\\\"M12 20H4V28H12V20Z\\\" fill=\\\"#333\\\"/><path d=\\\"M44 4H36V12H44V4Z\\\" fill=\\\"#333\\\"/><path d=\\\"M28 4H20V12H28V4Z\\\" fill=\\\"#333\\\"/><path d=\\\"M12 4H4V12H12V4Z\\\" fill=\\\"#333\\\"/><path d=\\\"M20 12H12V20H20V12Z\\\" fill=\\\"#333\\\"/><path d=\\\"M20 28H12V36H20V28Z\\\" fill=\\\"#333\\\"/><path d=\\\"M36 12H28V20H36V12Z\\\" fill=\\\"#333\\\"/><path d=\\\"M36 28H28V36H36V28Z\\\" fill=\\\"#333\\\"/></svg>')\\n  }\\n\\n  &.icon-s-text {\\n    @include single-color-icon('<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?><svg viewBox=\\\"0 0 48 48\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><rect width=\\\"48\\\" height=\\\"48\\\" fill=\\\"white\\\" fill-opacity=\\\"0.01\\\"/><rect x=\\\"6\\\" y=\\\"6\\\" width=\\\"36\\\" height=\\\"36\\\" rx=\\\"3\\\" fill=\\\"none\\\" stroke=\\\"#333\\\" stroke-width=\\\"4\\\" stroke-linejoin=\\\"round\\\"/><path d=\\\"M16 19V16H32V19\\\" stroke=\\\"#333\\\" stroke-width=\\\"4\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\"/><path d=\\\"M22 34H26\\\" stroke=\\\"#333\\\" stroke-width=\\\"4\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\"/><path d=\\\"M24 18L24 34\\\" stroke=\\\"#333\\\" stroke-width=\\\"4\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\"/></svg>')\\n  }\\n\\n  &.icon-s-download {\\n    @include single-color-icon('<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?><svg viewBox=\\\"0 0 48 48\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><rect width=\\\"48\\\" height=\\\"48\\\" fill=\\\"white\\\" fill-opacity=\\\"0.01\\\"/><path d=\\\"M6 24.0083V42H42V24\\\" stroke=\\\"#333\\\" stroke-width=\\\"4\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\"/><path d=\\\"M33 23L24 32L15 23\\\" stroke=\\\"#333\\\" stroke-width=\\\"4\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\"/><path d=\\\"M23.9917 6V32\\\" stroke=\\\"#333\\\" stroke-width=\\\"4\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\"/></svg>')\\n  }\\n\\n  &.icon-s-return {\\n    @include single-color-icon('<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?><svg viewBox=\\\"0 0 48 48\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M12.9998 8L6 14L12.9998 21\\\" stroke=\\\"#333\\\" stroke-width=\\\"4\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\"/><path d=\\\"M6 14H28.9938C35.8768 14 41.7221 19.6204 41.9904 26.5C42.2739 33.7696 36.2671 40 28.9938 40H11.9984\\\" stroke=\\\"#333\\\" stroke-width=\\\"4\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\"/></svg>')\\n  }\\n\\n  &.icon-s-check {\\n    @include single-color-icon('<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?><svg viewBox=\\\"0 0 48 48\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><rect width=\\\"48\\\" height=\\\"48\\\" fill=\\\"white\\\" fill-opacity=\\\"0.01\\\"/><path d=\\\"M43 11L16.875 37L5 25.1818\\\" stroke=\\\"#333\\\" stroke-width=\\\"4\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\"/></svg>')\\n  }\\n\\n  &.icon-s-close {\\n    @include single-color-icon('<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?><svg viewBox=\\\"0 0 48 48\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><rect width=\\\"48\\\" height=\\\"48\\\" fill=\\\"white\\\" fill-opacity=\\\"0.01\\\"/><path d=\\\"M8 8L40 40\\\" stroke=\\\"#333\\\" stroke-width=\\\"4\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\"/><path d=\\\"M8 40L40 8\\\" stroke=\\\"#333\\\" stroke-width=\\\"4\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\"/></svg>')\\n  }\\n\\n  &.icon-s-arrow-right-up {\\n    @include single-color-icon('<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?><svg viewBox=\\\"0 0 48 48\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><rect width=\\\"48\\\" height=\\\"48\\\" fill=\\\"white\\\" fill-opacity=\\\"0.01\\\"/><path d=\\\"M19 11H37V29\\\" stroke=\\\"#333\\\" stroke-width=\\\"4\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\"/><path d=\\\"M11.5441 36.4559L36.9999 11\\\" stroke=\\\"#333\\\" stroke-width=\\\"4\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\"/></svg>')\\n  }\\n}\\n\",\"@function str-replace($string, $search, $replace: '') {\\n  $index: str-index($string, $search);\\n  @if $index {\\n    @return str-slice($string, 1, $index - 1) + $replace + str-replace(str-slice($string, $index + str-length($search)), $search, $replace);\\n  }\\n  @return $string;\\n}\\n\\n$encoding-reference: (\\n  //('%','%25'),  // Encode \\\"%\\\" first, otherwise the \\\"%\\\" from encoded code would be encoded again (which would be bad)\\n                ('<', '%3C'),\\n                ('>', '%3E'),\\n          //('\\\"','%22'),  // Replace \\\" with ' because that's shorter than %22 and normally working\\n                ('\\\"', '\\\\''),\\n                ('#', '%23'),\\n                ('&', '%26') // Here are a few more characters you could encode\\n  //(' ','%20'),\\n  //('!','%21'),\\n  //('$','%24'),\\n  //(',','%27'),\\n  //('(','%28'),\\n  //(')','%29'),\\n  //('*','%2A'),\\n  //('+','%2B'),\\n  //('\\\"','%2C'),\\n  //('/','%2F'),\\n  //(':','%3A'),\\n  //(';','%3B'),\\n  //('=','%3D'),\\n  //('?','%3F'),\\n  //('@','%40'),\\n  //('[','%5B'),\\n  //(']','%5D'),\\n  //('^','%5E'),\\n  //('`','%60'),\\n  //('{','%7B'),\\n  //('|','%7C'),\\n  //('}','%7D'),\\n  //('~','%7E'),\\n  //(',','%E2%80%9A'),\\n  //('\\\\\\\\','%5C'),\\n  //('_','%5F'),\\n  //('-','%2D'),\\n  //('.','%2E'),\\n  // ('\\\\','%5C'),\\n  // (' ','%7F'),\\n  // ('`','%E2%82%AC'),\\n  //('ƒ','%C6%92'),\\n  //('„','%E2%80%9E'),\\n  //('…','%E2%80%A6'),\\n  //('†','%E2%80%A0'),\\n  //('‡','%E2%80%A1'),\\n  //('ˆ','%CB%86'),\\n  //('‰','%E2%80%B0'),\\n  //('Š','%C5%A0'),\\n  //('‹','%E2%80%B9'),\\n  //('Œ','%C5%92'),\\n  //('','%C5%8D'),\\n  //('Ž','%C5%BD'),\\n  //('','%8F'),\\n  //('','%C2%90'),\\n  //(','%'E2%80%98'),\\n  //(','%'E2%80%99'),\\n  //('“','%E2%80%9C'),\\n  //('”','%E2%80%9D'),\\n  //('•','%E2%80%A2'),\\n  //('–','%E2%80%93'),\\n  //('—','%E2%80%94'),\\n  //('˜','%CB%9C'),\\n  //('™','%E2%84'),\\n  //('š','%C5%A1'),\\n  //('›','%E2%80'),\\n  //('œ','%C5%93'),\\n  //('','%9D'),\\n  //('ž','%C5%BE'),\\n  //('Ÿ','%C5%B8'),\\n  //(' ','%C2%A0'),\\n  //('¡','%C2%A1'),\\n  //('¢','%C2%A2'),\\n  //('£','%C2%A3'),\\n  //('¤','%C2%A4'),\\n  //('¥','%C2%A5'),\\n  //('¦','%C2%A6'),\\n  //('§','%C2%A7'),\\n  //('¨','%C2%A8'),\\n  //('©','%C2%A9'),\\n  //('ª','%C2%AA'),\\n  //('«','%C2%AB'),\\n  //('¬','%C2%AC'),\\n  //(','%'C2%AD'),\\n  //('®','%C2%AE'),\\n  //('¯','%C2%AF'),\\n  //('°','%C2%B0'),\\n  //('±','%C2%B1'),\\n  //('²','%C2%B2'),\\n  //('³','%C2%B3'),\\n  //('´','%C2%B4'),\\n  //('µ','%C2%B5'),\\n  //('¶','%C2%B6'),\\n  //('·','%C2%B7'),\\n  //('¸','%C2%B8'),\\n  //('¹','%C2%B9'),\\n  //('º','%C2%BA'),\\n  //('»','%C2%BB'),\\n  //('¼','%C2%BC'),\\n  //('½','%C2%BD'),\\n  //('¾','%C2%BE'),\\n  //('¿','%C2%BF'),\\n  //('À','%C3%80'),\\n  //('Á','%C3%81'),\\n  //('Â','%C3%82'),\\n  //('Ã','%C3%83'),\\n  //('Ä','%C3%84'),\\n  //('Å','%C3%85'),\\n  //('Æ','%C3%86'),\\n  //('Ç','%C3%87'),\\n  //('È','%C3%88'),\\n  //('É','%C3%89'),\\n  //('Ê','%C3%8A'),\\n  //('Ë','%C3%8B'),\\n  //('Ì','%C3%8C'),\\n  //('Í','%C3%8D'),\\n  //('Î','%C3%8E'),\\n  //('Ï','%C3%8F'),\\n  //('Ð','%C3%90'),\\n  //('Ñ','%C3%91'),\\n  //('Ò','%C3%92'),\\n  //('Ó','%C3%93'),\\n  //('Ô','%C3%94'),\\n  //('Õ','%C3%95'),\\n  //('Ö','%C3%96'),\\n  //('×','%C3%97'),\\n  //('Ø','%C3%98'),\\n  //('Ù','%C3%99'),\\n  //('Ú','%C3%9A'),\\n  //('Û','%C3%9B'),\\n  //('Ü','%C3%9C'),\\n  //('Ý','%C3%9D'),\\n  //('Þ','%C3%9E'),\\n  //('ß','%C3%9F'),\\n  //('à','%C3%A0'),\\n  //('á','%C3%A1'),\\n  //('â','%C3%A2'),\\n  //('ã','%C3%A3'),\\n  //('ä','%C3%A4'),\\n  //('å','%C3%A5'),\\n  //('æ','%C3%A6'),\\n  //('ç','%C3%A7'),\\n  //('è','%C3%A8'),\\n  //('é','%C3%A9'),\\n  //('ê','%C3%AA'),\\n  //('ë','%C3%AB'),\\n  //('ì','%C3%AC'),\\n  //('í','%C3%AD'),\\n  //('î','%C3%AE'),\\n  //('ï','%C3%AF'),\\n  //('ð','%C3%B0'),\\n  //('ñ','%C3%B1'),\\n  //('ò','%C3%B2'),\\n  //('ó','%C3%B3'),\\n  //('ô','%C3%B4'),\\n  //('õ','%C3%B5'),\\n  //('ö','%C3%B6'),\\n  //('÷','%C3%B7'),\\n  //('ø','%C3%B8'),\\n  //('ù','%C3%B9'),\\n  //('ú','%C3%BA'),\\n  //('û','%C3%BB'),\\n  //('ü','%C3%BC'),\\n  //('ý','%C3%BD'),\\n  //('þ','%C3%BE'),\\n  //('ÿ','%C3%BF')\\n);\\n\\n@function svg-encode($svg) {\\n  @each $char, $encoded in $encoding-reference {\\n    $svg: str-replace($svg, $char, $encoded);\\n  }\\n  @return 'data:image/svg+xml;utf8,' + $svg;\\n}\\n\\n// 单色图标\\n@mixin single-color-icon($url) {\\n  mask: url(svg-encode($url)) no-repeat 100% 100%;\\n  background-color: currentColor;\\n  height: 1em;\\n  width: 1em;\\n}\\n\\n// 彩色图标\\n@mixin multi-color-icon($url) {\\n  background: transparent url(svg-encode($url)) no-repeat 100% 100%;\\n  height: 1em;\\n  width: 1em;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\n      import API from \"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../node_modules/css-loader/dist/cjs.js!../node_modules/postcss-loader/dist/cjs.js!../node_modules/sass-loader/dist/cjs.js!./screenshot.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../node_modules/css-loader/dist/cjs.js!../node_modules/postcss-loader/dist/cjs.js!../node_modules/sass-loader/dist/cjs.js!./screenshot.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","\"use strict\";\n\nvar stylesInDOM = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDOM.length; i++) {\n    if (stylesInDOM[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var indexByIdentifier = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3],\n      supports: item[4],\n      layer: item[5]\n    };\n\n    if (indexByIdentifier !== -1) {\n      stylesInDOM[indexByIdentifier].references++;\n      stylesInDOM[indexByIdentifier].updater(obj);\n    } else {\n      var updater = addElementStyle(obj, options);\n      options.byIndex = i;\n      stylesInDOM.splice(i, 0, {\n        identifier: identifier,\n        updater: updater,\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction addElementStyle(obj, options) {\n  var api = options.domAPI(options);\n  api.update(obj);\n\n  var updater = function updater(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap && newObj.supports === obj.supports && newObj.layer === obj.layer) {\n        return;\n      }\n\n      api.update(obj = newObj);\n    } else {\n      api.remove();\n    }\n  };\n\n  return updater;\n}\n\nmodule.exports = function (list, options) {\n  options = options || {};\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDOM[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDOM[_index].references === 0) {\n        stylesInDOM[_index].updater();\n\n        stylesInDOM.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","\"use strict\";\n\nvar memo = {};\n/* istanbul ignore next  */\n\nfunction getTarget(target) {\n  if (typeof memo[target] === \"undefined\") {\n    var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n    if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n      try {\n        // This will throw an exception if access to iframe is blocked\n        // due to cross-origin restrictions\n        styleTarget = styleTarget.contentDocument.head;\n      } catch (e) {\n        // istanbul ignore next\n        styleTarget = null;\n      }\n    }\n\n    memo[target] = styleTarget;\n  }\n\n  return memo[target];\n}\n/* istanbul ignore next  */\n\n\nfunction insertBySelector(insert, style) {\n  var target = getTarget(insert);\n\n  if (!target) {\n    throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n  }\n\n  target.appendChild(style);\n}\n\nmodule.exports = insertBySelector;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction insertStyleElement(options) {\n  var element = document.createElement(\"style\");\n  options.setAttributes(element, options.attributes);\n  options.insert(element, options.options);\n  return element;\n}\n\nmodule.exports = insertStyleElement;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction setAttributesWithoutAttributes(styleElement) {\n  var nonce = typeof __webpack_nonce__ !== \"undefined\" ? __webpack_nonce__ : null;\n\n  if (nonce) {\n    styleElement.setAttribute(\"nonce\", nonce);\n  }\n}\n\nmodule.exports = setAttributesWithoutAttributes;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction apply(styleElement, options, obj) {\n  var css = \"\";\n\n  if (obj.supports) {\n    css += \"@supports (\".concat(obj.supports, \") {\");\n  }\n\n  if (obj.media) {\n    css += \"@media \".concat(obj.media, \" {\");\n  }\n\n  var needLayer = typeof obj.layer !== \"undefined\";\n\n  if (needLayer) {\n    css += \"@layer\".concat(obj.layer.length > 0 ? \" \".concat(obj.layer) : \"\", \" {\");\n  }\n\n  css += obj.css;\n\n  if (needLayer) {\n    css += \"}\";\n  }\n\n  if (obj.media) {\n    css += \"}\";\n  }\n\n  if (obj.supports) {\n    css += \"}\";\n  }\n\n  var sourceMap = obj.sourceMap;\n\n  if (sourceMap && typeof btoa !== \"undefined\") {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  options.styleTagTransform(css, styleElement, options.options);\n}\n\nfunction removeStyleElement(styleElement) {\n  // istanbul ignore if\n  if (styleElement.parentNode === null) {\n    return false;\n  }\n\n  styleElement.parentNode.removeChild(styleElement);\n}\n/* istanbul ignore next  */\n\n\nfunction domAPI(options) {\n  var styleElement = options.insertStyleElement(options);\n  return {\n    update: function update(obj) {\n      apply(styleElement, options, obj);\n    },\n    remove: function remove() {\n      removeStyleElement(styleElement);\n    }\n  };\n}\n\nmodule.exports = domAPI;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction styleTagTransform(css, styleElement) {\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css;\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild);\n    }\n\n    styleElement.appendChild(document.createTextNode(css));\n  }\n}\n\nmodule.exports = styleTagTransform;","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","export default function _classApplyDescriptorGet(receiver, descriptor) {\n  if (descriptor.get) {\n    return descriptor.get.call(receiver);\n  }\n\n  return descriptor.value;\n}","export default function _classApplyDescriptorSet(receiver, descriptor, value) {\n  if (descriptor.set) {\n    descriptor.set.call(receiver, value);\n  } else {\n    if (!descriptor.writable) {\n      throw new TypeError(\"attempted to set read only private field\");\n    }\n\n    descriptor.value = value;\n  }\n}","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","export default function _classExtractFieldDescriptor(receiver, privateMap, action) {\n  if (!privateMap.has(receiver)) {\n    throw new TypeError(\"attempted to \" + action + \" private field on non-instance\");\n  }\n\n  return privateMap.get(receiver);\n}","import classApplyDescriptorGet from \"./classApplyDescriptorGet.js\";\nimport classExtractFieldDescriptor from \"./classExtractFieldDescriptor.js\";\nexport default function _classPrivateFieldGet(receiver, privateMap) {\n  var descriptor = classExtractFieldDescriptor(receiver, privateMap, \"get\");\n  return classApplyDescriptorGet(receiver, descriptor);\n}","import classApplyDescriptorSet from \"./classApplyDescriptorSet.js\";\nimport classExtractFieldDescriptor from \"./classExtractFieldDescriptor.js\";\nexport default function _classPrivateFieldSet(receiver, privateMap, value) {\n  var descriptor = classExtractFieldDescriptor(receiver, privateMap, \"set\");\n  classApplyDescriptorSet(receiver, descriptor, value);\n  return value;\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  Object.defineProperty(subClass, \"prototype\", {\n    writable: false\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","import _typeof from \"./typeof.js\";\nimport assertThisInitialized from \"./assertThisInitialized.js\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n\n  return assertThisInitialized(self);\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView');\n\nexport default DataView;\n","import hashClear from './_hashClear.js';\nimport hashDelete from './_hashDelete.js';\nimport hashGet from './_hashGet.js';\nimport hashHas from './_hashHas.js';\nimport hashSet from './_hashSet.js';\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\nexport default Hash;\n","import listCacheClear from './_listCacheClear.js';\nimport listCacheDelete from './_listCacheDelete.js';\nimport listCacheGet from './_listCacheGet.js';\nimport listCacheHas from './_listCacheHas.js';\nimport listCacheSet from './_listCacheSet.js';\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\nexport default ListCache;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map');\n\nexport default Map;\n","import mapCacheClear from './_mapCacheClear.js';\nimport mapCacheDelete from './_mapCacheDelete.js';\nimport mapCacheGet from './_mapCacheGet.js';\nimport mapCacheHas from './_mapCacheHas.js';\nimport mapCacheSet from './_mapCacheSet.js';\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\nexport default MapCache;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar Promise = getNative(root, 'Promise');\n\nexport default Promise;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar Set = getNative(root, 'Set');\n\nexport default Set;\n","import ListCache from './_ListCache.js';\nimport stackClear from './_stackClear.js';\nimport stackDelete from './_stackDelete.js';\nimport stackGet from './_stackGet.js';\nimport stackHas from './_stackHas.js';\nimport stackSet from './_stackSet.js';\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  var data = this.__data__ = new ListCache(entries);\n  this.size = data.size;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\nexport default Stack;\n","import root from './_root.js';\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nexport default Symbol;\n","import root from './_root.js';\n\n/** Built-in value references. */\nvar Uint8Array = root.Uint8Array;\n\nexport default Uint8Array;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar WeakMap = getNative(root, 'WeakMap');\n\nexport default WeakMap;\n","/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  switch (args.length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\nexport default apply;\n","/**\n * A specialized version of `_.forEach` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns `array`.\n */\nfunction arrayEach(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (iteratee(array[index], index, array) === false) {\n      break;\n    }\n  }\n  return array;\n}\n\nexport default arrayEach;\n","/**\n * A specialized version of `_.filter` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction arrayFilter(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (predicate(value, index, array)) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\n\nexport default arrayFilter;\n","import baseTimes from './_baseTimes.js';\nimport isArguments from './isArguments.js';\nimport isArray from './isArray.js';\nimport isBuffer from './isBuffer.js';\nimport isIndex from './_isIndex.js';\nimport isTypedArray from './isTypedArray.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default arrayLikeKeys;\n","/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\nexport default arrayPush;\n","import baseAssignValue from './_baseAssignValue.js';\nimport eq from './eq.js';\n\n/**\n * This function is like `assignValue` except that it doesn't assign\n * `undefined` values.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignMergeValue(object, key, value) {\n  if ((value !== undefined && !eq(object[key], value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\nexport default assignMergeValue;\n","import baseAssignValue from './_baseAssignValue.js';\nimport eq from './eq.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\nexport default assignValue;\n","import eq from './eq.js';\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\nexport default assocIndexOf;\n","import copyObject from './_copyObject.js';\nimport keys from './keys.js';\n\n/**\n * The base implementation of `_.assign` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssign(object, source) {\n  return object && copyObject(source, keys(source), object);\n}\n\nexport default baseAssign;\n","import copyObject from './_copyObject.js';\nimport keysIn from './keysIn.js';\n\n/**\n * The base implementation of `_.assignIn` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssignIn(object, source) {\n  return object && copyObject(source, keysIn(source), object);\n}\n\nexport default baseAssignIn;\n","import defineProperty from './_defineProperty.js';\n\n/**\n * The base implementation of `assignValue` and `assignMergeValue` without\n * value checks.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction baseAssignValue(object, key, value) {\n  if (key == '__proto__' && defineProperty) {\n    defineProperty(object, key, {\n      'configurable': true,\n      'enumerable': true,\n      'value': value,\n      'writable': true\n    });\n  } else {\n    object[key] = value;\n  }\n}\n\nexport default baseAssignValue;\n","import Stack from './_Stack.js';\nimport arrayEach from './_arrayEach.js';\nimport assignValue from './_assignValue.js';\nimport baseAssign from './_baseAssign.js';\nimport baseAssignIn from './_baseAssignIn.js';\nimport cloneBuffer from './_cloneBuffer.js';\nimport copyArray from './_copyArray.js';\nimport copySymbols from './_copySymbols.js';\nimport copySymbolsIn from './_copySymbolsIn.js';\nimport getAllKeys from './_getAllKeys.js';\nimport getAllKeysIn from './_getAllKeysIn.js';\nimport getTag from './_getTag.js';\nimport initCloneArray from './_initCloneArray.js';\nimport initCloneByTag from './_initCloneByTag.js';\nimport initCloneObject from './_initCloneObject.js';\nimport isArray from './isArray.js';\nimport isBuffer from './isBuffer.js';\nimport isMap from './isMap.js';\nimport isObject from './isObject.js';\nimport isSet from './isSet.js';\nimport keys from './keys.js';\nimport keysIn from './keysIn.js';\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_FLAT_FLAG = 2,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values supported by `_.clone`. */\nvar cloneableTags = {};\ncloneableTags[argsTag] = cloneableTags[arrayTag] =\ncloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] =\ncloneableTags[boolTag] = cloneableTags[dateTag] =\ncloneableTags[float32Tag] = cloneableTags[float64Tag] =\ncloneableTags[int8Tag] = cloneableTags[int16Tag] =\ncloneableTags[int32Tag] = cloneableTags[mapTag] =\ncloneableTags[numberTag] = cloneableTags[objectTag] =\ncloneableTags[regexpTag] = cloneableTags[setTag] =\ncloneableTags[stringTag] = cloneableTags[symbolTag] =\ncloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =\ncloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;\ncloneableTags[errorTag] = cloneableTags[funcTag] =\ncloneableTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.clone` and `_.cloneDeep` which tracks\n * traversed objects.\n *\n * @private\n * @param {*} value The value to clone.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Deep clone\n *  2 - Flatten inherited properties\n *  4 - Clone symbols\n * @param {Function} [customizer] The function to customize cloning.\n * @param {string} [key] The key of `value`.\n * @param {Object} [object] The parent object of `value`.\n * @param {Object} [stack] Tracks traversed objects and their clone counterparts.\n * @returns {*} Returns the cloned value.\n */\nfunction baseClone(value, bitmask, customizer, key, object, stack) {\n  var result,\n      isDeep = bitmask & CLONE_DEEP_FLAG,\n      isFlat = bitmask & CLONE_FLAT_FLAG,\n      isFull = bitmask & CLONE_SYMBOLS_FLAG;\n\n  if (customizer) {\n    result = object ? customizer(value, key, object, stack) : customizer(value);\n  }\n  if (result !== undefined) {\n    return result;\n  }\n  if (!isObject(value)) {\n    return value;\n  }\n  var isArr = isArray(value);\n  if (isArr) {\n    result = initCloneArray(value);\n    if (!isDeep) {\n      return copyArray(value, result);\n    }\n  } else {\n    var tag = getTag(value),\n        isFunc = tag == funcTag || tag == genTag;\n\n    if (isBuffer(value)) {\n      return cloneBuffer(value, isDeep);\n    }\n    if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n      result = (isFlat || isFunc) ? {} : initCloneObject(value);\n      if (!isDeep) {\n        return isFlat\n          ? copySymbolsIn(value, baseAssignIn(result, value))\n          : copySymbols(value, baseAssign(result, value));\n      }\n    } else {\n      if (!cloneableTags[tag]) {\n        return object ? value : {};\n      }\n      result = initCloneByTag(value, tag, isDeep);\n    }\n  }\n  // Check for circular references and return its corresponding clone.\n  stack || (stack = new Stack);\n  var stacked = stack.get(value);\n  if (stacked) {\n    return stacked;\n  }\n  stack.set(value, result);\n\n  if (isSet(value)) {\n    value.forEach(function(subValue) {\n      result.add(baseClone(subValue, bitmask, customizer, subValue, value, stack));\n    });\n  } else if (isMap(value)) {\n    value.forEach(function(subValue, key) {\n      result.set(key, baseClone(subValue, bitmask, customizer, key, value, stack));\n    });\n  }\n\n  var keysFunc = isFull\n    ? (isFlat ? getAllKeysIn : getAllKeys)\n    : (isFlat ? keysIn : keys);\n\n  var props = isArr ? undefined : keysFunc(value);\n  arrayEach(props || value, function(subValue, key) {\n    if (props) {\n      key = subValue;\n      subValue = value[key];\n    }\n    // Recursively populate clone (susceptible to call stack limits).\n    assignValue(result, key, baseClone(subValue, bitmask, customizer, key, value, stack));\n  });\n  return result;\n}\n\nexport default baseClone;\n","import isObject from './isObject.js';\n\n/** Built-in value references. */\nvar objectCreate = Object.create;\n\n/**\n * The base implementation of `_.create` without support for assigning\n * properties to the created object.\n *\n * @private\n * @param {Object} proto The object to inherit from.\n * @returns {Object} Returns the new object.\n */\nvar baseCreate = (function() {\n  function object() {}\n  return function(proto) {\n    if (!isObject(proto)) {\n      return {};\n    }\n    if (objectCreate) {\n      return objectCreate(proto);\n    }\n    object.prototype = proto;\n    var result = new object;\n    object.prototype = undefined;\n    return result;\n  };\n}());\n\nexport default baseCreate;\n","import createBaseFor from './_createBaseFor.js';\n\n/**\n * The base implementation of `baseForOwn` which iterates over `object`\n * properties returned by `keysFunc` and invokes `iteratee` for each property.\n * Iteratee functions may exit iteration early by explicitly returning `false`.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @returns {Object} Returns `object`.\n */\nvar baseFor = createBaseFor();\n\nexport default baseFor;\n","import arrayPush from './_arrayPush.js';\nimport isArray from './isArray.js';\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\nexport default baseGetAllKeys;\n","import Symbol from './_Symbol.js';\nimport getRawTag from './_getRawTag.js';\nimport objectToString from './_objectToString.js';\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nexport default baseGetTag;\n","import baseGetTag from './_baseGetTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]';\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\nexport default baseIsArguments;\n","import getTag from './_getTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]';\n\n/**\n * The base implementation of `_.isMap` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n */\nfunction baseIsMap(value) {\n  return isObjectLike(value) && getTag(value) == mapTag;\n}\n\nexport default baseIsMap;\n","import isFunction from './isFunction.js';\nimport isMasked from './_isMasked.js';\nimport isObject from './isObject.js';\nimport toSource from './_toSource.js';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\nexport default baseIsNative;\n","import getTag from './_getTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar setTag = '[object Set]';\n\n/**\n * The base implementation of `_.isSet` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n */\nfunction baseIsSet(value) {\n  return isObjectLike(value) && getTag(value) == setTag;\n}\n\nexport default baseIsSet;\n","import baseGetTag from './_baseGetTag.js';\nimport isLength from './isLength.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\nexport default baseIsTypedArray;\n","import isPrototype from './_isPrototype.js';\nimport nativeKeys from './_nativeKeys.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default baseKeys;\n","import isObject from './isObject.js';\nimport isPrototype from './_isPrototype.js';\nimport nativeKeysIn from './_nativeKeysIn.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keysIn` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeysIn(object) {\n  if (!isObject(object)) {\n    return nativeKeysIn(object);\n  }\n  var isProto = isPrototype(object),\n      result = [];\n\n  for (var key in object) {\n    if (!(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default baseKeysIn;\n","import Stack from './_Stack.js';\nimport assignMergeValue from './_assignMergeValue.js';\nimport baseFor from './_baseFor.js';\nimport baseMergeDeep from './_baseMergeDeep.js';\nimport isObject from './isObject.js';\nimport keysIn from './keysIn.js';\nimport safeGet from './_safeGet.js';\n\n/**\n * The base implementation of `_.merge` without support for multiple sources.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @param {number} srcIndex The index of `source`.\n * @param {Function} [customizer] The function to customize merged values.\n * @param {Object} [stack] Tracks traversed source values and their merged\n *  counterparts.\n */\nfunction baseMerge(object, source, srcIndex, customizer, stack) {\n  if (object === source) {\n    return;\n  }\n  baseFor(source, function(srcValue, key) {\n    stack || (stack = new Stack);\n    if (isObject(srcValue)) {\n      baseMergeDeep(object, source, key, srcIndex, baseMerge, customizer, stack);\n    }\n    else {\n      var newValue = customizer\n        ? customizer(safeGet(object, key), srcValue, (key + ''), object, source, stack)\n        : undefined;\n\n      if (newValue === undefined) {\n        newValue = srcValue;\n      }\n      assignMergeValue(object, key, newValue);\n    }\n  }, keysIn);\n}\n\nexport default baseMerge;\n","import assignMergeValue from './_assignMergeValue.js';\nimport cloneBuffer from './_cloneBuffer.js';\nimport cloneTypedArray from './_cloneTypedArray.js';\nimport copyArray from './_copyArray.js';\nimport initCloneObject from './_initCloneObject.js';\nimport isArguments from './isArguments.js';\nimport isArray from './isArray.js';\nimport isArrayLikeObject from './isArrayLikeObject.js';\nimport isBuffer from './isBuffer.js';\nimport isFunction from './isFunction.js';\nimport isObject from './isObject.js';\nimport isPlainObject from './isPlainObject.js';\nimport isTypedArray from './isTypedArray.js';\nimport safeGet from './_safeGet.js';\nimport toPlainObject from './toPlainObject.js';\n\n/**\n * A specialized version of `baseMerge` for arrays and objects which performs\n * deep merges and tracks traversed objects enabling objects with circular\n * references to be merged.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @param {string} key The key of the value to merge.\n * @param {number} srcIndex The index of `source`.\n * @param {Function} mergeFunc The function to merge values.\n * @param {Function} [customizer] The function to customize assigned values.\n * @param {Object} [stack] Tracks traversed source values and their merged\n *  counterparts.\n */\nfunction baseMergeDeep(object, source, key, srcIndex, mergeFunc, customizer, stack) {\n  var objValue = safeGet(object, key),\n      srcValue = safeGet(source, key),\n      stacked = stack.get(srcValue);\n\n  if (stacked) {\n    assignMergeValue(object, key, stacked);\n    return;\n  }\n  var newValue = customizer\n    ? customizer(objValue, srcValue, (key + ''), object, source, stack)\n    : undefined;\n\n  var isCommon = newValue === undefined;\n\n  if (isCommon) {\n    var isArr = isArray(srcValue),\n        isBuff = !isArr && isBuffer(srcValue),\n        isTyped = !isArr && !isBuff && isTypedArray(srcValue);\n\n    newValue = srcValue;\n    if (isArr || isBuff || isTyped) {\n      if (isArray(objValue)) {\n        newValue = objValue;\n      }\n      else if (isArrayLikeObject(objValue)) {\n        newValue = copyArray(objValue);\n      }\n      else if (isBuff) {\n        isCommon = false;\n        newValue = cloneBuffer(srcValue, true);\n      }\n      else if (isTyped) {\n        isCommon = false;\n        newValue = cloneTypedArray(srcValue, true);\n      }\n      else {\n        newValue = [];\n      }\n    }\n    else if (isPlainObject(srcValue) || isArguments(srcValue)) {\n      newValue = objValue;\n      if (isArguments(objValue)) {\n        newValue = toPlainObject(objValue);\n      }\n      else if (!isObject(objValue) || isFunction(objValue)) {\n        newValue = initCloneObject(srcValue);\n      }\n    }\n    else {\n      isCommon = false;\n    }\n  }\n  if (isCommon) {\n    // Recursively merge objects and arrays (susceptible to call stack limits).\n    stack.set(srcValue, newValue);\n    mergeFunc(newValue, srcValue, srcIndex, customizer, stack);\n    stack['delete'](srcValue);\n  }\n  assignMergeValue(object, key, newValue);\n}\n\nexport default baseMergeDeep;\n","import identity from './identity.js';\nimport overRest from './_overRest.js';\nimport setToString from './_setToString.js';\n\n/**\n * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n */\nfunction baseRest(func, start) {\n  return setToString(overRest(func, start, identity), func + '');\n}\n\nexport default baseRest;\n","import constant from './constant.js';\nimport defineProperty from './_defineProperty.js';\nimport identity from './identity.js';\n\n/**\n * The base implementation of `setToString` without support for hot loop shorting.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar baseSetToString = !defineProperty ? identity : function(func, string) {\n  return defineProperty(func, 'toString', {\n    'configurable': true,\n    'enumerable': false,\n    'value': constant(string),\n    'writable': true\n  });\n};\n\nexport default baseSetToString;\n","/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\nexport default baseTimes;\n","/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\nexport default baseUnary;\n","import Uint8Array from './_Uint8Array.js';\n\n/**\n * Creates a clone of `arrayBuffer`.\n *\n * @private\n * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n * @returns {ArrayBuffer} Returns the cloned array buffer.\n */\nfunction cloneArrayBuffer(arrayBuffer) {\n  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n  new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n  return result;\n}\n\nexport default cloneArrayBuffer;\n","import root from './_root.js';\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    allocUnsafe = Buffer ? Buffer.allocUnsafe : undefined;\n\n/**\n * Creates a clone of  `buffer`.\n *\n * @private\n * @param {Buffer} buffer The buffer to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Buffer} Returns the cloned buffer.\n */\nfunction cloneBuffer(buffer, isDeep) {\n  if (isDeep) {\n    return buffer.slice();\n  }\n  var length = buffer.length,\n      result = allocUnsafe ? allocUnsafe(length) : new buffer.constructor(length);\n\n  buffer.copy(result);\n  return result;\n}\n\nexport default cloneBuffer;\n","import cloneArrayBuffer from './_cloneArrayBuffer.js';\n\n/**\n * Creates a clone of `dataView`.\n *\n * @private\n * @param {Object} dataView The data view to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned data view.\n */\nfunction cloneDataView(dataView, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;\n  return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);\n}\n\nexport default cloneDataView;\n","/** Used to match `RegExp` flags from their coerced string values. */\nvar reFlags = /\\w*$/;\n\n/**\n * Creates a clone of `regexp`.\n *\n * @private\n * @param {Object} regexp The regexp to clone.\n * @returns {Object} Returns the cloned regexp.\n */\nfunction cloneRegExp(regexp) {\n  var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));\n  result.lastIndex = regexp.lastIndex;\n  return result;\n}\n\nexport default cloneRegExp;\n","import Symbol from './_Symbol.js';\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a clone of the `symbol` object.\n *\n * @private\n * @param {Object} symbol The symbol object to clone.\n * @returns {Object} Returns the cloned symbol object.\n */\nfunction cloneSymbol(symbol) {\n  return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};\n}\n\nexport default cloneSymbol;\n","import cloneArrayBuffer from './_cloneArrayBuffer.js';\n\n/**\n * Creates a clone of `typedArray`.\n *\n * @private\n * @param {Object} typedArray The typed array to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned typed array.\n */\nfunction cloneTypedArray(typedArray, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n}\n\nexport default cloneTypedArray;\n","/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\nexport default copyArray;\n","import assignValue from './_assignValue.js';\nimport baseAssignValue from './_baseAssignValue.js';\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  var isNew = !object;\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    if (newValue === undefined) {\n      newValue = source[key];\n    }\n    if (isNew) {\n      baseAssignValue(object, key, newValue);\n    } else {\n      assignValue(object, key, newValue);\n    }\n  }\n  return object;\n}\n\nexport default copyObject;\n","import copyObject from './_copyObject.js';\nimport getSymbols from './_getSymbols.js';\n\n/**\n * Copies own symbols of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbols(source, object) {\n  return copyObject(source, getSymbols(source), object);\n}\n\nexport default copySymbols;\n","import copyObject from './_copyObject.js';\nimport getSymbolsIn from './_getSymbolsIn.js';\n\n/**\n * Copies own and inherited symbols of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbolsIn(source, object) {\n  return copyObject(source, getSymbolsIn(source), object);\n}\n\nexport default copySymbolsIn;\n","import root from './_root.js';\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\nexport default coreJsData;\n","import baseRest from './_baseRest.js';\nimport isIterateeCall from './_isIterateeCall.js';\n\n/**\n * Creates a function like `_.assign`.\n *\n * @private\n * @param {Function} assigner The function to assign values.\n * @returns {Function} Returns the new assigner function.\n */\nfunction createAssigner(assigner) {\n  return baseRest(function(object, sources) {\n    var index = -1,\n        length = sources.length,\n        customizer = length > 1 ? sources[length - 1] : undefined,\n        guard = length > 2 ? sources[2] : undefined;\n\n    customizer = (assigner.length > 3 && typeof customizer == 'function')\n      ? (length--, customizer)\n      : undefined;\n\n    if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n      customizer = length < 3 ? undefined : customizer;\n      length = 1;\n    }\n    object = Object(object);\n    while (++index < length) {\n      var source = sources[index];\n      if (source) {\n        assigner(object, source, index, customizer);\n      }\n    }\n    return object;\n  });\n}\n\nexport default createAssigner;\n","/**\n * Creates a base function for methods like `_.forIn` and `_.forOwn`.\n *\n * @private\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseFor(fromRight) {\n  return function(object, iteratee, keysFunc) {\n    var index = -1,\n        iterable = Object(object),\n        props = keysFunc(object),\n        length = props.length;\n\n    while (length--) {\n      var key = props[fromRight ? length : ++index];\n      if (iteratee(iterable[key], key, iterable) === false) {\n        break;\n      }\n    }\n    return object;\n  };\n}\n\nexport default createBaseFor;\n","import getNative from './_getNative.js';\n\nvar defineProperty = (function() {\n  try {\n    var func = getNative(Object, 'defineProperty');\n    func({}, '', {});\n    return func;\n  } catch (e) {}\n}());\n\nexport default defineProperty;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nexport default freeGlobal;\n","import baseGetAllKeys from './_baseGetAllKeys.js';\nimport getSymbols from './_getSymbols.js';\nimport keys from './keys.js';\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\nexport default getAllKeys;\n","import baseGetAllKeys from './_baseGetAllKeys.js';\nimport getSymbolsIn from './_getSymbolsIn.js';\nimport keysIn from './keysIn.js';\n\n/**\n * Creates an array of own and inherited enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeysIn(object) {\n  return baseGetAllKeys(object, keysIn, getSymbolsIn);\n}\n\nexport default getAllKeysIn;\n","import isKeyable from './_isKeyable.js';\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\nexport default getMapData;\n","import baseIsNative from './_baseIsNative.js';\nimport getValue from './_getValue.js';\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\nexport default getNative;\n","import overArg from './_overArg.js';\n\n/** Built-in value references. */\nvar getPrototype = overArg(Object.getPrototypeOf, Object);\n\nexport default getPrototype;\n","import Symbol from './_Symbol.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nexport default getRawTag;\n","import arrayFilter from './_arrayFilter.js';\nimport stubArray from './stubArray.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = !nativeGetSymbols ? stubArray : function(object) {\n  if (object == null) {\n    return [];\n  }\n  object = Object(object);\n  return arrayFilter(nativeGetSymbols(object), function(symbol) {\n    return propertyIsEnumerable.call(object, symbol);\n  });\n};\n\nexport default getSymbols;\n","import arrayPush from './_arrayPush.js';\nimport getPrototype from './_getPrototype.js';\nimport getSymbols from './_getSymbols.js';\nimport stubArray from './stubArray.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own and inherited enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbolsIn = !nativeGetSymbols ? stubArray : function(object) {\n  var result = [];\n  while (object) {\n    arrayPush(result, getSymbols(object));\n    object = getPrototype(object);\n  }\n  return result;\n};\n\nexport default getSymbolsIn;\n","import DataView from './_DataView.js';\nimport Map from './_Map.js';\nimport Promise from './_Promise.js';\nimport Set from './_Set.js';\nimport WeakMap from './_WeakMap.js';\nimport baseGetTag from './_baseGetTag.js';\nimport toSource from './_toSource.js';\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    setTag = '[object Set]',\n    weakMapTag = '[object WeakMap]';\n\nvar dataViewTag = '[object DataView]';\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = baseGetTag(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : '';\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\nexport default getTag;\n","/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\nexport default getValue;\n","import nativeCreate from './_nativeCreate.js';\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  this.size = 0;\n}\n\nexport default hashClear;\n","/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nexport default hashDelete;\n","import nativeCreate from './_nativeCreate.js';\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\nexport default hashGet;\n","import nativeCreate from './_nativeCreate.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n}\n\nexport default hashHas;\n","import nativeCreate from './_nativeCreate.js';\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\nexport default hashSet;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Initializes an array clone.\n *\n * @private\n * @param {Array} array The array to clone.\n * @returns {Array} Returns the initialized clone.\n */\nfunction initCloneArray(array) {\n  var length = array.length,\n      result = new array.constructor(length);\n\n  // Add properties assigned by `RegExp#exec`.\n  if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n    result.index = array.index;\n    result.input = array.input;\n  }\n  return result;\n}\n\nexport default initCloneArray;\n","import cloneArrayBuffer from './_cloneArrayBuffer.js';\nimport cloneDataView from './_cloneDataView.js';\nimport cloneRegExp from './_cloneRegExp.js';\nimport cloneSymbol from './_cloneSymbol.js';\nimport cloneTypedArray from './_cloneTypedArray.js';\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Initializes an object clone based on its `toStringTag`.\n *\n * **Note:** This function only supports cloning values with tags of\n * `Boolean`, `Date`, `Error`, `Map`, `Number`, `RegExp`, `Set`, or `String`.\n *\n * @private\n * @param {Object} object The object to clone.\n * @param {string} tag The `toStringTag` of the object to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneByTag(object, tag, isDeep) {\n  var Ctor = object.constructor;\n  switch (tag) {\n    case arrayBufferTag:\n      return cloneArrayBuffer(object);\n\n    case boolTag:\n    case dateTag:\n      return new Ctor(+object);\n\n    case dataViewTag:\n      return cloneDataView(object, isDeep);\n\n    case float32Tag: case float64Tag:\n    case int8Tag: case int16Tag: case int32Tag:\n    case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\n      return cloneTypedArray(object, isDeep);\n\n    case mapTag:\n      return new Ctor;\n\n    case numberTag:\n    case stringTag:\n      return new Ctor(object);\n\n    case regexpTag:\n      return cloneRegExp(object);\n\n    case setTag:\n      return new Ctor;\n\n    case symbolTag:\n      return cloneSymbol(object);\n  }\n}\n\nexport default initCloneByTag;\n","import baseCreate from './_baseCreate.js';\nimport getPrototype from './_getPrototype.js';\nimport isPrototype from './_isPrototype.js';\n\n/**\n * Initializes an object clone.\n *\n * @private\n * @param {Object} object The object to clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneObject(object) {\n  return (typeof object.constructor == 'function' && !isPrototype(object))\n    ? baseCreate(getPrototype(object))\n    : {};\n}\n\nexport default initCloneObject;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  var type = typeof value;\n  length = length == null ? MAX_SAFE_INTEGER : length;\n\n  return !!length &&\n    (type == 'number' ||\n      (type != 'symbol' && reIsUint.test(value))) &&\n        (value > -1 && value % 1 == 0 && value < length);\n}\n\nexport default isIndex;\n","import eq from './eq.js';\nimport isArrayLike from './isArrayLike.js';\nimport isIndex from './_isIndex.js';\nimport isObject from './isObject.js';\n\n/**\n * Checks if the given arguments are from an iteratee call.\n *\n * @private\n * @param {*} value The potential iteratee value argument.\n * @param {*} index The potential iteratee index or key argument.\n * @param {*} object The potential iteratee object argument.\n * @returns {boolean} Returns `true` if the arguments are from an iteratee call,\n *  else `false`.\n */\nfunction isIterateeCall(value, index, object) {\n  if (!isObject(object)) {\n    return false;\n  }\n  var type = typeof index;\n  if (type == 'number'\n        ? (isArrayLike(object) && isIndex(index, object.length))\n        : (type == 'string' && index in object)\n      ) {\n    return eq(object[index], value);\n  }\n  return false;\n}\n\nexport default isIterateeCall;\n","/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\nexport default isKeyable;\n","import coreJsData from './_coreJsData.js';\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\nexport default isMasked;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\nexport default isPrototype;\n","/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\nexport default listCacheClear;\n","import assocIndexOf from './_assocIndexOf.js';\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype;\n\n/** Built-in value references. */\nvar splice = arrayProto.splice;\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\nexport default listCacheDelete;\n","import assocIndexOf from './_assocIndexOf.js';\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\nexport default listCacheGet;\n","import assocIndexOf from './_assocIndexOf.js';\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\nexport default listCacheHas;\n","import assocIndexOf from './_assocIndexOf.js';\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\nexport default listCacheSet;\n","import Hash from './_Hash.js';\nimport ListCache from './_ListCache.js';\nimport Map from './_Map.js';\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\nexport default mapCacheClear;\n","import getMapData from './_getMapData.js';\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nexport default mapCacheDelete;\n","import getMapData from './_getMapData.js';\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\nexport default mapCacheGet;\n","import getMapData from './_getMapData.js';\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\nexport default mapCacheHas;\n","import getMapData from './_getMapData.js';\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\nexport default mapCacheSet;\n","import getNative from './_getNative.js';\n\n/* Built-in method references that are verified to be native. */\nvar nativeCreate = getNative(Object, 'create');\n\nexport default nativeCreate;\n","import overArg from './_overArg.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = overArg(Object.keys, Object);\n\nexport default nativeKeys;\n","/**\n * This function is like\n * [`Object.keys`](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * except that it includes inherited enumerable properties.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction nativeKeysIn(object) {\n  var result = [];\n  if (object != null) {\n    for (var key in Object(object)) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default nativeKeysIn;\n","import freeGlobal from './_freeGlobal.js';\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    // Use `util.types` for Node.js 10+.\n    var types = freeModule && freeModule.require && freeModule.require('util').types;\n\n    if (types) {\n      return types;\n    }\n\n    // Legacy `process.binding('util')` for Node.js < 10.\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\nexport default nodeUtil;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nexport default objectToString;\n","/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\nexport default overArg;\n","import apply from './_apply.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * A specialized version of `baseRest` which transforms the rest array.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @param {Function} transform The rest array transform.\n * @returns {Function} Returns the new function.\n */\nfunction overRest(func, start, transform) {\n  start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    index = -1;\n    var otherArgs = Array(start + 1);\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = transform(array);\n    return apply(func, this, otherArgs);\n  };\n}\n\nexport default overRest;\n","import freeGlobal from './_freeGlobal.js';\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nexport default root;\n","/**\n * Gets the value at `key`, unless `key` is \"__proto__\" or \"constructor\".\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction safeGet(object, key) {\n  if (key === 'constructor' && typeof object[key] === 'function') {\n    return;\n  }\n\n  if (key == '__proto__') {\n    return;\n  }\n\n  return object[key];\n}\n\nexport default safeGet;\n","import baseSetToString from './_baseSetToString.js';\nimport shortOut from './_shortOut.js';\n\n/**\n * Sets the `toString` method of `func` to return `string`.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar setToString = shortOut(baseSetToString);\n\nexport default setToString;\n","/** Used to detect hot functions by number of calls within a span of milliseconds. */\nvar HOT_COUNT = 800,\n    HOT_SPAN = 16;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeNow = Date.now;\n\n/**\n * Creates a function that'll short out and invoke `identity` instead\n * of `func` when it's called `HOT_COUNT` or more times in `HOT_SPAN`\n * milliseconds.\n *\n * @private\n * @param {Function} func The function to restrict.\n * @returns {Function} Returns the new shortable function.\n */\nfunction shortOut(func) {\n  var count = 0,\n      lastCalled = 0;\n\n  return function() {\n    var stamp = nativeNow(),\n        remaining = HOT_SPAN - (stamp - lastCalled);\n\n    lastCalled = stamp;\n    if (remaining > 0) {\n      if (++count >= HOT_COUNT) {\n        return arguments[0];\n      }\n    } else {\n      count = 0;\n    }\n    return func.apply(undefined, arguments);\n  };\n}\n\nexport default shortOut;\n","import ListCache from './_ListCache.js';\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n  this.size = 0;\n}\n\nexport default stackClear;\n","/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  var data = this.__data__,\n      result = data['delete'](key);\n\n  this.size = data.size;\n  return result;\n}\n\nexport default stackDelete;\n","/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\nexport default stackGet;\n","/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\nexport default stackHas;\n","import ListCache from './_ListCache.js';\nimport Map from './_Map.js';\nimport MapCache from './_MapCache.js';\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var data = this.__data__;\n  if (data instanceof ListCache) {\n    var pairs = data.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      this.size = ++data.size;\n      return this;\n    }\n    data = this.__data__ = new MapCache(pairs);\n  }\n  data.set(key, value);\n  this.size = data.size;\n  return this;\n}\n\nexport default stackSet;\n","/** Used for built-in method references. */\nvar funcProto = Function.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\nexport default toSource;\n","import baseClone from './_baseClone.js';\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_SYMBOLS_FLAG = 4;\n\n/**\n * Creates a shallow clone of `value`.\n *\n * **Note:** This method is loosely based on the\n * [structured clone algorithm](https://mdn.io/Structured_clone_algorithm)\n * and supports cloning arrays, array buffers, booleans, date objects, maps,\n * numbers, `Object` objects, regexes, sets, strings, symbols, and typed\n * arrays. The own enumerable properties of `arguments` objects are cloned\n * as plain objects. An empty object is returned for uncloneable values such\n * as error objects, functions, DOM nodes, and WeakMaps.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to clone.\n * @returns {*} Returns the cloned value.\n * @see _.cloneDeep\n * @example\n *\n * var objects = [{ 'a': 1 }, { 'b': 2 }];\n *\n * var shallow = _.clone(objects);\n * console.log(shallow[0] === objects[0]);\n * // => true\n */\nfunction clone(value) {\n  return baseClone(value, CLONE_SYMBOLS_FLAG);\n}\n\nexport default clone;\n","/**\n * Creates a function that returns `value`.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {*} value The value to return from the new function.\n * @returns {Function} Returns the new constant function.\n * @example\n *\n * var objects = _.times(2, _.constant({ 'a': 1 }));\n *\n * console.log(objects);\n * // => [{ 'a': 1 }, { 'a': 1 }]\n *\n * console.log(objects[0] === objects[1]);\n * // => true\n */\nfunction constant(value) {\n  return function() {\n    return value;\n  };\n}\n\nexport default constant;\n","/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\nexport default eq;\n","/**\n * This method returns the first argument it receives.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'a': 1 };\n *\n * console.log(_.identity(object) === object);\n * // => true\n */\nfunction identity(value) {\n  return value;\n}\n\nexport default identity;\n","import baseIsArguments from './_baseIsArguments.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\nexport default isArguments;\n","/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nexport default isArray;\n","import isFunction from './isFunction.js';\nimport isLength from './isLength.js';\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\nexport default isArrayLike;\n","import isArrayLike from './isArrayLike.js';\nimport isObjectLike from './isObjectLike.js';\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\nexport default isArrayLikeObject;\n","import root from './_root.js';\nimport stubFalse from './stubFalse.js';\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined;\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\nexport default isBuffer;\n","import baseGetTag from './_baseGetTag.js';\nimport isObject from './isObject.js';\n\n/** `Object#toString` result references. */\nvar asyncTag = '[object AsyncFunction]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    proxyTag = '[object Proxy]';\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\nexport default isFunction;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\nexport default isLength;\n","import baseIsMap from './_baseIsMap.js';\nimport baseUnary from './_baseUnary.js';\nimport nodeUtil from './_nodeUtil.js';\n\n/* Node.js helper references. */\nvar nodeIsMap = nodeUtil && nodeUtil.isMap;\n\n/**\n * Checks if `value` is classified as a `Map` object.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n * @example\n *\n * _.isMap(new Map);\n * // => true\n *\n * _.isMap(new WeakMap);\n * // => false\n */\nvar isMap = nodeIsMap ? baseUnary(nodeIsMap) : baseIsMap;\n\nexport default isMap;\n","import baseGetTag from './_baseGetTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar numberTag = '[object Number]';\n\n/**\n * Checks if `value` is classified as a `Number` primitive or object.\n *\n * **Note:** To exclude `Infinity`, `-Infinity`, and `NaN`, which are\n * classified as numbers, use the `_.isFinite` method.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a number, else `false`.\n * @example\n *\n * _.isNumber(3);\n * // => true\n *\n * _.isNumber(Number.MIN_VALUE);\n * // => true\n *\n * _.isNumber(Infinity);\n * // => true\n *\n * _.isNumber('3');\n * // => false\n */\nfunction isNumber(value) {\n  return typeof value == 'number' ||\n    (isObjectLike(value) && baseGetTag(value) == numberTag);\n}\n\nexport default isNumber;\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nexport default isObject;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nexport default isObjectLike;\n","import baseGetTag from './_baseGetTag.js';\nimport getPrototype from './_getPrototype.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to infer the `Object` constructor. */\nvar objectCtorString = funcToString.call(Object);\n\n/**\n * Checks if `value` is a plain object, that is, an object created by the\n * `Object` constructor or one with a `[[Prototype]]` of `null`.\n *\n * @static\n * @memberOf _\n * @since 0.8.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * _.isPlainObject(new Foo);\n * // => false\n *\n * _.isPlainObject([1, 2, 3]);\n * // => false\n *\n * _.isPlainObject({ 'x': 0, 'y': 0 });\n * // => true\n *\n * _.isPlainObject(Object.create(null));\n * // => true\n */\nfunction isPlainObject(value) {\n  if (!isObjectLike(value) || baseGetTag(value) != objectTag) {\n    return false;\n  }\n  var proto = getPrototype(value);\n  if (proto === null) {\n    return true;\n  }\n  var Ctor = hasOwnProperty.call(proto, 'constructor') && proto.constructor;\n  return typeof Ctor == 'function' && Ctor instanceof Ctor &&\n    funcToString.call(Ctor) == objectCtorString;\n}\n\nexport default isPlainObject;\n","import baseIsSet from './_baseIsSet.js';\nimport baseUnary from './_baseUnary.js';\nimport nodeUtil from './_nodeUtil.js';\n\n/* Node.js helper references. */\nvar nodeIsSet = nodeUtil && nodeUtil.isSet;\n\n/**\n * Checks if `value` is classified as a `Set` object.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n * @example\n *\n * _.isSet(new Set);\n * // => true\n *\n * _.isSet(new WeakSet);\n * // => false\n */\nvar isSet = nodeIsSet ? baseUnary(nodeIsSet) : baseIsSet;\n\nexport default isSet;\n","import baseIsTypedArray from './_baseIsTypedArray.js';\nimport baseUnary from './_baseUnary.js';\nimport nodeUtil from './_nodeUtil.js';\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\nexport default isTypedArray;\n","import arrayLikeKeys from './_arrayLikeKeys.js';\nimport baseKeys from './_baseKeys.js';\nimport isArrayLike from './isArrayLike.js';\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\nexport default keys;\n","import arrayLikeKeys from './_arrayLikeKeys.js';\nimport baseKeysIn from './_baseKeysIn.js';\nimport isArrayLike from './isArrayLike.js';\n\n/**\n * Creates an array of the own and inherited enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keysIn(new Foo);\n * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n */\nfunction keysIn(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);\n}\n\nexport default keysIn;\n","import baseMerge from './_baseMerge.js';\nimport createAssigner from './_createAssigner.js';\n\n/**\n * This method is like `_.assign` except that it recursively merges own and\n * inherited enumerable string keyed properties of source objects into the\n * destination object. Source properties that resolve to `undefined` are\n * skipped if a destination value exists. Array and plain object properties\n * are merged recursively. Other objects and value types are overridden by\n * assignment. Source objects are applied from left to right. Subsequent\n * sources overwrite property assignments of previous sources.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 0.5.0\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @example\n *\n * var object = {\n *   'a': [{ 'b': 2 }, { 'd': 4 }]\n * };\n *\n * var other = {\n *   'a': [{ 'c': 3 }, { 'e': 5 }]\n * };\n *\n * _.merge(object, other);\n * // => { 'a': [{ 'b': 2, 'c': 3 }, { 'd': 4, 'e': 5 }] }\n */\nvar merge = createAssigner(function(object, source, srcIndex) {\n  baseMerge(object, source, srcIndex);\n});\n\nexport default merge;\n","/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\nexport default stubArray;\n","/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nexport default stubFalse;\n","import copyObject from './_copyObject.js';\nimport keysIn from './keysIn.js';\n\n/**\n * Converts `value` to a plain object flattening inherited enumerable string\n * keyed properties of `value` to own properties of the plain object.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {Object} Returns the converted plain object.\n * @example\n *\n * function Foo() {\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.assign({ 'a': 1 }, new Foo);\n * // => { 'a': 1, 'b': 2 }\n *\n * _.assign({ 'a': 1 }, _.toPlainObject(new Foo));\n * // => { 'a': 1, 'b': 2, 'c': 3 }\n */\nfunction toPlainObject(value) {\n  return copyObject(value, keysIn(value));\n}\n\nexport default toPlainObject;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.b = document.baseURI || self.location.href;\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t\"main\": 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n// no on chunks loaded\n\n// no jsonp function","import domToImage from 'dom-to-image'\nimport { saveAs } from 'file-saver'\nimport MosaicBrush from './MosaicBrush.js'\nimport ScreenshotFabricEvent from './screenshot-fabric-event.js'\nimport ScreenshotTool from './screenshot-tool'\nimport { fabric } from 'fabric'\nimport {\n  clearNode,\n  addDragEvent,\n  dataURLToBlob,\n  log,\n  error\n} from './utils.js'\nimport { clone, isNumber, merge } from 'lodash-es'\nimport './screenshot.scss'\n\nconst { Canvas, Textbox, PencilBrush, Rect, Ellipse, Path, Line, Group } = fabric\n\nexport default class Screenshot {\n  #child = {}\n  #events = {}\n  #infos = {\n    status: 'pending'\n  }\n\n  #tools = {}\n  #destroyed = false\n\n  #options = {\n    autoWelt: 20,\n    autoFull: false,\n    okColor: undefined,\n    cancelColor: undefined,\n    btnColor: undefined,\n    btnSize: undefined\n  }\n\n  /**\n   * @param {HTMLElement} node 容器\n   * @param {HTMLImageElement|string} img 底图\n   * @param {function} [destroyCallback] destroy回调\n   * @param {function} [readyCallback] ready回调\n   * @param {number|undefined} [autoWelt] 自动贴边距离\n   * @param {boolean|undefined} [autoFull] 自动截全屏\n   * @param {string|undefined} [okColor] 确定按钮颜色\n   * @param {string|undefined} [cancelColor] 取消按钮颜色\n   * @param {string|undefined} [btnColor] 按钮颜色\n   * @param {string|undefined} [btnSize] 按钮大小\n   */\n  constructor ({\n    node,\n    img,\n    destroyCallback = () => {},\n    readyCallback = () => {},\n    autoWelt,\n    autoFull,\n    okColor,\n    cancelColor,\n    btnColor,\n    btnSize\n  } = {}) {\n    if (!(node instanceof window.HTMLElement)) {\n      throw new Error('node must be HTMLElement')\n    }\n    if (node.__SCREEN_SHOT_GENERATED__) {\n      throw new Error('node has been generated by Screenshot')\n    }\n\n    node.__SCREEN_SHOT_GENERATED__ = true\n\n    merge(this.#options, {\n      autoWelt,\n      autoFull,\n      okColor,\n      cancelColor,\n      btnColor,\n      btnSize\n    })\n\n    try {\n      log('Screenshot 初始化开始')\n      this.#initNode({\n        node,\n        img\n      })\n      this.#events.destroyCallback = destroyCallback\n      this.#events.readyCallback = readyCallback\n      this.#events.keyboardEvent = this.#keyboardEvent.bind(this)\n      document.addEventListener('keydown', this.#events.keyboardEvent)\n      if (this.#originImg.complete) {\n        this.#status = 'ready'\n      } else {\n        this.#status = 'waitForImg'\n      }\n    } catch (e) {\n      this.destroy()\n      error('Screenshot 初始化失败')\n      throw e\n    }\n  }\n\n  // region computed\n  get options () {\n    return this.#options\n  }\n\n  get status () {\n    return this.#status\n  }\n\n  get #status () {\n    return this.#infos.status || 'pending'\n  }\n\n  set #status (val) {\n    if (this.destroyed) {\n      return\n    }\n    this.#infos.status = val\n    if (val === 'ready') {\n      this.#events.readyCallback && this.#events.readyCallback()\n      if (this.#events.readyEvent && this.#events.readyEvent.length) {\n        for (const callback of this.#events.readyEvent) {\n          callback()\n        }\n      }\n      this.#events.readyEvent = []\n      log('Screenshot 初始化完成')\n    }\n  }\n\n  get destroyed () {\n    return this.#destroyed\n  }\n\n  get img () {\n    if (this.#canvas) {\n      const img = new window.Image()\n      img.src = this.#canvas.toDataURL()\n      return img\n    } else if (this.#originImg) {\n      const canvas = document.createElement('canvas')\n      canvas.width = this.#originImg.width\n      canvas.height = this.#originImg.height\n      const ctx = canvas.getContext('2d')\n      ctx.drawImage(this.#originImg, 0, 0, this.#originImg.naturalWidth, this.#originImg.naturalHeight, 0, 0, this.#originImg.width, this.#originImg.height)\n      const img = new window.Image()\n      img.src = canvas.toDataURL()\n      return img\n    } else {\n      return null\n    }\n  }\n\n  get canvas () {\n    return this.#canvas\n  }\n\n  get #snipInfo () {\n    return this.#infos.snipInfo || {}\n  }\n\n  set #snipInfo (val) {\n    this.#infos.snipInfo = merge(this.#infos.snipInfo, val)\n    val = this.#infos.snipInfo\n    const snipper = this.#snipper\n    const snipperBorderWidth = parseFloat(snipper.style.borderWidth)\n    snipper.style.width = val.width + 'px'\n    snipper.style.height = val.height + 'px'\n    snipper.style.transform = `matrix(1,0,0,1,${\n      val.left - snipperBorderWidth\n    },${val.top - snipperBorderWidth})`\n\n    const sizeinfo = this.#sizeinfo\n    sizeinfo.style.display = 'block'\n    if (val.top < 27) {\n      sizeinfo.style.top = '5px'\n    } else {\n      sizeinfo.style.top = '-27px'\n    }\n    sizeinfo.innerText = `${val.width} * ${val.height}`\n  }\n\n  get #node () {\n    return this.#child.node\n  }\n\n  set #node (val) {\n    if (val) {\n      this.#child.node = val\n    } else {\n      delete this.#child.node\n    }\n  }\n\n  get #container () {\n    return this.#child.container\n  }\n\n  set #container (val) {\n    if (this.#child.container) {\n      this.#child.container.remove()\n      delete this.#child.container\n    }\n    if (val) {\n      this.#child.container = val\n    }\n  }\n\n  get #originImg () {\n    return this.#child.originImg\n  }\n\n  set #originImg (val) {\n    if (this.#child.originImg) {\n      this.#child.originImg.remove()\n      delete this.#child.originImg\n    }\n    if (val) {\n      this.#child.originImg = val\n    }\n  }\n\n  get #snipper () {\n    return this.#child.snipper\n  }\n\n  set #snipper (val) {\n    if (this.#child.snipper) {\n      this.#child.snipper.remove()\n      delete this.#child.snipper\n    }\n    if (val) {\n      this.#child.snipper = val\n    }\n  }\n\n  get #resizer () {\n    return this.#child.resizer\n  }\n\n  set #resizer (val) {\n    if (this.#child.resizer) {\n      this.#child.resizer.remove()\n      delete this.#child.resizer\n    }\n    if (val) {\n      this.#child.resizer = val\n    }\n  }\n\n  get #toolbar () {\n    return this.#child.toolbar\n  }\n\n  set #toolbar (val) {\n    if (this.#child.toolbar) {\n      this.#child.toolbar.remove()\n      delete this.#child.toolbar\n    }\n    if (val) {\n      this.#child.toolbar = val\n    }\n  }\n\n  get #drawer () {\n    return this.#child.drawer\n  }\n\n  set #drawer (val) {\n    if (this.#child.drawer) {\n      this.#child.drawer.remove()\n      delete this.#child.drawer\n    }\n    if (val) {\n      this.#child.drawer = val\n    }\n  }\n\n  get #sizeinfo () {\n    return this.#child.sizeinfo\n  }\n\n  set #sizeinfo (val) {\n    if (this.#child.sizeinfo) {\n      this.#child.sizeinfo.remove()\n      delete this.#child.sizeinfo\n    }\n    if (val) {\n      this.#child.sizeinfo = val\n    }\n  }\n\n  get #canvas () {\n    return this.#infos.fabricDrawer || this.#drawer\n  }\n\n  get #hasActiveTool () {\n    let result = false\n    for (const name in this.#tools) {\n      if (this.#tools[name].active) {\n        result = true\n      }\n    }\n    return result\n  }\n  // endregion\n\n  destroy () {\n    if (this.#destroyed) {\n      return\n    }\n    clearNode(this.#child.node)\n    delete this.#child.node.__SCREEN_SHOT_GENERATED__\n    const destroyCallback = this.#events.destroyCallback\n    document.removeEventListener('keydown', this.#events.keyboardEvent)\n    this.#child = {}\n    this.#events = {}\n    this.#infos = {}\n    this.#tools = {}\n    this.#destroyed = true\n    destroyCallback && destroyCallback()\n  }\n\n  /**\n   * 删除事件\n   * @param e {KeyboardEvent} 鼠标事件\n   * @private\n   */\n  #keyboardEvent (e) {\n    if (e.repeat) {\n      return\n    }\n    if (e.key === 'Escape') {\n      this.destroy()\n      return\n    }\n    if (this.#infos.fabricDrawer && !this.#hasActiveTool) {\n      if (e.key === 'Delete' || e.key === 'Backspace') {\n        const tmp = this.#canvas.getActiveObject()\n        if (tmp && tmp.isEditing) {\n          return\n        }\n        const objects = tmp ? (tmp._objects ? tmp._objects : [tmp]) : null\n        if (objects) {\n          objects.forEach(object => {\n            if (object.group) {\n              this.#canvas.remove(object.group)\n              this.#canvas.remove(object)\n            } else {\n              this.#canvas.remove(object)\n            }\n          })\n          this.#canvas.discardActiveObject()\n          this.#canvas.requestRenderAll()\n        }\n      }\n    }\n  }\n\n  // region 初始化\n  #initNode ({ node, img }) {\n    this.#initContainer(node)\n    this.#initImage(img)\n    this.#initSnipper()\n  }\n\n  #initContainer (node) {\n    this.#node = node\n    clearNode(node)\n    const container = this.#container = document.createElement('div')\n    container.classList.add('screenshot')\n    node.append(container)\n    log('Screenshot 容器创建完成')\n  }\n\n  #initImage (img) {\n    const originImg = new window.Image()\n    originImg.setAttribute('crossOrigin', 'Anonymous')\n    originImg.addEventListener('load', () => {\n      if (this.#status === 'waitForImg') {\n        this.#status = 'ready'\n      }\n    }, false)\n    if (img instanceof window.HTMLImageElement) {\n      originImg.src = img.src\n    } else if (typeof img === 'string') {\n      originImg.src = img\n    } else {\n      throw new Error('Screenshot 图片容器创建失败')\n    }\n    this.#originImg = originImg\n    originImg.classList.add('screenshot-image')\n    this.#container.append(originImg)\n    this.#container.style.width = `${originImg.width}px`\n    this.#container.style.height = `${originImg.height}px`\n    log('Screenshot 图片容器创建完成')\n  }\n\n  #initSnipper () {\n    const container = this.#container\n    const containerStyle = window.getComputedStyle(container)\n\n    const snipper = this.#snipper = document.createElement('div')\n    snipper.classList.add('screenshot-snipper')\n    const snipperBorderWidth = Math.max(\n      parseFloat(containerStyle.width),\n      parseFloat(containerStyle.height)\n    )\n    snipper.style.borderWidth = snipperBorderWidth + 'px'\n    snipper.style.transform = `matrix(1,0,0,1,${-snipperBorderWidth},${-snipperBorderWidth})`\n    container.append(snipper)\n\n    const sizeinfo = this.#sizeinfo = document.createElement('div')\n    sizeinfo.classList.add('screenshot-sizeinfo')\n    snipper.append(sizeinfo)\n\n    const resizer = this.#resizer = document.createElement('div')\n    resizer.classList.add('screenshot-resizer')\n    snipper.append(resizer)\n    this.#initSnipperEvent()\n  }\n\n  #initSnipperEvent () {\n    const container = this.#container\n    const snipper = this.#snipper\n    if (!this.#options.autoFull) {\n      let moved = false\n      addDragEvent({\n        node: container,\n        downCallback: () => {\n          snipper.style.borderColor = 'rgba(0,0,0,0.6)'\n        },\n        moveCallback: ({ endPosition, startPosition }) => {\n          moved = true\n          const bounding = container.getBoundingClientRect()\n          let data = {\n            width: Math.abs(endPosition.x - startPosition.x),\n            height: Math.abs(endPosition.y - startPosition.y),\n            left: Math.min(endPosition.x, startPosition.x) - bounding.x,\n            top: Math.min(endPosition.y, startPosition.y) - bounding.y\n          }\n          if (this.#options.autoWelt) {\n            data = this.#autoWelt(data)\n          }\n          this.#snipInfo = data\n        },\n        upCallback: () => {\n          if (moved) {\n            if (this.#snipInfo.width >= 10 && this.#snipInfo.height >= 10) {\n              snipper.style.cursor = 'default'\n              this.#initResizerEvent()\n            } else {\n              this.#snipFull()\n            }\n          } else {\n            this.#snipFull()\n          }\n        }\n      })\n    } else {\n      this.#snipFull()\n    }\n  }\n\n  #snipFull () {\n    const container = this.#container\n    const snipper = this.#snipper\n    const style = window.getComputedStyle(container)\n    this.#snipInfo = {\n      width: parseFloat(style.width),\n      height: parseFloat(style.height),\n      left: 0,\n      top: 0\n    }\n    snipper.style.borderColor = 'rgba(0,0,0,0.6)'\n    snipper.style.cursor = 'default'\n    this.#initResizerEvent()\n  }\n\n  #autoWelt (snipInfo) {\n    if (!this.#options.autoWelt) {\n      return snipInfo\n    }\n    const style = window.getComputedStyle(this.#container)\n    const data = clone(snipInfo)\n    let distance = 20\n    if (isNumber(this.#options.autoWelt)) {\n      distance = this.#options.autoWelt\n    }\n    if (data.left < distance) {\n      data.width = data.width + data.left\n      data.left = 0\n    }\n    if (data.left + data.width + distance > parseFloat(style.width)) {\n      data.width = parseFloat(style.width) - data.left\n    }\n    if (data.top < distance) {\n      data.height = data.height + data.top\n      data.top = 0\n    }\n    if (data.top + data.height + distance > parseFloat(style.height)) {\n      data.height = parseFloat(style.height) - data.top\n    }\n    return data\n  }\n  // endregion\n\n  // region resizer\n  #initResizer () {\n    this.#destroyResizer()\n    const wrapper = document.createElement('div')\n    wrapper.classList.add('screenshot-resizer-wrapper')\n    const container = this.#container\n    const resizer = this.#resizer\n    this.#events.resizerItemEvents = []\n    for (const direction of ['top', 'topright', 'right', 'bottomright', 'bottom', 'bottomleft', 'left', 'topleft']) {\n      const resizerItem = document.createElement('div')\n      resizerItem.classList.add('screenshot-resizer-item', `screenshot-resizer-${direction}`)\n      let _snipInfo\n      this.#events.resizerItemEvents.push(addDragEvent({\n        node: resizerItem,\n        upNode: container,\n        moveNode: container,\n        last: true,\n        downCallback: () => {\n          this.#toolbar = null\n          this.#drawer = null\n          _snipInfo = { ...this.#snipInfo }\n          resizer.style.cursor = window.getComputedStyle(resizerItem).cursor\n        },\n        moveCallback: ({ endPosition, startPosition }) => {\n          const x = endPosition.x - startPosition.x\n          const y = endPosition.y - startPosition.y\n          const style = window.getComputedStyle(container)\n          let tmpSnipInfo = { ..._snipInfo }\n          if (direction.includes('top')) {\n            tmpSnipInfo.top = _snipInfo.top + y < _snipInfo.top + _snipInfo.height - 10 ? (_snipInfo.top + y >= 0 ? _snipInfo.top + y : 0) : _snipInfo.top + _snipInfo.height - 10\n            tmpSnipInfo.height = _snipInfo.height - y > 10 ? (_snipInfo.top + y >= 0 ? _snipInfo.height - y : _snipInfo.height + _snipInfo.top) : 10\n          }\n          if (direction.includes('right')) {\n            tmpSnipInfo.width = _snipInfo.width + x > 10 ? (_snipInfo.left + _snipInfo.width + x <= parseFloat(style.width) ? _snipInfo.width + x : parseFloat(style.width) - _snipInfo.left) : 10\n          }\n          if (direction.includes('bottom')) {\n            tmpSnipInfo.height = _snipInfo.height + y > 10 ? (_snipInfo.top + _snipInfo.height + y <= parseFloat(style.height) ? _snipInfo.height + y : parseFloat(style.height) - _snipInfo.top) : 10\n          }\n          if (direction.includes('left')) {\n            tmpSnipInfo.left = _snipInfo.left + x < _snipInfo.left + _snipInfo.width - 10 ? (_snipInfo.left + x >= 0 ? _snipInfo.left + x : 0) : _snipInfo.left + _snipInfo.width - 10\n            tmpSnipInfo.width = _snipInfo.width - x > 10 ? (_snipInfo.left + x >= 0 ? _snipInfo.width - x : _snipInfo.width + _snipInfo.left) : 10\n          }\n          if (this.#options.autoWelt) {\n            tmpSnipInfo = this.#autoWelt(tmpSnipInfo)\n          }\n          this.#snipInfo = tmpSnipInfo\n        },\n        upCallback: () => {\n          this.#waitForReady(() => {\n            this.#initDrawer()\n            this.#initToolbar()\n          })\n          resizer.style.cursor = 'move'\n        }\n      }))\n      wrapper.append(resizerItem)\n    }\n    resizer.append(wrapper)\n  }\n\n  #initResizerEvent () {\n    const container = this.#container\n    const resizer = this.#resizer\n    this.#initResizer()\n    this.#waitForReady(() => {\n      this.#initDrawer()\n      this.#initToolbar()\n    })\n    let originLeft, originTop\n    this.#events.resizerEvent = addDragEvent({\n      node: resizer,\n      upNode: container,\n      moveNode: container,\n      last: true,\n      downCallback: () => {\n        this.#drawer = null\n        this.#destroyResizer()\n        this.#toolbar = null\n        originLeft = this.#snipInfo.left\n        originTop = this.#snipInfo.top\n      },\n      moveCallback: ({ endPosition, startPosition }) => {\n        const left = originLeft + endPosition.x - startPosition.x\n        const top = originTop + endPosition.y - startPosition.y\n        const containerStyle = window.getComputedStyle(container)\n        const containerWidth = parseFloat(containerStyle.width)\n        const containerHeight = parseFloat(containerStyle.height)\n        this.#snipInfo = {\n          ...this.#snipInfo,\n          left: left >= 0 ? (left + this.#snipInfo.width <= containerWidth ? left : containerWidth - this.#snipInfo.width) : 0,\n          top: top >= 0 ? (top + this.#snipInfo.height <= containerHeight ? top : containerHeight - this.#snipInfo.height) : 0\n        }\n      },\n      upCallback: () => {\n        this.#initResizer()\n        this.#waitForReady(() => {\n          this.#initDrawer()\n          this.#initToolbar()\n        })\n      }\n    })\n  }\n\n  #destroyResizer () {\n    if (this.#events.resizerItemEvents) {\n      for (const event of this.#events.resizerItemEvents) {\n        event.stop()\n      }\n    }\n    delete this.#events.resizerItemEvents\n    clearNode(this.#resizer)\n  }\n\n  #stopResize () {\n    this.#destroyResizer()\n    if (this.#events.resizerEvent) {\n      this.#events.resizerEvent.stop()\n      delete this.#events.resizerEvent\n    }\n    this.#resizer.remove()\n  }\n  // endregion\n\n  #waitForReady (func, type = 'replace') {\n    if (this.#status === 'ready') {\n      func()\n    } else {\n      this.#events.readyEvent = this.#events.readyEvent || []\n      switch (type) {\n        case 'replace': {\n          this.#events.readyEvent = [func]\n          break\n        }\n        case 'add': {\n          this.#events.readyEvent.push(func)\n          break\n        }\n        case 'clear': {\n          this.#events.readyEvent = []\n          break\n        }\n      }\n    }\n  }\n\n  // region drawer\n  #initDrawer () {\n    this.#drawer = document.createElement('canvas')\n    this.#drawer.classList.add('screenshot-drawer')\n    this.#drawer.width = this.#snipInfo.width\n    this.#drawer.height = this.#snipInfo.height\n    const context = this.#drawer.getContext('2d')\n    const widthScale = this.#originImg.naturalWidth / this.#originImg.width\n    const heightScale = this.#originImg.naturalHeight / this.#originImg.height\n    context.drawImage(this.#originImg, this.#snipInfo.left * widthScale, this.#snipInfo.top * heightScale, this.#snipInfo.width * widthScale, this.#snipInfo.height * heightScale, 0, 0, this.#snipInfo.width, this.#snipInfo.height)\n    this.#snipper.append(this.#drawer)\n  }\n\n  #initDrawEvent () {\n    this.#stopResize()\n    const data = this.img\n    if (!this.#infos.fabricDrawer) {\n      this.#infos.fabricDrawer = new Canvas(this.#drawer)\n      this.#canvas.setBackgroundImage(\n        data.src,\n        undefined,\n        {\n          erasable: false\n        }\n      )\n      this.#events.drawEvent = new ScreenshotFabricEvent(this.#canvas)\n      this.#events.drawEvent.add('object:added', ({ target }) => {\n        target.setControlsVisibility({\n          tl: false,\n          tr: false,\n          br: false,\n          bl: false,\n          ml: false,\n          mt: false,\n          mr: false,\n          mb: false,\n          mtr: false\n        })\n      })\n    }\n  }\n\n  // endregion\n\n  // region toolbar\n  #initToolbar () {\n    this.#toolbar = document.createElement('div')\n    this.#toolbar.classList.add('screenshot-toolbar')\n    if (this.#options.btnSize) {\n      this.#toolbar.style.fontSize = this.#options.btnSize\n    }\n    this.#snipper.append(this.#toolbar)\n    // 绘制矩形\n    this.#addToolSquare()\n    // 绘制椭圆\n    this.#addToolEllipse()\n    this.#addToolArrow()\n    this.#addToolWrite()\n    this.#addToolMosaic()\n    this.#addToolText()\n    this.#addToolDivider()\n    // todo 撤销修改\n    // this.#addTool({ name: '撤销', icon: 'return', disabled: true })\n    this.#addTool({\n      name: '保存图片',\n      icon: 'download',\n      clickEvent: () => {\n        dataURLToBlob(this.#canvas.toDataURL()).then((blob) => {\n          saveAs(blob, 'clip.png')\n          this.destroy()\n        })\n      }\n    })\n    this.#addTool({\n      name: '退出',\n      icon: 'close',\n      color: this.#options.cancelColor || 'red',\n      clickEvent: () => {\n        this.destroy()\n      }\n    })\n    this.#addTool({\n      name: '完成',\n      icon: 'check',\n      color: this.#options.okColor || 'green',\n      clickEvent: () => {\n        dataURLToBlob(this.#canvas.toDataURL()).then((blob) => {\n          try {\n            const data = [\n              new window.ClipboardItem({\n                [blob.type]: blob\n              })\n            ]\n            navigator.clipboard.write(data).finally(() => {\n              this.destroy()\n            })\n          } catch (e) {\n            error(e.name, e.message)\n            saveAs(blob, 'clip.png')\n            this.destroy()\n          }\n        })\n      }\n    })\n    if (this.#snipInfo.top + this.#snipInfo.height + 50 < this.#container.offsetHeight) {\n      this.#toolbar.style.top = 'calc(100% + 8px)'\n    } else {\n      this.#toolbar.style.top = 'calc(100% - 50px)'\n    }\n    if (this.#snipInfo.left + this.#snipInfo.width - this.#toolbar.offsetWidth >= 0) {\n      this.#toolbar.style.left = 'unset'\n      this.#toolbar.style.right = '0'\n    } else {\n      this.#toolbar.style.left = '0'\n      this.#toolbar.style.right = 'unset'\n    }\n  }\n\n  #addTool ({ name = '', icon = '', color = this.#options.btnColor || 'white', disabled = false, clickEvent, activeEvent, pauseEvent } = {}) {\n    this.#tools[name] = new ScreenshotTool({\n      name,\n      icon,\n      color,\n      disabled,\n      clickEvent: clickEvent\n        ? () => {\n            if (!this.#tools[name].disabled) {\n              clickEvent()\n            }\n          }\n        : () => {\n            this.#initDrawEvent()\n            this.#switchActiveTool(this.#tools[name])\n          },\n      activeEvent,\n      pauseEvent\n    })\n    this.#toolbar.append(this.#tools[name].node)\n    return this.#tools[name]\n  }\n\n  #addToolDivider () {\n    const dom = document.createElement('div')\n    dom.classList.add('screenshot-toolbar-divider')\n    this.#toolbar.append(dom)\n  }\n\n  #addToolSquare () {\n    let squareObject = null\n    let mouseDown = false\n    let mouseFrom = null\n    let mouseTo = null\n    let tool = null\n\n    const downEvent = ({ e }) => {\n      if (mouseDown) {\n        return\n      }\n      mouseFrom = this.#canvas.getPointer(e)\n      squareObject = null\n      mouseDown = true\n    }\n    const moveEvent = ({ e }) => {\n      if (!mouseDown) {\n        return\n      }\n      mouseTo = this.#canvas.getPointer(e)\n      if (squareObject) {\n        this.#canvas.remove(squareObject)\n      }\n      squareObject = new Rect({\n        left: Math.min(mouseFrom.x, mouseTo.x),\n        top: Math.min(mouseFrom.y, mouseTo.y),\n        width: Math.abs(mouseFrom.x - mouseTo.x),\n        height: Math.abs(mouseFrom.y - mouseTo.y),\n        fill: 'transparent',\n        stroke: 'red',\n        strokeWidth: 3,\n        noScaleCache: false\n      })\n      this.#canvas.add(squareObject)\n    }\n    const upEvent = () => {\n      mouseDown = false\n      mouseFrom = null\n      mouseTo = null\n      if (squareObject) {\n        squareObject.setControlsVisibility({\n          tl: true,\n          tr: true,\n          br: true,\n          bl: true,\n          ml: true,\n          mt: true,\n          mr: true,\n          mb: true,\n          mtr: false\n        })\n        squareObject.on('scaling', (ev) => {\n          const target = ev.transform.target\n          const width = target.get('width') * target.get('scaleX')\n          const height = target.get('height') * target.get('scaleY')\n          target.set('width', width)\n          target.set('height', height)\n          target.set('scaleX', 1)\n          target.set('scaleY', 1)\n          this.#canvas.requestRenderAll()\n        })\n      }\n      squareObject = null\n      this.#switchActiveTool(tool)\n    }\n\n    tool = this.#addTool({\n      name: '矩形',\n      icon: 'square',\n      activeEvent: () => {\n        this.#events.drawEvent.add('mouse:down', downEvent)\n        this.#events.drawEvent.add('mouse:move', moveEvent)\n        this.#events.drawEvent.add('mouse:up', upEvent)\n        this.#canvas.selection = false\n      },\n      pauseEvent: () => {\n        this.#events.drawEvent.remove('mouse:down', downEvent)\n        this.#events.drawEvent.remove('mouse:move', moveEvent)\n        this.#events.drawEvent.remove('mouse:up', upEvent)\n        this.#canvas.selection = true\n      }\n    })\n  }\n\n  #addToolEllipse () {\n    let ellipseObject = null\n    let mouseDown = false\n    let mouseFrom = null\n    let mouseTo = null\n    let tool = null\n\n    const downEvent = ({ e }) => {\n      if (mouseDown) {\n        return\n      }\n      mouseFrom = this.#canvas.getPointer(e)\n      ellipseObject = null\n      mouseDown = true\n    }\n    const moveEvent = ({ e }) => {\n      if (!mouseDown) {\n        return\n      }\n      mouseTo = this.#canvas.getPointer(e)\n      if (ellipseObject) {\n        this.#canvas.remove(ellipseObject)\n      }\n      ellipseObject = new Ellipse({\n        left: Math.min(mouseFrom.x, mouseTo.x),\n        top: Math.min(mouseFrom.y, mouseTo.y),\n        rx: Math.abs(mouseFrom.x - mouseTo.x) / 2,\n        ry: Math.abs(mouseFrom.y - mouseTo.y) / 2,\n        fill: 'transparent',\n        stroke: 'red',\n        strokeWidth: 3,\n        noScaleCache: false\n      })\n      this.#canvas.add(ellipseObject)\n    }\n    const upEvent = () => {\n      mouseDown = false\n      mouseFrom = null\n      mouseTo = null\n      if (ellipseObject) {\n        ellipseObject.setControlsVisibility({\n          tl: true,\n          tr: true,\n          br: true,\n          bl: true,\n          ml: true,\n          mt: true,\n          mr: true,\n          mb: true,\n          mtr: false\n        })\n        ellipseObject.on('scaling', (ev) => {\n          const target = ev.transform.target\n          const rx = target.get('rx') * target.get('scaleX')\n          const ry = target.get('ry') * target.get('scaleY')\n          target.set('rx', rx)\n          target.set('ry', ry)\n          target.set('scaleX', 1)\n          target.set('scaleY', 1)\n          this.#canvas.requestRenderAll()\n        })\n      }\n      ellipseObject = null\n      this.#switchActiveTool(tool)\n    }\n\n    tool = this.#addTool({\n      name: '椭圆',\n      icon: 'circle',\n      activeEvent: () => {\n        this.#events.drawEvent.add('mouse:down', downEvent)\n        this.#events.drawEvent.add('mouse:move', moveEvent)\n        this.#events.drawEvent.add('mouse:up', upEvent)\n        this.#canvas.selection = false\n      },\n      pauseEvent: () => {\n        this.#events.drawEvent.remove('mouse:down', downEvent)\n        this.#events.drawEvent.remove('mouse:move', moveEvent)\n        this.#events.drawEvent.remove('mouse:up', upEvent)\n        this.#canvas.selection = true\n      }\n    })\n  }\n\n  #addToolArrow () {\n    let arrowHeadObject = null\n    let arrowLineObject = null\n    let arrowObject = null\n    let mouseDown = false\n    let mouseFrom = null\n    let mouseTo = null\n    let tool = null\n\n    const strokeWidth = 3\n\n    const downEvent = ({ e }) => {\n      if (mouseDown) {\n        return\n      }\n      mouseFrom = this.#canvas.getPointer(e)\n\n      arrowLineObject = new Line([0, 0, 0, 0], {\n        top: 0,\n        left: 0,\n        stroke: 'red',\n        strokeWidth: strokeWidth,\n        objectCaching: false,\n        originX: 'left',\n        originY: 'center'\n      })\n\n      arrowHeadObject = new Path('M 0 0 L 20 10 L 0 20 z', {\n        left: -20,\n        top: 0,\n        fill: 'red',\n        stroke: '',\n        strokeWidth: 0,\n        objectCaching: false,\n        originX: 'left',\n        originY: 'center'\n      })\n\n      arrowObject = new Group([arrowLineObject, arrowHeadObject], {\n        left: mouseFrom.x,\n        top: mouseFrom.y,\n        objectCaching: false,\n        originX: 'left',\n        originY: 'center',\n        lockScalingY: true,\n        lockScalingFlip: true\n      })\n      this.#canvas.add(arrowObject)\n      mouseDown = true\n    }\n    const moveEvent = ({ e }) => {\n      if (!mouseDown) {\n        return\n      }\n      mouseTo = this.#canvas.getPointer(e)\n      if (arrowObject) {\n        this.#canvas.remove(arrowObject)\n      }\n\n      const width = Math.sqrt(Math.pow(mouseTo.x - mouseFrom.x, 2) + Math.pow(mouseTo.y - mouseFrom.y, 2))\n      const angle = Math.atan2(mouseTo.y - mouseFrom.y, mouseTo.x - mouseFrom.x) * 180 / Math.PI\n\n      arrowLineObject.set({\n        x2: width > 20 ? width - 20 : 0,\n        originX: 'left',\n        originY: 'center'\n      })\n      arrowLineObject.setCoords()\n      arrowHeadObject.set({\n        left: width - 20,\n        originX: 'left',\n        originY: 'center'\n      })\n      arrowHeadObject.setCoords()\n      arrowObject = new Group([arrowLineObject, arrowHeadObject], {\n        left: mouseFrom.x,\n        top: mouseFrom.y,\n        objectCaching: false,\n        angle,\n        originX: 'left',\n        originY: 'center',\n        lockScalingY: true,\n        lockScalingFlip: true\n      })\n      this.#canvas.add(arrowObject)\n      this.#canvas.requestRenderAll()\n    }\n    const upEvent = () => {\n      mouseDown = false\n      if (arrowObject) {\n        arrowObject.setControlsVisibility({\n          tl: false,\n          tr: false,\n          br: false,\n          bl: false,\n          ml: false,\n          mt: false,\n          mr: true,\n          mb: false,\n          mtr: false\n        })\n        arrowObject.on('scaling', (e) => {\n          const object = e.transform.target\n          const originPointer = { x: object.left, y: object.top }\n          const pointer = this.#canvas.getPointer(e)\n          const width = Math.sqrt(Math.pow(pointer.x - originPointer.x, 2) + Math.pow(pointer.y - originPointer.y, 2))\n          const angle = Math.atan2(pointer.y - originPointer.y, pointer.x - originPointer.x) * 180 / Math.PI\n          object._objects[0].set({\n            x1: -width / 2,\n            x2: width / 2 - 20,\n            y1: 0,\n            y2: 0,\n            scaleX: 1,\n            scaleY: 1,\n            originX: 'left',\n            originY: 'center'\n          })\n          object._objects[0].setCoords()\n          object._objects[1].set({\n            left: width / 2 - 20,\n            top: 0,\n            scaleX: 1,\n            scaleY: 1,\n            originX: 'left',\n            originY: 'center'\n          })\n          object._objects[1].setCoords()\n          object.set({\n            left: originPointer.x,\n            top: originPointer.y,\n            angle,\n            width,\n            scaleX: 1,\n            scaleY: 1,\n            originX: 'left',\n            originY: 'center'\n          })\n          this.#canvas.requestRenderAll()\n        })\n      }\n      arrowObject = null\n      this.#switchActiveTool(tool)\n    }\n\n    tool = this.#addTool({\n      name: '箭头',\n      icon: 'arrow-right-up',\n      activeEvent: () => {\n        this.#events.drawEvent.add('mouse:down', downEvent)\n        this.#events.drawEvent.add('mouse:move', moveEvent)\n        this.#events.drawEvent.add('mouse:up', upEvent)\n        this.#canvas.selection = false\n      },\n      pauseEvent: () => {\n        this.#events.drawEvent.remove('mouse:down', downEvent)\n        this.#events.drawEvent.remove('mouse:move', moveEvent)\n        this.#events.drawEvent.remove('mouse:up', upEvent)\n        this.#canvas.selection = true\n      }\n    })\n  }\n\n  #addToolWrite () {\n    this.#addTool({\n      name: '画笔',\n      icon: 'write',\n      activeEvent: () => {\n        this.#canvas.freeDrawingBrush = new PencilBrush(this.#canvas)\n        // 设置画笔颜色\n        this.#canvas.freeDrawingBrush.color = 'red'\n        // 设置画笔粗细\n        this.#canvas.freeDrawingBrush.width = 5\n        this.#canvas.isDrawingMode = true\n        this.#canvas.selection = false\n      },\n      pauseEvent: () => {\n        this.#canvas.isDrawingMode = false\n        this.#canvas.selection = true\n      }\n    })\n  }\n\n  #addToolMosaic () {\n    this.#addTool({\n      name: '马赛克',\n      icon: 'mosaic',\n      activeEvent: () => {\n        this.#canvas.selection = false\n        this.#canvas.isDrawingMode = true\n        const brush = this.#canvas.freeDrawingBrush = new MosaicBrush(this.#canvas)\n        brush.color = 'white'\n        brush.width = 12\n      },\n      pauseEvent: () => {\n        this.#canvas.isDrawingMode = false\n        this.#canvas.selection = true\n      }\n    })\n  }\n\n  #addToolText () {\n    let tool = null\n    const createTextbox = (e) => {\n      const textbox = new Textbox('文本', {\n        fill: 'red',\n        width: 100,\n        left: e.pointer.x,\n        top: e.pointer.y,\n        fontSize: 18,\n        lineHeight: 1,\n        lockRotation: true,\n        lockScalingY: true,\n        lockScalingFlip: true,\n        splitByGrapheme: true,\n        objectCaching: false\n      })\n      textbox.on('scaling', (ev) => {\n        const target = ev.transform.target\n        const width = target.get('width') * target.get('scaleX')\n        target.set('width', width)\n        target.set('scaleX', 1)\n      })\n      this.#switchActiveTool(tool)\n      this.#canvas.add(textbox)\n      textbox.setControlsVisibility({\n        tl: false,\n        tr: false,\n        br: false,\n        bl: false,\n        ml: true,\n        mt: false,\n        mr: true,\n        mb: false,\n        mtr: false\n      })\n      this.#canvas.setActiveObject(textbox)\n      this.#canvas.requestRenderAll()\n      textbox.enterEditing()\n    }\n    tool = this.#addTool({\n      name: '文本',\n      icon: 'text',\n      activeEvent: () => {\n        this.#canvas.defaultCursor = 'text'\n        this.#canvas.selection = false\n        this.#events.drawEvent.add('mouse:down', createTextbox)\n      },\n      pauseEvent: () => {\n        this.#canvas.defaultCursor = 'default'\n        this.#canvas.selection = true\n        this.#events.drawEvent.remove('mouse:down', createTextbox)\n      }\n    })\n  }\n\n  #switchActiveTool (tool) {\n    if (!tool.active) {\n      for (const name in this.#tools) {\n        if (name !== tool.name) {\n          this.#tools[name].active = false\n        }\n      }\n    }\n    tool.active = !tool.active\n  }\n  // endregion\n\n  // region static functions\n  static getImage ({ node, width, height, callback = () => {}, options = {} }) {\n    return new Promise((resolve, reject) => {\n      if (!(node instanceof window.HTMLElement)) {\n        reject(new Error('node must be HTMLElement'))\n      }\n      let scale\n      if (width && height) {\n        scale = Math.min(node.offsetWidth / width, node.offsetHeight / height)\n      } else {\n        scale = 1\n      }\n      const style = {\n        transform: 'scale(' + scale + ')',\n        transformOrigin: 'top left',\n        width: node.offsetWidth + 'px',\n        height: node.offsetHeight + 'px'\n      }\n      const param = {\n        height: node.offsetHeight * scale,\n        width: node.offsetWidth * scale,\n        quality: 1,\n        style,\n        cacheBust: true,\n        ...options\n      }\n      domToImage\n        .toBlob(node, param)\n        .then((val) => {\n          callback(val)\n          resolve(val)\n        })\n        .catch((err) => {\n          reject(err)\n        })\n    })\n  }\n\n  static getMergeImage ({ imgList = [], width, height, callback = () => {} }) {\n    return new Promise((resolve) => {\n      const canvas = document.createElement('canvas')\n      canvas.width = width\n      canvas.height = height\n      const context = canvas.getContext('2d')\n\n      let flag = 0\n      imgList.forEach((item) => {\n        if (item.img instanceof window.HTMLImageElement) {\n          context.drawImage(item.img, 0, 0, item.width, item.height)\n          flag++\n        } else if (typeof item.img === 'string') {\n          const img = new window.Image()\n          img.src = item.img\n          img.onload = () => {\n            context.drawImage(\n              img,\n              item.x || 0,\n              item.y || 0,\n              item.width,\n              item.height\n            )\n            flag++\n            if (flag === imgList.length) {\n              const data = canvas.toDataURL()\n              callback(data)\n              resolve(data)\n            }\n          }\n          img.onerror = () => {\n            flag++\n            if (flag === imgList.length) {\n              const data = canvas.toDataURL()\n              callback(data)\n              resolve(data)\n            }\n          }\n        }\n      })\n      if (flag === imgList.length) {\n        const data = canvas.toDataURL()\n        callback(data)\n        resolve(data)\n      }\n    })\n  }\n  // endregion\n}\n"],"names":["root","factory","exports","module","define","amd","self","global","require","isCallable","tryToString","TypeError","argument","isConstructor","String","wellKnownSymbol","create","definePropertyModule","UNSCOPABLES","ArrayPrototype","Array","prototype","undefined","f","configurable","value","key","charAt","S","index","unicode","length","isPrototypeOf","it","Prototype","isObject","fails","ArrayBuffer","buffer","Object","isExtensible","defineProperty","$forEach","STRICT_METHOD","arrayMethodIsStrict","forEach","callbackfn","this","arguments","bind","call","toObject","callWithSafeIterationClosing","isArrayIteratorMethod","lengthOfArrayLike","createProperty","getIterator","getIteratorMethod","arrayLike","O","IS_CONSTRUCTOR","argumentsLength","mapfn","mapping","result","step","iterator","next","iteratorMethod","done","toIndexedObject","toAbsoluteIndex","createMethod","IS_INCLUDES","$this","el","fromIndex","includes","indexOf","uncurryThis","IndexedObject","arraySpeciesCreate","push","TYPE","IS_MAP","IS_FILTER","IS_SOME","IS_EVERY","IS_FIND_INDEX","IS_FILTER_REJECT","NO_HOLES","that","specificCreate","boundFunction","target","map","filter","some","every","find","findIndex","filterReject","V8_VERSION","SPECIES","METHOD_NAME","array","constructor","foo","Boolean","method","max","Math","start","end","k","fin","n","slice","arraySlice","floor","mergeSort","comparefn","middle","insertionSort","merge","element","j","i","left","right","llength","rlength","lindex","rindex","isArray","originalArray","C","arraySpeciesConstructor","anObject","iteratorClose","fn","ENTRIES","error","ITERATOR","SAFE_CLOSING","called","iteratorWithReturn","from","exec","SKIP_CLOSING","ITERATION_SUPPORT","object","toString","stringSlice","TO_STRING_TAG_SUPPORT","classofRaw","TO_STRING_TAG","CORRECT_ARGUMENTS","tag","tryGet","callee","aCallable","set","adder","add","len","wasDeleted","collection","remover","allDeleted","redefineAll","getWeakData","anInstance","iterate","ArrayIterationModule","hasOwn","InternalStateModule","setInternalState","internalStateGetterFor","getterFor","splice","id","uncaughtFrozenStore","store","frozen","UncaughtFrozenStore","entries","findUncaughtFrozen","get","entry","has","getConstructor","wrapper","CONSTRUCTOR_NAME","ADDER","Constructor","iterable","type","AS_ENTRIES","getInternalState","state","data","$","isForced","redefine","InternalMetadataModule","checkCorrectnessOfIteration","setToStringTag","inheritIfRequired","common","IS_WEAK","NativeConstructor","NativePrototype","exported","fixMethod","KEY","uncurriedNativeMethod","enable","instance","HASNT_CHAINING","THROWS_ON_PRIMITIVES","ACCEPT_ITERABLES","BUGGY_ZERO","$instance","dummy","clear","forced","setStrong","ownKeys","getOwnPropertyDescriptorModule","source","exceptions","keys","getOwnPropertyDescriptor","MATCH","regexp","error1","error2","F","getPrototypeOf","IteratorPrototype","createPropertyDescriptor","Iterators","returnThis","IteratorConstructor","NAME","ENUMERABLE_NEXT","DESCRIPTORS","bitmap","enumerable","writable","toPropertyKey","propertyKey","IS_PURE","FunctionName","createIteratorConstructor","setPrototypeOf","createNonEnumerableProperty","IteratorsCore","PROPER_FUNCTION_NAME","PROPER","CONFIGURABLE_FUNCTION_NAME","CONFIGURABLE","BUGGY_SAFARI_ITERATORS","KEYS","VALUES","Iterable","DEFAULT","IS_SET","FORCED","CurrentIteratorPrototype","methods","getIterationMethod","KIND","defaultIterator","IterablePrototype","INCORRECT_VALUES_NAME","nativeIterator","anyNativeIterator","name","values","proto","path","wrappedWellKnownSymbolModule","Symbol","document","EXISTS","createElement","CSSRuleList","CSSStyleDeclaration","CSSValueList","ClientRectList","DOMRectList","DOMStringList","DOMTokenList","DataTransferItemList","FileList","HTMLAllCollection","HTMLCollection","HTMLFormElement","HTMLSelectElement","MediaList","MimeTypeArray","NamedNodeMap","NodeList","PaintRequestList","Plugin","PluginArray","SVGLengthList","SVGNumberList","SVGPathSegList","SVGPointList","SVGStringList","SVGTransformList","SourceBufferList","StyleSheetList","TextTrackCueList","TextTrackList","TouchList","classList","documentCreateElement","DOMTokenListPrototype","window","userAgent","test","Pebble","classof","process","getBuiltIn","match","version","Deno","versions","v8","split","setGlobal","copyConstructorProperties","options","targetProperty","sourceProperty","descriptor","TARGET","GLOBAL","STATIC","stat","noTargetGet","sham","regexpExec","RegExpPrototype","RegExp","SHAM","SYMBOL","DELEGATES_TO_SYMBOL","DELEGATES_TO_EXEC","execCalled","re","flags","uncurriedNativeRegExpMethod","nativeMethod","str","arg2","forceStringMethod","$exec","preventExtensions","NATIVE_BIND","FunctionPrototype","Function","apply","Reflect","hasOwnProperty","concat","join","factories","construct","argsLength","args","list","partArgs","getDescriptor","aFunction","namespace","getMethod","usingIterator","V","P","func","check","globalThis","a","b","console","propertyIsEnumerable","Wrapper","NewTarget","NewTargetPrototype","functionToString","inspectSource","hiddenKeys","getOwnPropertyNamesModule","getOwnPropertyNamesExternalModule","uid","FREEZING","REQUIRED","METADATA","setMetadata","objectID","weakData","meta","getOwnPropertyNames","fastKey","onFreeze","NATIVE_WEAK_MAP","shared","sharedKey","OBJECT_ALREADY_INITIALIZED","WeakMap","wmget","wmhas","wmset","metadata","facade","STATE","enforce","noop","empty","constructorRegExp","INCORRECT_TO_STRING","isConstructorModern","isConstructorLegacy","replacement","feature","detection","normalize","POLYFILL","NATIVE","string","replace","toLowerCase","isRegExp","USE_SYMBOL_AS_UID","$Symbol","Result","stopped","ResultPrototype","unboundFunction","iterFn","IS_ITERATOR","INTERRUPTED","stop","condition","callFn","kind","innerResult","innerError","PrototypeOfArrayIteratorPrototype","arrayIterator","toLength","obj","flush","head","last","notify","toggle","node","promise","then","macrotask","IS_IOS","IS_IOS_PEBBLE","IS_WEBOS_WEBKIT","IS_NODE","MutationObserver","WebKitMutationObserver","Promise","queueMicrotaskDescriptor","queueMicrotask","parent","domain","exit","enter","resolve","nextTick","createTextNode","observe","characterData","task","getOwnPropertySymbols","symbol","url","URL","searchParams","pathname","toJSON","sort","href","URLSearchParams","username","host","hash","PromiseCapability","reject","$$resolve","$$reject","trim","whitespaces","n$ParseFloat","parseFloat","Infinity","trimmedString","objectKeys","getOwnPropertySymbolsModule","propertyIsEnumerableModule","$assign","assign","A","B","alphabet","chr","T","activeXDocument","definePropertiesModule","enumBugKeys","html","IE_PROTO","EmptyConstructor","scriptTag","content","LT","NullProtoObjectViaActiveX","write","close","temp","parentWindow","NullProtoObject","ActiveXObject","iframeDocument","iframe","style","display","appendChild","src","contentWindow","open","Properties","V8_PROTOTYPE_DEFINE_BUG","defineProperties","props","IE8_DOM_DEFINE","$defineProperty","$getOwnPropertyDescriptor","ENUMERABLE","WRITABLE","Attributes","current","$getOwnPropertyNames","windowNames","getWindowNames","internalObjectKeys","CORRECT_PROTOTYPE_GETTER","ObjectPrototype","ARRAY_BUFFER_NON_EXTENSIBLE","$isExtensible","FAILS_ON_PRIMITIVES","names","$propertyIsEnumerable","NASHORN_BUG","aPossiblePrototype","setter","CORRECT_SETTER","__proto__","input","pref","val","valueOf","newPromiseCapability","x","promiseCapability","Queue","tail","item","enforceInternalState","TEMPLATE","unsafe","simple","R","re1","re2","regexpFlags","stickyHelpers","UNSUPPORTED_DOT_ALL","UNSUPPORTED_NCG","nativeReplace","nativeExec","patchedExec","UPDATES_LAST_INDEX_WRONG","lastIndex","UNSUPPORTED_Y","BROKEN_CARET","NPCG_INCLUDED","reCopy","group","raw","groups","sticky","charsAdded","strCopy","multiline","ignoreCase","dotAll","$RegExp","MISSED_STICKY","TAG","SHARED","mode","copyright","license","aConstructor","defaultConstructor","toIntegerOrInfinity","requireObjectCoercible","charCodeAt","CONVERT_TO_STRING","pos","first","second","position","size","codeAt","maxInt","regexNonASCII","regexSeparators","OVERFLOW_ERROR","RangeError","fromCharCode","digitToBasic","digit","adapt","delta","numPoints","firstTime","baseMinusTMin","base","encode","output","counter","extra","ucs2decode","currentValue","inputLength","bias","basicLength","handledCPCount","m","handledCPCountPlusOne","q","t","qMinusT","baseMinusT","label","encoded","labels","count","whitespace","ltrim","rtrim","location","defer","channel","port","validateArgumentsLength","setImmediate","clearImmediate","Dispatch","MessageChannel","queue","ONREADYSTATECHANGE","run","runner","listener","event","post","postMessage","protocol","handler","now","port2","port1","onmessage","addEventListener","importScripts","removeChild","setTimeout","min","integer","ceil","number","isSymbol","ordinaryToPrimitive","TO_PRIMITIVE","exoticToPrim","toPrimitive","postfix","random","NATIVE_SYMBOL","passed","required","WellKnownSymbolsStore","symbolFor","createWellKnownSymbol","withoutSetter","description","arrayMethodHasSpeciesSupport","IS_CONCAT_SPREADABLE","MAX_SAFE_INTEGER","MAXIMUM_ALLOWED_INDEX_EXCEEDED","IS_CONCAT_SPREADABLE_SUPPORT","SPECIES_SUPPORT","isConcatSpreadable","spreadable","arg","E","$filter","$includes","addToUnscopables","$IndexOf","un$IndexOf","NEGATIVE_ZERO","searchElement","defineIterator","ARRAY_ITERATOR","iterated","Arguments","un$Join","ES3_STRINGS","separator","$map","un$Slice","HAS_SPECIES_SUPPORT","MAXIMUM_ALLOWED_LENGTH_EXCEEDED","deleteCount","insertCount","actualDeleteCount","to","actualStart","FUNCTION_NAME_EXISTS","nameRE","regExpExec","nativeGetOwnPropertyDescriptor","getOwnPropertyDescriptors","nativeKeys","$parseFloat","NativePromise","speciesConstructor","promiseResolve","real","onFinally","isFunction","e","Internal","OwnPromiseCapability","PromiseWrapper","nativeThen","setSpecies","microtask","hostReportErrors","newPromiseCapabilityModule","perform","IS_BROWSER","PROMISE","getInternalPromiseState","NativePromisePrototype","PromiseConstructor","PromisePrototype","newGenericPromiseCapability","DISPATCH_EVENT","createEvent","dispatchEvent","NATIVE_REJECTION_EVENT","PromiseRejectionEvent","UNHANDLED_REJECTION","SUBCLASSING","PROMISE_CONSTRUCTOR_SOURCE","GLOBAL_CORE_JS_PROMISE","FakePromise","INCORRECT_ITERATION","all","isThenable","callReaction","reaction","exited","ok","fail","rejection","onHandleUnhandled","isReject","notified","reactions","onUnhandled","reason","initEvent","isUnhandled","emit","unwrap","internalReject","internalResolve","executor","onFulfilled","onRejected","wrap","r","capability","$promiseResolve","remaining","alreadyCalled","race","nativeConstruct","NEW_TARGET_BUG","ARGS_BUG","Target","newTarget","$args","notARegExp","correctIsRegExpLogic","stringIndexOf","searchString","STRING_ITERATOR","point","repeat","fixRegExpWellKnownSymbolLogic","advanceStringIndex","callRegExpExec","MAX_UINT32","$push","SPLIT_WORKS_WITH_OVERWRITTEN_EXEC","originalExec","SPLIT","nativeSplit","maybeCallNative","internalSplit","limit","lim","lastLength","lastLastIndex","separatorCopy","splitter","rx","res","unicodeMatching","p","z","$trim","forcedStringTrimMethod","NativeSymbol","SymbolPrototype","EmptyStringDescriptionStore","SymbolWrapper","symbolToString","symbolValueOf","desc","defineWellKnownSymbol","$toString","nativeObjectCreate","getOwnPropertyNamesExternal","HIDDEN","QObject","$stringify","nativeDefineProperty","nativeGetOwnPropertyNames","nativePropertyIsEnumerable","AllSymbols","ObjectPrototypeSymbols","StringToSymbolRegistry","SymbolToStringRegistry","USE_SETTER","findChild","setSymbolDescriptor","ObjectPrototypeDescriptor","$defineProperties","properties","$getOwnPropertySymbols","IS_OBJECT_PROTOTYPE","keyFor","sym","useSetter","useSimple","stringify","replacer","space","$replacer","hint","InternalWeakMap","collectionWeak","IS_IE11","init","$WeakMap","WeakMapPrototype","nativeDelete","nativeHas","nativeGet","nativeSet","deleteAll","addAll","DOMIterables","handlePrototype","CollectionPrototype","COLLECTION_NAME","ArrayIteratorMethods","ArrayValues","USE_NATIVE_URL","arraySort","URL_SEARCH_PARAMS","URL_SEARCH_PARAMS_ITERATOR","getInternalParamsState","getInternalIteratorState","n$Fetch","N$Request","Headers","RequestPrototype","HeadersPrototype","decodeURIComponent","encodeURIComponent","shift","plus","sequences","percentSequence","bytes","percentDecode","sequence","deserialize","replacements","serialize","URLSearchParamsIterator","params","URLSearchParamsState","parseObject","parseQuery","bindURL","update","entryIterator","entryNext","query","attribute","attributes","updateURL","URLSearchParamsConstructor","URLSearchParamsPrototype","append","getAll","found","callback","headersHas","headersSet","wrapRequestOptions","headers","body","fetch","RequestConstructor","Request","getState","EOF","arrayFrom","toASCII","URLSearchParamsModule","getInternalURLState","getInternalSearchParamsState","NativeURL","parseInt","pow","numberToString","pop","unshift","INVALID_SCHEME","INVALID_HOST","INVALID_PORT","ALPHA","ALPHANUMERIC","DIGIT","HEX_START","OCT","DEC","HEX","FORBIDDEN_HOST_CODE_POINT","FORBIDDEN_HOST_CODE_POINT_EXCLUDING_PERCENT","LEADING_AND_TRAILING_C0_CONTROL_OR_SPACE","TAB_AND_NEW_LINE","serializeHost","compress","ignore0","ipv6","maxIndex","maxLength","currStart","currLength","findLongestZeroSequence","C0ControlPercentEncodeSet","fragmentPercentEncodeSet","pathPercentEncodeSet","userinfoPercentEncodeSet","percentEncode","code","specialSchemes","ftp","file","http","https","ws","wss","isWindowsDriveLetter","normalized","startsWithWindowsDriveLetter","third","isSingleDot","segment","SCHEME_START","SCHEME","NO_SCHEME","SPECIAL_RELATIVE_OR_AUTHORITY","PATH_OR_AUTHORITY","RELATIVE","RELATIVE_SLASH","SPECIAL_AUTHORITY_SLASHES","SPECIAL_AUTHORITY_IGNORE_SLASHES","AUTHORITY","HOST","HOSTNAME","PORT","FILE","FILE_SLASH","FILE_HOST","PATH_START","PATH","CANNOT_BE_A_BASE_URL_PATH","QUERY","FRAGMENT","URLState","isBase","baseState","failure","urlString","parse","stateOverride","codePoints","bufferCodePoints","pointer","seenAt","seenBracket","seenPasswordToken","scheme","password","fragment","cannotBeABaseURL","isSpecial","includesCredentials","codePoint","encodedCodePoints","parseHost","shortenPath","numbersSeen","ipv4Piece","swaps","swap","address","pieceIndex","parseIPv6","partsLength","numbers","part","radix","ipv4","parts","parseIPv4","cannotHaveUsernamePasswordPort","pathSize","setHref","getOrigin","URLConstructor","origin","getProtocol","setProtocol","getUsername","setUsername","getPassword","setPassword","getHost","setHost","getHostname","setHostname","hostname","getPort","setPort","getPathname","setPathname","getSearch","setSearch","search","getSearchParams","getHash","setHash","URLPrototype","accessorDescriptor","getter","nativeCreateObjectURL","createObjectURL","nativeRevokeObjectURL","revokeObjectURL","cssWithMappingToString","needLayer","modules","media","dedupe","supports","layer","alreadyImportedModules","_k","__esModule","default","needQuotes","cssMapping","btoa","base64","unescape","JSON","sourceMapping","sourceURLs","sources","sourceRoot","util","escape","parseExtension","mimeType","extension","WOFF","JPEG","dataAsUrl","isDataUrl","canvasToBlob","canvas","toBlob","binaryString","atob","toDataURL","binaryArray","Uint8Array","Blob","resolveUrl","baseUrl","doc","implementation","createHTMLDocument","getAndEncode","TIMEOUT","domtoimage","impl","cacheBust","Date","getTime","placeholder","request","XMLHttpRequest","onreadystatechange","ontimeout","timeout","responseType","send","imagePlaceholder","readyState","status","encoder","FileReader","onloadend","readAsDataURL","response","message","fourRandomChars","delay","ms","asArray","escapeXhtml","makeImage","uri","image","Image","onload","onerror","width","leftBorder","px","rightBorder","scrollWidth","height","topBorder","bottomBorder","scrollHeight","styleProperty","getComputedStyle","getPropertyValue","newUtil","inliner","URL_REGEX","inlineAll","nothingToInline","readUrls","urls","inline","shouldProcess","dataUrl","urlAsRegex","newInliner","fontFaces","resolveAll","readAll","webFonts","webFont","cssStrings","styleSheets","cssRules","sheet","rule","CSSRule","FONT_FACE_RULE","rules","newWebFont","webFontRule","parentStyleSheet","cssText","newFontFaces","images","Element","inlineBackground","HTMLImageElement","newImage","childNodes","child","background","inlined","setProperty","getPropertyPriority","newImages","defaultOptions","toSvg","toPng","draw","toJpeg","quality","toPixelData","getContext","getImageData","copyOptions","cloneNode","embedFonts","inlineImages","clone","bgcolor","backgroundColor","property","setAttribute","XMLSerializer","serializeToString","xhtml","foreignObject","svg","makeSvgDataUri","domNode","ctx","fillStyle","fillRect","newCanvas","drawImage","HTMLCanvasElement","original","children","cloneChildrenInOrder","childClone","cloneChildren","cloneStyle","clonePseudoElements","copyUserInput","fixSvg","copyStyle","copyProperties","clonePseudoElement","className","styleElement","formatPseudoElementStyle","selector","formatCssText","formatCssProperties","formatProperty","HTMLTextAreaElement","innerHTML","HTMLInputElement","SVGElement","SVGRectElement","getAttribute","processClone","styleNode","couldUseAttachEvent","touchEvents","parseEl","supportsOpacity","supportsFilters","reOpacity","setOpacity","degreesToRadians","originXOffset","originYOffset","toFixed","multipleSpacesRegex","fabric","HTMLDocument","Document","virtualWindow","JSDOM","features","FetchExternalResources","resources","jsdomImplForWrapper","nodeCanvas","DOMParser","copyGLTo2DDrawImage","gl","pipelineState","glCanvas","targetCanvas","translate","scale","sourceY","copyGLTo2DPutImageData","dWidth","destinationWidth","dHeight","destinationHeight","numBytes","u8","imageBuffer","u8Clamped","Uint8ClampedArray","readPixels","RGBA","UNSIGNED_BYTE","imgData","ImageData","putImageData","isTouchSupported","navigator","maxTouchPoints","isLikelyNode","Buffer","SHARED_ATTRIBUTES","DPI","reNum","commaWsp","rePathCommand","reNonWord","fontPaths","iMatrix","svgNS","perfLimitSizeTotal","maxCacheSideLimit","minCacheSideLimit","charWidthsCache","textureSize","disableStyleCopyPaste","enableGLFiltering","devicePixelRatio","webkitDevicePixelRatio","mozDevicePixelRatio","browserShadowBlurConstant","arcToSegmentsCache","boundsOfCurveCache","cachesBoundsOfCurve","forceGLPutImageData","initFilterBackend","isWebglSupported","WebglFilterBackend","tileSize","Canvas2dFilterBackend","_removeEventListener","eventName","__eventListeners","eventListener","fill","_once","_handler","off","on","Observable","fire","listenersForEvent","prop","once","Collection","_objects","_onObjectAdded","renderOnAddRemove","requestRenderAll","insertAt","nonSplicing","objects","remove","somethingRemoved","_onObjectRemoved","forEachObject","context","getObjects","o","isEmpty","contains","deep","complexity","reduce","memo","CommonMethods","_setOptions","_initGradient","filler","colorStops","Gradient","_initPattern","Pattern","_setObject","_set","sqrt","atan2","PiBy180","PI","PiBy2","cos","angle","sin","sign","removeFromArray","idx","getRandomInt","degrees","radiansToDegrees","radians","rotatePoint","newPoint","Point","y","v","rotateVector","addEquals","vector","createVector","calcAngleBetweenVectors","acos","hypot","getHatVector","multiply","getBisector","AB","AC","alpha","phi","projectStrokeOnPoints","points","openPath","coords","s","strokeWidth","strokeUniformScalar","strokeUniform","scaleX","scaleY","getStrokeHatVector","scalar","miterVector","bisector","bisectorVector","strokeLineJoin","strokeMiterLimit","subtract","SQRT2","transformPoint","ignoreOffset","makeBoundingBoxFromPoints","transform","xPoints","minX","yPoints","minY","top","invertTransform","fractionDigits","Number","parseUnit","fontSize","unit","Text","DEFAULT_SVG_FONT_SIZE","falseFunction","getKlass","camelize","toUpperCase","resolveNamespace","getSvgAttributes","loadImage","crossOrigin","img","createImage","onLoadCallback","log","substring","loadImageInDom","div","querySelector","parentNode","enlivenObjects","reviver","enlivenedObjects","numLoadedObjects","numTotalObjects","onLoaded","fromObject","enlivenObjectEnlivables","enlivenProps","ENLIVEN_PROPS","enlivedProps","enlivenPatterns","patterns","numLoadedPatterns","numPatterns","enlivenedPatterns","pattern","groupSVGElements","elements","centerPoint","Group","sourcePath","populateWithProperties","destination","createCanvasElement","copyCanvasElement","canvasEl","format","multiplyTransformMatrices","is2x2","qrDecompose","denom","skewX","skewY","translateX","translateY","calcRotateMatrix","theta","calcDimensionsMatrix","scaleMatrix","flipX","flipY","tan","composeMatrix","matrix","resetObjectTransform","rotate","saveObjectTransform","isTransparent","tolerance","_isTransparent","imageData","l","parsePreserveAspectRatioAttribute","align","meetOrSlice","aspectRatioAttrs","alignX","alignY","clearFabricFontCache","fontFamily","limitDimsByArea","ar","maximumArea","roughWidth","perfLimitSizeY","capValue","findScaleToFit","findScaleToCover","matrixToSVG","NUM_FRACTION_DIGITS","removeTransformFromObject","inverted","finalTransform","calcOwnMatrix","applyTransformToObject","addTransformToObject","center","setPositionByOrigin","sizeAfterTransform","dimX","dimY","transformMatrix","bbox","mergeClipPaths","c1","c2","calcTransformMatrix","clipPath","_join","commandLengths","h","c","repeatedCommands","M","segmentToBezier","th2","th3","cosTh","sinTh","ry","cx1","cy1","mT","fromX","fromY","costh2","sinth2","costh3","sinth3","toX","toY","calcVectorAngle","ux","uy","vx","vy","ta","tb","fromArcToBeziers","fx","fy","rot","large","sweep","segsNorm","rotateX","th","py","rx2","abs","ry2","py2","px2","pl","cx","cy","mTheta","dtheta","segments","mDelta","arcToSegments","calcLineLength","x1","y1","x2","y2","getPointOnCubicBezierIterator","p1x","p1y","p2x","p2y","p3x","p3y","p4x","p4y","pct","CB2","c3","CB3","c4","CB4","getTangentCubicIterator","invT","tangentX","tangentY","getPointOnQuadraticBezierIterator","QB2","QB3","getTangentQuadraticIterator","pathIterator","perc","tempP","tmpLen","findPercentageForDistance","segInfo","distance","nextLen","lastPerc","nextStep","angleFinder","getPathSegmentsInfo","tempInfo","totalLength","info","command","destX","destY","joinPath","pathData","parsePath","pathString","currentPath","parsed","coordsStr","rNumber","rNumberCommaWsp","rFlagCommaWsp","regArcArgumentSequence","coordsParsed","jlen","isNaN","commandLength","repeatedCommand","klen","makePathSimpler","converted","previous","controlX","controlY","destinationPath","getSmoothPathFromPoints","correction","p1","p2","multSignX","multSignY","manyPoints","eq","midPoint","midPointFrom","getBoundsOfCurve","x0","y0","x3","y3","argsString","t1","t2","b2ac","sqrtb2ac","tvalues","bounds","mt","getPointOnPath","infos","segPercent","lerp","transformPath","pathOffset","pathSegment","newSegment","byProperty","invoke","value1","value2","extend","getWholeChar","prev","character","capitalize","firstLetterOnly","escapeXml","graphemeSplit","textstring","graphemes","emptyFunction","IS_DONTENUM_BUGGY","addMethods","klass","superclass","returnValue","Subclass","callSuper","methodName","parentMethod","_this","superClassMethod","createClass","initialize","subclasses","attachEvent","addListener","removeListener","removeEventListener","getPointer","scroll","getScrollLeftTop","_evt","touchProp","changedTouches","getTouchInfo","clientX","clientY","isTouchEvent","pointerType","opacity","es","currentStyle","hasLayout","zoom","setStyle","styles","elementStyle","styleFloat","_slice","sliceCanConvertNodelists","getElementStyle","selectProp","toArray","err","makeElement","tagName","htmlFor","docElement","documentElement","scrollLeft","scrollTop","nodeType","arr","defaultView","attr","makeElementUnselectable","onselectstart","unselectable","makeElementSelectable","setImageSmoothing","imageSmoothingEnabled","webkitImageSmoothingEnabled","mozImageSmoothingEnabled","msImageSmoothingEnabled","oImageSmoothingEnabled","getById","getElementById","addClass","wrapElement","replaceChild","getElementOffset","docElem","scrollLeftTop","ownerDocument","box","offset","offsetAttributes","borderLeftWidth","borderTopWidth","paddingLeft","paddingTop","getBoundingClientRect","clientLeft","clientTop","getNodeCanvas","_canvas","_image","cleanUpJsdomNode","_currentSrc","_attributes","_classList","emptyFn","onComplete","xhr","parameters","param","addParamToUrl","setRequestHeader","warn","RUNNING_ANIMATIONS","defaultEasing","d","cancelAll","animations","animation","cancel","cancelByCanvas","cancelled","cancelByTarget","findAnimationsByTarget","findAnimationIndex","cancelFunc","findAnimation","_requestAnimFrame","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","_cancelAnimFrame","cancelAnimationFrame","clearTimeout","requestAnimFrame","animate","removeFromRegistry","runningAnimations","startValue","completionRate","durationRate","timestamp","time","duration","finish","onChange","abort","easing","isMany","endValue","byValue","onStart","tick","ticktime","currentTime","timePerc","_value","valuePerc","cancelAnimFrame","calculateColor","begin","color","animateColor","fromColor","toColor","startColor","Color","getSource","endColor","originalOnComplete","originalOnChange","colorEasing","asin","elastic","opts","easeInBounce","easeOutBounce","ease","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","easeInSine","easeOutSine","easeInOutSine","easeInExpo","easeOutExpo","easeInOutExpo","easeInCirc","easeOutCirc","easeInOutCirc","easeInElastic","easeOutElastic","easeInOutElastic","easeInBack","easeOutBack","easeInOutBack","easeInOutBounce","attributesMap","visibility","colorAttributes","stroke","fSize","cPath","normalizeAttr","normalizeValue","parentAttributes","parseTransformAttribute","visible","fillIndex","strokeIndex","getSvgRegex","_getMultipleNodes","nodeNames","nodeName","nodeList","nodeArray","getElementsByTagName","elementMatchesRule","selectors","firstMatching","parentMatching","selectorMatches","doesSomeParentMatch","matcher","classNames","elementById","nodelist","svgValidTagNamesRegEx","svgViewBoxElementsRegEx","svgInvalidAncestorsRegEx","svgValidParentsRegEx","gradientDefs","clipPaths","skewMatrix","reTransformList","reTransform","attributeValue","matrices","operation","translateMatrix","rotateMatrix","multiplierX","multiplierY","combinedMatrix","reViewBoxAttrValue","applyViewboxTransform","viewBoxWidth","viewBoxHeight","viewBoxAttr","widthAttr","heightAttr","preserveAspectRatio","missingViewBox","missingDimAttr","toBeParsed","parsedDim","widthDiff","heightDiff","removeAttribute","createElementNS","firstChild","recursivelyParseGradientsXlink","gradient","xlinkAttr","referencedGradient","hasAttribute","referenceClone","parseSVGDocument","parsingOptions","xlinkAttribute","attrs","xlink","el2","currentTrans","oldLength","el3","setAttributeNS","nodeValue","parseUseDirectives","svgUid","__uid","descendants","selectNodes","hasAncestorWithNodeName","getGradientDefs","getCSSRules","parseElements","instances","reFontDeclaration","parseFontDeclaration","oStyle","fontStyle","fontWeight","lineHeight","elList","parseAttributes","parentFontSize","ownAttributes","cssAttrs","getGlobalStylesForElement","parseStyleAttribute","normalizedAttr","normalizedValue","normalizedStyle","font","mergedAttrs","setAlpha","getAlpha","toRgba","_setStrokeFillOpacity","ElementsParser","chunk","pair","parseStyleString","parseStyleObject","parsePointsAttribute","parsedPoints","allRules","styleContents","textContent","ruleObj","propertyValuePairs","_rule","loadSVGFromURL","xml","responseXML","results","_options","allElements","loadSVGFromString","parseFromString","regexUrl","numElements","createObjects","createObject","findTag","fromElement","createCallback","checkIfDone","resolveGradient","_originalElement","_removeTransformMatrix","resolveClipPath","extractPropertyDefinition","storage","regex","gradientDef","opacityAttr","createClipPathCallback","container","_newObj","fillRule","clipRule","usingElement","objTransformInv","gTransform","clipPathTag","clipPathOwner","scalarAdd","scalarAddEquals","subtractEquals","scalarSubtract","scalarSubtractEquals","multiplyEquals","divide","divideEquals","lt","lte","gt","gte","distanceFrom","dx","dy","setXY","setX","setY","setFromPoint","Intersection","appendPoint","appendPoints","intersectLineLine","a1","a2","b1","b2","uaT","ubT","uB","ua","ub","intersectLinePolygon","inter","intersectPolygonPolygon","points1","points2","intersectPolygonRectangle","r1","r2","topRight","bottomLeft","inter1","inter2","inter3","inter4","_tryParsingColor","setSource","hue2rgb","colorNameMap","sourceFromHex","sourceFromRgb","sourceFromHsl","_rgbToHsl","g","round","_source","toRgb","toHsl","hsl","toHsla","toHex","toHexa","toGrayscale","average","currentAlpha","toBlackWhite","threshold","overlayWith","otherColor","otherSource","reRGBa","reHSLa","reHex","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgrey","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgrey","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","fromRgb","fromSource","fromRgba","fromHsl","fromHsla","fromHex","isShortNotation","isRGBa","oColor","scaleMap","skewMap","controls","LEFT","TOP","RIGHT","BOTTOM","CENTER","opposite","bottom","findCornerQuadrant","fabricObject","control","cornerAngle","fireEvent","canvasOptions","scaleIsProportional","eventData","uniformIsToggled","uniScaleKey","uniformScaling","isTransformCentered","originX","originY","scalingIsForbidden","by","scaleProportionally","lockX","lockScalingX","lockY","lockScalingY","commonEventInfo","wrapWithFixedAnchor","actionHandler","getCenterPoint","constraint","translateToOriginPoint","actionPerformed","wrapWithFireEvent","getLocalPoint","corner","getZoom","padding","localPoint","toLocalPoint","offsetX","offsetY","targetHasOneFlip","compensateScaleForSkew","oppositeSkew","scaleToCompensate","axis","reference","newValue","_getTransformedDimensions","skewObjectX","newSkew","dimNoSkew","totalSkewSize","currentSkew","hasSkewed","dimBeforeSkewing","skewObjectY","scaleObject","dim","signX","signY","forbidScaling","gestureScale","lockScalingFlip","oldScaleX","oldScaleY","scaleCursorStyleHandler","skewCursorStyleHandler","notAllowed","lockSkewingY","lockSkewingX","scaleSkewCursorStyleHandler","altActionKey","rotationWithSnapping","pivotPoint","lockRotation","hasRotated","lastAngle","ey","ex","curAngle","snapAngle","snapThreshold","rightAngleLocked","leftAngleLocked","scalingEqually","scalingX","scalingY","scalingYOrSkewingX","skewHandlerX","scalingXOrSkewingY","skewHandlerY","changeWidth","strokePadding","multiplier","oldWidth","newWidth","finalHandler","dragHandler","newLeft","newTop","moveX","moveY","scaleOrSkewActionName","isAlternative","rotationStyleHandler","cursorStyle","controlsUtils","renderCircleControl","styleOverride","xSize","sizeX","cornerSize","ySize","sizeY","transparentCorners","cornerStrokeColor","myLeft","myTop","save","cornerColor","strokeStyle","lineWidth","beginPath","arc","restore","renderSquareControl","xSizeBy2","ySizeBy2","strokeRect","Control","actionName","touchSizeX","touchSizeY","withConnection","mouseDownHandler","mouseUpHandler","getActionHandler","getMouseDownHandler","getMouseUpHandler","cursorStyleHandler","getActionName","getVisibility","controlKey","objectVisibility","_controlsVisibility","setVisibility","positionHandler","finalMatrix","calcCornerCoords","objectAngle","objectCornerSize","centerX","centerY","isTouch","cosHalfOffset","sinHalfOffset","cosHalfOffsetComp","sinHalfOffsetComp","controlTriangleAngle","cornerHypotenuse","newTheta","newThetaComp","tl","tr","bl","br","render","cornerStyle","getColorStop","colorAlpha","keyValuePairs","gradientTransform","gradientUnits","option","addColorStop","propertiesToInclude","toSVG","markup","commonAttributes","needsSwap","withViewport","additionalTransform","reverse","minRadius","percentageShift","colorStop","toLive","createLinearGradient","createRadialGradient","svgOptions","colorStopEls","getLinearCoords","getRadialCoords","propValue","finalValue","__convertPercentUnitsToValues","patternTransform","setOptions","isError","patternSource","patternWidth","patternHeight","patternOffsetX","patternOffsetY","patternImgSrc","complete","naturalWidth","naturalHeight","createPattern","Shadow","blur","affectStroke","includeDefaultValues","nonScaling","_parseShadow","shadow","shadowStr","offsetsAndBlur","reOffsetsAndBlur","fBoxX","fBoxY","StaticCanvas","CANVAS_INIT_ERROR","Error","renderAndResetBound","renderAndReset","requestRenderAllBound","_initStatic","backgroundImage","overlayColor","overlayImage","stateful","controlsAboveOverlay","allowTouchScrolling","viewportTransform","backgroundVpt","overlayVpt","enableRetinaScaling","vptCoords","skipOffscreen","cb","_createLowerCanvas","_initOptions","interactive","_initRetinaScaling","setOverlayImage","setBackgroundImage","setBackgroundColor","setOverlayColor","calcOffset","_isRetinaScaling","getRetinaScaling","scaleRatio","__initRetinaScaling","lowerCanvasEl","contextContainer","upperCanvasEl","contextTop","_offset","__setBgOverlayImage","__setBgOverlayColor","_createCanvasElement","_originalCanvasStyle","_applyCanvasStyle","getWidth","getHeight","setWidth","setDimensions","setHeight","dimensions","cssValue","cssOnly","_setBackstoreDimension","hasLostContext","backstoreOnly","_setCssDimension","_isCurrentlyDrawing","freeDrawingBrush","_setBrushStyles","cacheCanvasEl","wrapperEl","setViewportTransform","vpt","activeObject","_activeObject","backgroundObject","overlayObject","setCoords","calcViewportBoundaries","zoomToPoint","before","after","setZoom","absolutePan","relativePan","getElement","setupState","clearContext","clearRect","_hasITextHandlers","_mouseUpITextHandler","_iTextInstances","renderAll","canvasToDrawOn","renderCanvas","isRendering","iVpt","cancelRequestedRender","_renderBackground","_renderObjects","drawControls","shouldCache","_transformDone","renderCache","forClipping","drawClipPathOnCanvas","_renderOverlay","globalCompositeOperation","zoomX","zoomY","_cacheCanvas","cacheTranslationX","cacheTranslationY","_renderBackgroundOrOverlay","needsVpt","moveTo","lineTo","closePath","getCenter","centerObjectH","_centerObject","centerObjectV","centerObject","viewportCenterObject","vpCenter","getVpCenter","viewportCenterObjectH","viewportCenterObjectV","toDatalessJSON","toDatalessObject","_toObjectMethod","_toObjects","excludeFromExport","_toObject","__serializeBgOverlay","originalValue","bgImage","bgColor","overlay","svgViewportTransformation","_setSVGPreamble","_setSVGHeader","clipPathId","_setSVGBgOverlayColor","_setSVGBgOverlayImage","_setSVGObjects","suppressPreamble","encoding","viewBox","createSVGFontFacesMarkup","createSVGRefElementsMarkup","createSVGClipPathMarkup","toClipPathSVG","shouldTransform","row","rowIndex","charIndex","fontList","_setSVGObject","finalWidth","finalHeight","sendToBack","objs","activeSelection","bringToFront","sendBackwards","intersecting","newIdx","objsMoved","_findNewLowerIndex","intersectsWithObject","isContainedWithinObject","bringForward","_findNewUpperIndex","dispose","DataURLExporter","EMPTY_JSON","setLineDash","createPNGStream","createJPEGStream","BaseBrush","strokeLineCap","strokeDashArray","limitedToCanvasSize","lineCap","miterLimit","lineJoin","_saveAndTransform","_setShadow","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","needsFullRender","_resetShadow","_isOutSideCanvas","PencilBrush","decimate","drawStraightLine","straightLineKey","_points","_hasStraightLine","_drawSegment","quadraticCurveTo","onMouseDown","_isMainEvent","_prepareForDrawing","_captureDrawingPath","_render","onMouseMove","oldEnd","onMouseUp","_finalizeAndAddPath","_reset","_addPoint","pointerPoint","convertPointsToSVGPath","_isEmptySVGPath","createPath","Path","decimatePoints","adjustedDistance","lastPoint","newPoints","CircleBrush","drawDot","addPoint","dot","radius","originalRenderOnAddRemove","circles","circle","Circle","circleRadius","circleColor","SprayBrush","density","dotWidth","dotWidthVariance","randomOpacity","optimizeOverlapping","sprayChunks","addSprayChunk","sprayChunkPoints","rects","ilen","sprayChunk","rect","Rect","_getOptimizedRects","uniqueRects","uniqueRectsArray","globalAlpha","PatternBrush","getPatternSrc","patternCanvas","patternCtx","getPatternSrcFunction","getPattern","topLeft","_getLeftTopCoords","Canvas","_initInteractive","_createCacheCanvas","centeredScaling","centeredRotation","centeredKey","selection","selectionKey","altSelectionKey","selectionColor","selectionDashArray","selectionBorderColor","selectionLineWidth","selectionFullyContained","hoverCursor","moveCursor","defaultCursor","freeDrawingCursor","notAllowedCursor","containerClass","perPixelTargetFind","targetFindTolerance","skipTargetFind","isDrawingMode","preserveObjectStacking","stopContextMenu","fireRightClick","fireMiddleClick","targets","enablePointerEvents","_hoveredTarget","_hoveredTargets","_currentTransform","_groupSelector","_initWrapperElement","_createUpperCanvas","_initEventListeners","_chooseObjectsToRender","objsToRender","activeGroupObjects","activeObjects","getActiveObjects","contextTopDirty","renderTopLayer","_drawSelection","renderTop","_normalizePointer","invertedM","vptPointer","restorePointerVpt","isTargetTransparent","normalizedPointer","targetRelativeX","targetRelativeY","_cacheContext","contextCache","originalColor","selectionBackgroundColor","_isSelectionKeyPressed","_shouldClearSelection","evented","selectable","_shouldCenterTransform","action","altKey","centerTransform","_getOriginFromCorner","_getActionFromCorner","alreadySelected","_setupCurrentTransform","__corner","lastX","lastY","shiftKey","_beforeTransform","setCursor","cursor","viewportStart","viewportExtent","extent","maxX","maxY","strokeOffset","_setLineDash","findTarget","skipGroup","activeTarget","activeTargetSubs","aObjects","shouldLookForActive","_findTargetCorner","_searchPossibleTargets","_checkTarget","globalPointer","containsPoint","isEditing","subTarget","objToCheck","pointerToUse","subTargetCheck","ignoreZoom","_absolutePointer","_pointer","cssScale","boundsWidth","boundsHeight","retinaScaling","lowerCanvasClass","_copyCanvasStyle","getTopContext","fromEl","toEl","getSelectionContext","getSelectionElement","getActiveObject","active","_discardActiveObject","_fireSelectionEvents","oldObjects","somethingChanged","added","removed","oldObject","selected","deselected","setActiveObject","currentActives","_setActiveObject","onSelect","onDeselect","discardActiveObject","removeListeners","_renderControls","originalProperties","_realizeGroupTransformOnObject","_unwindGroupTransformOnObject","originalValues","clearContextTop","addEventOptions","passive","checkClick","button","mainTouchId","_bindEvents","addOrRemove","_getEventPrefix","functor","eventjsFunctor","canvasElement","eventTypePrefix","_onResize","_onMouseDown","_onMouseMove","_onMouseOut","_onMouseEnter","_onMouseWheel","_onContextMenu","_onDoubleClick","_onDragOver","_onDragEnter","_onDragLeave","_onDrop","_onTouchStart","eventjs","_onGesture","_onDrag","_onOrientationChange","_onShake","_onLongPress","_onMouseUp","_onTouchEnd","eventsBound","_simpleEventHandler","__onTransformGesture","__onDrag","__onMouseWheel","_target","hiddenTextarea","focus","__onOrientationChange","__onShake","__onLongPress","preventDefault","_fireEnterLeaveEvents","stopPropagation","_cacheTransformEventData","_handleEvent","_resetTransformEventData","getPointerId","evt","identifier","pointerId","isPrimary","touches","__onMouseDown","__onMouseUp","_willAddMouseDown","__onMouseMove","_shouldRender","groupSelector","shouldRender","isClick","_onMouseUpInDrawingMode","_finalizeCurrentTransform","targetWasActive","_maybeGroupObjects","activeOn","isMoving","originalControl","originalMouseUpHandler","_setCursorFromEvent","eventType","subTargets","absolutePointer","currentTarget","currentSubTargets","_scaling","hasStateChanged","_fire","_onMouseDownInDrawingMode","_onMouseMoveInDrawingMode","_previousPointer","shouldGroup","_shouldGroup","_handleGrouping","saveState","_transformObject","_fireOverOutEvents","fireSyntheticInOutEvents","oldTarget","evtOut","canvasEvtOut","evtIn","canvasEvtIn","_draggedoverTarget","config","inOpt","outOpt","inFires","targetChanged","previousTarget","nextTarget","reset","_performTransformAction","getCornerCursor","_updateActiveSelection","_createActiveSelection","currentActiveObjects","removeWithUpdate","addWithUpdate","_createGroup","groupObjects","exitEditing","ActiveSelection","_groupSelectedObjects","aGroup","_collectObjects","currentObject","selectionX1Y1","selectionX2Y2","allowIntersect","intersectsWithRect","isContainedWithinRect","toCanvasElement","cropping","scaledWidth","scaledHeight","originalWidth","originalHeight","newZoom","vp","originalInteractive","newVp","originalRetina","originalContextTop","loadFromJSON","json","serialized","_enlivenObjects","_setBgOverlay","enlivenedCanvasClip","__setupCanvas","loaded","cbIfLoaded","__setBgOverlay","enlivedObject","_toDataURL","_toDataURLWithMultiplier","toDataURLWithMultiplier","cloneWithoutData","backgroundImageOpacity","backgroundImageStretch","objectCaching","touchCornerSize","borderColor","borderDashArray","cornerDashArray","strokeDashOffset","borderOpacityWhenMoving","borderScaleFactor","minScaleLimit","hasControls","hasBorders","lockMovementX","lockMovementY","statefullCache","noScaleCache","dirty","paintFirst","stateProperties","cacheProperties","colorProperties","absolutePositioned","_cacheProperties","_updateCacheCanvas","_limitCacheSize","dims","limitedDims","capped","_getCacheCanvasDimensions","objectScale","getTotalObjectScaling","neededX","neededY","drawingWidth","drawingHeight","minCacheSize","dimensionsChanged","cacheWidth","cacheHeight","zoomChanged","shouldRedraw","additionalWidth","additionalHeight","shouldResizeCanvas","canvasWidth","canvasHeight","sizeGrowing","getHeightOfLine","setTransform","needFullTransform","_removeDefaultValues","getObjectScaling","retina","getObjectOpacity","shouldConstrainValue","isChanged","groupNeedsUpdate","_constrainScale","isOnACache","setOnGroup","getViewportTransform","isNotVisible","isOnScreen","_setupCompositeOperation","drawSelectionBackground","_setOpacity","drawCacheOnCanvas","_removeCacheCanvas","drawObject","propertySet","isCacheDirty","hasStroke","hasFill","needsItsOwnCache","ownCaching","willDrawShadow","drawClipPathOnCache","originalFill","originalStroke","_setClippingProperties","_drawClipPath","skipCanvas","_getNonTransformedDimensions","_removeShadow","_setStrokeStyles","decl","lineDashOffset","_applyPatternForTransformedGradient","_applyPatternGradientTransform","_setFillStyles","dashArray","drawBorders","forActiveSelection","drawBordersInGroup","scaling","multX","multY","_renderPaintInOrder","_renderStroke","_renderFill","pCtx","pCanvas","_findCenterFromElement","_assignTransformMatrixProps","preserveAspectRatioOptions","cropX","cropY","offsetLeft","offsetTop","objectForm","_fromObject","cloneAsImage","utils","origParams","originalGroup","originalShadow","withoutTransform","withoutShadow","boundingRect","getBoundingRect","shadowOffset","originalCanvas","isType","shouldCenterOrigin","_setOriginToCenter","_resetOrigin","centerH","viewportCenterH","centerV","viewportCenterV","viewportCenter","getLocalPointer","pClicked","objectLeftTop","createAccessors","extraParam","translateToGivenOrigin","fromOriginX","fromOriginY","toOriginX","toOriginY","translateToCenterPoint","leftTop","getPointByOrigin","adjustPosition","offsetFrom","offsetTo","hypotFull","getScaledWidth","xFull","yFull","_originalOriginX","_originalOriginY","originPoint","multiplyMatrices","oCoords","aCoords","lineCoords","ownMatrixCache","matrixCache","_getCoords","absolute","calculate","calcACoords","calcLineCoords","getCoords","pointTL","pointBR","other","otherCoords","lines","_getImageLines","_findCrossPoints","_containsCenterOfCanvas","isPartiallyOnScreen","topline","rightline","bottomline","leftline","xi","iLine","xcount","lineKey","getScaledHeight","scaleToWidth","boundingRectFactor","scaleToHeight","cosP","sinP","cosPSinP","cosPMinusSinP","calcOCoords","_calcRotateMatrix","_calcTranslateMatrix","startMatrix","_calculateCurrentDimensions","forEachControl","w","skipCorners","_setCornerCoords","transformMatrixKey","sep","prefix","cache","tMatrix","noSkew","_finalizeDimensions","getSvgColorString","getSvgStyles","skipShadow","getSvgFilter","getSvgSpanStyles","useWhiteSpace","term","textDecoration","getSvgTextDecoration","deltaY","decoration","getSvgCommons","getSvgTransform","full","_setSVGBg","textBgRects","_getFillAttributes","_createBaseSVGMarkup","_toSVG","_createBaseClipPathSVGMarkup","objectMarkup","commonPieces","clipPathMarkup","noStyle","styleInfo","shadowInfo","withShadow","vectorEffect","absoluteClipPath","addPaintOrder","originalSet","saveProps","tmpObj","_isEqual","origValue","firstPass","dashedPropertySet","forTouch","isControlVisible","touchCorner","controlObject","wh","shouldStroke","setControlVisible","setControlsVisibility","FX_DURATION","fxCenterObjectH","callbacks","fxCenterObjectV","fxRemove","skipCallbacks","propsToAnimate","out","_animate","propPair","propIsColor","valueProgress","timeProgress","coordProps","makeEdgeToOriginGetter","propertyNames","originValues","axis1","axis2","dimension","nearest","farthest","Line","_setWidthHeight","_getLeftToOriginX","_getTopToOriginY","calcLinePoints","origStrokeStyle","xMult","yMult","ATTRIBUTE_NAMES","parsedAttributes","startAngle","endAngle","setRadius","svgString","getRadiusX","getRadiusY","Triangle","widthBy2","heightBy2","piBy2","Ellipse","getRx","getRy","_initRxRy","isRounded","bezierCurveTo","Polyline","exactBoundingBox","_setPositionDimensions","_projectStrokeOnPoints","correctLeftTop","calcDim","_calcDimensions","correctSize","fromSVG","diffX","diffY","commonRender","fromElementGenerator","_class","Polygon","_setPath","_renderPathCommands","subpathStartX","subpathStartY","_getOffsetTransform","digits","aX","aY","pathUrl","useSetOnGroup","isAlreadyGrouped","_updateObjectsACoords","_calcBounds","_updateObjectsCoords","_updateObjectCoords","objectLeft","objectTop","nested","_restoreObjectsState","_includeDefaultValues","objsToObject","originalDefaults","_obj","ownCache","groupMatrix","destroy","toActiveSelection","ungroupOnCanvas","setObjectsCoords","onlyWidthHeight","iLen","jLen","_getBounds","minXY","maxXY","toGroup","newGroup","childrenOverride","srcFromAttribute","_lastScaleX","_lastScaleY","_filterScalingX","_filterScalingY","minimumScaleTrigger","cacheKey","imageSmoothing","filters","_initElement","_element","setElement","removeTexture","_initConfig","applyFilters","resizeFilter","applyResizeFilters","backend","filterBackend","evictCachesForKey","getCrossOrigin","getOriginalSize","_stroke","filterObj","getSrc","hasCrop","strokeSvg","imageMarkup","imageRendering","getSvgSrc","origFill","filtered","setSrc","minimumScale","elementToFilter","_filteredEl","sourceWidth","sourceHeight","isNeutralState","imgElement","_needsResize","elementToDraw","elWidth","elHeight","sX","sY","sW","sH","maxDestW","maxDestH","_resetWidthHeight","CSS_CANVAS","_initFilters","pAR","rWidth","rHeight","pWidth","pHeight","_object","resizeFilters","fromURL","imgOptions","_getAngleValueForStraighten","straighten","fxStraighten","straightenObject","fxStraightenObject","testPrecision","precision","fragmentSource","fragmentShader","createShader","FRAGMENT_SHADER","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","setupGLContext","captureGPUInfo","isSupported","maxTextureSize","getParameter","MAX_TEXTURE_SIZE","precisions","webGlPrecision","createWebGLCanvas","aPosition","Float32Array","chooseFastestCopyGLTo2DMethod","canUseImageData","canMeasurePerf","performance","canUseArrayBuffer","canUseUint8Clamped","copyGLTo2D","startTime","drawImageTime","testContext","glOptions","premultipliedAlpha","depth","stencil","antialias","clearColor","cachedTexture","getCachedTexture","sourceTexture","createTexture","targetTexture","originalTexture","passes","webgl","programCache","pass","tempFbo","createFramebuffer","bindFramebuffer","FRAMEBUFFER","applyTo","resizeCanvasIfNeeded","bindTexture","TEXTURE_2D","deleteTexture","deleteFramebuffer","clearWebGLCaches","textureCache","textureImageSource","texture","texParameteri","TEXTURE_MAG_FILTER","NEAREST","TEXTURE_MIN_FILTER","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","texImage2D","uniqueId","gpuInfo","renderer","vendor","ext","getExtension","UNMASKED_RENDERER_WEBGL","UNMASKED_VENDOR_WEBGL","sourceElement","originalEl","originalImageData","BaseFilter","vertexSource","createProgram","vertexShader","VERTEX_SHADER","getShaderInfoLog","program","attachShader","linkProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","attributeLocations","getAttributeLocations","uniformLocations","getUniformLocations","uStepW","getUniformLocation","uStepH","getAttribLocation","sendAttributeData","aPositionData","attributeLocation","createBuffer","bindBuffer","ARRAY_BUFFER","enableVertexAttribArray","vertexAttribPointer","FLOAT","bufferData","STATIC_DRAW","_setupFrameBuffer","framebufferTexture2D","COLOR_ATTACHMENT0","_swapTextures","main","mainParameter","applyToWebGL","applyTo2d","retrieveShader","shader","useProgram","uniform1f","sendUniformData","viewport","drawArrays","TRIANGLE_STRIP","bindAdditionalTexture","textureUnit","activeTexture","TEXTURE0","unbindAdditionalTexture","getMainParameter","setMainParameter","createHelpLayer","helpLayer","mainP","ColorMatrix","colorsOnly","uColorMatrix","uConstants","constants","uniformMatrix4fv","uniform4fv","Brightness","brightness","uBrightness","Convolute","opaque","Convolute_3_1","Convolute_3_0","Convolute_5_1","Convolute_5_0","Convolute_7_1","Convolute_7_0","Convolute_9_1","Convolute_9_0","dstOff","scx","scy","srcOff","wt","weights","side","halfSide","sw","sh","createImageData","dst","alphaFac","uMatrix","uOpaque","uHalfSize","uSize","uniform1fv","Grayscale","lightness","luminosity","uMode","uniform1i","Invert","invert","uInvert","Noise","noise","rand","uNoise","uSeed","Pixelate","blocksize","_i","_j","_iLen","_jLen","uBlocksize","RemoveColor","useAlpha","lowC","highC","uLow","uHigh","Brownie","Vintage","Kodachrome","Technicolor","Polaroid","Sepia","BlackWhite","BlendColor","screen","diff","lighten","darken","exclusion","tint","buildSource","tg","alpha1","uColor","BlendImage","mask","TEXTURE1","calculateMatrix","canvas1","blendData","blendImage","uTransformMatrix","uImage","uniformMatrix3fv","Resize","resizeType","lanczosLobes","uDelta","uTaps","uniform2fv","horizontal","taps","filterWindow","getFilterWindow","generateShader","tempScale","getTaps","lobeFunction","lanczosCreate","offsets","fragmentSourceTOP","dW","dH","lobes","xx","rcpScaleX","rcpScaleY","newData","oW","oH","sliceByTwo","hermiteFastResize","bilinearFiltering","lanczosResize","tmpCanvas","mult","doneW","doneH","stepW","stepH","dX","dY","srcData","destImg","destData","lanczos","ratioX","ratioY","rcpRatioX","rcpRatioY","range2X","range2Y","cacheLanc","icenter","u","weight","fX","fY","xDiff","yDiff","chnl","origPix","w4","pixels","destImage","destPixels","ratioW","ratioH","ratioWHalf","ratioHHalf","img2","data2","weightsAlpha","gxR","gxG","gxB","gxA","yy","w0","Contrast","contrast","contrastF","uContrast","Saturation","saturation","adjust","uSaturation","Vibrance","vibrance","avg","amt","uVibrance","Blur","aspectRatio","simpleBlur","canvas2","blurLayer1","blurLayer2","percent","ctx1","ctx2","nSamples","newImageData","chooseRightDelta","blurScale","Gamma","gamma","rInv","gInv","bInv","rVals","gVals","bVals","uGamma","uniform3fv","Composed","subFilters","HueRotation","rotation","rad","aThird","aThirdSqtSin","OneMinusCos","additionalProps","_dimensionAffectingProps","_reNewline","_reSpacesAndTabs","_reSpaceAndTab","_reWords","underline","overline","linethrough","textAlign","superscript","baseline","subscript","textBackgroundColor","pathStartOffset","pathSide","pathAlign","_fontSizeFraction","_fontSizeMult","charSpacing","_measuringContext","direction","_styleProperties","__charBounds","CACHE_FONT_SIZE","MIN_TEXT_WIDTH","text","__skipDimension","setPathInfo","initDimensions","segmentsInfo","getMeasuringContext","_splitText","newLines","_splitTextIntoLines","textLines","_textLines","graphemeLines","_unwrappedTextLines","_unwrappedLines","_text","graphemeText","_clearCache","calcTextWidth","cursorWidth","calcTextHeight","enlargeSpaces","diffSpace","currentLineWidth","numberOfSpaces","accumulatedSpace","line","charBound","spaces","isEndOfWrapping","getLineWidth","kernedWidth","lineIndex","missingNewlineOffset","_setTextStyles","_renderTextLinesBackground","_renderTextDecoration","_renderText","_renderTextStroke","_renderTextFill","charStyle","forMeasuring","textBaseline","_getFontDeclaration","maxWidth","_renderTextLine","_renderChars","styleHas","heightOfLine","lineLeftOffset","lastColor","charBox","currentColor","drawStart","leftOffset","_getLeftOffset","lineTopOffset","_getTopOffset","boxStart","boxWidth","_getLineLeftOffset","getValueOfPropertyAt","renderLeft","getFontCache","cacheProp","_measureChar","_char","previousChar","prevCharStyle","coupleWidth","previousWidth","fontCache","couple","stylesAreEqual","fontMultiplier","measureText","getHeightOfChar","measureLine","lineInfo","_measureLine","_getWidthOfCharSpacing","grapheme","prevGrapheme","graphemeInfo","startingPoint","totalPathLength","lineBounds","positionInPath","_getGraphemeBox","_setGraphemeOnPath","numOfSpaces","centerPosition","skipLeft","getCompleteStyleDeclaration","prevStyle","previousBox","__lineHeights","maxHeight","_renderTextCommon","lineHeights","isEmptyStyles","actualStyle","nextStyle","timeToRender","drawingLeft","isJustify","charsToRender","shortCut","isLtr","currentDirection","_renderChar","_hasStyleChanged","_applyPatternGradientTransformText","handleFiller","fillOffsets","strokeOffsets","_getStyleDeclaration","fullDecl","shouldFill","fillText","strokeText","setSuperscript","_setScript","setSubscript","schema","loc","get2DCursorLocation","setSelectionStyles","thisStyle","_hasStyleChangedForSvg","lineDiff","__lineWidths","_shouldClearDimensionCache","shouldClear","_forceClearCache","_size","_dy","lastDecoration","currentDecoration","currentFill","lastFill","topOffset","styleObject","family","fontIsGeneric","genericFonts","newLine","newText","allProperties","needsDims","isAddingPath","_key","parsedAnchor","textAnchor","originalStrokeWidth","textHeightScaleFactor","scaledDiff","textHeight","offX","objectCopy","textInstance","pathInstance","p3","cleanStyle","letterCount","stylePropertyValue","stylesCount","allStyleObjectPropertiesMatch","graphemeCount","removeStyle","lineNum","charNum","_extendStyles","_getLineStyle","_setLineStyle","_setStyleDeclaration","selectionStart","skipWrapping","getSelectionStyles","startIndex","endIndex","selectionEnd","getStyleAtPosition","lineStyle","_deleteStyleDeclaration","_deleteLineStyle","parseDecoration","IText","editable","editingBorderColor","cursorColor","cursorDelay","cursorDuration","caching","hiddenTextareaContainer","_reSpace","_currentCursorOpacity","_selectionDirection","_abortCursorAnimation","__widthOfSpace","inCompositionMode","initBehavior","setSelectionStart","_updateAndFire","setSelectionEnd","_fireSelectionChanged","_updateTextarea","initDelayedCursor","cursorOffsetCache","renderCursorOrSelection","skipRestore","_clearTextArea","boundaries","_getCursorBoundaries","renderCursor","renderSelection","_getCursorBoundariesOffsets","cursorPosition","bound","cursorLocation","charHeight","__isMousedown","startLine","endLine","startChar","endChar","realLineHeight","lineOffset","boxEnd","drawWidth","drawHeight","extraTop","compositionColor","getCurrentCharFontSize","cp","_getCurrentCharIndex","getCurrentCharColor","initAddedHandler","initRemovedHandler","initCursorSelectionHandlers","initDoubleClickSimulation","mouseMoveHandler","_initCanvasHandlers","_removeCanvasHandlers","_tick","_currentTickState","_animateCursor","targetOpacity","completeMethod","tickState","isAborted","_onTickComplete","_cursorTimeout1","_currentTickCompleteState","restart","abortCursorAnimation","_cursorTimeout2","selectAll","getSelectedText","findWordBoundaryLeft","startFrom","findWordBoundaryRight","findLineBoundaryLeft","findLineBoundaryRight","searchWordBoundary","selectWord","newSelectionStart","newSelectionEnd","selectLine","enterEditing","exitEditingOnOthers","initHiddenTextarea","_saveEditingProps","_setEditingProps","_textBeforeEdit","initMouseMoveHandler","getSelectionStartFromPointer","currentStart","currentEnd","__selectionStartOnMouseDown","restartCursorIfNeeded","fromStringToGraphemeSelection","smallerTextStart","graphemeStart","smallerTextEnd","fromGraphemeToStringSelection","newSelection","updateTextareaPosition","updateFromTextArea","_calcTextareaPosition","desiredPosition","compositionStart","upperCanvas","upperCanvasWidth","upperCanvasHeight","clientWidth","clientHeight","_savedProps","_restoreEditingProps","isTextChanged","_removeExtraneousStyles","removeStyleFromTo","styleObj","cursorStart","cursorEnd","lineStart","charStart","lineEnd","charEnd","shiftLineStyles","numericChar","clonedStyles","numericLine","insertNewlineStyleObject","qty","copiedStyle","currentCharStyle","newLineStyles","somethingAdded","isEndOfLine","numIndex","styleCarriedOver","insertCharStyleObject","quantity","currentLineStyles","currentLineStylesCloned","numericIndex","newStyle","insertNewStyleBlock","insertedText","cursorLoc","addedLines","linesLength","setSelectionStartEndWithShift","setSelectionInBoundaries","__lastClickTime","__lastLastClickTime","__lastPointer","__newClickTime","newPointer","isTripleClick","_stopEvent","__lastIsEditing","__lastSelected","initMousedownHandler","initMouseupHandler","initClicks","doubleClickHandler","tripleClickHandler","_mouseDownHandler","setCursorByClick","_mouseDownHandlerBefore","currentActive","mouseOffset","prevWidth","_getNewSelectionStartFromOffset","distanceBtwLastCharAndCursor","distanceBtwNextCharAndCursor","onKeyDown","onKeyUp","onInput","copy","paste","onCompositionStart","onCompositionUpdate","onCompositionEnd","_clickHandlerInitialized","onClick","keysMap","keysMapRtl","ctrlKeysMapUp","ctrlKeysMapDown","keyMap","keyCode","ctrlKey","metaKey","stopImmediatePropagation","_copyDone","fromPaste","removedText","removeFrom","removeTo","nextText","charCount","nextCharCount","charDiff","textareaSelection","backDelete","copiedText","copiedTextStyle","compositionEnd","_getClipboardData","clipboardData","_getWidthBeforeCursor","widthBeforeCursor","getDownCursorOffset","isRight","selectionProp","_getSelectionForOffset","indexOnOtherLine","_getIndexOnLine","getUpCursorOffset","textBeforeCursor","charWidth","foundMatch","widthOfCharsOnLine","indexOnLine","leftEdge","rightEdge","offsetFromLeftEdge","moveCursorDown","_moveCursorUpOrDown","moveCursorUp","moveCursorWithShift","moveCursorWithoutShift","moveCursorLeft","_moveCursorLeftOrRight","_move","_moveLeft","_moveRight","moveCursorLeftWithoutShift","change","moveCursorLeftWithShift","moveCursorRight","moveCursorRightWithShift","moveCursorRightWithoutShift","changed","removeChars","insertChars","_getSVGLeftTopOffsets","textAndBg","_getSVGTextAndBg","textTop","textLeft","_wrapSVGTextAndBg","lineTop","textSpans","textTopOffset","textLeftOffset","_setSVGTextLineBg","_setSVGTextLineText","_createTextCharSpan","styleDecl","shouldUseWhitespace","styleProps","fillStyles","dySpan","_pushTextBgRect","fillColor","_getSVGLineTopOffset","lastHeight","Textbox","minWidth","dynamicMinWidth","__cachedLines","_wordJoiners","splitByGrapheme","_styleMap","_generateStyleMap","textInfo","realLineCount","realLineCharCount","isWrapping","nextOffset","shouldLimit","mapNextLine","_wrapText","desiredWidth","wrapped","_wrapLine","_measureWord","word","charOffset","_line","reservedSpace","words","infix","wordWidth","infixWidth","largestWordWidth","lineJustStarted","additionalSpace","getMinWidth","linesToKeep","scaleSkewStyleHandler","scaleStyleHandler","objectControls","ml","mr","mb","mtr","textBoxControls","autoBom","MouseEvent","initMouseEvent","saveAs","HTMLAnchorElement","webkitURL","download","rel","msSaveOrOpenBlob","title","innerText","HTMLElement","safari","runtime","Op","iteratorSymbol","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","innerFn","outerFn","tryLocsList","protoGenerator","Generator","generator","Context","_invoke","GenStateSuspendedStart","GenStateExecuting","GenStateCompleted","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","GenStateSuspendedYield","makeInvokeMethod","GeneratorFunction","GeneratorFunctionPrototype","getProto","NativeIteratorPrototype","Gp","defineIteratorMethods","AsyncIterator","PromiseImpl","__await","unwrapped","previousPromise","callInvokeWithMethodAndArg","resultName","nextLoc","pushTryEntry","locs","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","displayName","isGeneratorFunction","genFun","ctor","mark","awrap","async","iter","skipTempReset","rootRecord","rval","exception","handle","caught","hasCatch","hasFinally","finallyEntry","thrown","delegateYield","regeneratorRuntime","accidentalStrictMode","MosaicBrush","squareWidth","tileWidth","tileHeight","ScreenshotFabricEvent","types","typeList","removeAll","ScreenshotToolEvent","ScreenshotTool","icon","disabled","clickEvent","activeEvent","pauseEvent","events","clearNode","lastChild","addDragEvent","moveNode","upNode","moveCallback","downCallback","upCallback","startPosition","_handleMouseDown","_handleMouseUp","isDown","_handleMouseMove","endPosition","dataURLToBlob","dataURI","blob","blobToDataURL","msg","___CSS_LOADER_URL_IMPORT_0___","___CSS_LOADER_URL_IMPORT_1___","___CSS_LOADER_URL_IMPORT_2___","___CSS_LOADER_URL_IMPORT_3___","___CSS_LOADER_URL_IMPORT_4___","___CSS_LOADER_URL_IMPORT_5___","___CSS_LOADER_URL_IMPORT_6___","___CSS_LOADER_URL_IMPORT_7___","___CSS_LOADER_URL_IMPORT_8___","___CSS_LOADER_URL_IMPORT_9___","___CSS_LOADER_EXPORT___","___CSS_LOADER_URL_REPLACEMENT_0___","___CSS_LOADER_URL_REPLACEMENT_1___","___CSS_LOADER_URL_REPLACEMENT_2___","___CSS_LOADER_URL_REPLACEMENT_3___","___CSS_LOADER_URL_REPLACEMENT_4___","___CSS_LOADER_URL_REPLACEMENT_5___","___CSS_LOADER_URL_REPLACEMENT_6___","___CSS_LOADER_URL_REPLACEMENT_7___","___CSS_LOADER_URL_REPLACEMENT_8___","___CSS_LOADER_URL_REPLACEMENT_9___","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement","stylesInDOM","getIndexByIdentifier","modulesToDom","idCountMap","identifiers","indexByIdentifier","css","sourceMap","references","updater","addElementStyle","byIndex","api","newObj","lastIdentifiers","newList","newLastIdentifiers","_index","styleTarget","HTMLIFrameElement","contentDocument","getTarget","nonce","removeStyleElement","styleSheet","_assertThisInitialized","ReferenceError","asyncGeneratorStep","gen","_next","_throw","_asyncToGenerator","_classApplyDescriptorGet","receiver","_classApplyDescriptorSet","_classCallCheck","_classExtractFieldDescriptor","privateMap","_classPrivateFieldGet","classExtractFieldDescriptor","classApplyDescriptorGet","_classPrivateFieldSet","classApplyDescriptorSet","_defineProperties","_createClass","protoProps","staticProps","_defineProperty","_getPrototypeOf","_inherits","subClass","superClass","_possibleConstructorReturn","_typeof","assertThisInitialized","_setPrototypeOf","DataView","getNative","Hash","hashClear","hashDelete","hashGet","hashHas","hashSet","ListCache","listCacheClear","listCacheDelete","listCacheGet","listCacheHas","listCacheSet","Map","MapCache","mapCacheClear","mapCacheDelete","mapCacheGet","mapCacheHas","mapCacheSet","Set","Stack","__data__","stackClear","stackDelete","stackGet","stackHas","stackSet","thisArg","iteratee","predicate","resIndex","inherited","isArr","isArg","isArguments","isBuff","isBuffer","isTypedArray","skipIndexes","baseTimes","isIndex","baseAssignValue","objValue","copyObject","keysIn","argsTag","funcTag","objectTag","cloneableTags","baseClone","bitmask","customizer","stack","isDeep","isFlat","isFull","initCloneArray","copyArray","getTag","isFunc","cloneBuffer","initCloneObject","copySymbolsIn","baseAssignIn","copySymbols","baseAssign","initCloneByTag","stacked","isSet","subValue","isMap","keysFunc","getAllKeysIn","getAllKeys","arrayEach","assignValue","objectCreate","baseCreate","baseFor","createBaseFor","symbolsFunc","arrayPush","symToStringTag","getRawTag","objectToString","isObjectLike","baseGetTag","reIsHostCtor","funcProto","objectProto","funcToString","reIsNative","isMasked","toSource","typedArrayTags","isLength","isPrototype","nativeKeysIn","isProto","baseMerge","srcIndex","srcValue","baseMergeDeep","safeGet","assignMergeValue","mergeFunc","isCommon","isTyped","isArrayLikeObject","cloneTypedArray","isPlainObject","toPlainObject","setToString","overRest","identity","baseSetToString","constant","arrayBuffer","byteLength","freeExports","freeModule","allocUnsafe","dataView","cloneArrayBuffer","byteOffset","reFlags","symbolProto","typedArray","isNew","getSymbols","getSymbolsIn","coreJsData","assigner","baseRest","guard","isIterateeCall","fromRight","freeGlobal","baseGetAllKeys","isKeyable","getValue","baseIsNative","getPrototype","overArg","nativeObjectToString","isOwn","unmasked","nativeGetSymbols","arrayFilter","stubArray","mapTag","promiseTag","setTag","weakMapTag","dataViewTag","dataViewCtorString","mapCtorString","promiseCtorString","setCtorString","weakMapCtorString","Ctor","ctorString","nativeCreate","cloneDataView","cloneRegExp","cloneSymbol","reIsUint","isArrayLike","maskSrcKey","assocIndexOf","getMapData","freeProcess","nodeUtil","binding","nativeMax","otherArgs","freeSelf","shortOut","nativeNow","lastCalled","stamp","pairs","LARGE_ARRAY_SIZE","baseIsArguments","stubFalse","nodeIsMap","baseUnary","baseIsMap","objectCtorString","nodeIsSet","baseIsSet","nodeIsTypedArray","baseIsTypedArray","arrayLikeKeys","baseKeys","baseKeysIn","createAssigner","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","definition","baseURI","Screenshot","destroyCallback","readyCallback","autoWelt","autoFull","okColor","cancelColor","btnColor","btnSize","__SCREEN_SHOT_GENERATED__","keyboardEvent","offsetWidth","offsetHeight","transformOrigin","domToImage","catch","imgList","flag","destroyed","readyEvent","snipInfo","snipper","snipperBorderWidth","borderWidth","sizeinfo","originImg","resizer","toolbar","drawer","fabricDrawer","tmp","containerStyle","moved","bounding","isNumber","resizerItemEvents","resizerItem","_snipInfo","tmpSnipInfo","originLeft","originTop","resizerEvent","containerWidth","containerHeight","widthScale","heightScale","erasable","drawEvent","ClipboardItem","clipboard","finally","dom","squareObject","mouseDown","mouseFrom","mouseTo","tool","downEvent","moveEvent","upEvent","ev","ellipseObject","arrowHeadObject","arrowLineObject","arrowObject","originPointer","brush","createTextbox","textbox"],"sourceRoot":""}